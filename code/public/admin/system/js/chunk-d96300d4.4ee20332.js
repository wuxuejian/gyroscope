(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d96300d4"],{"3b28":function(t,a,e){},"718b":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"station"},[i("el-drawer",{attrs:{title:t.formData.title,visible:t.drawer,direction:t.direction,modal:!0,"show-close":!0,"wrapper-closable":!0,"append-to-body":!0,"before-close":t.handleClose,size:t.formData.width},on:{"update:visible":function(a){t.drawer=a}}},[i("div",{staticClass:"invoice-title",attrs:{slot:"title"},slot:"title"},[i("el-row",{staticClass:"invoice-header"},[i("el-col",{staticClass:"invoice-left"},[i("div",{staticClass:"invoice-logo"},[i("i",{staticClass:"icon iconfont iconfapiao"})])]),t._v(" "),t.drawer?i("el-col",[i("div",{staticClass:"txt1"},[t._v(t._s(t.delData.title))]),t._v(" "),i("div",{staticClass:"txt2"},[i("span",{staticClass:"title1"},[t._v("发票状态：")]),t._v(" "),i("span",{staticClass:"tab-btn",class:t.getInvoiceColor(t.delData.status)},[t._v("\n              "+t._s(t.getInvoiceStatus(t.delData.status))+"\n            ")]),t._v(" "),i("span",{staticClass:"title"},[t._v(t._s(t.$t("customer.invoicingpay"))+"：")]),i("span",{staticClass:"info2"},[t._v(t._s(t.delData.amount))]),t._v(" "),i("span",{staticClass:"title"},[t._v(t._s(t.$t("customer.actualdate"))+"：")]),i("span",{staticClass:"info3"},[t._v(t._s(t.delData.real_date))])])]):t._e()],1)],1),t._v(" "),i("el-tabs",{attrs:{type:"border-card","tab-position":t.tabPosition},on:{"tab-click":t.handleClick},model:{value:t.tabIndex,callback:function(a){t.tabIndex=a},expression:"tabIndex"}},[i("el-tab-pane",{attrs:{label:"发票信息",name:"1"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"关联付款单",name:"2"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"操作记录",name:"3"}})],1),t._v(" "),i("div",{staticClass:"contract-body"},[1==t.tabIndex&&t.linkId>0?i("approval",{ref:"approval",attrs:{linkId:t.linkId}}):t._e(),t._v(" "),2==t.tabIndex?i("div",{staticClass:"invoice-body mr20"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"bill_no",label:"付款单号","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"treaty.contract_name",label:"合同名称","min-width":"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"types",label:"业务类型","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.row.types?i("span",[t._v("回款记录")]):t._e(),t._v(" "),1===a.row.types?i("span",[t._v("续费记录 - "+t._s(a.row.renew.title))]):t._e()]}}],null,!1,348318987)}),t._v(" "),i("el-table-column",{attrs:{prop:"num",label:"付款金额(元)","min-width":"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"card.name",label:"创建人","min-width":"90"}}),t._v(" "),i("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"180"}})],1)],1):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tabIndex,expression:"tabIndex == 3"}],staticClass:"invoice-body1"},[0==t.recordList.length?i("div",{staticClass:"default"},[i("img",{staticClass:"img",attrs:{src:e("5080"),alt:""}}),t._v(" "),i("div",{staticClass:"text"},[t._v("暂无操作记录")])]):t._e(),t._v(" "),0!==t.recordList.length?i("el-steps",{staticClass:"set",attrs:{direction:"vertical",space:"100",active:1}},t._l(t.recordList,(function(a,e){return i("el-step",{key:e},[i("div",{attrs:{slot:"icon"},slot:"icon"},[i("span",{staticClass:"iconfont iconfapiaoxiangqing-caozuojilu"})]),t._v(" "),i("div",{attrs:{slot:"description"},slot:"description"},[i("div",{staticClass:"operationBox",class:"申请开票"==a.operation_name?"removeBorderLine":""},[i("div",{staticClass:"header"},[i("div",{staticClass:"left"},[t._v(t._s(a.operation_name))]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                    "+t._s(a.card&&a.card.name)+"\n                    "),i("el-divider",{attrs:{direction:"vertical"}}),t._v("\n                    "+t._s(a.created_at)+"\n                  ")],1)]),t._v(" "),"申请开票"!==a.operation_name?i("div",{staticClass:"footer"},[i("el-form",{staticClass:"description",attrs:{"label-width":"110px","row-style":{height:"32px"}}},t._l(a.operation,(function(a,e){return i("el-form-item",{key:e,attrs:{label:a.name}},["开票凭证："!==a.name?i("span",{staticClass:"content"},[t._v(t._s(a.val||"--"))]):i("img",{staticClass:"item-img",attrs:{src:a.val,alt:""}})])})),1)],1):t._e()])])])})),1):t._e()],1)],1),t._v(" "),t.formData.follType&&"fd"===t.formData.follType&&0===t.delData.status?i("div",{staticClass:"button from-foot-btn fix btn-shadow"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleInvoicing}},[t._v("审核")])],1):t._e(),t._v(" "),t.isImage?i("el-image-viewer",{attrs:{"on-close":t.closeImageViewer,"url-list":t.srcList}}):t._e()],1),t._v(" "),i("invoicing-dialog",{ref:"invoicingDialog",attrs:{config:t.invoicingDialog},on:{isOk:t.isOk}})],1)},s=[],n=e("0e9a"),o=e("a30a"),l=e("2b0e"),r=e("f60f");l["default"].use(n["a"]);var c={name:"InvoiceView",props:{formData:{type:Object,default:function(){return{}}}},components:{ElImageViewer:function(){return Promise.resolve().then(e.bind(null,"08a9"))},invoicingDialog:function(){return Promise.resolve().then(e.bind(null,"d04c"))},approval:function(){return e.e("chunk-b3be8082").then(e.bind(null,"df6a"))}},data:function(){return{linkId:0,tabIndex:"1",drawer:!1,direction:"rtl",isImage:!1,srcList:[],delData:{},tableData:[],tabPosition:"top",recordList:[],list:[],invoicingDialog:{}}},watch:{formData:{handler:function(t,a){this.delData=t.data},deep:!0}},methods:{handleClose:function(){this.drawer=!1,this.tabIndex="1"},openBox:function(t){var a=this;this.linkId=t,this.drawer=!0,setTimeout((function(){a.$refs.approval.upDate(t)}),300)},handleInvoicing:function(){this.invoicingDialog={title:"开票审核",data:this.formData.data},this.$refs.invoicingDialog.openBox()},isOk:function(){this.handleClose()},getInvoiceStatus:function(t){return Object(r["d"])(t)},getInvoiceColor:function(t){return Object(r["c"])(t)},getInvoiceTitle:function(t){return Object(r["e"])(t)},paymentRecordApi:function(){var t=this;Object(o["Gd"])(this.delData.id).then((function(a){t.tableData=a.data.list}))},operationRecord:function(){var t=this;Object(o["Fd"])(this.formData.data.id).then((function(a){t.recordList=a.data.list}))},handleClick:function(t){2==this.tabIndex&&this.paymentRecordApi(),3==this.tabIndex&&this.operationRecord()},handlePictureCardPreview:function(t){this.srcList.push(t),this.isImage=!0},closeImageViewer:function(){this.isImage=!1,this.srcList=[]}}},d=c,v=(e("e61d"),e("2877")),p=Object(v["a"])(d,i,s,!1,null,"490ec8a7",null);a["default"]=p.exports},e61d:function(t,a,e){"use strict";e("3b28")}}]);