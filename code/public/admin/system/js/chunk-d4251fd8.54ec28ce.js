(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4251fd8"],{"13cc":function(t,e,n){"use strict";var r={backgroundColor:"rgb(17, 17, 84)",lineColor:"rgb(255, 0, 214)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 181, 0)",associativeLineColor:"rgb(255, 255, 255)",associativeLineTextColor:"rgb(255, 255, 255)",root:{fillColor:"rgb(251, 233, 248)",color:"rgb(208, 5, 176)",borderColor:"rgb(255, 0, 214)",borderWidth:3,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"transparent",color:"rgb(248, 177, 237)",borderColor:"",borderWidth:3,fontSize:18},node:{fontSize:14,color:"#fff"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"rgb(255, 181, 0)",borderWidth:2,color:"rgb(17, 17, 84)"}},i={backgroundColor:"rgb(0, 21, 21)",lineColor:"rgb(0, 139, 146)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgba(2, 167, 240, 0.5)",associativeLineColor:"rgb(255, 255, 255)",associativeLineTextColor:"rgb(255, 255, 255)",root:{fillColor:"rgb(0, 243, 255)",color:"rgb(0, 21, 21)",borderColor:"#fff",borderWidth:3,fontSize:24,shape:"parallelogram"},second:{fillColor:"rgb(0, 21, 21)",color:"#fff",borderColor:"#fff",borderWidth:3,fontSize:18,shape:"diamond"},node:{fontSize:14,color:"#fff"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"rgb(0, 117, 255)",borderWidth:2,color:"rgb(0, 21, 21)"}},o={backgroundColor:"rgb(0, 0, 0)",lineColor:"rgb(172, 172, 172)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(172, 172, 172)",associativeLineColor:"rgb(57, 130, 252)",associativeLineTextColor:"rgb(68, 68, 68)",root:{fillColor:"#fff",color:"rgb(241, 79, 81)",borderColor:"",borderWidth:0,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"rgb(241, 79, 81)",color:"#fff",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"#fff"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"",borderWidth:0,color:"rgb(241, 79, 81)"}},s={backgroundColor:"rgb(32, 34, 43)",lineColor:"rgb(90, 136, 116)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(90, 136, 116)",associativeLineColor:"rgb(57, 130, 252)",associativeLineTextColor:"rgb(68, 68, 68)",root:{fillColor:"rgb(1, 192, 116)",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(48, 51, 63)",color:"#fff",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"#fff"},generalization:{fontSize:14,fillColor:"rgb(1, 192, 116)",borderColor:"",borderWidth:0,color:"#fff"}},a={lineColor:"rgb(75, 81, 78)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 119, 34)",backgroundColor:"rgb(27, 31, 34)",root:{fillColor:"rgb(36, 179, 96)",color:"#fff",borderColor:"",borderWidth:0},second:{fillColor:"rgb(254, 199, 13)",color:"rgb(0, 0, 0)",borderColor:"",borderWidth:0,fontSize:14},node:{fontSize:12,color:"rgb(204, 204, 204)"},generalization:{fillColor:"transparent",borderColor:"rgb(255, 119, 34)",borderWidth:2,color:"rgb(204, 204, 204)"}},l={lineColor:"rgb(17, 68, 23)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#fff",backgroundColor:"rgb(15, 16, 17)",root:{fillColor:"rgb(28, 178, 43)",color:"#fff",fontSize:24,borderRadius:10},second:{fillColor:"rgb(55, 56, 58)",color:"rgb(147,148,149)",fontSize:18,borderRadius:10,borderWidth:0},node:{fontSize:14,color:"rgb(147, 148, 149)"},generalization:{fillColor:"#fff",borderColor:"transparent",color:"#333"}},c={lineColor:"#fff",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"#fff",backgroundColor:"rgb(58, 65, 68)",backgroundImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=",backgroundRepeat:"repeat",backgroundSize:"auto",root:{fillColor:"rgb(233, 223, 152)",color:"#333",fontSize:24,borderRadius:21},second:{fillColor:"rgb(164, 197, 192)",borderColor:"transparent",color:"#333",fontSize:16,borderRadius:10},node:{fontSize:12,color:"#fff",fontWeight:"bold"},generalization:{fillColor:"#fff",borderColor:"transparent",color:"#333"}},h={backgroundColor:"rgb(27, 31, 34)",lineColor:"rgb(75, 81, 78)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 119, 34)",root:{fillColor:"rgb(36, 179, 96)",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(254, 199, 13)",color:"rgb(0, 0, 0)",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"rgb(204, 204, 204)"},generalization:{fontSize:14,fillColor:"rgb(27, 31, 34)",borderColor:"rgb(255, 119, 34)",borderWidth:2,color:"rgb(204, 204, 204)"}},u={backgroundColor:"rgb(32, 37, 49)",lineColor:"rgb(137, 167, 196)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 119, 34)",root:{fillColor:"rgb(23, 153, 243)",color:"rgb(255, 255, 255)",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(70, 78, 94)",color:"rgb(209, 210, 210)",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"rgb(204, 204, 204)"},generalization:{fontSize:14,fillColor:"rgb(255, 119, 34)",borderColor:"",borderWidth:2,color:"#fff"}},d={backgroundColor:"rgb(18, 20, 20)",lineColor:"rgb(205, 186, 156)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(245, 224, 191)",root:{fillColor:"rgb(255, 208, 124)",color:"rgb(111, 61, 6)",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(66, 57, 46)",color:"rgb(225, 201, 158)",borderColor:"rgb(245, 224, 191)",borderWidth:2,fontSize:18},node:{fontSize:14,color:"rgb(231, 203, 155)"},generalization:{fontSize:14,fillColor:"rgb(56, 45, 34)",borderColor:"rgb(104, 84, 61)",borderWidth:2,color:"rgb(242, 216, 176)"}},f={backgroundColor:"#070616",lineColor:"#fff",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"#fff",root:{fillColor:"#ff6811",color:"#110501",borderColor:"#ff6811",borderWidth:0,fontSize:24},second:{fillColor:"#070616",color:"#a9a4a9",borderColor:"#ff6811",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#a9a4a9"},generalization:{fontSize:14,fillColor:"",borderColor:"#ff6811",borderWidth:2,color:"#a9a4a9"}},p={backgroundColor:"#16181d",lineColor:"#7da578",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#7da578",associativeLineColor:"#7da578",associativeLineTextColor:"#9ce81d",associativeLineActiveColor:"#9ce81d",root:{fillColor:"#9ce81d",color:"#15521b",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#24272f",color:"#97b65e",borderColor:"#80a97a",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#789e73"},generalization:{fontSize:14,fillColor:"#9ce81d",borderColor:"",borderWidth:0,color:"#13501b"}},m={backgroundColor:"#051422",lineColor:"#55dff3",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#55dff3",associativeLineColor:"#55dff3",associativeLineTextColor:"#78b3ff",associativeLineActiveColor:"#78b3ff",root:{fillColor:"#55dff3",color:"#0f4956",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#0b1632",color:"#fff",borderColor:"#78b3ff",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#78b3ff"},generalization:{fontSize:14,fillColor:"#55dff3",borderColor:"",borderWidth:0,color:"#0f4956"}},g={backgroundColor:"#192b3b",lineColor:"#4986bc",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#4986bc",associativeLineColor:"#4986bc",associativeLineTextColor:"#679fba",associativeLineActiveColor:"#679fba",root:{fillColor:"#3462b0",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#679fba",color:"#fff",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"#679fba"},generalization:{fontSize:14,fillColor:"#3462b0",borderColor:"",borderWidth:0,color:"#fff"}},v=[{name:"脑图经典",value:"classic",theme:c},{name:"黑色幽默",value:"blackHumour",theme:h},{name:"深夜办公室",value:"lateNightOffice",theme:u},{name:"黑金",value:"blackGold",theme:d},{name:"橙汁",value:"orangeJuice",theme:f},{name:"霓虹灯",value:"neonLamp",theme:r},{name:"暗夜冰刃",value:"darkNightLceBlade",theme:i},{name:"暗色",value:"dark",theme:l},{name:"暗色2",value:"dark2",theme:a},{name:"暗色3",value:"dark3",theme:o},{name:"暗色4",value:"dark4",theme:s},{name:"暗色5",value:"dark5",theme:p},{name:"暗色6",value:"dark6",theme:m},{name:"暗色7",value:"dark7",theme:g}].map(t=>({...t,dark:!0})),y={lineColor:"rgb(51, 51, 51)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(51, 51, 51)",root:{fillColor:"rgb(22, 22, 22)",color:"#fff",borderColor:"rgb(22, 22, 22)",borderWidth:3,fontSize:24},second:{fillColor:"rgb(244, 246, 253)",color:"rgb(0, 0, 0)",borderColor:"",borderWidth:3,fontSize:18,shape:"roundedRectangle"},node:{fontSize:14,color:"rgb(0, 0, 0)"},generalization:{fontSize:14,fillColor:"transparent",borderColor:"rgb(34, 34, 34)",borderWidth:2,color:"rgb(34, 34, 34)"}},b={backgroundColor:"rgb(187, 241, 250)",lineColor:"rgb(74, 139, 170)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 168, 101)",root:{fillColor:"rgb(51, 149, 255)",color:"#fff",borderColor:"rgb(51, 149, 255)",borderWidth:3,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"rgb(74, 139, 170)",color:"#fff",borderColor:"",borderWidth:3,fontSize:18},node:{fontSize:14,color:"rgb(0, 0, 0)"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"rgb(255, 168, 101)",borderWidth:2,color:"#000"}},w={backgroundColor:"rgb(236, 254, 255)",lineColor:"rgb(51, 51, 51)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(51, 51, 51)",root:{fillColor:"rgb(39, 222, 232)",color:"rgb(26, 26, 26)",borderColor:"rgb(26, 26, 26)",borderWidth:3,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"rgb(235, 255, 187)",color:"rgb(0, 0, 0)",borderColor:"rgb(51, 51, 51)",borderWidth:3,fontSize:18,shape:"roundedRectangle"},node:{fontSize:14,color:"rgb(0, 0, 0)"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"rgb(26, 26, 26)",borderWidth:2,color:"rgb(26, 26, 26)"}},x={backgroundColor:"rgb(255, 251, 231)",lineColor:"rgb(110, 165, 79)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(136, 100, 0)",root:{fillColor:"rgb(254, 92, 92)",color:"#fff",borderColor:"rgb(18, 187, 55)",borderWidth:3,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"rgb(209, 237, 176)",color:"rgb(85, 136, 55)",borderColor:"",borderWidth:3,fontSize:18,shape:"roundedRectangle"},node:{fontSize:14,color:"rgb(26, 26, 26)"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"rgb(136, 100, 0)",borderWidth:2,color:"rgb(136, 100, 0)"}},C={backgroundColor:"rgb(231, 245, 255)",lineColor:"rgb(96, 189, 255)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(0, 155, 255)",root:{fillColor:"rgb(96, 189, 255)",color:"#fff",borderColor:"#fff",borderWidth:3,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"#fff",color:"rgb(0, 149, 255)",borderColor:"",borderWidth:3,fontSize:18,shape:"roundedRectangle"},node:{fontSize:14,color:"rgb(0, 66, 157)"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"rgb(0, 155, 255)",borderWidth:2,color:"rgb(0, 155, 255)"}},E={backgroundColor:"rgb(252, 245, 241)",lineColor:"rgb(144, 114, 110)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(128, 154, 151)",associativeLineColor:"rgb(166, 124, 106)",associativeLineTextColor:"rgb(166, 124, 106)",root:{fillColor:"rgb(207, 121, 105)",color:"#fff",borderColor:"rgb(207, 121, 105)",borderWidth:3,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"rgb(239, 210, 207)",color:"rgb(144, 79, 68)",borderColor:"rgb(222, 186, 183)",borderWidth:3,fontSize:18,shape:"roundedRectangle"},node:{fontSize:14,color:"rgb(131, 90, 64)"},generalization:{fontSize:14,fillColor:"rgb(172, 202, 199)",borderColor:"rgb(172, 202, 199)",borderWidth:2,color:"rgb(91, 102, 97)"}},k={backgroundColor:"rgb(233, 245, 241)",lineColor:"rgb(34, 34, 34)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(34, 34, 34)",associativeLineColor:"rgb(56, 44, 116)",associativeLineTextColor:"rgb(68, 68, 68)",root:{fillColor:"rgb(56, 44, 116)",color:"#fff",borderColor:"rgb(56, 44, 116)",borderWidth:0,fontSize:24},second:{fillColor:"rgb(161, 213, 188)",color:"rgb(0, 0, 0)",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"rgb(0, 0, 0)"},generalization:{fontSize:14,fillColor:"rgb(56, 44, 116)",borderColor:"",borderWidth:0,color:"#fff"}},N={backgroundColor:"rgb(255, 255, 255)",lineColor:"rgb(0, 0, 0)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(0, 0, 0)",associativeLineColor:"rgb(152, 162, 171)",associativeLineTextColor:"rgb(68, 68, 68)",root:{fillColor:"rgb(237, 182, 72)",color:"rgb(0, 0, 0)",borderColor:"rgb(0, 0, 0)",borderWidth:2,fontSize:24},second:{fillColor:"rgb(114, 158, 28)",color:"#fff",borderColor:"rgb(0, 0, 0)",borderWidth:2,fontSize:18},node:{fontSize:14,color:"rgb(10, 2, 2)"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"",borderWidth:0,color:"rgb(10, 2, 2)"}},O={backgroundColor:"rgb(255, 255, 255)",lineColor:"rgb(237, 185, 81)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(226, 90, 64)",associativeLineColor:"rgb(152, 162, 171)",associativeLineTextColor:"rgb(68, 68, 68)",root:{fillColor:"rgb(226, 90, 64)",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(43, 118, 239)",color:"#fff",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"rgb(43, 118, 239)"},generalization:{fontSize:14,fillColor:"#fff",borderColor:"",borderWidth:0,color:"rgb(43, 118, 239)"}},T={backgroundColor:"rgb(219, 255, 211)",lineColor:"rgb(51, 51, 51)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 127, 71)",associativeLineColor:"rgb(160, 220, 63)",associativeLineTextColor:"rgb(160, 220, 63)",root:{fillColor:"rgb(15, 198, 113)",color:"#fff",borderColor:"",borderWidth:0,fontSize:24,shape:"roundedRectangle"},second:{fillColor:"#fff",color:"rgb(26, 26, 26)",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"rgb(0, 0, 0)"},generalization:{fontSize:14,fillColor:"rgb(255, 127, 71)",borderColor:"",borderWidth:0,color:"#fff"}},M={lineColor:"#fff",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"#fff",backgroundColor:"rgb(80, 156, 170)",root:{fillColor:"#fff",borderColor:"",borderWidth:0,color:"rgb(65, 89, 158)"},second:{fillColor:"rgb(251, 227, 188)",color:"rgb(65, 89, 158)",borderColor:"",borderWidth:0,fontSize:14},node:{fontSize:12,color:"rgb(65, 89, 158)"},generalization:{fillColor:"#fff",borderColor:"transparent",color:"rgb(65, 89, 158)"}},S={lineColor:"rgb(51, 51, 51)",lineWidth:2,generalizationLineWidth:3,generalizationLineColor:"rgb(51, 51, 51)",backgroundColor:"#fff",root:{fillColor:"rgb(18, 187, 55)",color:"#fff",fontSize:24,borderRadius:10},second:{fillColor:"rgb(241, 242, 241)",borderColor:"transparent",color:"#1a1a1a",fontSize:18,borderRadius:10},node:{fontSize:14,color:"#1a1a1a"},generalization:{fillColor:"#fff",borderColor:"rgb(51, 51, 51)",borderWidth:2,color:"#1a1a1a"}},L={lineColor:"rgb(94, 202, 110)",lineWidth:2,generalizationLineWidth:3,generalizationLineColor:"#1a1a1a",backgroundColor:"rgb(241, 241, 241)",root:{fillColor:"rgb(255, 245, 214)",color:"#1a1a1a",fontSize:24,borderRadius:10,borderColor:"rgb(249, 199, 84)",borderWidth:1},second:{fillColor:"rgb(255, 245, 214)",borderColor:"rgb(249, 199, 84)",borderWidth:1,color:"#1a1a1a",fontSize:18,borderRadius:10},node:{fontSize:14,color:"#1a1a1a"},generalization:{fillColor:"#fff",borderColor:"#1a1a1a",color:"#1a1a1a",borderWidth:2}},A={lineColor:"rgb(123, 199, 120)",backgroundColor:"rgb(236, 245, 231)",generalizationLineWidth:2,generalizationLineColor:"rgb(123, 199, 120)",root:{fillColor:"rgb(253, 244, 217)",color:"#222"},second:{fillColor:"rgb(253, 244, 217)",color:"#222",borderColor:"rgb(242, 200, 104)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"rgb(123, 199, 120)",borderColor:"transparent",borderWidth:2,color:"#fff"}},D={lineColor:"rgb(51, 51, 51)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(51, 51, 51)",backgroundColor:"rgb(239, 248, 250)",root:{fillColor:"rgb(255, 255, 255)",color:"#222"},second:{fillColor:"rgb(255, 255, 255)",color:"#222",borderColor:"rgb(255, 255, 255)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"#fff",borderColor:"rgb(51, 51, 51)",color:"#333"}},_={lineColor:"rgb(115, 161, 191)",backgroundColor:"rgb(251, 251, 251)",generalizationLineWidth:1,generalizationLineColor:"#333",root:{fillColor:"rgb(115, 161, 191)"},second:{fillColor:"rgb(238, 243, 246)",color:"#333",borderColor:"rgb(115, 161, 191)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"#fff",borderColor:"#333",color:"#333"}},R={lineColor:"rgb(191, 115, 148)",backgroundColor:"rgb(251, 251, 251)",generalizationLineWidth:1,generalizationLineColor:"#333",root:{fillColor:"rgb(191, 115, 148)"},second:{fillColor:"rgb(246, 238, 242)",color:"#333",borderColor:"rgb(191, 115, 148)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"#fff",borderColor:"#333",color:"#333"}},P={lineColor:"rgb(191, 147, 115)",backgroundColor:"rgb(251, 251, 251)",generalizationLineWidth:1,generalizationLineColor:"#333",root:{fillColor:"rgb(191, 147, 115)"},second:{fillColor:"rgb(246, 242, 238)",color:"#333",borderColor:"rgb(191, 147, 115)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"#fff",borderColor:"#333",color:"#333"}},I={lineColor:"#333",backgroundColor:"#d1f6ec",generalizationLineWidth:1,generalizationLineColor:"#333",root:{fillColor:"#1fb27d"},second:{fillColor:"#fff",color:"#565656",borderColor:"transparent",borderWidth:0},generalization:{fillColor:"#fff",borderColor:"#333",color:"#333"}},j={lineColor:"rgb(191, 115, 115)",backgroundColor:"rgb(251, 251, 251)",generalizationLineWidth:1,generalizationLineColor:"#333",root:{fillColor:"rgb(191, 115, 115)"},second:{fillColor:"rgb(246, 238, 238)",color:"#333",borderColor:"rgb(191, 115, 115)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"#fff",borderColor:"#333",color:"#333"}},z={lineColor:"rgb(123, 115, 191)",backgroundColor:"rgb(251, 251, 251)",generalizationLineWidth:1,generalizationLineColor:"#333",root:{fillColor:"rgb(123, 115, 191)"},second:{fillColor:"rgb(239, 238, 246)",color:"#333",borderColor:"rgb(123, 115, 191)",borderWidth:1,fontSize:14},node:{fontSize:12,color:"#333"},generalization:{fillColor:"#fff",borderColor:"#333",color:"#333"}},B={lineColor:"rgb(166, 101, 106)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"#fff",backgroundColor:"rgb(255, 208, 211)",root:{fillColor:"rgb(139, 109, 225)",borderColor:"",borderWidth:0},second:{fillColor:"rgb(243, 104, 138)",color:"#fff",borderColor:"",borderWidth:0,fontSize:14},node:{fontSize:12,color:"#222"},generalization:{fillColor:"#fff",borderColor:"transparent",color:"#222"}},F={lineColor:"rgb(104, 204, 202)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(90, 206, 241)",backgroundColor:"rgb(239, 255, 255)",root:{fillColor:"rgb(0, 192, 184)",borderColor:"",borderWidth:0},second:{fillColor:"#fff",color:"#222",borderColor:"rgb(184, 235, 233)",borderWidth:2,fontSize:14},node:{fontSize:12,color:"#222"},generalization:{fillColor:"rgb(90, 206, 241)",borderColor:"transparent",color:"#fff"}},H={lineColor:"rgb(51, 56, 62)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(127, 93, 64)",backgroundColor:"#fff",root:{fillColor:"rgb(51, 56, 62)",color:"rgb(247, 208, 160)",borderColor:"",borderWidth:0},second:{fillColor:"rgb(239, 209, 176)",color:"rgb(81, 58, 42)",borderColor:"",borderWidth:0,fontSize:14},node:{fontSize:12,color:"#222"},generalization:{fillColor:"rgb(127, 93, 64)",borderColor:"transparent",color:"rgb(255, 214, 175)"}},q={lineColor:"rgb(254, 146, 0)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(255, 222, 69)",backgroundColor:"rgb(255, 246, 243)",root:{fillColor:"rgb(255, 112, 52)",color:"#fff",borderColor:"",borderWidth:0},second:{fillColor:"#fff",color:"rgb(51, 51, 51)",borderColor:"",borderWidth:0,fontSize:14},node:{fontSize:12,color:"#222"},generalization:{fillColor:"rgb(255, 222, 69)",borderColor:"transparent",color:"rgb(51, 51, 51)"}},W={lineColor:"rgb(40, 193, 84)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(251, 158, 0)",backgroundColor:"rgb(238, 255, 243)",root:{fillColor:"rgb(25, 193, 73)",color:"#fff",borderColor:"",borderWidth:0},second:{fillColor:"#fff",color:"rgb(69, 149, 96)",borderColor:"",borderWidth:0,fontSize:14},node:{fontSize:12,color:"#222"},generalization:{fillColor:"#fff",borderColor:"rgb(251, 158, 0)",borderWidth:2,color:"rgb(51, 51, 51)"}},U={lineColor:"rgb(30, 53, 86)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(56, 123, 233)",backgroundColor:"rgb(241, 241, 241)",root:{fillColor:"rgb(30, 53, 86)",color:"#fff",fontSize:24,borderRadius:10,borderColor:"rgb(189, 197, 201)",borderWidth:2},second:{fillColor:"rgb(169, 218, 218)",borderColor:"rgb(30, 53, 86)",borderWidth:2,color:"#fff",fontSize:18,borderRadius:10},node:{fontSize:14,color:"rgb(30, 53, 86)",borderColor:"rgb(30, 53, 86)",borderWidth:1,marginY:20},generalization:{fillColor:"rgb(56, 123, 233)",borderColor:"rgb(56, 123, 233)",color:"#fff",borderWidth:0}},$={lineColor:"rgb(51, 51, 51)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"#222",backgroundColor:"rgb(248, 215, 49)",root:{fillColor:"rgb(55, 165, 255)",borderColor:"rgb(51, 51, 51)",borderWidth:3},second:{fillColor:"rgb(255, 160, 36)",color:"#222",borderColor:"rgb(51, 51, 51)",borderWidth:3,fontSize:14},node:{fontSize:12,color:"#222"},generalization:{borderColor:"#222",borderWidth:3,color:"#222"}},V={lineColor:"rgb(34, 34, 34)",lineWidth:4,generalizationLineWidth:4,generalizationLineColor:"rgb(34, 34, 34)",root:{fillColor:"#fff",color:"rgb(34, 34, 34)",borderColor:"rgb(34, 34, 34)",borderWidth:3,fontSize:24},second:{fillColor:"rgb(241, 246, 248)",color:"rgb(34, 34, 34)",borderColor:"rgb(34, 34, 34)",borderWidth:3,fontSize:18},node:{fontSize:14,color:"rgb(34, 34, 34)"},generalization:{fontSize:14,fillColor:"transparent",borderColor:"rgb(34, 34, 34)",borderWidth:2,color:"rgb(34, 34, 34)"}},G={lineColor:"rgb(113, 195, 169)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(113, 195, 169)",root:{fillColor:"rgb(16, 160, 121)",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(240, 252, 249)",color:"rgb(50, 113, 96)",borderColor:"rgb(113, 195, 169)",borderWidth:2,fontSize:18},node:{fontSize:14,color:"rgb(10, 59, 43)"},generalization:{fontSize:14,fillColor:"rgb(246, 238, 211)",borderColor:"",borderWidth:0,color:"rgb(173, 91, 12)"}},Y={lineColor:"rgb(173, 123, 91)",lineWidth:4,generalizationLineWidth:4,generalizationLineColor:"rgb(173, 123, 91)",root:{fillColor:"rgb(202, 117, 79)",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(245, 231, 216)",color:"rgb(125, 86, 42)",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"rgb(96, 71, 47)"},generalization:{fontSize:14,fillColor:"rgb(255, 249, 239)",borderColor:"rgb(173, 123, 91)",borderWidth:2,color:"rgb(122, 83, 44)"}},K={backgroundColor:"rgb(255, 238, 228)",lineColor:"rgb(230, 138, 131)",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"rgb(222, 101, 85)",root:{fillColor:"rgb(207, 44, 44)",color:"rgb(255, 233, 157)",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"rgb(255, 255, 255)",color:"rgb(211, 58, 21)",borderColor:"rgb(222, 101, 85)",borderWidth:2,fontSize:18},node:{fontSize:14,color:"rgb(144, 71, 43)"},generalization:{fontSize:14,fillColor:"rgb(255, 247, 211)",borderColor:"rgb(255, 202, 162)",borderWidth:2,color:"rgb(187, 101, 69)"}},X={backgroundColor:"#e6f1de",lineColor:"#f5ffad",lineWidth:4,generalizationLineWidth:3,generalizationLineColor:"#749336",root:{fillColor:"#94c143",color:"#fff",borderColor:"#94c143",borderWidth:0,fontSize:24},second:{fillColor:"#cee498",color:"#749336",borderColor:"#aec668",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#749336"},generalization:{fontSize:14,fillColor:"#cee498",borderColor:"#aec668",borderWidth:2,color:"#749336"}},Z={backgroundColor:"#fff2df",lineColor:"#b0bc47",lineWidth:3,generalizationLineWidth:3,generalizationLineColor:"#b0bc47",root:{fillColor:"#e68112",color:"#fff",borderColor:"#e68112",borderWidth:0,fontSize:24},second:{fillColor:"#ffd683",color:"#8c5416",borderColor:"#b0bc47",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#8c5416"},generalization:{fontSize:14,fillColor:"#ffd683",borderColor:"#b0bc47",borderWidth:2,color:"#8c5416"}},J={backgroundColor:"#fff",lineColor:"#36aaa9",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#36aaa9",associativeLineColor:"#3e58ea",associativeLineTextColor:"#679fba",associativeLineActiveColor:"#50a4b4",root:{fillColor:"#3e58ea",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#e3fbff",color:"#58aabc",borderColor:"#50a4b4",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#50a4b4"},generalization:{fontSize:14,fillColor:"#3e58ea",borderColor:"",borderWidth:0,color:"#fff"}},Q={backgroundColor:"#fffcf2",lineColor:"#333333",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#ffda60",associativeLineColor:"#ffda60",associativeLineTextColor:"#333333",associativeLineActiveColor:"#333333",root:{fillColor:"#ffda60",color:"#3b3a37",borderColor:"#343334",borderWidth:2,fontSize:24},second:{fillColor:"#fff",color:"#131312",borderColor:"",borderWidth:0,fontSize:18},node:{fontSize:14,color:"#131312"},generalization:{fontSize:14,fillColor:"#ffda60",borderColor:"",borderWidth:0,color:"#464339"}},tt={backgroundColor:"#fffef6",lineColor:"#273d62",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#273d62",associativeLineColor:"#9edeee",associativeLineTextColor:"#395c85",associativeLineActiveColor:"#273d62",root:{fillColor:"#273d62",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#9edeee",color:"#406080",borderColor:"#395c85",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#395c85"},generalization:{fontSize:14,fillColor:"#273d62",borderColor:"",borderWidth:0,color:"#fff"}},et={backgroundColor:"#ffffff",lineColor:"#333333",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#2176ef",associativeLineColor:"#2176ef",associativeLineTextColor:"#343433",associativeLineActiveColor:"#343433",root:{fillColor:"#2176ef",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#fff9e4",color:"#4c4b46",borderColor:"#343433",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#343433"},generalization:{fontSize:14,fillColor:"#2176ef",borderColor:"",borderWidth:0,color:"#fff"}},nt={backgroundColor:"#ffffff",lineColor:"#35b398",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#21c384",associativeLineColor:"#21c384",associativeLineTextColor:"#4d754b",associativeLineActiveColor:"#f5ffe6",root:{fillColor:"#21c384",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#f5ffe6",color:"#386437",borderColor:"#35b398",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#326032"},generalization:{fontSize:14,fillColor:"#21c384",borderColor:"",borderWidth:0,color:"#fff"}},rt={backgroundColor:"#ffffff",lineColor:"#333333",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#ffd613",associativeLineColor:"#ffd613",associativeLineTextColor:"#2d2b23",associativeLineActiveColor:"#d1ebf8",root:{fillColor:"#ffd613",color:"#2d2b23",borderColor:"#1f2021",borderWidth:2,fontSize:24},second:{fillColor:"#d1ebf8",color:"#717b80",borderColor:"#333333",borderWidth:2,fontSize:18,borderRadius:5},node:{fontSize:14,color:"#333333"},generalization:{fontSize:14,fillColor:"#ffd613",borderColor:"",borderWidth:0,color:"#2d2b23"}},it={backgroundColor:"#ffeed2",lineColor:"#976a43",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#19807e",associativeLineColor:"#19807e",associativeLineTextColor:"#764014",associativeLineActiveColor:"#976a43",root:{fillColor:"#19807e",color:"#f3f0b8",borderColor:"",borderWidth:0,fontSize:24,shape:"circle"},second:{fillColor:"#eacdb3",color:"#7f4d1f",borderColor:"#764014",borderWidth:2,fontSize:18,shape:"roundedRectangle"},node:{fontSize:14,color:"#764014"},generalization:{fontSize:14,fillColor:"#19807e",borderColor:"",borderWidth:0,color:"#f3f0b8"}},ot={backgroundColor:"#c8e4ea",lineColor:"#3e416c",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"#3e416c",associativeLineColor:"#ffdb9c",associativeLineTextColor:"#383b70",associativeLineActiveColor:"#3e416c",root:{fillColor:"#383b70",color:"#fff",borderColor:"",borderWidth:0,fontSize:24},second:{fillColor:"#ffdb9c",color:"#5e5c76",borderColor:"#3e416c",borderWidth:2,fontSize:18},node:{fontSize:14,color:"#3e416c"},generalization:{fontSize:14,fillColor:"#383b70",borderColor:"",borderWidth:0,color:"#fff"}},st=[{name:"天清绿",value:"skyGreen",theme:M},{name:"经典绿",value:"classicGreen",theme:A},{name:"经典蓝",value:"classicBlue",theme:D},{name:"天空蓝",value:"blueSky",theme:_},{name:"脑残粉",value:"brainImpairedPink",theme:R},{name:"泥土黄",value:"earthYellow",theme:P},{name:"清新绿",value:"freshGreen",theme:I},{name:"清新红",value:"freshRed",theme:j},{name:"浪漫紫",value:"romanticPurple",theme:z},{name:"粉红葡萄",value:"pinkGrape",theme:B},{name:"薄荷",value:"mint",theme:F},{name:"金色vip",value:"gold",theme:H},{name:"活力橙",value:"vitalityOrange",theme:q},{name:"绿叶",value:"greenLeaf",theme:W},{name:"小黄人",value:"minions",theme:$},{name:"简约黑",value:"simpleBlack",theme:V},{name:"课程绿",value:"courseGreen",theme:G},{name:"咖啡",value:"coffee",theme:Y},{name:"红色精神",value:"redSpirit",theme:K},{name:"牛油果",value:"avocado",theme:X},{name:"秋天",value:"autumn",theme:Z},{name:"奥利奥",value:"oreo",theme:y},{name:"浅海",value:"shallowSea",theme:b},{name:"柠檬气泡",value:"lemonBubbles",theme:w},{name:"玫瑰",value:"rose",theme:x},{name:"海蓝线",value:"seaBlueLine",theme:C},{name:"莫兰迪",value:"morandi",theme:E},{name:"仙人掌",value:"cactus",theme:T},{name:"脑图经典2",value:"classic2",theme:S},{name:"脑图经典3",value:"classic3",theme:L},{name:"脑图经典4",value:"classic4",theme:U},{name:"脑图经典5",value:"classic5",theme:k},{name:"脑图经典6",value:"classic6",theme:N},{name:"脑图经典7",value:"classic7",theme:O},{name:"脑图经典8",value:"classic8",theme:J},{name:"脑图经典9",value:"classic9",theme:Q},{name:"脑图经典10",value:"classic10",theme:tt},{name:"脑图经典11",value:"classic11",theme:et},{name:"脑图经典12",value:"classic12",theme:nt},{name:"脑图经典13",value:"classic13",theme:rt},{name:"脑图经典14",value:"classic14",theme:it},{name:"脑图经典15",value:"classic15",theme:ot}].map(t=>({...t,dark:!1}));const at=[...v,...st],lt={darkList:v,lightList:st,init(t){at.forEach(e=>{t.defineTheme(e.value,e.theme)})},remove(t){at.forEach(e=>{t.removeTheme(e.value)})}};e["a"]=lt},"187c":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const r={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190};for(let o=0;o<=9;o++)r[o]=o+48;"abcdefghijklmnopqrstuvwxyz".split("").forEach((t,e)=>{r[t]=e+65});const i=r},"1ab9":function(t,e,n){"use strict";var r=n("d056"),i=n("b448");const o=(t,e)=>t.getData("associativeLineTargets").findIndex(t=>t===e.getData("uid")),s=(t,e,n,r)=>{const i=5;let o=t+(n-t)/2,s=e,a=o,l=r;return Math.abs(t-n)<=i&&(o=t+(r-e)/2,a=o),Math.abs(e-r)<=i&&(o=t,s=e-(n-t)/2,a=n,l=s),[{x:o,y:s},{x:a,y:l}]},a=(t,e,n,r)=>`M ${t.x},${t.y} C ${n.x},${n.y} ${r.x},${r.y} ${e.x},${e.y}`,l=t=>{let{left:e,top:n,width:r,height:i}=t;return{right:e+r,bottom:n+i,left:e,top:n,width:r,height:i}},c=(t,e,n,r)=>{let i=s(t,e,n,r);return a({x:t,y:e},{x:n,y:r},i[0],i[1])},h=(t,e)=>{const{left:n,top:r,translateLeft:i,translateTop:o,width:s,height:a}=t,l=e.clientX,c=e.clientY,h=i+s/2,u=o+a/2,d=n+s/2,f=r+a/2,p=Math.atan(a/s),m=l-h,g=u-c,v=Math.atan2(g,m);let y=n+s,b=r+a;if(v<p&&v>=-p){const t=v*(s/2);return(v<p&&v>=0||v>=-p&&v<0)&&(b=f-t),{x:y,y:b,dir:"right",range:t}}if(v>=p&&v<Math.PI-p){b=r;let t=0;if(v<Math.PI/2-p&&v>=p){const e=a/2/v;t=-e,y=d+e}else if(v>=Math.PI/2-p&&v<Math.PI-p){const e=(h-l)/(u-c),n=a/2*e;t=n,y=d-n}return{x:y,y:b,dir:"top",range:t}}if(v<-p&&v>=p-Math.PI){let t=0;if(v>=p-Math.PI/2&&v<-p){const e=a/2/v;t=e,y=d-e}else if(v<p-Math.PI/2&&v>=p-Math.PI){const e=(h-l)/(u-c),n=a/2*e;t=-n,y=d+n}return{x:y,y:b,dir:"bottom",range:t}}y=n;const w=(u-c)/(h-l),x=w*(s/2);return(v>=-Math.PI&&v<p-Math.PI||v<Math.PI&&v>=Math.PI-p)&&(b=f-x),{x:y,y:b,dir:"left",range:x}},u=(t,e="right",n=0,r=null)=>{let{left:i,top:o,width:s,height:a}=t;if(r)return h(t,r);switch(e){case"left":return{x:i,y:o+a/2-n,dir:e};case"right":return{x:i+s,y:o+a/2-n,dir:e};case"top":return{x:i+s/2-n,y:o,dir:e};case"bottom":return{x:i+s/2-n,y:o+a,dir:e};default:break}},d=(t,e)=>{const n=l(t),i=l(e);let o="",s="";const a=Object(r["G"])({x:n.left,y:n.top,width:n.width,height:n.height},{x:i.left,y:i.top,width:i.width,height:i.height});switch(a){case"left-top":o="right",s="top";break;case"right-top":o="left",s="top";break;case"right-bottom":o="left",s="bottom";break;case"left-bottom":o="right",s="bottom";break;case"left":o="right",s="left";break;case"right":o="left",s="right";break;case"top":o="right",s="right";break;case"bottom":o="left",s="left";break;case"overlap":o="right",s="right";break;default:break}return[u(t,o),u(e,s)]},f=(t,e,n,r)=>{let i=o(n,r),l=[],c=n.getData("associativeLineTargetControlOffsets");if(c&&c[i]){let n=c[i];l=[{x:t.x+n[0].x,y:t.y+n[0].y},{x:e.x+n[1].x,y:e.y+n[1].y}]}else l=s(t.x,t.y,e.x,e.y);return{path:a(t,e,l[0],l[1]),controlPoints:l}},p=(t,e)=>{let n=s(t.x,t.y,e.x,e.y);return[{x:n[0].x-t.x,y:n[0].y-t.y},{x:n[1].x-e.x,y:n[1].y-e.y}]};function m(){let{associativeLineActiveColor:t}=this.mindMap.themeConfig;this.controlLine1=this.associativeLineDraw.line().stroke({color:t,width:2}),this.controlLine2=this.associativeLineDraw.line().stroke({color:t,width:2}),this.controlPoint1=this.createOneControlNode("controlPoint1"),this.controlPoint2=this.createOneControlNode("controlPoint2")}function g(t){let{associativeLineActiveColor:e}=this.mindMap.themeConfig;return this.associativeLineDraw.circle(this.controlPointDiameter).stroke({color:e}).fill({color:"#fff"}).click(t=>{t.stopPropagation()}).mousedown(e=>{this.onControlPointMousedown(e,t)})}function v(t,e){t.stopPropagation(),t.preventDefault(),this.isControlPointMousedown=!0,this.mousedownControlPointKey=e}function y(t){if(!this.isControlPointMousedown||!this.mousedownControlPointKey||!this[this.mousedownControlPointKey])return;t.stopPropagation(),t.preventDefault();let e=this.controlPointDiameter/2,{x:n,y:r}=this.getTransformedEventPos(t);this.controlPointMousemoveState.pos={x:n,y:r},this[this.mousedownControlPointKey].x(n-e).y(r-e);let[,,,i,s]=this.activeLine,a=o(i,s),{associativeLinePoint:l,associativeLineTargetControlOffsets:c}=i.getData();l=l||[];const h=this.getNodePos(i),d=this.getNodePos(s);let[f,m]=this.updateAllLinesPos(i,s,l[a]);this.controlPointMousemoveState.startPoint=f,this.controlPointMousemoveState.endPoint=m,this.controlPointMousemoveState.targetIndex=a;let g=[];g=c?c[a]:p(f,m);let v=null,y=null;const{x:b,y:w}=this.mindMap.toPos(t.clientX,t.clientY),x={clientX:b,clientY:w};"controlPoint1"===this.mousedownControlPointKey?(f=u(h,"",0,x),v={x:n,y:r},y={x:m.x+g[1].x,y:m.y+g[1].y},f&&(this.controlPointMousemoveState.startPoint=f,this.controlLine1.plot(f.x,f.y,v.x,v.y))):(m=u(d,"",0,x),v={x:f.x+g[0].x,y:f.y+g[0].y},y={x:n,y:r},m&&(this.controlPointMousemoveState.endPoint=m,this.controlLine2.plot(m.x,m.y,y.x,y.y))),this.updataAassociativeLine(f,m,v,y,this.activeLine)}function b(t,e,n,r,i){const[o,s,l]=i,c=a(t,e,n,r);o.plot(c),s.plot(c),this.updateTextPos(o,l),this.updateTextEditBoxPos(l)}function w(t){if(!this.isControlPointMousedown)return;t.stopPropagation(),t.preventDefault();let{pos:e,startPoint:n,endPoint:r,targetIndex:i}=this.controlPointMousemoveState,[,,,o]=this.activeLine,s=[],{associativeLinePoint:a,associativeLineTargetControlOffsets:l}=o.getData();a||(a=[]),a[i]=a[i]||{startPoint:n,endPoint:r},l?s=l:s[i]=p(n,r);let c=null,h=null;"controlPoint1"===this.mousedownControlPointKey?(c={x:e.x-n.x,y:e.y-n.y},h=s[i][1],a[i].startPoint=n):(c=s[i][0],h={x:e.x-r.x,y:e.y-r.y},a[i].endPoint=r),s[i]=[c,h],this.mindMap.execCommand("SET_NODE_DATA",o,{associativeLineTargetControlOffsets:s,associativeLinePoint:a}),setTimeout(()=>{this.resetControlPoint()},0)}function x(){this.isControlPointMousedown=!1,this.mousedownControlPointKey="",this.controlPointMousemoveState={pos:null,startPoint:null,endPoint:null,targetIndex:""}}function C(t,e,n,r){if(!this.mindMap.opt.enableAdjustAssociativeLinePoints)return;this.controlLine1||this.createControlNodes();let i=this.controlPointDiameter/2;this.controlLine1.plot(t.x,t.y,n.x,n.y),this.controlLine2.plot(e.x,e.y,r.x,r.y),this.controlPoint1.x(n.x-i).y(n.y-i),this.controlPoint2.x(r.x-i).y(r.y-i)}function E(){this.controlLine1&&([this.controlLine1,this.controlLine2,this.controlPoint1,this.controlPoint2].forEach(t=>{t.remove()}),this.controlLine1=null,this.controlLine2=null,this.controlPoint1=null,this.controlPoint2=null)}function k(){this.controlLine1&&[this.controlLine1,this.controlLine2,this.controlPoint1,this.controlPoint2].forEach(t=>{t.hide()})}function N(){this.controlLine1&&[this.controlLine1,this.controlLine2,this.controlPoint1,this.controlPoint2].forEach(t=>{t.show()})}var O={createControlNodes:m,createOneControlNode:g,onControlPointMousedown:v,onControlPointMousemove:y,onControlPointMouseup:w,resetControlPoint:x,renderControls:C,removeControls:E,hideControls:k,showControls:N,updataAassociativeLine:b},T=n("4378");function M(t){let e=this.associativeLineDraw.group();const n=()=>{this.activeLine&&this.activeLine[3]===t.node&&this.activeLine[4]===t.toNode||this.setActiveLine({...t,text:e})};return e.click(t=>{t.stopPropagation(),n()}),e.on("dblclick",t=>{t.stopPropagation(),n(),this.activeLine&&this.showEditTextBox(e)}),e}function S(t){if(this.mindMap.emit("before_show_text_edit"),this.mindMap.keyCommand.addShortcut("Enter",()=>{this.hideEditTextBox()}),!this.textEditNode){this.textEditNode=document.createElement("div"),this.textEditNode.style.cssText="position:fixed;box-sizing: border-box;background-color:#fff;box-shadow: 0 0 20px rgba(0,0,0,.5);padding: 3px 5px;margin-left: -5px;margin-top: -3px;outline: none; word-break: break-all;",this.textEditNode.setAttribute("contenteditable",!0),this.textEditNode.addEventListener("keyup",t=>{t.stopPropagation()}),this.textEditNode.addEventListener("click",t=>{t.stopPropagation()});const t=this.mindMap.opt.customInnerElsAppendTo||document.body;t.appendChild(this.textEditNode)}let{associativeLineTextFontSize:e,associativeLineTextFontFamily:n,associativeLineTextLineHeight:i}=this.mindMap.themeConfig,{defaultAssociativeLineText:o,nodeTextEditZIndex:s}=this.mindMap.opt,a=this.mindMap.view.scale,[,,,l,c]=this.activeLine,h=this.getText(l,c),u=(h||o).split(/\n/gim);this.textEditNode.style.fontFamily=n,this.textEditNode.style.fontSize=e*a+"px",this.textEditNode.style.lineHeight=u.length>1?i:"normal",this.textEditNode.style.zIndex=s,this.textEditNode.innerHTML=u.join("<br>"),this.textEditNode.style.display="block",this.updateTextEditBoxPos(t),this.showTextEdit=!0,""===h||h===o?Object(r["kb"])(this.textEditNode):Object(r["t"])(this.textEditNode)}function L(){if(!this.textEditNode)return;const t=this.mindMap.opt.customInnerElsAppendTo||document.body;t.removeChild(this.textEditNode)}function A(){this.hideEditTextBox()}function D(t){let e=t.node.getBoundingClientRect();this.textEditNode&&(this.textEditNode.style.minWidth=e.width+10+"px",this.textEditNode.style.minHeight=e.height+6+"px",this.textEditNode.style.left=e.left+"px",this.textEditNode.style.top=e.top+"px")}function _(){if(!this.showTextEdit)return;let[t,,e,n,i]=this.activeLine,o=Object(r["H"])(this.textEditNode.innerHTML),s=o===this.mindMap.opt.defaultAssociativeLineText;o=s?"":o,this.mindMap.execCommand("SET_NODE_DATA",n,{associativeLineText:{...n.getData("associativeLineText")||{},[i.getData("uid")]:o}}),this.textEditNode.style.display="none",this.textEditNode.innerHTML="",this.showTextEdit=!1,this.renderText(o,t,e),this.mindMap.emit("hide_text_edit")}function R(t,e){let n=t.getData("associativeLineText");return n&&n[e.getData("uid")]||""}function P(t,e,n){if(!t)return;let{associativeLineTextFontSize:r,associativeLineTextLineHeight:i}=this.mindMap.themeConfig;n.clear();let o=t.split(/\n/gim);o.forEach((t,e)=>{let o=(new T["j"]).text(t);o.y(r*i*e),this.styleText(o),n.add(o)}),j(e,n)}function I(t){let{associativeLineTextColor:e,associativeLineTextFontSize:n,associativeLineTextFontFamily:r}=this.mindMap.themeConfig;t.fill({color:e}).css({"font-family":r,"font-size":n+"px"})}function j(t,e){let n=t.length(),r=t.pointAt(n/2),{width:i,height:o}=e.bbox();e.x(r.x-i/2),e.y(r.y-o/2)}var z={getText:R,createText:M,styleText:I,onScale:A,showEditTextBox:S,removeTextEditEl:L,hideEditTextBox:_,updateTextEditBoxPos:D,renderText:P,updateTextPos:j};class B{constructor(t={}){this.mindMap=t.mindMap,this.associativeLineDraw=this.mindMap.associativeLineDraw,this.lineList=[],this.activeLine=null,this.isCreatingLine=!1,this.creatingStartNode=null,this.creatingLine=null,this.overlapNode=null,this.isNodeDragging=!1,this.markerPath=null,this.marker=this.createMarker(),this.controlLine1=null,this.controlLine2=null,this.controlPoint1=null,this.controlPoint2=null,this.controlPointDiameter=10,this.isControlPointMousedown=!1,this.mousedownControlPointKey="",this.controlPointMousemoveState={pos:null,startPoint:null,endPoint:null,targetIndex:""},this.checkOverlapNode=Object(r["ob"])(this.checkOverlapNode,100,this),Object.keys(O).forEach(t=>{this[t]=O[t].bind(this)}),Object.keys(z).forEach(t=>{this[t]=z[t].bind(this)}),this.bindEvent()}bindEvent(){this.renderAllLines=this.renderAllLines.bind(this),this.onDrawClick=this.onDrawClick.bind(this),this.onNodeClick=this.onNodeClick.bind(this),this.removeLine=this.removeLine.bind(this),this.addLine=this.addLine.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onNodeDragging=this.onNodeDragging.bind(this),this.onNodeDragend=this.onNodeDragend.bind(this),this.onControlPointMouseup=this.onControlPointMouseup.bind(this),this.onBeforeDestroy=this.onBeforeDestroy.bind(this),this.mindMap.on("node_tree_render_end",this.renderAllLines),this.mindMap.on("data_change",this.renderAllLines),this.mindMap.on("draw_click",this.onDrawClick),this.mindMap.on("node_click",this.onNodeClick),this.mindMap.on("contextmenu",this.onDrawClick),this.mindMap.keyCommand.addShortcut("Del|Backspace",this.removeLine),this.mindMap.command.add("ADD_ASSOCIATIVE_LINE",this.addLine),this.mindMap.on("mousemove",this.onMousemove),this.mindMap.on("node_dragging",this.onNodeDragging),this.mindMap.on("node_dragend",this.onNodeDragend),this.mindMap.on("mouseup",this.onControlPointMouseup),this.mindMap.on("scale",this.onScale),this.mindMap.on("beforeDestroy",this.onBeforeDestroy)}unBindEvent(){this.mindMap.off("node_tree_render_end",this.renderAllLines),this.mindMap.off("data_change",this.renderAllLines),this.mindMap.off("draw_click",this.onDrawClick),this.mindMap.off("node_click",this.onNodeClick),this.mindMap.off("contextmenu",this.onDrawClick),this.mindMap.keyCommand.removeShortcut("Del|Backspace",this.removeLine),this.mindMap.command.remove("ADD_ASSOCIATIVE_LINE",this.addLine),this.mindMap.off("mousemove",this.onMousemove),this.mindMap.off("node_dragging",this.onNodeDragging),this.mindMap.off("node_dragend",this.onNodeDragend),this.mindMap.off("mouseup",this.onControlPointMouseup),this.mindMap.off("scale",this.onScale),this.mindMap.off("beforeDestroy",this.onBeforeDestroy)}onBeforeDestroy(){this.hideEditTextBox(),this.removeTextEditEl()}onDrawClick(){this.isCreatingLine&&this.cancelCreateLine(),this.isControlPointMousedown||this.clearActiveLine()}onNodeClick(t){this.isCreatingLine?this.completeCreateLine(t):this.clearActiveLine()}createMarker(){return this.associativeLineDraw.marker(20,20,t=>{t.ref(12,5),t.size(10,10),t.attr("orient","auto-start-reverse"),this.markerPath=t.path("M0,0 L2,5 L0,10 L10,5 Z")})}updateAllLinesPos(t,e,n){n=n||{};let[r,i]=d(t,e),o=0,s="",a=0,l="";return n.startPoint&&(o=n.startPoint.range||0,s=n.startPoint.dir||"right",r=u(t,s,o)),n.endPoint&&(a=n.endPoint.range||0,l=n.endPoint.dir||"right",i=u(e,l,a)),[r,i]}renderAllLines(){this.removeAllLines(),this.removeControls(),this.clearActiveLine();let t=this.mindMap.renderer.root;if(!t)return;let e=new Map,n=new Map;Object(r["qb"])(t,null,t=>{if(!t)return;let r=t.getData();r.associativeLineTargets&&r.associativeLineTargets.length>0&&n.set(t,r.associativeLineTargets),r.uid&&e.set(r.uid,t)},()=>{},!0,0),n.forEach((t,n)=>{t.forEach((t,r)=>{let i=e.get(t);if(!n||!i)return;const o=(n.getData("associativeLinePoint")||[])[r],[s,a]=this.updateAllLinesPos(n,i,o);this.drawLine(s,a,n,i)})})}drawLine(t,e,n,r){let{associativeLineWidth:i,associativeLineColor:o,associativeLineActiveWidth:s,associativeLineActiveColor:a,associativeLineDasharray:l}=this.mindMap.themeConfig;this.markerPath.stroke({color:o}).fill({color:o});let{path:c,controlPoints:h}=f(t,e,n,r),u=this.associativeLineDraw.path();u.stroke({width:i,color:o,dasharray:l||[6,4]}).fill({color:"none"}),u.plot(c),u.marker("end",this.marker);let d=this.associativeLineDraw.path();d.stroke({width:s,color:"transparent"}).fill({color:"none"}),d.plot(c);let p=this.createText({path:u,clickPath:d,node:n,toNode:r,startPoint:t,endPoint:e,controlPoints:h});d.click(i=>{i.stopPropagation(),this.setActiveLine({path:u,clickPath:d,text:p,node:n,toNode:r,startPoint:t,endPoint:e,controlPoints:h})}),d.dblclick(()=>{this.activeLine&&this.showEditTextBox(p)}),this.renderText(this.getText(n,r),u,p),this.lineList.push([u,d,p,n,r])}setActiveLine({path:t,clickPath:e,text:n,node:r,toNode:i,startPoint:o,endPoint:s,controlPoints:a}){let{associativeLineActiveColor:l}=this.mindMap.themeConfig;this.mindMap.execCommand("CLEAR_ACTIVE_NODE"),this.clearActiveLine(),this.activeLine=[t,e,n,r,i],e.stroke({color:l}),this.getText(r,i)||this.renderText(this.mindMap.opt.defaultAssociativeLineText,t,n),this.renderControls(o,s,a[0],a[1]),this.mindMap.emit("associative_line_click",t,e,r,i),this.front()}removeAllLines(){this.lineList.forEach(t=>{t[0].remove(),t[1].remove(),t[2].remove()}),this.lineList=[]}createLineFromActiveNode(){if(this.mindMap.renderer.activeNodeList.length<=0)return;let t=this.mindMap.renderer.activeNodeList[0];this.createLine(t)}createLine(t){let{associativeLineWidth:e,associativeLineColor:n,associativeLineDasharray:r}=this.mindMap.themeConfig;!this.isCreatingLine&&t&&(this.front(),this.isCreatingLine=!0,this.creatingStartNode=t,this.creatingLine=this.associativeLineDraw.path(),this.creatingLine.stroke({width:e,color:n,dasharray:r||[6,4]}).fill({color:"none"}),this.markerPath.stroke({color:n}).fill({color:n}),this.creatingLine.marker("end",this.marker))}cancelCreateLine(){this.isCreatingLine=!1,this.creatingStartNode=null,this.creatingLine.remove(),this.creatingLine=null,this.overlapNode=null,this.back()}onMousemove(t){this.onControlPointMousemove(t),this.updateCreatingLine(t)}updateCreatingLine(t){if(!this.isCreatingLine)return;let{x:e,y:n}=this.getTransformedEventPos(t),r=u(this.creatingStartNode),i=e>r.x?-10:10,o=c(r.x,r.y,e+i,n);this.creatingLine.plot(o),this.checkOverlapNode(e,n)}getTransformedEventPos(t){let{x:e,y:n}=this.mindMap.toPos(t.clientX,t.clientY),{scaleX:r,scaleY:i,translateX:o,translateY:s}=this.mindMap.draw.transform();return{x:(e-o)/r,y:(n-s)/i}}getNodePos(t){const{scaleX:e,scaleY:n,translateX:r,translateY:i}=this.mindMap.draw.transform(),{left:o,top:s,width:a,height:l}=t;let c=o*e+r,h=s*n+i;return{left:o,top:s,translateLeft:c,translateTop:h,width:a,height:l}}checkOverlapNode(t,e){this.overlapNode=null,Object(r["e"])(this.mindMap.renderer.root,n=>{if(n.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",n,!1),n.uid===this.creatingStartNode.uid||this.overlapNode)return;let{left:r,top:i,width:o,height:s}=n,a=r+o,l=i+s;t>=r&&t<=a&&e>=i&&e<=l&&(this.overlapNode=n)}),this.overlapNode&&!this.overlapNode.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",this.overlapNode,!0)}completeCreateLine(t){if(this.creatingStartNode.uid===t.uid)return;const{beforeAssociativeLineConnection:e}=this.mindMap.opt;let n=!1;"function"===typeof e&&(n=e(t)),n||(this.addLine(this.creatingStartNode,t),this.overlapNode&&this.overlapNode.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",this.overlapNode,!1),this.cancelCreateLine())}addLine(t,e){if(!t||!e)return;let n=e.getData("uid");n||(n=Object(i["a"])(),this.mindMap.execCommand("SET_NODE_DATA",e,{uid:n}));let r=t.getData("associativeLineTargets")||[];const o=r.some(t=>t===n);if(o)return;r.push(n);let[a,l]=d(t,e),c=s(a.x,a.y,l.x,l.y);const{associativeLineInitPointsPosition:h}=this.mindMap.opt;if(h){const{from:t,to:e}=h;t&&(a.dir=t),e&&(l.dir=e)}let u=t.getData("associativeLineTargetControlOffsets")||[];u[r.length-1]=[{x:c[0].x-a.x,y:c[0].y-a.y},{x:c[1].x-l.x,y:c[1].y-l.y}];let f=t.getData("associativeLinePoint")||[];f[r.length-1]={startPoint:a,endPoint:l},this.mindMap.execCommand("SET_NODE_DATA",t,{associativeLineTargets:r,associativeLineTargetControlOffsets:u,associativeLinePoint:f})}removeLine(){if(!this.activeLine)return;let[,,,t,e]=this.activeLine;this.removeControls();let{associativeLineTargets:n,associativeLinePoint:r,associativeLineTargetControlOffsets:i,associativeLineText:s}=t.getData();r=r||[];let a=o(t,e),l={};s&&Object.keys(s).forEach(t=>{t!==e.getData("uid")&&(l[t]=s[t])}),this.mindMap.execCommand("SET_NODE_DATA",t,{associativeLineTargets:n.filter((t,e)=>e!==a),associativeLinePoint:r.filter((t,e)=>e!==a),associativeLineTargetControlOffsets:i?i.filter((t,e)=>e!==a):[],associativeLineText:l})}clearActiveLine(){if(this.activeLine){let[,t,e,n,r]=this.activeLine;t.stroke({color:"transparent"}),this.hideEditTextBox(),this.getText(n,r)||e.clear(),this.activeLine=null,this.removeControls(),this.back()}}onNodeDragging(){this.isNodeDragging||(this.isNodeDragging=!0,this.lineList.forEach(t=>{t[0].hide(),t[1].hide(),t[2].hide()}),this.hideControls())}onNodeDragend(){this.isNodeDragging&&(this.lineList.forEach(t=>{t[0].show(),t[1].show(),t[2].show()}),this.showControls(),this.isNodeDragging=!1)}front(){this.mindMap.opt.associativeLineIsAlwaysAboveNode||this.associativeLineDraw.front()}back(){this.mindMap.opt.associativeLineIsAlwaysAboveNode||(this.associativeLineDraw.back(),this.associativeLineDraw.forward())}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}B.instanceName="associativeLine";e["a"]=B},"26ee":function(t,e,n){"use strict";var r=n("5ea3"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r["a"]||i||Function("return this")();e["a"]=o},2946:function(t,e,n){"use strict";var r=n("d056");const i=["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize"];class o{static setBackgroundStyle(t,e){if(!t)return;if(!o.cacheStyle){o.cacheStyle={};let e=window.getComputedStyle(t);i.forEach(t=>{o.cacheStyle[t]=e[t]})}let{backgroundColor:n,backgroundImage:r,backgroundRepeat:s,backgroundPosition:a,backgroundSize:l}=e;t.style.backgroundColor=n,r&&"none"!==r?(t.style.backgroundImage=`url(${r})`,t.style.backgroundRepeat=s,t.style.backgroundPosition=a,t.style.backgroundSize=l):t.style.backgroundImage="none"}static removeBackgroundStyle(t){o.cacheStyle&&(i.forEach(e=>{t.style[e]=o.cacheStyle[e]}),o.cacheStyle=null)}constructor(t){this.ctx=t,this._markerPath=null,this._marker=null,this._gradient=null}merge(t,e){let n=this.ctx.mindMap.themeConfig,r=null,i=!1;e?(i=!0,r=n):r=this.ctx.isGeneralization?n.generalization:0===this.ctx.layerIndex?n.root:1===this.ctx.layerIndex?n.second:n.node;let o="";return o=void 0!==this.getSelfStyle(t)?this.getSelfStyle(t):void 0!==r[t]?r[t]:n[t],i||this.addToEffectiveStyles({[t]:o}),o}getStyle(t,e){return this.merge(t,e)}getSelfStyle(t){return this.ctx.getData(t)}addToEffectiveStyles(t){this.ctx.effectiveStyles={...this.ctx.effectiveStyles,...t}}rect(t){this.shape(t),t.radius(this.merge("borderRadius"))}shape(t){const e={gradientStyle:this.merge("gradientStyle"),startColor:this.merge("startColor"),endColor:this.merge("endColor"),startDir:this.merge("startDir"),endDir:this.merge("endDir"),fillColor:this.merge("fillColor"),borderColor:this.merge("borderColor"),borderWidth:this.merge("borderWidth"),borderDasharray:this.merge("borderDasharray")};e.gradientStyle?(this._gradient||(this._gradient=this.ctx.nodeDraw.gradient("linear")),this._gradient.update(t=>{t.stop(0,e.startColor),t.stop(1,e.endColor)}),this._gradient.from(...e.startDir).to(...e.endDir),t.fill(this._gradient)):t.fill({color:e.fillColor}),t.stroke({color:e.borderColor,width:e.borderWidth,dasharray:e.borderDasharray})}text(t){const e={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};t.fill({color:e.color}).css({"font-family":e.fontFamily,"font-size":e.fontSize+"px","font-weight":e.fontWeight,"font-style":e.fontStyle,"text-decoration":e.textDecoration})}createStyleText(){const t={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};return`\n      color: ${t.color};\n      font-family: ${t.fontFamily};\n      font-size: ${t.fontSize+"px"};\n      font-weight: ${t.fontWeight};\n      font-style: ${t.fontStyle};\n      text-decoration: ${t.textDecoration}\n    `}getTextFontStyle(){const t={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};return{italic:"italic"===t.fontStyle,bold:t.fontWeight,fontSize:t.fontSize,fontFamily:t.fontFamily}}domText(t,e=1){const n={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};t.style.color=n.color,t.style.textDecoration=n.textDecoration,t.style.fontFamily=n.fontFamily,t.style.fontSize=n.fontSize*e+"px",t.style.fontWeight=n.fontWeight||"normal",t.style.fontStyle=n.fontStyle}tagText(t,e){t.fill({color:"#fff"}).css({"font-size":e.fontSize+"px"})}tagRect(t,e){t.fill({color:e.fill}),e.radius&&t.radius(e.radius)}iconNode(t){t.attr({fill:this.merge("color")})}line(t,{width:e,color:n,dasharray:r}={},i,o){if(t.stroke({color:n,dasharray:r,width:e}).fill({color:"none"}),i){const e=this.merge("showLineMarker",!0),r=o.style;if(e){r._marker=r._marker||r.createMarker(),r._markerPath.stroke({color:n}).fill({color:n}),t.attr("marker-start",""),t.attr("marker-end","");const e=r.merge("lineMarkerDir");t.marker(e,r._marker)}else r._marker&&(t.attr("marker-start",""),t.attr("marker-end",""),r._marker.remove(),r._marker=null)}}createMarker(){return this.ctx.lineDraw.marker(20,20,t=>{t.ref(8,5),t.size(20,20),t.attr("markerUnits","userSpaceOnUse"),t.attr("orient","auto-start-reverse"),this._markerPath=t.path("M0,0 L2,5 L0,10 L10,5 Z")})}generalizationLine(t){t.stroke({width:this.merge("generalizationLineWidth",!0),color:this.merge("generalizationLineColor",!0)}).fill({color:"none"})}iconBtn(t,e,n){let{color:r,fill:i,fontSize:o,fontColor:s}=this.ctx.mindMap.opt.expandBtnStyle||{color:"#808080",fill:"#fff",fontSize:12,strokeColor:"#333333",fontColor:"#333333"};t.fill({color:r}),e.fill({color:r}),n.fill({color:i}),this.ctx.mindMap.opt.isShowExpandNum&&t.attr({"font-size":o+"px","font-color":s})}hasCustomStyle(){let t=!1;return Object.keys(this.ctx.getData()).forEach(e=>{Object(r["f"])(e)&&(t=!0)}),t}hoverNode(t){const e=this.merge("hoverRectColor")||this.ctx.mindMap.opt.hoverRectColor,n=this.merge("hoverRectRadius");t.radius(n).fill("none").stroke({color:e})}onRemove(){this._marker&&(this._marker.remove(),this._marker=null),this._markerPath&&(this._markerPath.remove(),this._markerPath=null),this._gradient&&(this._gradient.remove(),this._gradient=null)}}o.cacheStyle=null,e["a"]=o},"2c8a":function(t,e,n){"use strict";var r=n("d056");const i=t=>{t=Object(r["J"])(t);const e={},n={};t.forEach(t=>{const r=t.parent;if(r){const i=r.uid;n[i]=r;const o=t.getIndexInBrothers(),s={node:t,index:o};e[i]?e[i].find(t=>t.index===s.index)||e[i].push(s):e[i]=[s]}});const i=[];return Object.keys(e).forEach(t=>{const r=e[t],o=n[t];if(r.length>1){const t=r.map(t=>t.index).sort((t,e)=>t-e),e=t[0],n=t[t.length-1];let s=-1,a=-1;for(let r=e;r<=n;r++)t.includes(r)?(-1===s&&(s=r),a=r):(-1!==s&&-1!==a&&i.push({node:o,range:[s,a]}),s=-1,a=-1);-1!==s&&-1!==a&&i.push({node:o,range:[s,a]})}else i.push({node:o,range:[r[0].index,r[0].index]})}),i},o=t=>{const e=t.children;if(!e||e.length<=0)return;const n=[],r={};return e.forEach((t,e)=>{const i=t.getData("outerFrame");if(!i)return;const o=i.groupId;o?(r[o]||(r[o]=[]),r[o].push({node:t,index:e})):n.push({nodeList:[t],range:[e,e]})}),Object.keys(r).forEach(t=>{const e=r[t];n.push({nodeList:e.map(t=>t.node),range:[e[0].index,e[e.length-1].index]})}),n},s={radius:5,strokeWidth:2,strokeColor:"#0984e3",strokeDasharray:"5,5",fill:"rgba(9,132,227,0.05)"};class a{constructor(t={}){this.mindMap=t.mindMap,this.draw=null,this.createDrawContainer(),this.outerFrameElList=[],this.activeOuterFrame=null,this.bindEvent()}createDrawContainer(){this.draw=this.mindMap.draw.group(),this.draw.addClass("smm-outer-frame-container"),this.draw.back(),this.draw.forward()}bindEvent(){this.renderOuterFrames=this.renderOuterFrames.bind(this),this.mindMap.on("node_tree_render_end",this.renderOuterFrames),this.mindMap.on("data_change",this.renderOuterFrames),this.clearActiveOuterFrame=this.clearActiveOuterFrame.bind(this),this.mindMap.on("draw_click",this.clearActiveOuterFrame),this.mindMap.on("node_click",this.clearActiveOuterFrame),this.addOuterFrame=this.addOuterFrame.bind(this),this.mindMap.command.add("ADD_OUTER_FRAME",this.addOuterFrame),this.removeActiveOuterFrame=this.removeActiveOuterFrame.bind(this),this.mindMap.keyCommand.addShortcut("Del|Backspace",this.removeActiveOuterFrame)}unBindEvent(){this.mindMap.off("node_tree_render_end",this.renderOuterFrames),this.mindMap.off("data_change",this.renderOuterFrames),this.mindMap.off("draw_click",this.clearActiveOuterFrame),this.mindMap.off("node_click",this.clearActiveOuterFrame),this.mindMap.command.remove("ADD_OUTER_FRAME",this.addOuterFrame),this.mindMap.keyCommand.removeShortcut("Del|Backspace",this.removeActiveOuterFrame)}addOuterFrame(t,e={}){t=Object(r["u"])(t);const n=this.mindMap.renderer.activeNodeList;if(n.length<=0&&t.length<=0)return;let o=t.length>0?t:n;o=o.filter(t=>!t.isRoot&&!t.isGeneralization);const s=i(o);s.forEach(({node:t,range:n})=>{const i=t.children.slice(n[0],n[1]+1),o=Object(r["o"])();i.forEach(t=>{let n=t.getData("outerFrame");n=n?{...n,...e,groupId:o}:{...e,groupId:o},this.mindMap.execCommand("SET_NODE_DATA",t,{outerFrame:n})})})}getActiveOuterFrame(){return this.activeOuterFrame?{...this.activeOuterFrame}:null}removeActiveOuterFrame(){if(!this.activeOuterFrame)return;const{node:t,range:e}=this.activeOuterFrame;this.getRangeNodeList(t,e).forEach(t=>{this.mindMap.execCommand("SET_NODE_DATA",t,{outerFrame:null})}),this.mindMap.emit("outer_frame_delete")}updateActiveOuterFrame(t={}){if(!this.activeOuterFrame)return;const{node:e,range:n}=this.activeOuterFrame;this.getRangeNodeList(e,n).forEach(e=>{const n=e.getData("outerFrame");this.mindMap.execCommand("SET_NODE_DATA",e,{outerFrame:{...n,...t}})})}getRangeNodeList(t,e){return t.children.slice(e[0],e[1]+1).filter(t=>t.getData("outerFrame"))}renderOuterFrames(){this.clearOuterFrameElList();let t=this.mindMap.renderer.root;if(!t)return;const e=this.mindMap.draw.transform(),{outerFramePaddingX:n,outerFramePaddingY:i}=this.mindMap.opt;Object(r["qb"])(t,null,t=>{if(!t)return;const s=o(t);s&&s.length>0&&s.forEach(({nodeList:o,range:s})=>{if(-1===s[0]||-1===s[1])return;const{left:a,top:l,width:c,height:h}=Object(r["D"])(o);if(!Number.isFinite(a)||!Number.isFinite(l)||!Number.isFinite(c)||!Number.isFinite(h))return;const u=this.createOuterFrameEl((a-n-this.mindMap.elRect.left-e.translateX)/e.scaleX,(l-i-this.mindMap.elRect.top-e.translateY)/e.scaleY,(c+2*n)/e.scaleX,(h+2*i)/e.scaleY,o[0].getData("outerFrame"));u.on("click",e=>{e.stopPropagation(),this.setActiveOuterFrame(u,t,s)})})},()=>{},!0,0)}setActiveOuterFrame(t,e,n){this.mindMap.execCommand("CLEAR_ACTIVE_NODE"),this.clearActiveOuterFrame(),this.activeOuterFrame={el:t,node:e,range:n},t.stroke({dasharray:"none"}),this.mindMap.emit("outer_frame_active",t,e,n)}clearActiveOuterFrame(){if(!this.activeOuterFrame)return;const{el:t}=this.activeOuterFrame;t.stroke({dasharray:t.cacheStyle.dasharray||s.strokeDasharray}),this.activeOuterFrame=null}createOuterFrameEl(t,e,n,r,i={}){i={...s,...i};const o=this.draw.rect().size(n,r).radius(i.radius).stroke({width:i.strokeWidth,color:i.strokeColor,dasharray:i.strokeDasharray}).fill({color:i.fill}).x(t).y(e);return o.cacheStyle={dasharray:i.strokeDasharray},this.outerFrameElList.push(o),o}clearOuterFrameElList(){this.outerFrameElList.forEach(t=>{t.remove()}),this.outerFrameElList=[],this.activeOuterFrame=null}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}a.instanceName="outerFrame",e["a"]=a},"2f74":function(t,e,n){"use strict";function r(){return!1}e["a"]=r},"34b4":function(t,e,n){"use strict";var r=n("d056"),i=n("e047"),o=n("09a0");class s{constructor(t){this.mindMap=t,this.autoMoveTimer=null}onMove(t,e,n=(()=>{}),r=(()=>{})){n();let i=this.mindMap.opt.selectTranslateStep,o=this.mindMap.opt.selectTranslateLimit,s=0;t<=this.mindMap.elRect.left+o&&(r("left",i),this.mindMap.view.translateX(i),s++),t>=this.mindMap.elRect.right-o&&(r("right",i),this.mindMap.view.translateX(-i),s++),e<=this.mindMap.elRect.top+o&&(r("top",i),this.mindMap.view.translateY(i),s++),e>=this.mindMap.elRect.bottom-o&&(r("bottom",i),this.mindMap.view.translateY(-i),s++),s>0&&this.startAutoMove(t,e,n,r)}startAutoMove(t,e,n,r){this.autoMoveTimer=setTimeout(()=>{this.onMove(t,e,n,r)},20)}clearAutoMoveTimer(){clearTimeout(this.autoMoveTimer)}}var a=s;class l extends i["a"]{constructor({mindMap:t}){super(t.renderer),this.mindMap=t,this.autoMove=new a(t),this.reset(),this.bindEvent()}reset(){this.isDragging=!1,this.mousedownNode=null,this.beingDragNodeList=[],this.nodeList=[],this.overlapNode=null,this.prevNode=null,this.nextNode=null,this.drawTransform=null,this.clone=null,this.placeholder=null,this.placeholderWidth=50,this.placeholderHeight=10,this.placeHolderLine=null,this.placeHolderExtraLines=[],this.offsetX=0,this.offsetY=0,this.isMousedown=!1,this.mouseDownX=0,this.mouseDownY=0,this.mouseMoveX=0,this.mouseMoveY=0,this.checkDragOffset=10,this.minOffset=10}bindEvent(){this.onNodeMousedown=this.onNodeMousedown.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseup=this.onMouseup.bind(this),this.checkOverlapNode=Object(r["ob"])(this.checkOverlapNode,300,this),this.mindMap.on("node_mousedown",this.onNodeMousedown),this.mindMap.on("mousemove",this.onMousemove),this.mindMap.on("node_mouseup",this.onMouseup),this.mindMap.on("mouseup",this.onMouseup)}unBindEvent(){this.mindMap.off("node_mousedown",this.onNodeMousedown),this.mindMap.off("mousemove",this.onMousemove),this.mindMap.off("node_mouseup",this.onMouseup),this.mindMap.off("mouseup",this.onMouseup)}onNodeMousedown(t,e){if(this.mindMap.opt.readonly||1!==e.which||t.isGeneralization||t.isRoot)return;this.isMousedown=!0,this.mousedownNode=t;const{x:n,y:r}=this.mindMap.toPos(e.clientX,e.clientY);this.mouseDownX=n,this.mouseDownY=r}onMousemove(t){if(this.mindMap.opt.readonly||!this.isMousedown)return;t.preventDefault();const{x:e,y:n}=this.mindMap.toPos(t.clientX,t.clientY);this.mouseMoveX=e,this.mouseMoveY=n,!this.isDragging&&Math.abs(e-this.mouseDownX)<=this.checkDragOffset&&Math.abs(n-this.mouseDownY)<=this.checkDragOffset||(this.mindMap.emit("node_dragging",this.mousedownNode),this.handleStartMove(),this.onMove(e,n,t))}async onMouseup(t){if(!this.isMousedown)return;const{autoMoveWhenMouseInEdgeOnDrag:e,enableFreeDrag:n,beforeDragEnd:r}=this.mindMap.opt;e&&this.mindMap.select&&this.autoMove.clearAutoMoveTimer(),this.isMousedown=!1,this.beingDragNodeList.forEach(t=>{t.setOpacity(1),t.showChildren(),t.endDrag()}),this.removeCloneNode();let i=this.overlapNode?this.overlapNode.getData("uid"):"",o=this.prevNode?this.prevNode.getData("uid"):"",s=this.nextNode?this.nextNode.getData("uid"):"";if(this.isDragging&&"function"===typeof r){const t=await r({overlapNodeUid:i,prevNodeUid:o,nextNodeUid:s,beingDragNodeList:[...this.beingDragNodeList]});if(t)return void this.reset()}if(this.overlapNode)this.removeNodeActive(this.overlapNode),this.mindMap.execCommand("MOVE_NODE_TO",this.beingDragNodeList,this.overlapNode);else if(this.prevNode)this.removeNodeActive(this.prevNode),this.mindMap.execCommand("INSERT_AFTER",this.beingDragNodeList,this.prevNode);else if(this.nextNode)this.removeNodeActive(this.nextNode),this.mindMap.execCommand("INSERT_BEFORE",this.beingDragNodeList,this.nextNode);else if(this.clone&&n&&1===this.beingDragNodeList.length){let{x:e,y:n}=this.mindMap.toPos(t.clientX-this.offsetX,t.clientY-this.offsetY),{scaleX:r,scaleY:i,translateX:o,translateY:s}=this.drawTransform;e=(e-o)/r,n=(n-s)/i,this.mousedownNode.left=e,this.mousedownNode.top=n,this.mousedownNode.customLeft=e,this.mousedownNode.customTop=n,this.mindMap.execCommand("SET_NODE_CUSTOM_POSITION",this.mousedownNode,e,n),this.mindMap.render()}this.isDragging&&this.mindMap.emit("node_dragend",{overlapNodeUid:i,prevNodeUid:o,nextNodeUid:s}),this.reset()}removeNodeActive(t){t.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",t,!1)}onMove(t,e,n){if(!this.isMousedown||!this.isDragging)return;let{scaleX:r,scaleY:i,translateX:o,translateY:s}=this.drawTransform,a=t-this.offsetX,l=e-this.offsetY;t=(a-o)/r,e=(l-s)/i;let c=this.clone.transform();this.clone.translate(t-c.translateX,e-c.translateY),this.checkOverlapNode(),this.drawTransform=this.mindMap.draw.transform(),this.autoMove.clearAutoMoveTimer(),this.autoMove.onMove(n.clientX,n.clientY)}async handleStartMove(){if(!this.isDragging){let t=this.mousedownNode;this.drawTransform=this.mindMap.draw.transform();let{scaleX:e,scaleY:n,translateX:i,translateY:o}=this.drawTransform;this.offsetX=this.mouseDownX-(t.left*e+i),this.offsetY=this.mouseDownY-(t.top*n+o),t.getData("isActive")?this.beingDragNodeList=Object(r["nb"])(Object(r["J"])(this.mindMap.renderer.activeNodeList.filter(t=>!t.isRoot&&!t.isGeneralization))):this.beingDragNodeList=[t];const{beforeDragStart:s}=this.mindMap.opt;if("function"===typeof s){const t=await s([...this.beingDragNodeList]);if(t)return}this.nodeTreeToList(),this.createCloneNode(),this.mindMap.execCommand("CLEAR_ACTIVE_NODE"),this.isDragging=!0}}nodeTreeToList(){const t=[];Object(r["e"])(this.mindMap.renderer.root,e=>{this.checkIsInBeingDragNodeList(e)||(t[e.layerIndex]||(t[e.layerIndex]=[]),t[e.layerIndex].push(e))}),this.nodeList=t.reduceRight((t,e)=>[...t,...e],[])}createCloneNode(){if(!this.clone){const{dragMultiNodeRectConfig:t,dragPlaceholderRectFill:e,dragPlaceholderLineConfig:n,dragOpacityConfig:r,handleDragCloneNode:i}=this.mindMap.opt,{width:o,height:s,fill:a}=t,l=this.beingDragNodeList[0],c=l.style.merge("lineColor",!0);if(this.beingDragNodeList.length>1)this.clone=this.mindMap.otherDraw.rect().size(o,s).radius(s/2).fill({color:a||c}),this.offsetX=o/2,this.offsetY=s/2;else{this.clone=l.group.clone();const t=this.clone.findOne(".smm-expand-btn");t&&t.remove(),this.mindMap.otherDraw.add(this.clone),"function"===typeof i&&i(this.clone)}this.clone.opacity(r.cloneNodeOpacity),this.clone.css("z-index",99999),this.placeholder=this.mindMap.otherDraw.rect().fill({color:e||c}).radius(5),this.placeHolderLine=this.mindMap.otherDraw.path().stroke({color:n.color||c,width:n.width}).fill({color:"none"}),this.beingDragNodeList.forEach(t=>{t.setOpacity(r.beingDragNodeOpacity),t.hideChildren(),t.startDrag()})}}removeCloneNode(){this.clone&&(this.clone.remove(),this.placeholder.remove(),this.placeHolderLine.remove(),this.removeExtraLines())}removeExtraLines(){this.placeHolderExtraLines.forEach(t=>{t.remove()}),this.placeHolderExtraLines=[]}checkOverlapNode(){if(!this.drawTransform||!this.placeholder)return;const{LOGICAL_STRUCTURE:t,LOGICAL_STRUCTURE_LEFT:e,MIND_MAP:n,ORGANIZATION_STRUCTURE:r,CATALOG_ORGANIZATION:i,TIMELINE:s,TIMELINE2:a,VERTICAL_TIMELINE:l,FISHBONE:c}=o["a"].LAYOUT;this.overlapNode=null,this.prevNode=null,this.nextNode=null,this.placeholder.size(0,0),this.placeHolderLine.hide(),this.removeExtraLines(),this.nodeList.forEach(o=>{if(o.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",o,!1),!(this.overlapNode||this.prevNode&&this.nextNode))switch(this.mindMap.opt.layout){case t:case e:this.handleLogicalStructure(o);break;case n:this.handleMindMap(o);break;case r:this.handleOrganizationStructure(o);break;case i:this.handleCatalogOrganization(o);break;case s:this.handleTimeLine(o);break;case a:this.handleTimeLine2(o);break;case l:this.handleLogicalStructure(o);break;case c:this.handleFishbone(o);break;default:this.handleLogicalStructure(o)}}),this.overlapNode&&this.handleOverlapNode()}handleOverlapNode(){const{LOGICAL_STRUCTURE:t,LOGICAL_STRUCTURE_LEFT:e,MIND_MAP:n,ORGANIZATION_STRUCTURE:r,CATALOG_ORGANIZATION:i,TIMELINE:s,TIMELINE2:a,VERTICAL_TIMELINE:l,FISHBONE:c}=o["a"].LAYOUT,{LEFT:h,TOP:u,RIGHT:d,BOTTOM:f}=o["a"].LAYOUT_GROW_DIR,p=this.overlapNode.layerIndex,m=this.overlapNode.children,g=this.mindMap.renderer.layout.getMarginX(p+1),v=this.mindMap.renderer.layout.getMarginY(p+1),y=this.placeholderWidth/2,b=this.placeholderHeight/2;let w="",x="",C="",E=!1,k=!1;if(m.length>0){const o=m[m.length-1],f=this.getNodeRect(o);switch(w=this.getNewChildNodeDir(o),this.mindMap.opt.layout){case t:case n:x=w===h?f.originRight-this.placeholderWidth:f.originLeft,C=f.originBottom+this.minOffset-b;break;case e:x=f.originRight-this.placeholderWidth,C=f.originBottom+this.minOffset-b;break;case r:E=!0,x=f.originRight+this.minOffset-b,C=f.originTop;break;case i:0===p?(E=!0,x=f.originRight+this.minOffset-b,C=f.originTop):(x=f.originLeft,C=f.originBottom+this.minOffset-b);break;case s:0===p?(E=!0,x=f.originRight+this.minOffset-b,C=f.originTop+f.originHeight/2-y):(x=f.originLeft,C=f.originBottom+this.minOffset-b);break;case a:0===p?(E=!0,x=f.originRight+this.minOffset-b,C=f.originTop+f.originHeight/2-y):(x=f.originLeft,C=1===p&&w===u?f.originTop-this.placeholderHeight-this.minOffset+b:f.originBottom+this.minOffset-b);break;case l:0===p?(x=f.originLeft+f.originWidth/2-y,C=f.originBottom+this.minOffset-b):(x=w===d?f.originLeft:f.originRight-this.placeholderWidth,C=f.originBottom+this.minOffset-b);break;case c:p<=1?(k=!0,this.mindMap.execCommand("SET_NODE_ACTIVE",this.overlapNode,!0)):(x=f.originLeft,C=w===u?f.originBottom+this.minOffset-b:f.originTop-this.placeholderHeight-this.minOffset+b);break;default:}}else{const o=this.getNodeRect(this.overlapNode);switch(w=this.getNewChildNodeDir(this.overlapNode),this.mindMap.opt.layout){case t:case n:x=w===d?o.originRight+g:o.originLeft-this.placeholderWidth-g,C=o.originTop+(o.originHeight-this.placeholderHeight)/2;break;case e:x=o.originLeft-this.placeholderWidth-g,C=o.originTop+(o.originHeight-this.placeholderHeight)/2;break;case r:E=!0,x=o.originLeft+(o.originWidth-this.placeholderHeight)/2,C=o.originBottom+g;break;case i:0===p&&(E=!0),x=o.originLeft+.5*o.originWidth,C=o.originBottom+g;break;case s:0===p&&(E=!0),x=o.originLeft+.5*o.originWidth,C=o.originBottom+v;break;case a:0===p&&(E=!0),x=o.originLeft+.5*o.originWidth,C=1===p&&w===u?o.originTop-this.placeholderHeight-g:o.originBottom+g;break;case l:0===p&&(E=!0),x=w===d?o.originRight+g:o.originLeft-this.placeholderWidth-g,C=o.originTop+o.originHeight/2-b;break;case c:p<=1?(k=!0,this.mindMap.execCommand("SET_NODE_ACTIVE",this.overlapNode,!0)):(x=o.originLeft+.5*o.originWidth,C=w===f?o.originTop-this.placeholderHeight-this.minOffset+b:o.originBottom+this.minOffset-b);break;default:}}k||this.setPlaceholderRect({x:x,y:C,dir:w,rotate:E})}getNewChildNodeDir(t){const{LOGICAL_STRUCTURE:e,LOGICAL_STRUCTURE_LEFT:n,MIND_MAP:r,TIMELINE2:i,VERTICAL_TIMELINE:s,FISHBONE:a}=o["a"].LAYOUT;switch(this.mindMap.opt.layout){case e:return o["a"].LAYOUT_GROW_DIR.RIGHT;case n:return o["a"].LAYOUT_GROW_DIR.LEFT;case r:case i:case s:case a:return t.dir;default:return""}}handleVerticalCheck(t,e,n=!1){const{layout:r}=this.mindMap.opt,{LAYOUT:i,LAYOUT_GROW_DIR:s}=o["a"],{VERTICAL_TIMELINE:a,FISHBONE:l}=i,{BOTTOM:c,LEFT:h}=s,u=this.mouseMoveX,d=this.mouseMoveY,f=this.getNodeRect(t),p=this.getNewChildNodeDir(t),m=t.layerIndex;(n||r===l&&p===c&&m>=3)&&(e=e.reverse());let g=f.originHeight/4,{prevBrotherOffset:v,nextBrotherOffset:y}=this.getNodeDistanceToSiblingNode(e,t,f,"v");if(f.left<=u&&f.right>=u){if(!this.overlapNode&&!this.prevNode&&!this.nextNode&&!t.isRoot){let e=y>0?d>f.bottom&&d<=f.bottom+y:d>=f.bottom-g&&d<=f.bottom,i=v>0?d<f.top&&d>=f.top-v:d>=f.top&&d<=f.top+g;const{scaleY:o}=this.drawTransform;let s=p===h?f.originRight-this.placeholderWidth:f.originLeft,c=!1;switch(r){case a:1===m&&(s=f.originLeft+f.originWidth/2-this.placeholderWidth/2);break;default:}if(e){n?this.nextNode=t:this.prevNode=t;let e=f.originBottom+y/o-this.placeholderHeight/2;switch(r){case l:2===m&&(c=!0,e=f.originBottom+this.minOffset-this.placeholderHeight/2);break;default:}this.setPlaceholderRect({x:s,y:e,dir:p,notRenderLine:c})}else if(i){n?this.prevNode=t:this.nextNode=t;let e=f.originTop-this.placeholderHeight-v/o+this.placeholderHeight/2;switch(r){case l:2===m&&(c=!0,e=f.originTop-this.placeholderHeight-this.minOffset+this.placeholderHeight/2);break;default:}this.setPlaceholderRect({x:s,y:e,dir:p,notRenderLine:c})}}this.checkIsOverlap({node:t,dir:"v",prevBrotherOffset:v,nextBrotherOffset:y,size:g,pos:d,nodeRect:f})}}handleHorizontalCheck(t,e){const{layout:n}=this.mindMap.opt,{LAYOUT:r}=o["a"],{FISHBONE:i,TIMELINE:s,TIMELINE2:a}=r;let l=this.mouseMoveX,c=this.mouseMoveY,h=this.getNodeRect(t),u=h.originWidth/4,{prevBrotherOffset:d,nextBrotherOffset:f}=this.getNodeDistanceToSiblingNode(e,t,h,"h");if(h.top<=c&&h.bottom>=c){if(!this.overlapNode&&!this.prevNode&&!this.nextNode&&!t.isRoot){let e=f>0?l<h.right+f&&l>=h.right:l<=h.right&&l>=h.right-u,r=d>0?l>h.left-d&&l<=h.left:l<=h.left+u&&l>=h.left;const{scaleX:o}=this.drawTransform,c=t.layerIndex;let p=h.originTop,m=!1;switch(n){case s:case a:p=h.originTop+h.originHeight/2-this.placeholderWidth/2;break;case i:1===c&&(m=!0,p=h.originTop+h.originHeight/2-this.placeholderWidth/2);break;default:}e?(this.prevNode=t,this.setPlaceholderRect({x:h.originRight+f/o-this.placeholderHeight/2,y:p,rotate:!0,notRenderLine:m})):r&&(this.nextNode=t,this.setPlaceholderRect({x:h.originLeft-this.placeholderHeight-d/o+this.placeholderHeight/2,y:p,rotate:!0,notRenderLine:m}))}this.checkIsOverlap({node:t,dir:"h",prevBrotherOffset:d,nextBrotherOffset:f,size:u,pos:l,nodeRect:h})}}getNodeDistanceToSiblingNode(t,e,n,i){const{TOP:s,LEFT:a,BOTTOM:l,RIGHT:c}=o["a"].LAYOUT_GROW_DIR;let{scaleX:h,scaleY:u}=this.drawTransform,d="v"===i?s:a,f="v"===i?l:c,p="v"===i?u:h,m=this.minOffset*p,g=Object(r["C"])(e,t),v=null,y=null;-1!==g&&(g-1>=0&&(v=t[g-1]),g+1<=t.length-1&&(y=t[g+1]));let b=0;if(v){let t=this.getNodeRect(v);b=n[d]-t[f],b=b>=m?b/2:0}else b=m;let w=0;if(y){let t=this.getNodeRect(y);w=t[d]-n[f],w=w>=m?w/2:0}else w=m;return{prevBrother:v,prevBrotherOffset:b,nextBrother:y,nextBrotherOffset:w}}setPlaceholderRect({x:t,y:e,dir:n,rotate:r,notRenderLine:i}){let o=this.placeholderWidth,s=this.placeholderHeight;if(r){const t=o;o=s,s=t}if(this.placeholder.size(o,s).move(t,e),i)return;const{dragPlaceholderLineConfig:a}=this.mindMap.opt;let l=null,c=null;this.overlapNode?(l=this.overlapNode,c=this.overlapNode):(l=this.prevNode||this.nextNode,c=l.parent),c=c.fakeClone(),l=l.fakeClone();const h=this.beingDragNodeList[0].fakeClone();h.dir=n,h.left=t,h.top=e,h.width=o,h.height=s,c.children=[h],c._lines=[],this.placeHolderLine.show(),this.mindMap.renderer.layout.renderLine(c,[this.placeHolderLine],(...t)=>{},l.style.getStyle("lineStyle",!0)),this.placeHolderExtraLines=[...c._lines],this.placeHolderExtraLines.forEach(t=>{this.mindMap.otherDraw.add(t),t.stroke({color:a.color,width:a.width}).fill({color:"none"})})}checkIsOverlap({node:t,dir:e,prevBrotherOffset:n,nextBrotherOffset:r,size:i,pos:s,nodeRect:a}){const{TOP:l,LEFT:c,BOTTOM:h,RIGHT:u}=o["a"].LAYOUT_GROW_DIR;let d="v"===e?l:c,f="v"===e?h:u;this.overlapNode||this.prevNode||this.nextNode||a[d]+(n>0?0:i)<=s&&a[f]-(r>0?0:i)>=s&&(this.overlapNode=t)}handleLogicalStructure(t){const e=this.commonGetNodeCheckList(t);this.handleVerticalCheck(t,e)}handleMindMap(t){const e=t.parent?t.parent.children.filter(e=>{let n=!0;return 1===t.layerIndex&&(n=e.dir===t.dir),n&&!this.checkIsInBeingDragNodeList(e)}):[];this.handleVerticalCheck(t,e)}handleOrganizationStructure(t){const e=this.commonGetNodeCheckList(t);this.handleHorizontalCheck(t,e)}handleCatalogOrganization(t){const e=this.commonGetNodeCheckList(t);1===t.layerIndex?this.handleHorizontalCheck(t,e):this.handleVerticalCheck(t,e)}handleTimeLine(t){let e=this.commonGetNodeCheckList(t);1===t.layerIndex?this.handleHorizontalCheck(t,e):this.handleVerticalCheck(t,e)}handleTimeLine2(t){let e=this.commonGetNodeCheckList(t);1===t.layerIndex?this.handleHorizontalCheck(t,e):t.dir===o["a"].LAYOUT_GROW_DIR.TOP&&2===t.layerIndex?this.handleVerticalCheck(t,e,!0):this.handleVerticalCheck(t,e)}handleFishbone(t){let e=t.parent?t.parent.children.filter(t=>t.layerIndex>1&&!this.checkIsInBeingDragNodeList(t)):[];1===t.layerIndex?this.handleHorizontalCheck(t,e):t.dir===o["a"].LAYOUT_GROW_DIR.TOP&&2===t.layerIndex?this.handleVerticalCheck(t,e,!0):this.handleVerticalCheck(t,e)}commonGetNodeCheckList(t){return t.parent?[...t.parent.children].filter(t=>!this.checkIsInBeingDragNodeList(t)):[]}getNodeRect(t){let{scaleX:e,scaleY:n,translateX:r,translateY:i}=this.drawTransform,{left:o,top:s,width:a,height:l}=t,c=a,h=l,u=o,d=s,f=s+l,p=o+a,m=(o+a)*e+r,g=(s+l)*n+i;return o=o*e+r,s=s*n+i,{left:o,top:s,right:m,bottom:g,originWidth:c,originHeight:h,originLeft:u,originTop:d,originBottom:f,originRight:p}}checkIsInBeingDragNodeList(t){return!!this.beingDragNodeList.find(e=>e.uid===t.uid||e.isAncestor(t))}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}l.instanceName="drag";e["a"]=l},"442c":function(t,e,n){"use strict";n.d(e,"a",(function(){return F})),n.d(e,"b",(function(){return R})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return E})),n.d(e,"h",(function(){return L})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return S}));var r=n("b923"),i=n("6f27"),o=n("6ffb");const s=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function a(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const l=(t,e,n)=>{let s=a(t,n);if(!s)return!1;let l=u(s);if(!l){let n=s.blockRange(),i=n&&Object(r["k"])(n);return null!=i&&(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)}let h=l.nodeBefore;if(N(t,l,e,-1))return!0;if(0==s.parent.content.size&&(c(h,"end")||o["c"].isSelectable(h)))for(let a=s.depth;;a--){let n=Object(r["l"])(t.doc,s.before(a),s.after(a),i["j"].empty);if(n&&n.slice.size<n.to-n.from){if(e){let r=t.tr.step(n);r.setSelection(c(h,"end")?o["f"].findFrom(r.doc.resolve(r.mapping.map(l.pos,-1)),-1):o["c"].create(r.doc,l.pos-h.nodeSize)),e(r.scrollIntoView())}return!0}if(1==a||s.node(a-1).childCount>1)break}return!(!h.isAtom||l.depth!=s.depth-1)&&(e&&e(t.tr.delete(l.pos-h.nodeSize,l.pos).scrollIntoView()),!0)};function c(t,e,n=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const h=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=u(r)}let a=s&&s.nodeBefore;return!(!a||!o["c"].isSelectable(a))&&(e&&e(t.tr.setSelection(o["c"].create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function u(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function d(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const f=(t,e,n)=>{let s=d(t,n);if(!s)return!1;let a=m(s);if(!a)return!1;let l=a.nodeAfter;if(N(t,a,e,1))return!0;if(0==s.parent.content.size&&(c(l,"start")||o["c"].isSelectable(l))){let n=Object(r["l"])(t.doc,s.before(),s.after(),i["j"].empty);if(n&&n.slice.size<n.to-n.from){if(e){let r=t.tr.step(n);r.setSelection(c(l,"start")?o["f"].findFrom(r.doc.resolve(r.mapping.map(a.pos)),1):o["c"].create(r.doc,r.mapping.map(a.pos))),e(r.scrollIntoView())}return!0}}return!(!l.isAtom||a.depth!=s.depth-1)&&(e&&e(t.tr.delete(a.pos,a.pos+l.nodeSize).scrollIntoView()),!0)},p=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=m(r)}let a=s&&s.nodeAfter;return!(!a||!o["c"].isSelectable(a))&&(e&&e(t.tr.setSelection(o["c"].create(t.doc,s.pos)).scrollIntoView()),!0)};function m(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const g=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function v(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const y=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=v(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let r=n.after(),i=t.tr.replaceWith(r,r,a.createAndFill());i.setSelection(o["f"].near(i.doc.resolve(r),1)),e(i.scrollIntoView())}return!0},b=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof o["a"]||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=v(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(n,s.createAndFill());a.setSelection(o["h"].create(a.doc,n+1)),e(a.scrollIntoView())}return!0},w=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Object(r["g"])(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let i=n.blockRange(),o=i&&Object(r["k"])(i);return null!=o&&(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)};function x(t){return(e,n)=>{let{$from:i,$to:s}=e.selection;if(e.selection instanceof o["c"]&&e.selection.node.isBlock)return!(!i.parentOffset||!Object(r["g"])(e.doc,i.pos))&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let a,l,c=[],h=!1,u=!1;for(let r=i.depth;;r--){let e=i.node(r);if(e.isBlock){h=i.end(r)==i.pos+(i.depth-r),u=i.start(r)==i.pos-(i.depth-r),l=v(i.node(r-1).contentMatchAt(i.indexAfter(r-1)));let e=t&&t(s.parent,h,i);c.unshift(e||(h&&l?{type:l}:null)),a=r;break}if(1==r)return!1;c.unshift(null)}let d=e.tr;(e.selection instanceof o["h"]||e.selection instanceof o["a"])&&d.deleteSelection();let f=d.mapping.map(i.pos),p=Object(r["g"])(d.doc,f,c.length,c);if(p||(c[0]=l?{type:l}:null,p=Object(r["g"])(d.doc,f,c.length,c)),d.split(f,c.length,c),!h&&u&&i.node(a).type!=l){let t=d.mapping.map(i.before(a)),e=d.doc.resolve(t);l&&i.node(a-1).canReplaceWith(e.index(),e.index()+1,l)&&d.setNodeMarkup(d.mapping.map(i.before(a)),l)}return n&&n(d.scrollIntoView()),!0}}const C=x(),E=(t,e)=>(e&&e(t.tr.setSelection(new o["a"](t.doc))),!0);function k(t,e,n){let i=e.nodeBefore,o=e.nodeAfter,s=e.index();return!!(i&&o&&i.type.compatibleContent(o.type))&&(!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(s,s+1)||!o.isTextblock&&!Object(r["f"])(t.doc,e.pos))&&(n&&n(t.tr.join(e.pos).scrollIntoView()),!0))}function N(t,e,n,s){let a,l,h=e.nodeBefore,u=e.nodeAfter,d=h.type.spec.isolating||u.type.spec.isolating;if(!d&&k(t,e,n))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(l=h.contentMatchAt(h.childCount)).findWrapping(u.type))&&l.matchType(a[0]||u.type).validEnd){if(n){let o=e.pos+u.nodeSize,s=i["c"].empty;for(let t=a.length-1;t>=0;t--)s=i["c"].from(a[t].create(null,s));s=i["c"].from(h.copy(s));let l=t.tr.step(new r["b"](e.pos-1,o,e.pos,o,new i["j"](s,1,0),a.length,!0)),c=l.doc.resolve(o+2*a.length);c.nodeAfter&&c.nodeAfter.type==h.type&&Object(r["f"])(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let p=u.type.spec.isolating||s>0&&d?null:o["f"].findFrom(e,1),m=p&&p.$from.blockRange(p.$to),g=m&&Object(r["k"])(m);if(null!=g&&g>=e.depth)return n&&n(t.tr.lift(m,g).scrollIntoView()),!0;if(f&&c(u,"start",!0)&&c(h,"end")){let o=h,s=[];for(;;){if(s.push(o),o.isTextblock)break;o=o.lastChild}let a=u,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(o.canReplace(o.childCount,o.childCount,a.content)){if(n){let o=i["c"].empty;for(let t=s.length-1;t>=0;t--)o=i["c"].from(s[t].copy(o));let a=t.tr.step(new r["b"](e.pos-s.length,e.pos+u.nodeSize,e.pos+l,e.pos+u.nodeSize-l,new i["j"](o,s.length,0),0,!0));n(a.scrollIntoView())}return!0}}return!1}function O(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;while(i.node(s).isInline){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(n&&n(e.tr.setSelection(o["h"].create(e.doc,t<0?i.start(s):i.end(s)))),!0)}}const T=O(-1),M=O(1);function S(t,e=null){return function(n,i){let{$from:o,$to:s}=n.selection,a=o.blockRange(s),l=a&&Object(r["i"])(a,t,e);return!!l&&(i&&i(n.tr.wrap(a,l).scrollIntoView()),!0)}}function L(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,(r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)i=!0;else{let e=n.doc.resolve(o),r=e.index();i=e.parent.canReplaceWith(r,r+1,t)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,t,e)}r(i.scrollIntoView())}return!0}}function A(t,e,n,r){for(let i=0;i<e.length;i++){let{$from:o,$to:s}=e[i],a=0==o.depth&&(t.inlineContent&&t.type.allowsMarkType(n));if(t.nodesBetween(o.pos,s.pos,(t,e)=>{if(a||!r&&t.isAtom&&t.isInline&&e>=o.pos&&e+t.nodeSize<=s.pos)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)}),a)return!0}return!1}function D(t){let e=[];for(let n=0;n<t.length;n++){let{$from:r,$to:i}=t[n];r.doc.nodesBetween(r.pos,i.pos,(t,n)=>{if(t.isAtom&&t.content.size&&t.isInline&&n>=r.pos&&n+t.nodeSize<=i.pos)return n+1>r.pos&&e.push(new o["g"](r,r.doc.resolve(n+1))),r=r.doc.resolve(n+1+t.content.size),!1}),r.pos<i.pos&&e.push(new o["g"](r,i))}return e}function _(t,e=null,n){let r=!1!==(n&&n.removeWhenPresent),i=!1!==(n&&n.enterInlineAtoms);return function(n,o){let{empty:s,$cursor:a,ranges:l}=n.selection;if(s&&!a||!A(n.doc,l,t,i))return!1;if(o)if(a)t.isInSet(n.storedMarks||a.marks())?o(n.tr.removeStoredMark(t)):o(n.tr.addStoredMark(t.create(e)));else{let s,a=n.tr;i||(l=D(l)),s=r?!l.some(e=>n.doc.rangeHasMark(e.$from.pos,e.$to.pos,t)):!l.every(e=>{let n=!1;return a.doc.nodesBetween(e.$from.pos,e.$to.pos,(r,i,o)=>{if(n)return!1;n=!t.isInSet(r.marks)&&!!o&&o.type.allowsMarkType(t)&&!(r.isText&&/^\s*$/.test(r.textBetween(Math.max(0,e.$from.pos-i),Math.min(r.nodeSize,e.$to.pos-i))))}),!n});for(let n=0;n<l.length;n++){let{$from:r,$to:i}=l[n];if(s){let n=r.pos,o=i.pos,s=r.nodeAfter,l=i.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,h=l&&l.isText?/\s*$/.exec(l.text)[0].length:0;n+c<o&&(n+=c,o-=h),a.addMark(n,o,t.create(e))}else a.removeMark(r.pos,i.pos,t)}o(a.scrollIntoView())}return!0}}function R(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let P=R(s,l,h),I=R(s,f,p);const j={Enter:R(g,b,w,C),"Mod-Enter":y,Backspace:P,"Mod-Backspace":P,"Shift-Backspace":P,Delete:I,"Mod-Delete":I,"Mod-a":E},z={"Ctrl-h":j["Backspace"],"Alt-Backspace":j["Mod-Backspace"],"Ctrl-d":j["Delete"],"Ctrl-Alt-Backspace":j["Mod-Delete"],"Alt-Delete":j["Mod-Delete"],"Alt-d":j["Mod-Delete"],"Ctrl-a":T,"Ctrl-e":M};for(let H in j)z[H]=j[H];const B="undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform(),F=B?z:j},"48d1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const r=n("d307"),i=n("cd3f"),o=n("5da1"),s=n("e3f4");e.AttributeMap=s.default;const a=n("5377");e.Op=a.default;const l=n("4da2");e.OpIterator=l.default;const c=String.fromCharCode(0),h=(t,e)=>{if("object"!==typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!==typeof e||null===e)throw new Error("cannot retain a "+typeof e);const n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]};class u{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const n={};return"string"===typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"===typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"===typeof t&&t<=0)return this;const n={retain:t};return null!=e&&"object"===typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)}push(t){let e=this.ops.length,n=this.ops[e-1];if(t=i(t),"object"===typeof n){if("number"===typeof t.delete&&"number"===typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"===typeof n.delete&&null!=t.insert&&(e-=1,n=this.ops[e-1],"object"!==typeof n))return this.ops.unshift(t),this;if(o(t.attributes,n.attributes)){if("string"===typeof t.insert&&"string"===typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"===typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"===typeof t.retain&&"number"===typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"===typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"===typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],n=[];return this.forEach(r=>{const i=t(r)?e:n;i.push(r)}),[e,n]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce((t,e)=>e.insert?t+a.default.length(e):e.delete?t-e.delete:t,0)}length(){return this.reduce((t,e)=>t+a.default.length(e),0)}slice(t=0,e=1/0){const n=[],r=new l.default(this.ops);let i=0;while(i<e&&r.hasNext()){let o;i<t?o=r.next(t-i):(o=r.next(e-i),n.push(o)),i+=a.default.length(o)}return new u(n)}compose(t){const e=new l.default(this.ops),n=new l.default(t.ops),r=[],i=n.peek();if(null!=i&&"number"===typeof i.retain&&null==i.attributes){let t=i.retain;while("insert"===e.peekType()&&e.peekLength()<=t)t-=e.peekLength(),r.push(e.next());i.retain-t>0&&n.next(i.retain-t)}const a=new u(r);while(e.hasNext()||n.hasNext())if("insert"===n.peekType())a.push(n.next());else if("delete"===e.peekType())a.push(e.next());else{const t=Math.min(e.peekLength(),n.peekLength()),r=e.next(t),i=n.next(t);if(i.retain){const l={};if("number"===typeof r.retain)l.retain="number"===typeof i.retain?t:i.retain;else if("number"===typeof i.retain)null==r.retain?l.insert=r.insert:l.retain=r.retain;else{const t=null==r.retain?"insert":"retain",[e,n,o]=h(r[t],i.retain),s=u.getHandler(e);l[t]={[e]:s.compose(n,o,"retain"===t)}}const c=s.default.compose(r.attributes,i.attributes,"number"===typeof r.retain);if(c&&(l.attributes=c),a.push(l),!n.hasNext()&&o(a.ops[a.ops.length-1],l)){const t=new u(e.rest());return a.concat(t).chop()}}else"number"===typeof i.delete&&("number"===typeof r.retain||"object"===typeof r.retain&&null!==r.retain)&&a.push(i)}return a.chop()}concat(t){const e=new u(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new u;const n=[this,t].map(e=>e.map(n=>{if(null!=n.insert)return"string"===typeof n.insert?n.insert:c;const r=e===t?"on":"with";throw new Error("diff() called "+r+" non-document")}).join("")),i=new u,a=r(n[0],n[1],e,!0),h=new l.default(this.ops),d=new l.default(t.ops);return a.forEach(t=>{let e=t[1].length;while(e>0){let n=0;switch(t[0]){case r.INSERT:n=Math.min(d.peekLength(),e),i.push(d.next(n));break;case r.DELETE:n=Math.min(e,h.peekLength()),h.next(n),i.delete(n);break;case r.EQUAL:n=Math.min(h.peekLength(),d.peekLength(),e);const t=h.next(n),a=d.next(n);o(t.insert,a.insert)?i.retain(n,s.default.diff(t.attributes,a.attributes)):i.push(a).delete(n);break}e-=n}}),i.chop()}eachLine(t,e="\n"){const n=new l.default(this.ops);let r=new u,i=0;while(n.hasNext()){if("insert"!==n.peekType())return;const o=n.peek(),s=a.default.length(o)-n.peekLength(),l="string"===typeof o.insert?o.insert.indexOf(e,s)-s:-1;if(l<0)r.push(n.next());else if(l>0)r.push(n.next(l));else{if(!1===t(r,n.next(1).attributes||{},i))return;i+=1,r=new u}}r.length()>0&&t(r,{},i)}invert(t){const e=new u;return this.reduce((n,r)=>{if(r.insert)e.delete(a.default.length(r));else{if("number"===typeof r.retain&&null==r.attributes)return e.retain(r.retain),n+r.retain;if(r.delete||"number"===typeof r.retain){const i=r.delete||r.retain,o=t.slice(n,n+i);return o.forEach(t=>{r.delete?e.push(t):r.retain&&r.attributes&&e.retain(a.default.length(t),s.default.invert(r.attributes,t.attributes))}),n+i}if("object"===typeof r.retain&&null!==r.retain){const i=t.slice(n,n+1),o=new l.default(i.ops).next(),[a,c,d]=h(r.retain,o.insert),f=u.getHandler(a);return e.retain({[a]:f.invert(c,d)},s.default.invert(r.attributes,o.attributes)),n+1}}return n},0),e.chop()}transform(t,e=!1){if(e=!!e,"number"===typeof t)return this.transformPosition(t,e);const n=t,r=new l.default(this.ops),i=new l.default(n.ops),o=new u;while(r.hasNext()||i.hasNext())if("insert"!==r.peekType()||!e&&"insert"===i.peekType())if("insert"===i.peekType())o.push(i.next());else{const t=Math.min(r.peekLength(),i.peekLength()),n=r.next(t),a=i.next(t);if(n.delete)continue;if(a.delete)o.push(a);else{const r=n.retain,i=a.retain;let l="object"===typeof i&&null!==i?i:t;if("object"===typeof r&&null!==r&&"object"===typeof i&&null!==i){const t=Object.keys(r)[0];if(t===Object.keys(i)[0]){const n=u.getHandler(t);n&&(l={[t]:n.transform(r[t],i[t],e)})}}o.retain(l,s.default.transform(n.attributes,a.attributes,e))}}else o.retain(a.default.length(r.next()));return o.chop()}transformPosition(t,e=!1){e=!!e;const n=new l.default(this.ops);let r=0;while(n.hasNext()&&r<=t){const i=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<t||!e)&&(t+=i),r+=i):t-=Math.min(i,t-r)}return t}}u.Op=a.default,u.OpIterator=l.default,u.AttributeMap=s.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u},"4da2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("5377");class i{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const n=this.offset,i=r.default.length(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"===typeof e.delete)return{delete:t};{const r={};return e.attributes&&(r.attributes=e.attributes),"number"===typeof e.retain?r.retain=t:"object"===typeof e.retain&&null!==e.retain?r.retain=e.retain:"string"===typeof e.insert?r.insert=e.insert.substr(n,t):r.insert=e.insert,r}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"===typeof t.delete?"delete":"number"===typeof t.retain||"object"===typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(r)}}return[]}}e.default=i},5377:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t){return"number"===typeof t.delete?t.delete:"number"===typeof t.retain?t.retain:"object"===typeof t.retain&&null!==t.retain?1:"string"===typeof t.insert?t.insert.length:1}t.length=e}(r||(r={})),e.default=r},5381:function(t,e,n){"use strict";var r=n("2946"),i=n("8dc9"),o=n("4378"),s=n("d056");function a(){const t=this.getData("generalization");return Array.isArray(t)?t:t?[t]:[]}function l(){return this.formatGetGeneralization().length>0}function c(){const t=this.formatGetGeneralization();return!!t.find(t=>!t.range||t.range.length<=0)}function h(t){return this._generalizationList.findIndex(e=>e.generalizationNode.uid===t.uid)}function u(){if(this.isGeneralization||!this.checkHasGeneralization())return;let t=0,e=0;const n=this.formatGetGeneralization();n.forEach((n,r)=>{let i=this._generalizationList[r];i||(i=this._generalizationList[r]={}),i.node=this,i.range=n.range,i.generalizationLine||(i.generalizationLine=this.lineDraw.path()),i.generalizationNode||(i.generalizationNode=new At({data:{inserting:n.inserting,data:n},uid:Object(s["o"])(),renderer:this.renderer,mindMap:this.mindMap,isGeneralization:!0})),delete n.inserting,i.generalizationNode.generalizationBelongNode=this,i.generalizationNode.width>t&&(t=i.generalizationNode.width),i.generalizationNode.height>e&&(e=i.generalizationNode.height),n.isActive&&this.renderer.addNodeToActiveList(i.generalizationNode)}),this._generalizationNodeWidth=t,this._generalizationNodeHeight=e}function d(){this.isGeneralization||(this.removeGeneralization(),this.createGeneralizationNode())}function f(t){if(this.isGeneralization)return;this.updateGeneralizationData();const e=this.formatGetGeneralization();e.length<=0||!1===this.getData("expand")?this.removeGeneralization():(e.length!==this._generalizationList.length&&this.removeGeneralization(),this.createGeneralizationNode(),this.renderer.layout.renderGeneralization(this._generalizationList),this._generalizationList.forEach(e=>{this.style.generalizationLine(e.generalizationLine),e.generalizationNode.render(()=>{},t)}))}function p(){const t=this.nodeData.children.length,e=this.formatGetGeneralization(),n=[];e.forEach(e=>{e.range?e.range.length>0&&e.range[0]<=t-1&&e.range[1]<=t-1&&n.push(e):n.push(e)}),n.length!==e.length&&this.setData({generalization:n})}function m(){this.isGeneralization||(this._generalizationList.forEach(t=>{t.generalizationNode.style.onRemove(),t.generalizationLine&&(t.generalizationLine.remove(),t.generalizationLine=null),t.generalizationNode&&(this.renderer.removeNodeFromActiveList(t.generalizationNode),t.generalizationNode.remove(),t.generalizationNode=null)}),this._generalizationList=[],this.generalizationBelongNode&&this.nodeDraw.find(".generalization_"+this.generalizationBelongNode.uid).remove())}function g(){this.isGeneralization||this._generalizationList.forEach(t=>{t.generalizationLine&&t.generalizationLine.hide(),t.generalizationNode&&t.generalizationNode.hide()})}function v(){this.isGeneralization||this._generalizationList.forEach(t=>{t.generalizationLine&&t.generalizationLine.show(),t.generalizationNode&&t.generalizationNode.show()})}function y(t){this._generalizationList.forEach(e=>{e.generalizationLine.opacity(t),e.generalizationNode.group.opacity(t)})}function b(){const t=this.generalizationBelongNode,e=t.formatGetGeneralization(),n=t.getGeneralizationNodeIndex(this),r=e[n],i=this.getStyle("hoverRectColor"),o=i||this.mindMap.opt.hoverRectColor,s=o?{stroke:o}:null;Array.isArray(r.range)&&r.range.length>0?this.mindMap.renderer.highlightNode(t,r.range,s):this.mindMap.renderer.highlightNode(t,null,s)}function w(){this.mindMap.renderer.closeHighlightNode()}var x={formatGetGeneralization:a,checkHasGeneralization:l,checkHasSelfGeneralization:c,getGeneralizationNodeIndex:h,createGeneralizationNode:u,updateGeneralization:d,updateGeneralizationData:p,renderGeneralization:f,removeGeneralization:m,hideGeneralization:g,showGeneralization:v,setGeneralizationOpacity:y,handleGeneralizationMouseenter:b,handleGeneralizationMouseleave:w},C=n("fcce");function E(){if(this._openExpandNode)return;let{close:t,open:e}=this.mindMap.opt.expandBtnIcon||{};this.mindMap.opt.isShowExpandNum?(this._openExpandNode=new o["j"],this._openExpandNode.attr({"text-anchor":"middle","dominant-baseline":"middle",x:this.expandBtnSize/2,y:2})):(this._openExpandNode=Object(o["i"])(e||C["a"].open).size(this.expandBtnSize,this.expandBtnSize),this._openExpandNode.x(0).y(-this.expandBtnSize/2)),this._closeExpandNode=Object(o["i"])(t||C["a"].close).size(this.expandBtnSize,this.expandBtnSize),this._closeExpandNode.x(0).y(-this.expandBtnSize/2),this._fillExpandNode=(new o["b"]).size(this.expandBtnSize),this._fillExpandNode.x(0).y(-this.expandBtnSize/2),this.style.iconBtn(this._openExpandNode,this._closeExpandNode,this._fillExpandNode)}function k(t=[]){return t.reduce((t,e)=>t+this.sumNode(e.children||[]),t.length)}function N(){let t,{expand:e}=this.getData();if(e!==this._lastExpandBtnType&&(this._expandBtn&&this._expandBtn.clear(),this.createExpandNodeContent(),!1===e?(t=this._openExpandNode,this._lastExpandBtnType=!1):(t=this._closeExpandNode,this._lastExpandBtnType=!0),this._expandBtn)){let{isShowExpandNum:n,expandBtnStyle:r,expandBtnNumHandler:i}=this.mindMap.opt;if(n)if(e)this._fillExpandNode.stroke("none");else{this._fillExpandNode.stroke({color:r.strokeColor});let e=this.sumNode(this.nodeData.children);if("function"===typeof i){const t=i(e,this);Object(s["T"])(t)||(e=t)}t.text(String(e))}this._expandBtn.add(this._fillExpandNode).add(t)}}function O(){this._expandBtn&&this.renderer.layout.renderExpandBtn(this,this._expandBtn)}function T(){!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot||(this._expandBtn||(this._expandBtn=new o["d"],this._expandBtn.on("mouseover",t=>{t.stopPropagation(),this._expandBtn.css({cursor:"pointer"})}),this._expandBtn.on("mouseout",t=>{t.stopPropagation(),this._expandBtn.css({cursor:"auto"})}),this._expandBtn.on("click",t=>{t.stopPropagation(),this.mindMap.execCommand("SET_NODE_EXPAND",this,!this.getData("expand")),this.mindMap.emit("expand_btn_click",this)}),this._expandBtn.on("dblclick",t=>{t.stopPropagation()}),this._expandBtn.addClass("smm-expand-btn")),this.group.add(this._expandBtn),this._showExpandBtn=!0,this.updateExpandBtnNode(),this.updateExpandBtnPos())}function M(){this._expandBtn&&this._showExpandBtn&&(this._expandBtn.remove(),this._showExpandBtn=!1)}function S(){const{alwaysShowExpandBtn:t,notShowExpandBtn:e}=this.mindMap.opt;t||e||setTimeout(()=>{this.renderExpandBtn()},0)}function L(){const{alwaysShowExpandBtn:t,notShowExpandBtn:e}=this.mindMap.opt;if(t||this._isMouseenter||e)return;let{isActive:n,expand:r}=this.getData();!n&&r&&setTimeout(()=>{this.removeExpandBtn()},0)}var A={createExpandNodeContent:E,updateExpandBtnNode:N,updateExpandBtnPos:O,renderExpandBtn:T,removeExpandBtn:M,showExpandBtn:S,hideExpandBtn:L,sumNode:k};function D(t={}){this.mindMap.execCommand("SET_NODE_DATA",this,t)}function _(t,e,n){this.mindMap.execCommand("SET_NODE_TEXT",this,t,e,n)}function R(t){this.mindMap.execCommand("SET_NODE_IMAGE",this,t)}function P(t){this.mindMap.execCommand("SET_NODE_ICON",this,t)}function I(t,e){this.mindMap.execCommand("SET_NODE_HYPERLINK",this,t,e)}function j(t){this.mindMap.execCommand("SET_NODE_NOTE",this,t)}function z(t,e){this.mindMap.execCommand("SET_NODE_ATTACHMENT",this,t,e)}function B(t){this.mindMap.execCommand("SET_NODE_TAG",this,t)}function F(t){this.mindMap.execCommand("SET_NODE_SHAPE",this,t)}function H(t,e){this.mindMap.execCommand("SET_NODE_STYLE",this,t,e)}function q(t){this.mindMap.execCommand("SET_NODE_STYLES",this,t)}var W={setData:D,setText:_,setImage:R,setIcon:P,setHyperlink:I,setNote:j,setAttachment:z,setTag:B,setShape:F,setStyle:H,setStyles:q};const U='<svg t="1624174958075" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7982" ><path d="M435.484444 251.733333v68.892445L295.822222 320.682667a168.504889 168.504889 0 0 0-2.844444 336.952889h142.506666v68.892444H295.822222a237.397333 237.397333 0 0 1 0-474.794667h139.662222z m248.945778 0a237.397333 237.397333 0 0 1 0 474.851556H544.654222v-69.006222l139.776 0.056889a168.504889 168.504889 0 0 0 2.844445-336.952889H544.597333V251.676444h139.776z m-25.827555 203.946667a34.474667 34.474667 0 0 1 0 68.892444H321.649778a34.474667 34.474667 0 0 1 0-68.892444h336.952889z" p-id="7983"></path></svg>',$='<svg t="1624195132675" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8792" ><path d="M152.768 985.984 152.768 49.856l434.56 0 66.816 0 234.048 267.392 0 66.816 0 601.92L152.768 985.984 152.768 985.984zM654.144 193.088l0 124.16 108.736 0L654.144 193.088 654.144 193.088zM821.312 384.064l-167.168 0L587.328 384.064 587.328 317.312 587.328 116.736 219.584 116.736 219.584 919.04l601.728 0L821.312 384.064 821.312 384.064zM386.688 517.888 319.808 517.888 319.808 450.944l66.816 0L386.624 517.888 386.688 517.888zM386.688 651.584 319.808 651.584 319.808 584.704l66.816 0L386.624 651.584 386.688 651.584zM386.688 785.344 319.808 785.344l0-66.88 66.816 0L386.624 785.344 386.688 785.344zM721.024 517.888 453.632 517.888 453.632 450.944l267.392 0L721.024 517.888 721.024 517.888zM654.144 651.584 453.632 651.584 453.632 584.704l200.512 0L654.144 651.584 654.144 651.584zM620.672 785.344l-167.04 0 0-66.88 167.04 0L620.672 785.344 620.672 785.344z" p-id="8793"></path></svg>',V='<svg t="1711935375590" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3864" xmlns:xlink="http://www.w3.org/1999/xlink" width="128" height="128"><path d="M516.373333 375.978667l136.576-136.576a147.797333 147.797333 0 0 1 208.853334-0.021334 147.690667 147.690667 0 0 1-0.042667 208.832l-204.8 204.778667v0.021333l-153.621333 153.6c-85.973333 85.973333-225.28 85.973333-311.253334 0.021334-85.994667-85.973333-85.973333-225.216 0.149334-311.36L431.146667 256.362667a21.333333 21.333333 0 0 0-30.165334-30.165334L162.069333 465.066667c-102.805333 102.826667-102.826667 269.056-0.149333 371.733333 102.613333 102.613333 268.970667 102.613333 371.584 0l153.6-153.642667h0.021333l0.021334-0.021333 204.778666-204.778667c74.325333-74.325333 74.346667-194.858667 0.021334-269.184-74.24-74.24-194.88-74.24-269.162667 0.042667l-136.576 136.554667-187.626667 187.626666a117.845333 117.845333 0 0 0-0.106666 166.826667 118.037333 118.037333 0 0 0 166.826666-0.106667l255.850667-255.829333a21.333333 21.333333 0 0 0-30.165333-30.165333L435.136 669.973333a75.370667 75.370667 0 0 1-106.496 0.106667 75.178667 75.178667 0 0 1 0.128-106.496l187.605333-187.605333z" p-id="3865"></path></svg>',G=[{name:"优先级图标",type:"priority",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z" fill="#E93B30"></path><path d="M580.309333 256h-75.52c-10.666667 29.824-30.165333 55.765333-58.709333 78.165333-28.416 22.314667-54.869333 37.418667-79.146667 45.397334v84.608a320 320 0 0 0 120.234667-70.698667v352.085333H580.266667V256z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M511.957333 1024C229.248 1024 0 794.752 0 512S229.248 0 511.957333 0C794.752 0 1024 229.248 1024 512s-229.248 512-512.042667 512z" fill="#FA8D2E"></path><path d="M667.946667 658.602667h-185.301334c4.864-8.533333 11.178667-17.066667 19.072-25.984 7.808-8.874667 26.453333-26.837333 55.936-53.888 29.525333-27.008 49.877333-47.786667 61.226667-62.165334 16.981333-21.717333 29.44-42.453333 37.290667-62.293333 7.808-19.84 11.776-40.746667 11.776-62.677333 0-38.570667-13.738667-70.741333-41.088-96.725334C599.466667 268.928 561.706667 256 513.834667 256c-43.690667 0-80.128 11.136-109.354667 33.578667-29.098667 22.4-46.506667 59.306667-52.010667 110.805333l93.184 9.301333c1.792-27.349333 8.405333-46.890667 19.754667-58.624 11.434667-11.776 26.837333-17.664 46.165333-17.664 19.541333 0 34.858667 5.589333 45.909334 16.768 11.136 11.264 16.682667 27.221333 16.682666 48.042667 0 18.858667-6.4 37.930667-19.242666 57.258667-9.472 14.037333-35.157333 40.533333-77.098667 79.872-52.096 48.554667-87.04 87.509333-104.704 116.821333A226.688 226.688 0 0 0 341.333333 745.429333h326.613334v-86.826666z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#2E66FA"></path><path d="M627.754667 731.733333c-29.354667 25.088-66.901333 37.632-112.725334 37.632-44.928 0-81.792-11.52-110.592-34.773333-33.066667-26.538667-49.877333-64.469333-50.304-114.133333h92.16c0.426667 21.76 7.552 38.314667 21.333334 49.664 12.288 10.88 28.117333 16.341333 47.402666 16.341333 20.309333 0 36.778667-6.101333 49.322667-18.432 12.544-12.330667 18.773333-29.568 18.773333-51.797333 0-21.290667-6.229333-38.186667-18.773333-50.773334-12.544-12.501333-29.866667-18.773333-52.138667-18.773333h-13.525333v-80.042667H512c42.112 0 63.274667-21.034667 63.274667-63.146666 0-20.309333-5.888-36.096-17.706667-47.445334a60.757333 60.757333 0 0 0-43.818667-17.066666c-17.493333 0-32 5.504-43.434666 16.298666-11.562667 10.88-17.792 25.728-18.773334 44.714667H359.68c0.981333-43.946667 16.042667-78.976 45.397333-104.96 29.354667-25.941333 65.706667-39.04 109.226667-39.04 44.928 0 81.792 13.525333 110.592 40.490667 28.8 26.922667 43.306667 61.610667 43.306667 104.149333 0 48.213333-19.413333 82.688-58.154667 103.552 43.52 23.125333 65.28 61.44 65.28 114.858667 0 48.128-15.957333 85.76-47.573333 112.682666z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M600.96 256v309.802667h60.117333v81.536h-60.16v98.218666h-90.154666v-98.218666H311.466667v-81.237334L522.666667 256h78.293333zM510.72 399.104l-112.042667 166.698667h112.042667V399.104z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M470.912 343.552h175.786667V256H400.256l-47.786667 253.952 75.434667 10.837333c21.205333-23.552 45.269333-35.413333 72.021333-35.413333 21.546667 0 38.997333 7.509333 52.437334 22.4 13.312 15.018667 20.053333 37.418667 20.053333 67.328 0 31.872-6.741333 55.765333-20.181333 71.552-13.397333 15.872-29.866667 23.765333-49.237334 23.765333-17.066667 0-32.085333-6.186667-45.013333-18.432-13.013333-12.373333-20.821333-29.013333-23.466667-50.133333L341.333333 611.498667c5.546667 40.874667 22.485333 73.429333 50.730667 97.621333 28.330667 24.32 64.938667 36.437333 109.866667 36.437333 56.149333 0 100.053333-21.546667 131.754666-64.554666a176.64 176.64 0 0 0 34.816-107.52c0-48.042667-14.378667-87.210667-43.221333-117.333334-28.8-30.208-63.957333-45.312-105.514667-45.312-21.674667 0-42.922667 5.248-63.829333 15.616l14.976-82.901333z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512 0c282.88 0 512 229.205333 512 512.042667C1024 794.794667 794.88 1024 512 1024z" fill="#6D768D"></path><path d="M519.210667 256c36.992 0 67.626667 10.368 91.776 31.189333 24.192 20.821333 39.68 51.029333 46.293333 90.709334l-90.197333 9.984c-2.176-18.56-7.978667-32.298667-17.28-41.173334-9.258667-8.874667-21.418667-13.226667-36.224-13.226666-19.754667 0-36.437333 8.789333-50.048 26.453333-13.696 17.664-22.314667 54.613333-25.856 110.549333 23.296-27.52 52.138667-41.258667 86.656-41.258666 38.997333 0 72.362667 14.805333 100.181333 44.544 27.733333 29.696 41.685333 68.010667 41.685333 114.858666 0 49.877333-14.634667 89.856-43.818666 119.936-29.226667 30.208-66.730667 45.226667-112.554667 45.226667-49.066667 0-89.429333-19.072-121.130667-57.344C357.12 658.218667 341.333333 595.541333 341.333333 508.416c0-89.344 16.469333-153.813333 49.493334-193.194667C423.722667 275.754667 466.56 256 519.168 256z m-9.472 241.834667c-17.962667 0-33.066667 6.997333-45.525334 21.12-12.330667 14.037333-18.56 34.858667-18.56 62.293333 0 30.421333 6.912 53.76 20.906667 70.4 13.952 16.469333 29.866667 24.746667 47.786667 24.746667 17.28 0 31.701333-6.826667 43.178666-20.309334 11.52-13.525333 17.237333-35.669333 17.237334-66.56 0-31.658667-6.186667-54.869333-18.517334-69.546666a58.197333 58.197333 0 0 0-46.506666-22.144z" fill="#FFFFFF"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.752 0 512S229.248 0 512.042667 0C794.752 0 1024 229.248 1024 512s-229.248 512-511.957333 512z" fill="#6D768D"></path><path d="M673.024 273.066667H354.133333v86.869333h212.224a691.2 691.2 0 0 0-104.746666 187.989333c-26.026667 70.101333-39.978667 138.88-41.429334 206.293334h89.6c-0.298667-42.922667 6.698667-91.776 21.034667-146.474667a654.72 654.72 0 0 1 62.08-154.965333c27.136-48.554667 53.888-85.76 80.128-111.701334V273.066667z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z" fill="#6D768D"></path><path d="M512.426667 256c46.208 0 82.048 11.861333 107.605333 35.541333 25.6 23.68 38.314667 53.674667 38.314667 89.898667 0 22.613333-5.802667 42.666667-17.578667 60.330667a111.445333 111.445333 0 0 1-49.450667 40.277333c26.965333 10.837333 47.36 26.752 61.312 47.658667 13.994667 20.906667 21.034667 45.013333 21.034667 72.362666 0 45.098667-14.336 81.834667-42.965333 109.952-28.586667 28.245333-66.602667 42.368-114.090667 42.368-44.245333 0-81.066667-11.648-110.464-34.986666-34.645333-27.52-52.010667-65.28-52.010667-113.365334 0-26.368 6.528-50.645333 19.626667-72.746666 13.056-22.144 33.578667-39.210667 61.696-51.242667-24.064-10.154667-41.557333-24.192-52.48-41.941333a109.824 109.824 0 0 1-16.512-58.666667c0-36.224 12.757333-66.218667 37.973333-89.898667 25.386667-23.68 61.354667-35.541333 108.032-35.541333z m1.28 265.429333c-22.784 0-39.722667 7.978667-50.901334 23.893334-11.136 15.786667-16.64 33.066667-16.64 51.498666 0 25.984 6.485333 46.208 19.712 60.714667 13.098667 14.506667 29.525333 21.802667 49.152 21.802667 19.242667 0 35.157333-6.997333 47.786667-20.992 12.629333-13.909333 18.858667-34.048 18.858667-60.416 0-23.082667-6.314667-41.557333-19.2-55.466667a63.274667 63.274667 0 0 0-48.725334-21.034667z m-0.341334-191.488c-17.792 0-32 5.333333-42.581333 16-10.538667 10.666667-15.872 24.746667-15.872 42.325334 0 18.645333 5.248 33.152 15.701333 43.648 10.453333 10.453333 24.362667 15.658667 41.770667 15.658666 17.664 0 31.658667-5.290667 42.24-15.872 10.538667-10.581333 15.872-25.173333 15.872-43.818666 0-17.493333-5.248-31.573333-15.701333-42.154667s-24.277333-15.786667-41.429334-15.786667z" fill="#FFFFFF"></path></svg>'},{name:"9",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.333333 229.248 0 512 0c282.88 0 512 229.333333 512 512.042667C1024 794.794667 794.88 1024 512 1024z" fill="#6D768D"></path><path d="M497.28 256c49.365333 0 89.856 19.157333 121.429333 57.429333 31.701333 38.229333 47.488 101.205333 47.488 188.842667 0 89.173333-16.384 153.386667-49.365333 192.853333-32.853333 39.594667-75.605333 59.264-128.426667 59.264-37.888 0-68.608-10.154667-91.989333-30.506666s-38.4-50.816-45.013333-91.306667l90.112-9.984c2.261333 18.474667 8.021333 32.085333 17.28 41.088 9.173333 8.874667 21.418667 13.312 36.608 13.312 19.2 0 35.541333-8.874667 48.981333-26.752 13.44-17.749333 22.016-54.613333 25.770667-110.549333-23.466667 27.264-52.821333 40.874667-88.064 40.874666-38.314667 0-71.253333-14.72-99.114667-44.330666C355.242667 506.709333 341.333333 468.224 341.333333 420.864c0-49.493333 14.592-89.258667 43.946667-119.466667C414.549333 271.104 451.925333 256 497.237333 256z m-4.352 77.482667c-17.237333 0-31.658667 6.826667-43.008 20.437333-11.477333 13.653333-17.194667 35.84-17.194667 66.816 0 31.402667 6.229333 54.485333 18.645334 69.205333 12.458667 14.72 27.946667 22.101333 46.592 22.101334 18.005333 0 33.066667-7.082667 45.44-21.205334 12.330667-14.208 18.432-35.029333 18.432-62.506666 0-29.994667-6.912-53.376-20.821334-69.973334-13.824-16.597333-29.866667-24.874667-48.085333-24.874666z" fill="#FFFFFF"></path></svg>'},{name:"10",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M619.946667 273.066667c46.976 0 83.754667 16.042667 110.250666 48.042666 31.573333 37.973333 47.36 100.864 47.36 188.672 0 87.722667-15.829333 150.698667-47.658666 189.056-26.325333 31.616-62.976 47.36-109.952 47.36-47.274667 0-85.418667-17.237333-114.346667-51.968-28.885333-34.602667-43.392-96.426667-43.392-185.386666 0-87.168 15.872-150.016 47.701333-188.416 26.282667-31.488 62.933333-47.36 110.037334-47.36z m-207.488 12.8v452.266666H325.504V411.690667A299.904 299.904 0 0 1 213.333333 476.373333V398.933333c22.656-7.296 47.36-21.12 73.856-41.514666 26.624-20.522667 44.842667-44.288 54.784-71.552h70.485334z m207.488 60.842666c-11.306667 0-21.461333 3.413333-30.336 10.24-8.874667 6.826667-15.786667 19.157333-20.693334 36.864-6.4 22.997333-9.642667 61.653333-9.642666 115.968 0 54.442667 2.944 91.733333 8.661333 112.128 5.802667 20.352 13.098667 33.877333 21.845333 40.618667 8.789333 6.741333 18.858667 10.154667 30.165334 10.154667 11.349333 0 21.376-3.498667 30.250666-10.325334 8.874667-6.826667 15.786667-19.157333 20.693334-36.778666 6.4-22.826667 9.642667-61.354667 9.642666-115.797334 0-54.314667-2.858667-91.648-8.661333-112.042666-5.802667-20.352-13.013333-33.962667-21.76-40.789334a47.616 47.616 0 0 0-30.165333-10.24z" fill="#FFFFFF"></path></svg>'}]},{name:"进度图标",type:"progress",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144-294.144A414.72 414.72 0 0 1 928 512c0 229.76-186.24 416-416 416z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512h416c0 229.76-186.24 416-416 416z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144 294.144A414.72 414.72 0 0 1 512 928z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96v832z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512l-294.144 294.144A414.72 414.72 0 0 1 96 512c0-229.76 186.24-416 416-416V512z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512H96c0-229.76 186.24-416 416-416V512z" fill="#FFFFFF"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512L217.856 217.856A414.72 414.72 0 0 1 512 96V512z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z" fill="#12BB37"></path><path d="M716.629333 341.333333h-51.328a35.072 35.072 0 0 0-28.330666 14.293334l-171.989334 233.984-77.909333-106.026667a35.2 35.2 0 0 0-28.330667-14.293333H307.413333c-7.082667 0-11.264 7.936-7.082666 13.653333l136.32 185.472a35.2 35.2 0 0 0 56.533333 0l230.4-313.429333a8.533333 8.533333 0 0 0-6.954667-13.653334z" fill="#FFFFFF"></path></svg>'}]},{name:"表情图标",type:"expression",list:[{name:"1",icon:'<svg t="1624457751393" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12255"><path d="M1.097856 1.097642h1021.804717v1021.804716H1.097856z" fill="#F09495" p-id="12256"></path><path d="M1024.000214 1024H0.000214V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.195498v1019.609432z" fill="#FFFFFF" p-id="12257"></path><path d="M234.695985 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z" fill="#040000" p-id="12258"></path><path d="M234.695985 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115s28.339115 12.772559 28.339115 28.339115c0.099786 15.666342-12.672773 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617-11.774703-26.243617-26.243617-26.243617z" fill="#FFFFFF" p-id="12259"></path><path d="M776.232528 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z" fill="#040000" p-id="12260"></path><path d="M776.232528 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115 15.666342 0 28.339115 12.772559 28.339115 28.339115 0 15.666342-12.772559 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617c-0.099786-14.468914-11.874488-26.243617-26.243617-26.243617z" fill="#FFFFFF" p-id="12261"></path><path d="M512.000214 671.656987c-52.58702 0-105.872539-17.961411-105.872539-52.387449S459.413194 566.882089 512.000214 566.882089s105.872539 17.961411 105.87254 52.387449S564.587234 671.656987 512.000214 671.656987z m0-74.240499c-21.952836 0-43.207172 3.592282-58.2748 9.77899-13.870201 5.68778-17.06334 11.275775-17.06334 12.07406s3.19314 6.386279 17.06334 12.07406c15.067628 6.186708 36.321965 9.77899 58.2748 9.77899s43.207172-3.592282 58.274801-9.77899c13.870201-5.68778 17.06334-11.275775 17.06334-12.07406s-3.19314-6.386279-17.06334-12.07406c-15.067628-6.286494-36.321965-9.77899-58.274801-9.77899z" fill="#040000" p-id="12262"></path></svg>'},{name:"2",icon:'<svg t="1624457767572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1048"><path d="M0 0h1024v1024H0z" fill="#E6A6C9" p-id="1049"></path><path d="M315.1 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM738.7 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM293.5 698.8l-14.5-1.3c0.1-0.6 1.5-14.6 15.1-27.9 17.2-16.7 45-24.8 82.7-24 4.9-0.1 10.9-10.5 16.1-19.6 8.4-14.7 19-33.1 37.9-34.3 19.4-1.2 42.2 16.4 71.5 55.4 9.9 5.2 16.5 11.2 21.8 16.1 8.4 7.7 13.1 11.9 25.1 10.8 14.9-1.4 38.9-11.1 77.5-31.4 26.8-28.4 56.4-41.4 83.5-36.6 27.9 4.9 50.6 27.6 67.5 67.5l-13.4 5.7c-14.7-34.5-34.3-54.9-56.7-58.8-22.3-3.9-47.6 7.8-71.2 33.1l-0.8 0.9-1.1 0.6c-85.6 45.1-99.4 38-120.2 19.1-5.5-5-11.2-10.2-20.1-14.7l-1.5-0.8-1-1.4c-32.2-43.2-50.4-51.6-60-51-11.1 0.7-18.8 14-26.2 27-7.6 13.2-15.4 26.9-28.8 26.9h-0.2c-78.4-1.6-83 38.3-83 38.7z" fill="#040000" p-id="1050"></path></svg>'},{name:"3",icon:'<svg t="1624457776082" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1204" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#F7E983" p-id="1205"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1206"></path><path d="M329.174412 344.491728a38.118106 10.277919 57.6 1 0 17.355867-11.014369 38.118106 10.277919 57.6 1 0-17.355867 11.014369Z" fill="#040000" p-id="1207"></path><path d="M644.769475 355.956059a11.175989 36.321965 30 1 0 36.321965-62.911488 11.175989 36.321965 30 1 0-36.321965 62.911488Z" fill="#040000" p-id="1208"></path><path d="M569.678445 671.158059c-26.343403 0-51.190021-5.288638-70.049503-14.967843-20.755408-10.577275-32.230754-25.445332-32.230755-41.710388 0-16.265056 11.475346-31.133112 32.230755-41.710387 18.859482-9.579419 43.805886-14.967843 70.049503-14.967843s51.190021 5.288638 70.049503 14.967843c20.755408 10.577275 32.230754 25.445332 32.230754 41.710387 0 16.265056-11.475346 31.133112-32.230754 41.710388-18.859482 9.679205-43.805886 14.967843-70.049503 14.967843z m0-95.095693c-49.693237 0-84.318846 20.356266-84.318846 38.517248s34.625609 38.517248 84.318846 38.517248 84.318846-20.356266 84.318846-38.517248-34.725395-38.517248-84.318846-38.517248z" fill="#040000" p-id="1209"></path></svg>'},{name:"4",icon:'<svg t="1624457781889" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1363" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#A6D9E2" p-id="1364"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1365"></path><path d="M376.194134 348.950302m-23.44962 0a23.44962 23.44962 0 1 0 46.89924 0 23.44962 23.44962 0 1 0-46.89924 0Z" fill="#040000" p-id="1366"></path><path d="M629.150672 348.950302m-24.647047 0a24.647047 24.647047 0 1 0 49.294095 0 24.647047 24.647047 0 1 0-49.294095 0Z" fill="#040000" p-id="1367"></path><path d="M397.847613 603.503411c13.471058 8.282206 28.738258 14.468914 43.7061 19.458195 29.835899 9.978562 62.266225 14.169558 93.299551 7.483921 21.054765-4.490353 40.213604-14.369129 56.778016-28.039758 6.785422-5.587995-2.893783-15.167414-9.579419-9.579419-46.999026 38.916391-112.258819 31.033327-163.847983 6.086922-4.590138-2.195284-9.080491-4.490353-13.371272-7.184564-7.583707-4.590138-14.468914 7.184564-6.984993 11.774703z" fill="#040000" p-id="1368"></path><path d="M627.753674 534.052621c-31.033327 24.048334-58.474371 68.253362-37.419607 106.970182 10.577275 19.35841 29.835899 32.629897 48.795167 42.708244 7.982849 4.190996 15.067628-7.883064 7.084779-12.07406-25.245761-13.271487-53.485091-35.324108-49.094524-66.557006 2.793997-20.156695 15.766127-37.319821 29.736114-51.190022 3.392711-3.392711 6.984993-6.785422 10.776847-9.77899 2.993569-2.295069 2.394855-7.483921 0-9.878776-2.893783-3.19314-6.885208-2.49464-9.878776-0.199572z" fill="#040000" p-id="1369"></path></svg>'},{name:"5",icon:'<svg t="1624457787809" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1523" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#AD6F59" p-id="1524"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1525"></path><path d="M411.829832 330.730879a38.118106 10.277919 57.6 1 0 17.355867-11.014368 38.118106 10.277919 57.6 1 0-17.355867 11.014368Z" fill="#040000" p-id="1526"></path><path d="M480.669675 609.989476c11.774703-25.844475 27.740401-51.788735 44.60417-73.342429 13.770415-17.462483 29.237186-33.92711 47.897096-44.803742 17.262912-10.078347 35.324108-13.67063 54.283376-6.58585 11.974274 4.390567 23.948548 14.468914 33.128825 24.547261 14.369129 15.865913 25.145975 34.625609 34.725394 53.684662 4.290782 8.581563 17.262912 0.997856 12.972131-7.583707-15.167414-30.334828-35.224323-63.763009-66.157864-80.327421-21.054765-11.37556-44.504385-11.475346-66.157864-1.895927-21.054765 9.280062-38.617034 25.644904-53.485091 42.907815-14.468914 16.863769-27.041902 35.324108-38.217891 54.582733-5.887351 10.178133-11.674917 20.555837-16.464627 31.232898-1.696355 3.692068-0.997856 7.982849 2.694212 10.277918 3.19314 1.895927 8.581563 0.898071 10.178133-2.694211z" fill="#040000" p-id="1527"></path><path d="M663.863649 338.091735a14.468914 33.727538 30 1 0 33.727538-58.417811 14.468914 33.727538 30 1 0-33.727538 58.417811Z" fill="#040000" p-id="1528"></path></svg>'},{name:"6",icon:'<svg t="1624457794933" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1680" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#83CEE3" p-id="1681"></path><path d="M369 375.8m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="1682"></path><path d="M369 411.7c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.1 36-36 36z m0-69.1c-18.3 0-33.2 14.9-33.2 33.2S350.7 409 369 409s33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="1683"></path><path d="M672.2 333.6c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.3-7.6-13zM578.2 720.9c-12.5-96.7-33.3-154.7-55.6-155.6-8.8 3.9-22.3 17.5-37.7 60.1-10.8 29.8-18.4 62.2-23 81.6-1.2 5.1-2.1 9.1-2.9 11.8l-9.3-2.4c0.7-2.6 1.6-6.6 2.8-11.6 14.9-63 36-136.8 67.5-148.8l0.8-0.3h0.8c18.2-0.4 33.2 19.5 45.8 60.8 10.2 33.3 16.7 74.6 20.5 103.3l-9.7 1.1z" fill="#040000" p-id="1684"></path></svg>'},{name:"7",icon:'<svg t="1624457802025" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1838" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#8CC66D" p-id="1839"></path><path d="M375.778679 404.47473a14.5 33.8 30 1 0 33.8-58.543317 14.5 33.8 30 1 0-33.8 58.543317Z" fill="#040000" p-id="1840"></path><path d="M627.220263 374.211388a43.1 11.6 57.6 1 0 19.588408-12.431182 43.1 11.6 57.6 1 0-19.588408 12.431182Z" fill="#040000" p-id="1841"></path><path d="M451.1 548.5c17.6-9.3 63.9-30 105.3-16.2 17 20.3 32.7 98.8 28.8 138.1-27.5 10.2-82.5 10.2-106.1 5.8-8.3-10.5-32.7-81.8-35.3-114.6-0.4-5.5 2.5-10.6 7.3-13.1z" fill="#040000" p-id="1842"></path></svg>'},{name:"8",icon:'<svg t="1624457816632" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1996" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#5A74B8" p-id="1997"></path><path d="M357.7 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="1998"></path><path d="M357.7 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2 33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="1999"></path><path d="M676 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="2000"></path><path d="M676 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2c18.3 0 33.2-14.9 33.2-33.2s-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="2001"></path><path d="M347.6 684.1c0.3-0.9 0.6-1.7 0.9-2.6 0.2-0.5 1.4-3.2 0.3-0.8 0.6-1.4 1.3-2.9 2-4.3 3.2-6.3 6-10.7 10.9-15.3 4.3-4 10.8-7.5 17.1-6.1 3.9 0.9 7.9 4.9 11.1 7.2 3.1 2.2 6.3 4.5 9.7 6.2 7.5 3.8 15.3 4.4 23.4 1.9 4.7-1.5 9.2-3.6 13.6-5.9 5-2.6 10.7-5 14.2-9.5 4.5-5.7 6.1-8.5 11.4-14.1 1-1 2-2 3.1-3 0.2-0.2 2.2-1.7 0.6-0.5 0.6-0.4 1.2-0.9 1.8-1.3 1-0.6 2.1-1.3 3.2-1.7-2 0.8 0.2 0 0.6-0.1 2.3-0.7-0.3-0.2 1.2-0.3 2.8-0.1 3.6 0 5.5 1 3.8 1.9 6.6 4.7 9.5 7.8 4.5 5 7.5 11.1 11.7 16.2 1.8 2.2 3.7 4.3 5.4 6.5 8.1 10.3 17.7 22.2 32.2 22 8.8-0.1 16.6-5.2 22.6-11.2 4.2-4.1 7.7-8.9 11-13.7 2.9-4.2 4.6-9.9 6.2-13.5 3.2-7.1 7.2-13.1 13-18.1 4.8-4.2 11.1-6.5 16.7-5.3 10.5 2.4 17.2 12.1 23.1 20.2 4.7 6.5 9.8 13 16 18.2 7.8 6.4 17.1 11.4 27.5 11.1 14.1-0.4 25.5-9.5 34.2-19.9 3-3.6 3.6-8.8 0-12.4-3.1-3.1-9.4-3.7-12.4 0-6.3 7.6-14.7 15.9-24.9 14.7-2.2-0.3-5.3-1.5-7.9-3.1-3.5-2.1-6.1-4.4-9.1-7.5-4.9-5.1-6.8-8.1-10.9-13.8-7.3-10.1-16.1-19.6-28.2-23.7-18.5-6.3-35.7 5.6-46 20.1-2.4 3.3-4.4 6.9-6.1 10.6-1.8 3.9-2.7 8.5-5.2 11.9-3.1 4.4-6.2 8.8-10.2 12.5-3 2.8-5.7 4.4-8.6 5.1-0.4 0.1-1.7 0.1 0.1 0h-2.2c2.1 0.1 0 0-0.5-0.1-0.7-0.2-1.4-0.4-2-0.6 1.8 0.7-1.8-1.1-2.4-1.5l-1.2-0.9c1.5 1.2-0.9-0.9-1.2-1.1-4.7-4.3-8.4-9.5-12.3-14.4-10.9-13.6-20.9-34-41-34.9-14.2-0.6-24.5 10.6-32.4 20.8-1.2 1.6-2.5 3.2-3.7 4.8-1.5 1.9 1.1-1.4-0.4 0.5-0.4 0.5-0.8 1.2-1.3 1.6-1.7 1.4-4.6 2.6-6.6 3.6-2.9 1.6-5.9 3.2-9 4.5-1.6 0.7-3.4 1.2-5.1 1.7-2.2 0.6-0.7 0.5-2.8 0.4-2.8 0-3.9-0.4-6.6-1.9-3.9-2.2-7.5-4.9-11.1-7.5-5.6-4-10-6.9-17-7.5-10.5-0.9-20.3 3.2-28.2 9.9-9.4 8.1-16.4 20.2-20.1 32-3.6 11.2 13.3 15.8 16.8 5.1z" fill="#040000" p-id="2002"></path></svg>'},{name:"9",icon:'<svg t="1624457826949" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2156" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#F0884F" p-id="2157"></path><path d="M287.2 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM598 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM505.9 527.1c3.4 0.7 6.8 1.7 10.2 2.8 6.7 2.2 10.4 3.5 16.6 7.7 1.6 1.1-0.5-0.5 0.6 0.5 0.6 0.5 1.1 1.1 1.7 1.6 1.5 1.4-0.1-0.4 0.5 0.6 0.4 0.6 0.7 1.2 1 1.8-1-2 0.1 0 0 0.5 0.1-2-0.1 0-0.1 0-0.1 0.8 0 0.7 0.1-0.5-0.1 0.4-0.1 0.7-0.3 1.1-0.6 1 0.7-0.9-0.4 1-1.6 2.5-4.6 5.4-8.1 7.8-6.8 4.6-14.4 8.2-22 11.4-7 3-7.4 11.9 0 14.8 7.4 2.8 15 5.3 22.4 8.1 3.1 1.1 4.2 1.5 6.9 2.9 1.1 0.6 2.1 1.2 3.2 1.8 1.2 0.8-0.7-0.5 0.1 0 0.4 0.3 0.8 0.7 1.1 1.1 0.6 0.8-1.1-1.2-0.2-0.2 0.8 0.9-0.3-1.4-0.1-0.2 0.1 0.9 0.2-1.9 0-0.9-0.1 0.5-0.8 1.8 0 0.2-0.2 0.5-0.5 1-0.8 1.4-0.3 0.3-0.9 1.3-0.3 0.5-0.5 0.7-1.1 1.3-1.7 1.9-6.9 7.3-15.9 12.8-24.4 18.1-8.3 5.3-0.6 18.5 7.7 13.2 9.9-6.3 20.9-12.8 28.6-21.8 4.8-5.5 8.1-12.9 4.2-19.9-3.4-6-10.5-8.9-16.6-11.4-8.6-3.5-17.5-6.2-26.2-9.5v14.8c14.4-6.1 47.2-18.8 41.2-40.3-3.5-12.9-19.4-18.9-30.8-22.6-3.4-1.1-6.9-2.1-10.5-2.9-9.1-2.2-13.3 12.5-3.6 14.6z" fill="#040000" p-id="2158"></path></svg>'},{name:"10",icon:'<svg t="1624457835383" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2312" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#F6F180" p-id="2313"></path><path d="M342.9 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z" fill="#040000" p-id="2314"></path><path d="M342.9 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.7 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.6-28.3-28.3-28.3z" fill="#FFFFFF" p-id="2315"></path><path d="M702 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z" fill="#040000" p-id="2316"></path><path d="M702 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.8 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.7-28.3-28.3-28.3z" fill="#FFFFFF" p-id="2317"></path><path d="M358.7 519.9c20 22 45.5 40.4 71.3 54.8 51.2 28.5 111.7 39.9 168 19.5 44.3-16.1 80.7-47.8 110.2-83.9 3-3.7 3.6-8.9 0-12.5-3.1-3.1-9.5-3.7-12.5 0-25.5 31.4-56.2 59.7-93.7 76-27.1 11.7-56.6 15.7-85.8 12.2-24.7-2.9-49.5-11.8-71.5-23.4-18.7-9.8-36.6-22.2-51.1-34.3-7.8-6.5-15.5-13.3-22.4-20.9-7.7-8.5-20.1 4.1-12.5 12.5z" p-id="2318"></path></svg>'},{name:"11",icon:'<svg t="1624457841751" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2472" ><path d="M48.2 844.9c-68.5-210.6 186-782.1 409.1-795.4 6.3-0.4 12.5 0.2 18.6 1.6C665.1 94.6 985.4 515 987.1 821.3c0.1 20-12.9 37.9-22.4 43.1-162.7 89.8-605.8 179.7-884.4 30.9-15-7.9-24.2-26.1-32.1-50.4z" fill="#F0884F" p-id="2473"></path><path d="M401 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z" fill="#FFFFFF" p-id="2474"></path><path d="M408.7 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z" fill="#040000" p-id="2475"></path><path d="M527.5 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z" fill="#FFFFFF" p-id="2476"></path><path d="M527.5 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z" fill="#040000" p-id="2477"></path><path d="M450.7 517c1.1-8.2 3.2-16.4 6.1-24.1 0.1-0.3 1-2.5 0.5-1.4s0.3-0.7 0.5-1c0.7-1.4 1.4-2.8 2.2-4.1 0.4-0.8 2.8-3.9 1.3-2.1 0.8-1 1.7-1.9 2.6-2.8 1-1-1.5 1 0.1 0 0.5-0.3 1-0.6 1.5-0.8-1.3 0.7-1.2 0.3 0 0.1 1.9-0.3-1.8 0.3 0.1 0 1.2-0.2 1.5 0.3 0-0.1 0.6 0.2 1.3 0.3 1.9 0.5 0.3 0.1-1.3-0.7 0.2 0.1 0.8 0.5 1.6 0.9 2.4 1.4 1.4 1 0-0.1 1.4 1.1 0.9 0.8 1.8 1.7 2.6 2.6 1.8 1.9 3.5 3.9 5 6.1 5.1 7.1 9.3 14.8 13.2 22.6 3.5 6.9 13.7 4.7 15.8-2.1 2.6-8.7 4.8-17.4 7.4-26.1 0.9-3.2 1.9-6.4 3.2-9.4-0.7 1.6 0.8-1.6 1.2-2.2l0.9-1.5c0.7-1.2-1.4 0.7 0.1-0.1 1.7-0.9-1.2 0.3-0.3 0.1 0.8-0.2 1-1.2 0.3-0.3-0.6 0.8 0.6 0-0.5 0.2-2 0.3 2.4 0.5-1.1 0 0.5 0.1 1.2 0.2 1.6 0.4-1.1-0.8-0.8-0.4 0.2 0.2 0.7 0.4 3.4 2.3 2.7 1.8 8.9 7.1 15.9 16.9 22.5 26 2.8 3.8 7.5 5.6 11.8 3.1 3.7-2.2 5.9-8 3.1-11.8-8.2-11.1-16.6-23-27.7-31.4-6.3-4.7-14.5-7.6-21.7-3-6.7 4.2-9.6 12.5-11.9 19.6-3.2 9.9-5.5 20-8.6 29.9 5.3-0.7 10.5-1.4 15.8-2.1-7.8-15.5-24.8-50.1-48-41.7-14.1 5.1-19.7 23-22.9 36.2-0.9 3.8-1.8 7.7-2.3 11.6-0.6 4.6 1.1 9.3 6 10.6 4.2 1 10.2-1.5 10.8-6.1z" fill="#040000" p-id="2478"></path></svg>'},{name:"12",icon:'<svg t="1624457847424" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2632" ><path d="M485.538528 993.072489a362.00362 481.804818 3.149 1 0 52.933731-962.15464 362.00362 481.804818 3.149 1 0-52.933731 962.15464Z" fill="#AADCF0" p-id="2633"></path><path d="M688.2 334.1c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.4-7.6-13zM375.8 347c13.4 6.8 26.7 14 39.5 21.9 1.8 1.2 3.7 2.3 5.5 3.5 0.9 0.6 1.7 1.2 2.6 1.8 0.9 0.6 1.9 1.4 1.6 1.1 1.1 0.9 2.1 1.9 3.1 2.8 1.2 1 0-0.3 0.1 0 0-0.2-0.8-2.4-0.3-4.1 1.5-5.5 2.3-2.7 0.8-2-0.4 0.2-0.9 0.8-1.3 1.1 1.7-1.4-1.6 1.1-2.3 1.6-3.4 2.3-6.9 4.4-10.4 6.4-14.9 8.6-30.3 16.4-45.6 24.3-8.6 4.4-1 17.4 7.6 13 15-7.7 30.1-15.4 44.8-23.8 6.2-3.6 13.8-7.3 18.7-12.7 7.6-8.3-3.8-16.6-9.9-20.9-8.7-6.1-18-11.3-27.3-16.4-6.5-3.6-13-7.1-19.6-10.4-8.6-4.5-16.3 8.5-7.6 12.8zM412.8 570.9c13.5 7.7 28.5 13.3 43.3 17.9 29.8 9.2 61.7 13.1 92.6 7.3 20.6-3.9 40-12.5 56.6-25.2 2.8-2.2 4.3-5.6 2.3-9-1.6-2.8-6.2-4.5-9-2.3-48.3 36.9-113.3 30-165.6 6.7-4.6-2.1-9.2-4.2-13.7-6.7-7.3-4.2-13.9 7.2-6.5 11.3z" fill="#040000" p-id="2634"></path><path d="M644.6 505.2c-30.1 21.5-60.6 62.5-39.1 99.8 10.7 18.6 30.3 30.9 49.1 40.1 7.8 3.8 14.6-7.9 6.8-11.7-23.6-11.5-53.7-31.4-49.4-60.9 2.8-18.9 15.8-34.6 29.5-47.2 2.5-2.3 5.1-4.6 7.8-6.7 0.5-0.4 0.9-0.7 1.4-1.1-0.4 0.3-1.2 0.9-0.1 0.1l0.9-0.6c6.9-5.1 0.2-16.8-6.9-11.8z" fill="#040000" p-id="2635"></path></svg>'},{name:"13",icon:'<svg t="1624457855182" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2789" ><path d="M235.1 76.9c75.6-26.5 297.3-90.1 514.2-16.6 16.3 5.5 29.8 17.4 37.1 33 57.5 122.4 127.1 602.1 62.1 785.6a62.58 62.58 0 0 1-32.5 35.8c-109.5 51.8-428.1 136.7-609.3 37.2-14.4-7.9-25-21.3-29.7-37.1-41.9-140.6-37-627.7 19.1-798 6.1-18.7 20.5-33.4 39-39.9z" fill="#F9DABD" p-id="2790"></path><path d="M392.2 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z" fill="#040000" p-id="2791"></path><path d="M618.6 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z" fill="#040000" p-id="2792"></path><path d="M512 562.6c-36 0-65.3-29.3-65.3-65.3S476 432 512 432s65.3 29.3 65.3 65.3-29.3 65.3-65.3 65.3z m0-122.9c-31.7 0-57.6 25.8-57.6 57.6s25.8 57.6 57.6 57.6c31.7 0 57.6-25.8 57.6-57.6s-25.9-57.6-57.6-57.6z" fill="#040000" p-id="2793"></path></svg>'},{name:"14",icon:'<svg t="1624457863444" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2947" ><path d="M178.1 971.5c38.1 15.9 98.7 26.6 171.3-12.3 3.7-2 8.4-1.6 11.6 1.1 43.3 35.9 123.3 80.8 236 10.9 3.8-2.4 8.7-2.4 12.6-0.2 41.8 23.9 191.6 58.2 246.6 14.2 4.4-3.5 9.1-6.6 14.5-8.5C1065 909.5 678.2-652 194.3 351c-37.5 77.8-38.4 94.1-71.9 211.3-27.6 96.3-29.1 231.3 1.4 348.1 7.2 27.3 27.3 49.9 54.3 61.1z" fill="#ABAAAA" p-id="2948"></path><path d="M468.9 349H418c-6.1 0-11.1-5-11.1-11.1V336c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.1-5 11.1-11.1 11.1zM643 471.9H390c-6.6 0-12-5.4-12-12s5.4-12 12-12h253c6.6 0 12 5.4 12 12s-5.4 12-12 12zM609 349h-61.2c-6 0-11-4.9-11-11v-2.1c0-6 4.9-11 11-11H609c6 0 11 4.9 11 11v2.1c0 6.1-4.9 11-11 11z" fill="#040000" p-id="2949"></path></svg>'},{name:"15",icon:'<svg t="1624457870536" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3103" ><path d="M673.1 318.7c3.7-17.5 5.6-35.7 5.6-54.4 0-137.9-105.5-249.7-235.6-249.7S207.4 126.4 207.4 264.3c0 55.4 17.1 106.7 45.9 148.1-55.2 63.3-88.6 145.9-88.6 236.3 0 199.2 162.1 360.6 362.1 360.6 200 0 362.1-161.5 362.1-360.6 0.1-147.3-88.7-274-215.8-330z" fill="#4F8A54" p-id="3104"></path><path d="M392 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z" fill="#FFFFFF" p-id="3105"></path><path d="M386 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z" fill="#040000" p-id="3106"></path><path d="M505.6 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z" fill="#FFFFFF" p-id="3107"></path><path d="M501.4 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z" fill="#040000" p-id="3108"></path><path d="M474.3 364.8h-50.9c-6.1 0-11.1-5-11.1-11.1v-1.9c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.2-5 11.1-11.1 11.1z" fill="#040000" p-id="3109"></path></svg>'},{name:"16",icon:'<svg t="1624457876371" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3263" ><path d="M246.4 227.6c-166.9 101.1-461.9 344 87 564.1 1.5 0.6 2.9 1.1 4.4 1.6 80.7 27.7 392.8 165.4 641-198.1 40-58.6 38.5-136.2-3.7-193.3C892 289.5 727 201.1 429.1 182.7c-64.1-4-127.8 11.6-182.7 44.9z" fill="#CF92BE" p-id="3264"></path><path d="M617.1 393.4c-17.4 8.8-34.9 18.1-51.2 28.9-6.9 4.6-20.3 12.3-17.4 22.6 1.2 4.3 5.6 7 9 9.5 3.7 2.7 7.6 5 11.5 7.3 18.2 10.8 37.1 20.3 55.9 30 10 5.1 18.9-10 8.8-15.1-16.4-8.4-32.9-16.9-49-26-4.5-2.6-9.1-5.2-13.5-8l-4.5-3c-0.7-0.5-1.3-1-2-1.5 1.6 1.2 0.7 0.4-0.2-0.2-1.3-0.9-0.3-0.9-0.5-0.3 0.2 0.2 0.4 0.5 0.6 0.7 1 1.9 1.3 3.7 0.8 5.7 0.1-0.6 0.7-1.4-0.6 1.3 0.7-1.5-0.1 0-0.2 0.1 0.6-0.6 1.2-1.3 1.9-1.9l1.8-1.5c1.8-1.6-0.6 0.3 1.2-0.9 2-1.5 4.1-2.9 6.2-4.3 10-6.5 20.4-12.4 30.9-18 6.5-3.5 13.1-7 19.7-10.4 9.6-5 0.8-20.1-9.2-15zM323.1 408.5c15.9 8.1 31.7 16.5 46.8 26 2.2 1.4 4.3 2.8 6.5 4.2 1 0.7 1.9 1.3 2.8 2 0.5 0.3 1 0.7 1.4 1.1-1.1-0.9-0.3-0.3 0.3 0.3 1.1 1 2.2 2.2 3.3 3.1 1.4 1.1-1-1.7-0.1-0.1-0.6-1.1-0.9-4.1 0.3-6.7 2.2-4.8 0.7 0.1 0-0.5 0 0-1.1 0.9-1.3 1 2.3-1.9 0 0-0.5 0.4-0.8 0.5-1.5 1.1-2.3 1.6-4 2.7-8.1 5.1-12.3 7.5-17.3 10-35.1 19.1-52.8 28.2-10 5.1-1.2 20.2 8.8 15.1 17.5-9 35-17.9 52-27.7 7.3-4.2 15.9-8.6 21.8-14.7 9.3-9.7-4.3-19.7-11.5-24.7-10.1-7.1-20.9-13.1-31.7-19-7.6-4.2-15.2-8.2-22.9-12.1-9.7-5.2-18.6 9.9-8.6 15zM513 592.1c-12.2 0-24.6-1.4-36.3-4.3-8-2-13.9-8.2-15.4-16.2s1.7-15.8 8.4-20.5c23.2-16.3 60.5-31.9 106.2-13 6.4 2.6 11 8.3 12.3 15.1 1.3 6.7-0.8 13.6-5.7 18.3-13.5 13.1-40.9 20.6-69.5 20.6z m-37.4-32.5c-3.4 2.4-4.9 6.2-4.2 10.2 0.8 4.1 3.6 7.1 7.7 8.1 39.1 9.7 81.2 0.7 96.1-13.7 2.4-2.3 3.4-5.6 2.7-8.9-0.7-3.4-2.9-6.2-6.1-7.5-41.2-17.2-75.1-3.1-96.2 11.8z" fill="#040000" p-id="3265"></path></svg>'},{name:"17",icon:'<svg t="1624457881793" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3419" ><path d="M1008.6 465.7c0-124.9-95.5-226.2-213.4-226.2-12 0-23.8 1.1-35.2 3.1v-3.1c0-124.9-95.5-226.2-213.4-226.2S333.4 114.6 333.4 239.5c0 2.4 0 4.8 0.1 7.2-17.1-4.7-35-7.2-53.4-7.2-117.8 0-213.4 101.3-213.4 226.2 0 92.1 51.9 171.3 126.3 206.6-13.7 29.9-21.4 63.4-21.4 98.8 0 124.9 95.5 226.2 213.4 226.2 68.8 0 130-34.5 169-88.1 39 53.6 100.2 88.1 169 88.1 117.8 0 213.4-101.3 213.4-226.2 0-41.2-10.4-79.9-28.6-113.1 60.5-39.9 100.8-111.1 100.8-192.3z" fill="#8CC66D" p-id="3420"></path><path d="M437.8 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3421"></path><path d="M649.7 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3422"></path><path d="M527.3 625.9c6.3-14.2 13.1-28.3 17.9-43 6.2-19 8.3-38.6 10.5-58.3l2.1-19.2c0.7-6.2-9-6.1-9.7 0-1.7 16.3-2.8 32.8-5.7 48.9-4.2 23.7-13.8 45-23.5 66.7-2.5 5.6 5.9 10.5 8.4 4.9z" fill="#252525" p-id="3423"></path><path d="M447.7 522.3c20.3-0.1 40.6-0.2 61-0.4l96.6-0.6c7.5 0 14.9-0.1 22.4-0.1 16.6-0.1 16.7-25.9 0-25.8-20.3 0.1-40.6 0.2-61 0.4l-96.6 0.6c-7.5 0-14.9 0.1-22.4 0.1-16.6 0.1-16.7 25.9 0 25.8z" fill="#040000" p-id="3424"></path><path d="M495.4 508.2c-10.3 3.8-9.2 20.9-9.2 29.5 0.1 16 2.1 32.3 6.1 47.8 3.5 13.7 8.7 29.9 20.6 38.7 12.9 9.5 27.6 2.1 37.6-7.9 10.2-10.3 17.8-23 24.7-35.6 11.6-21.3 20.9-43.8 29.7-66.4 3-7.8-9.5-11.1-12.5-3.4-7.4 19.1-15.3 38.1-24.7 56.4-5.9 11.5-12.2 23-20.3 33.1-2.8 3.5-5.8 6.9-9.2 9.8-1.9 1.7-1.4 1.3-3.3 2.5-1.3 0.8-2.6 1.6-3.9 2.2-0.7 0.3 1-0.2-0.8 0.3-0.6 0.2-1.2 0.3-1.8 0.5-1.1 0.3-1.2 0.2-0.5 0.1-0.6 0-1.3 0-1.9 0.1-2.2 0.1 0.6 0.5-1.8-0.2l-1.8-0.6c1.5 0.5 0.2 0.1-0.5-0.3-0.8-0.5-2.9-2.1-1.7-1.1-1-0.9-2-1.7-2.8-2.7-0.4-0.5-0.9-1-1.3-1.5 0.4 0.5 0.1 0.2-0.5-0.7-0.8-1.3-1.7-2.5-2.4-3.9-0.7-1.3-1.4-2.5-2-3.8-0.4-0.8-0.8-1.6-1.1-2.4-0.1-0.2-0.5-1.1 0 0l-0.6-1.5a86.8 86.8 0 0 1-3.3-9.8c-4.4-14.9-6.2-27.9-6.8-42.8-0.3-6.6-0.3-13.1 0.4-19.7 0.2-1.5-0.3 1.5 0.1-0.5l0.3-1.8c0.2-0.9 0.5-1.8 0.7-2.8 0.4-1.9-0.7 1.1 0.3-0.7 0.5-1-1.3 1.2-0.3 0.5-0.3 0.3-1.1 0.8-2 1.1 7.7-2.9 4.3-15.4-3.5-12.5z" fill="#040000" p-id="3425"></path></svg>'},{name:"18",icon:'<svg t="1624457899440" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3579" ><path d="M75.4 739.8c-78.7-134.4-194-455.7 401.4-579.6 9.8-2 19.2-6.2 29.2-7.5C656.8 133 947.3 205 1000.1 578.4c42.6 223.8 29.7 392.1-822 233.6-43.1-8-80.6-34.4-102.7-72.2z" fill="#F09495" p-id="3580"></path><path d="M704.6 875.4c-129 0-301.8-20.5-526.6-62.3-43.5-8.1-81.2-34.6-103.5-72.7-19.3-32.9-44.8-84.3-57.1-142.5-13.9-65.1-8.8-125.3 15.1-179.2 54.3-122.3 203.7-209.6 444-259.6 4.1-0.9 8.3-2.1 12.3-3.4 5.5-1.7 11.1-3.4 16.9-4.2 29-3.8 75.7-5.9 133.8 5.7 54.5 10.9 105.3 31 150.8 59.9C843.7 251 888.2 296 922.7 351c39.7 63.1 66.1 139.6 78.5 227.3 8.1 42.4 15.2 87.3 12.5 127.9-2.8 42.6-16.4 75.5-41.5 100.7-42.5 42.7-120.3 65-237.8 68.1-9.6 0.2-19.6 0.4-29.8 0.4zM76.3 739.3c22 37.6 59.2 63.7 102.1 71.7 242.5 45.1 424.4 65.3 556.1 61.9 116.9-3.1 194.1-25.2 236.3-67.5 55.4-55.6 44.4-142.5 28.3-226.7C976 415.8 903.4 291.5 789.2 219c-124-78.7-248.1-69.9-283.2-65.3-5.6 0.7-11.2 2.4-16.6 4.1-4.1 1.2-8.3 2.5-12.5 3.4C237.3 211.1 88.5 298 34.5 419.6c-54.6 122.8 2.8 253 41.8 319.7z" fill="#FFFFFF" p-id="3581"></path><path d="M424.1 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3582"></path><path d="M635.9 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3583"></path><path d="M426.2 543.3c17.1 7.9 36.6 26 25.5 46.1-6.9 12.5-19.8 21.2-31.7 28.4-4.5 2.7-0.4 9.8 4.1 7.1 17.4-10.5 41.6-27.6 39-51.1-1.6-14-12.4-24.8-23.5-32.3-3-2-6.1-3.9-9.3-5.4-4.8-2.1-8.9 5-4.1 7.2zM629.5 535.4c-21.8 11.7-40.6 37-25.7 61.3 8.2 13.4 22.2 22.7 35.7 30.3 4.7 2.7 8.9-4.6 4.2-7.2-15.5-8.7-39.9-23.9-36.9-45.2 1.6-11.4 10.7-20.7 19.6-27.2 2.4-1.7 4.8-3.4 7.4-4.8 4.7-2.5 0.4-9.8-4.3-7.2z" fill="#040000" p-id="3584"></path><path d="M457.2 584.6c25.6 25.6 66.7 41 101.8 28.3 18.2-6.6 33.2-19.1 45.5-33.8 4.2-5.1-3-12.4-7.3-7.3-18.5 22-43.3 38.1-73 35-18.6-1.9-36.2-10.8-50.9-22-2.9-2.2-6.1-4.8-8.8-7.5-4.7-4.7-12 2.6-7.3 7.3z" fill="#040000" p-id="3585"></path></svg>'},{name:"19",icon:'<svg t="1624457904464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3739" ><path d="M915.9 510.5c8.4-19 13.1-39.8 13.1-61.7 0-90-78.9-162.9-176.2-162.9-3.2 0-6.3 0.1-9.5 0.2v-0.2c0-94.8-116.2-171.6-259.6-171.6S224 191.2 224 286v2c-96.2 0-174.1 72-174.1 160.9 0 38 14.3 73 38.2 100.5-41.8 29.4-68.8 75.9-68.8 128.2 0 88.9 78 160.9 174.1 160.9 17.1 0 33.6-2.3 49.3-6.5 28.9 46.1 88.7 77.7 157.6 77.7 49.4 0 94-16.2 126-42.3 32 26.1 76.6 42.3 126 42.3 77.3 0 143-39.7 166.7-95 3.1 0.2 6.3 0.2 9.5 0.2 97.3 0 176.2-72.9 176.2-162.9 0-60.6-35.7-113.4-88.8-141.5z" fill="#5A74B8" p-id="3740"></path><path d="M357.6 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z" fill="#FEFEFD" p-id="3741"></path><path d="M357.5 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z" fill="#040000" p-id="3742"></path><path d="M531.3 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z" fill="#FEFEFD" p-id="3743"></path><path d="M531.2 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z" fill="#040000" p-id="3744"></path><path d="M426.7 574.6c20.9 29.9 59.7 52.2 96.2 38.6 19.2-7.2 34.7-21.2 47.6-36.9 2.8-3.5 3.4-8.3 0-11.7-2.9-2.9-8.9-3.5-11.7 0-16.5 20.2-40.9 40.9-68.1 35.5-17.3-3.4-31-13.2-42.9-25.9-2-2.2-3.9-4.4-5.8-6.7-1.6-1.9 1.1 1.5-0.4-0.6-0.2-0.2-0.3-0.5-0.5-0.7-6.2-8.7-20.6-0.4-14.4 8.4z" fill="#040000" p-id="3745"></path></svg>'},{name:"20",icon:'<svg t="1624457910321" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3899" ><path d="M792.8 301.4c-8.2 0-16.2 0.4-24.2 1.3-12.3-81.8-129.2-145.9-271.8-145.9-137.1 0-250.5 59.3-269.9 136.6C105.3 295.5 7.4 391.2 7.4 508.9c0 119.1 100.2 215.6 223.7 215.6 5.3 0 10.6-0.2 15.8-0.5 14.4 80.5 130.4 143.2 271.3 143.2 135.9 0 248.6-58.3 269.4-134.6 1.7 0 3.4 0.1 5.1 0.1 123.6 0 223.7-96.5 223.7-215.6s-100-215.7-223.6-215.7z" fill="#F6CD50" p-id="3900"></path><path d="M435.9 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z" fill="#FAFAFA" p-id="3901"></path><path d="M588.1 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z" fill="#FAFAFA" p-id="3902"></path><path d="M435.9 431.5m-27.8 0a27.8 27.8 0 1 0 55.6 0 27.8 27.8 0 1 0-55.6 0Z" fill="#040000" p-id="3903"></path><path d="M601.9 407.4c-5.7 2.9-11.3 5.9-16.9 9-6.8 3.8-15.3 7.8-20.5 13.8-5.6 6.5 1.6 11.1 6.7 14.4 11.2 7.1 23.3 13 35.1 19 5.7 2.9 10.8-5.7 5.1-8.6-10.9-5.6-21.9-11.1-32.4-17.4-2.4-1.4-4.6-3.1-7-4.6 1 0.6-0.4-0.4-0.4-0.4-1.9-0.3-0.5 4.2 0.5 4.1-0.1 0-0.6 0.3 0.3-0.3 0.5-0.3 1-0.9 1.5-1.3 9.7-7.9 21.9-13.5 33.1-19.2 5.7-2.7 0.6-11.4-5.1-8.5zM406.6 547.6c11.5 14.4 27 26.7 42.7 36.3 32.2 19.8 71.2 27.2 107.6 15.4 29.5-9.6 54.6-29.1 75.5-51.6 10.8-11.6-6.6-29.1-17.5-17.5-9.4 10.1-19.5 19.7-30.8 27.7-4.6 3.2-9.3 6.2-14.2 8.9-5 2.8-9.9 5.1-14.1 6.7-4.6 1.7-9.3 3.2-14.1 4.4-2.2 0.5-4.4 1-6.6 1.4-1 0.2-2 0.3-2.9 0.5 2.6-0.4-2.1 0.2-2.5 0.3-4.1 0.4-8.3 0.5-12.5 0.4-2.2-0.1-4.4-0.2-6.6-0.4-1.1-0.1-2.2-0.2-3.2-0.3-1.5-0.2-1.4-0.2 0.1 0l-2.1-0.3c-7.8-1.3-15.4-3.4-22.8-6.2-0.9-0.4-1.8-0.7-2.8-1.1-3.1-1.2 2.3 1.1-0.7-0.3-1.5-0.7-2.9-1.3-4.4-2-3.7-1.8-7.2-3.7-10.8-5.8-5.7-3.4-11.1-7.1-16.4-11.1 3 2.3-1.1-0.9-1.8-1.5-1.1-0.9-2.1-1.7-3.1-2.6-2.1-1.8-4.2-3.7-6.3-5.6-4.4-4.1-8.7-8.4-12.4-13.1-4.2-5.2-13.1-4.3-17.5 0-5 5.1-4 12.2 0.2 17.4z" fill="#040000" p-id="3904"></path></svg>'}]},{name:"标记图标",type:"sign",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M809.728 429.696a18.901333 18.901333 0 0 0-15.274667-12.885333l-183.466666-26.624-81.92-166.272a18.901333 18.901333 0 0 0-34.005334 0l-81.92 166.272-183.594666 26.624a19.029333 19.029333 0 0 0-10.496 32.298666l132.693333 129.536-31.274667 182.741334a18.816 18.816 0 0 0 27.477334 19.84l164.138666-86.186667 164.096 86.058667a18.773333 18.773333 0 1 0 27.434667-19.84l-31.36-182.741334 132.693333-129.408a18.901333 18.901333 0 0 0 4.778667-19.413333z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M644.565333 306.901333c32.128 0 65.834667-5.76 101.077334-17.237333a17.066667 17.066667 0 0 1 22.357333 16.213333v328.32c-1.109333 0.768 10.325333 27.093333-99.370667 19.84-109.653333-7.210667-181.76-45.098667-246.869333-45.098666-65.152 0-49.322667 2.688-74.154667 8.405333v168.064a24.746667 24.746667 0 0 1-24.490666 25.258667 22.528 22.528 0 0 1-17.28-7.253334 24.149333 24.149333 0 0 1-7.168-18.005333V281.258667C299.776 280.490667 328.106667 256 421.76 256s164.437333 50.901333 222.805333 50.901333z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M524.074667 225.408l274.517333 274.517333a17.066667 17.066667 0 0 1 0 24.149334l-274.517333 274.517333a17.066667 17.066667 0 0 1-24.149334 0l-274.517333-274.517333a17.066667 17.066667 0 0 1 0-24.149334l274.517333-274.517333a17.066667 17.066667 0 0 1 24.149334 0z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M317.866667 300.8h388.266666c9.386667 0 17.066667 7.68 17.066667 17.066667v388.266666a17.066667 17.066667 0 0 1-17.066667 17.066667h-388.266666a17.066667 17.066667 0 0 1-17.066667-17.066667v-388.266666c0-9.386667 7.68-17.066667 17.066667-17.066667z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M498.346667 279.082667L248.789333 701.44a15.829333 15.829333 0 0 0 13.653334 23.893333h499.114666a15.829333 15.829333 0 0 0 13.653334-23.893333l-249.6-422.357333a15.829333 15.829333 0 0 0-27.264 0z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z" fill="#FFFFFF"></path><path d="M634.538667 487.808L555.050667 426.24 507.306667 256a201.002667 201.002667 0 0 0-23.594667 20.394667l-0.256-0.256L525.653333 426.666667l-133.290666 59.946666a14.08 14.08 0 0 0-8.021334 15.957334l28.757334 126.378666a14.208 14.208 0 0 0 27.733333-6.229333l-26.24-115.114667 126.037333-56.704 76.416 59.136a14.250667 14.250667 0 0 0 19.968-2.474666 14.08 14.08 0 0 0-2.474666-19.797334z" fill="#6D768D"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M374.656 273.194667c5.973333 4.48 12.117333 9.6 18.346667 15.36 6.272 5.717333 11.904 12.373333 16.896 19.84 2.517333 4.010667 5.504 8.490667 9.002666 13.482666a529.493333 529.493333 0 0 1 20.266667 32.213334h155.221333a169.813333 169.813333 0 0 0 9.770667-15.744c2.474667-4.48 5.248-8.96 8.234667-13.482667a460.842667 460.842667 0 0 1 23.253333-31.829333c4.992-6.229333 12.245333-12.373333 21.76-18.346667a34.261333 34.261333 0 0 0 10.112-9.728 31.274667 31.274667 0 0 0 5.248-11.989333 18.56 18.56 0 0 0-1.536-11.605334 17.664 17.664 0 0 0-10.112-8.618666c-4.48-1.493333-8.362667-2.005333-11.605333-1.493334a46.933333 46.933333 0 0 0-9.770667 2.602667c-3.242667 1.28-6.613333 2.645333-10.112 4.138667a32.426667 32.426667 0 0 1-12.757333 2.261333 26.026667 26.026667 0 0 1-12.373334-2.645333 45.653333 45.653333 0 0 1-8.96-6.357334l-8.661333-7.850666a30.336 30.336 0 0 0-11.989333-6.4c-9.984-3.968-18.005333-4.693333-24.021334-2.218667-5.973333 2.474667-11.946667 6.485333-17.962666 11.946667a88.618667 88.618667 0 0 1-11.989334 10.496 7.338667 7.338667 0 0 1-3.754666 1.493333 46.165333 46.165333 0 0 1-8.277334-5.205333 71.808 71.808 0 0 1-7.125333-4.906667 37.973333 37.973333 0 0 1-6.4-6.357333c-3.968-3.968-9.941333-6.613333-17.92-7.850667a31.061333 31.061333 0 0 0-21.76 4.138667c-8.533333 5.461333-14.506667 10.069333-18.048 13.824a29.354667 29.354667 0 0 1-15.744 7.893333 23.978667 23.978667 0 0 1-13.098667-0.768 987.733333 987.733333 0 0 0-14.634666-4.48 80.725333 80.725333 0 0 0-14.250667-2.986667 16.768 16.768 0 0 0-11.989333 2.986667c-6.997333 5.461333-9.258667 12.074667-6.741334 19.84a34.56 34.56 0 0 0 13.482667 18.346667z" fill="#FFFFFF"></path><path d="M780.757333 545.152a219.306667 219.306667 0 0 0-19.882666-65.536 224.981333 224.981333 0 0 0-33.365334-49.792 430.336 430.336 0 0 0-37.12-37.12c-14.506667-11.946667-27.264-23.296-38.272-34.048a544.512 544.512 0 0 1-27.733333-28.842667 305.28 305.28 0 0 1-22.485333-26.197333h-168.746667c-6.485333 8.490667-13.994667 17.493333-22.485333 26.965333a360.96 360.96 0 0 1-26.24 28.074667c-10.538667 10.24-22.272 21.12-35.285334 32.597333a305.493333 305.493333 0 0 0-41.6 44.16 250.026667 250.026667 0 0 0-49.493333 117.589334 216.106667 216.106667 0 0 0 1.877333 70.4 220.586667 220.586667 0 0 0 75.349334 126.549333c21.248 18.005333 47.146667 32.597333 77.653333 43.818667 30.464 11.264 65.493333 16.853333 104.96 16.853333 38.528 0 72.874667-4.864 103.125333-14.592a265.045333 265.045333 0 0 0 78.378667-39.338667c21.973333-16.469333 39.594667-35.797333 52.864-58.026666 13.226667-22.186667 22.101333-45.824 26.624-70.784 4.992-30.421333 5.632-58.026667 1.877333-82.773334z" fill="#FFFFFF"></path><path d="M593.322667 647.509333a20.48 20.48 0 0 1-11.861334 3.2h-50.133333v14.165334c0 4.266667-1.792 8.362667-5.376 12.373333a15.914667 15.914667 0 0 1-13.952 5.333333 24.917333 24.917333 0 0 1-14.336-3.882666c-3.84-2.602667-5.973333-7.210667-6.4-13.824v-14.165334h-48.725333a17.792 17.792 0 0 1-11.818667-3.882666 10.24 10.24 0 0 1-3.968-9.6c0-4.266667 1.578667-7.68 4.693333-10.24a16.768 16.768 0 0 1 11.093334-3.925334h48.682666v-24.789333h-48.682666a15.573333 15.573333 0 0 1-11.52-4.266667 13.525333 13.525333 0 0 1-4.266667-9.941333 15.36 15.36 0 0 1 4.693333-10.624 14.72 14.72 0 0 1 11.093334-4.949333h48.682666l0.725334-14.890667a1053.568 1053.568 0 0 1-40.832-42.538667l-10.752-9.898666a41.216 41.216 0 0 1-6.442667-11.690667c-1.92-4.992-0.938667-10.069333 2.858667-15.274667a13.653333 13.653333 0 0 1 15.786666-3.84c6.186667 2.090667 11.221333 4.821333 15.018667 8.106667 1.92 2.389333 5.248 5.888 10.026667 10.666667l15.061333 14.848 19.328 19.157333 22.186667-20.565333a987.605333 987.605333 0 0 1 29.397333-25.514667 21.162667 21.162667 0 0 1 14.293333-5.674667c5.290667 0 9.557333 2.133333 12.928 6.4 6.186667 7.082667 3.84 15.36-7.168 24.789334a179.072 179.072 0 0 0-12.885333 12.373333c-5.76 5.973333-11.52 11.733333-17.194667 17.408-6.698667 7.082667-14.08 14.378667-22.186666 21.973333v13.44h46.506666c6.698667 0 11.605333 1.536 14.72 4.608a14.165333 14.165333 0 0 1 4.650667 10.282667c0 4.266667-1.450667 7.936-4.309333 11.008-2.858667 3.029333-7.637333 4.352-14.336 3.84l-46.506667 0.768-0.768 24.064h45.866667c13.354667 0 20.053333 4.992 20.053333 14.933333 0.469333 4.693333-0.853333 8.106667-3.925333 10.24z" fill="#6D768D"></path></svg>'},{name:"9",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M512 213.333333l234.666667 341.333334h-128v213.333333h-213.333334v-213.333333h-128L512 213.333333z" fill="#FFFFFF"></path></svg>'},{name:"10",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M533.333333 810.666667L298.666667 469.333333h128V256h213.333333v213.333333h128l-234.666667 341.333334z" fill="#FFFFFF"></path></svg>'},{name:"11",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M213.333333 533.333333L554.666667 298.666667v128h213.333333v213.333333h-213.333333v128l-341.333334-234.666667z" fill="#FFFFFF"></path></svg>'},{name:"12",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M810.666667 533.333333L469.333333 768v-128H256v-213.333333h213.333333V298.666667l341.333334 234.666666z" fill="#FFFFFF"></path></svg>'},{name:"13",icon:'<svg viewBox="0 0 1024 1024"><path d="M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z" fill="#6D768D"></path><path d="M571.349333 508.586667l162.389334-162.346667a44.330667 44.330667 0 1 0-62.72-62.72l-162.389334 162.389333-162.517333-162.389333a44.330667 44.330667 0 1 0-62.72 62.72l162.389333 162.389333-162.389333 162.474667a44.330667 44.330667 0 1 0 62.72 62.72l162.389333-162.346667 162.389334 162.389334a44.330667 44.330667 0 1 0 62.72-62.72l-162.261334-162.56z" fill="#FFFFFF"></path></svg>'},{name:"14",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C233.386667 0 0 225.877333 0 512s225.877333 512 512 512 512-225.877333 512-512S790.613333 0 512 0z" fill="#6D768D"></path><path d="M726.144 311.210667l-277.333333 305.066666-124.8-124.8c-13.866667-13.866667-41.6-13.866667-55.466667 0-13.866667 13.866667-13.866667 41.6 0 55.466667l159.445333 152.533333c13.866667 13.866667 41.6 13.866667 55.466667 0l305.066667-332.8c13.866667-13.866667 13.866667-41.6 0-55.466666-20.778667-13.866667-48.512-13.866667-62.378667 0z" fill="#FFFFFF"></path></svg>'},{name:"15",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M541.952 755.626667a40.618667 40.618667 0 0 1-29.824 12.373333 41.344 41.344 0 0 1-30.122667-12.373333 40.106667 40.106667 0 0 1-12.672-30.122667c0-11.605333 4.096-21.845333 12.672-30.122667a40.405333 40.405333 0 0 1 30.122667-12.714666c11.605333 0 21.546667 4.138667 29.824 12.714666a40.32 40.32 0 0 1 12.714667 30.122667c0 11.861333-4.096 21.76-12.714667 30.122667zM450.986667 241.28A77.866667 77.866667 0 0 1 512.256 213.333333c24.874667 0 45.354667 8.917333 61.354667 27.946667 15.488 18.432 23.722667 41.685333 23.722666 69.674667 0 23.765333-33.152 200.533333-44.672 329.045333h-80.128C463.146667 511.402667 426.666667 334.677333 426.666667 310.954667c0-27.392 8.277333-50.645333 24.32-69.674667z" fill="#FFFFFF"></path></svg>'},{name:"16",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.794667 0 512 0z" fill="#6D768D"></path><path d="M490.666667 682.666667a64 64 0 1 1 0 128 64 64 0 0 1 0-128z m13.994666-490.752c61.397333 0 112.341333 14.634667 153.002667 43.946666 40.533333 29.269333 60.885333 72.618667 60.885333 130.133334 0 35.242667-12.373333 64.938667-29.952 89.045333-10.282667 14.677333-33.664 33.408-62.890666 56.192l-32.426667 22.357333c-15.701333 12.202667-29.696 26.453333-34.858667 42.666667-1.706667 5.546667-3.072 14.677333-3.968 24.533333-0.426667 4.949333-4.864 15.018667-15.232 15.018667h-83.328c-13.568 0-15.957333-10.581333-15.744-15.786667 1.493333-34.005333 4.608-64.213333 18.474667-80.469333 28.074667-32.896 91.904-73.813333 91.904-73.813333a104.106667 104.106667 0 0 0 23.552-24.021334c10.837333-14.933333 19.797333-31.317333 19.797333-49.237333 0-20.565333-6.016-39.338667-18.090666-56.32-12.032-16.938667-34.090667-25.386667-66.005334-25.386667-31.445333 0-53.76 10.410667-66.901333 31.274667-9.685333 15.445333-15.786667 29.610667-18.346667 45.013333-0.853333 5.461333-4.394667 16.981333-16.042666 16.981334H327.210667c-17.322667 0-21.12-11.221333-20.650667-16.64 6.272-68.138667 32.896-114.688 80-144.597334 32-20.565333 71.381333-30.890667 118.101333-30.890666z" fill="#FFFFFF"></path></svg>'},{name:"17",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M336.256 410.026667H253.312a40.021333 40.021333 0 0 0-39.850667 43.264l23.296 278.101333c1.706667 20.693333 19.072 36.608 39.850667 36.608h59.648c11.050667 0 20.010667-8.96 20.010667-19.968v-318.037333a19.968 19.968 0 0 0-20.010667-19.968z m434.432 0h-178.944C653.312 182.314667 548.949333 170.666667 548.949333 170.666667c-44.288 0-35.114667 34.986667-38.442666 40.832 0 84.48-68.010667 155.093333-101.034667 184.362666a39.552 39.552 0 0 0-13.226667 29.653334v322.56c0 11.008 8.96 19.925333 20.010667 19.925333h233.728c30.378667 0 58.154667-17.152 71.68-44.373333 18.176-36.736 40.448-90.112 54.656-133.973334 13.781333-42.410667 26.24-94.976 33.578667-131.968a39.850667 39.850667 0 0 0-39.253334-47.658666z" fill="#FFFFFF"></path></svg>'},{name:"18",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M796.16 413.909333c-31.146667-0.298667-115.626667-0.085333-146.858667-0.085333h-158.464c8.533333-7.68 15.914667-14.506667 23.594667-20.906667 29.781333-24.874667 25.813333-71.082667-14.208-88.874666-22.954667-10.24-44.970667-5.632-64 11.52-34.944 31.274667-69.632 62.677333-104.277333 93.994666a15.488 15.488 0 0 1-11.178667 4.437334c-11.221333-0.085333-26.88-0.128-46.933333-0.170667a17.066667 17.066667 0 0 0-17.109334 17.066667L256 719.701333a17.066667 17.066667 0 0 0 17.066667 17.152l49.578666-0.085333c3.968 0 7.466667 0.768 10.88 2.602667 15.829333 8.832 31.701333 17.493333 47.616 26.24a18.133333 18.133333 0 0 0 9.301334 2.346666h168.405333c6.186667 0 11.946667-0.981333 17.834667-2.56 29.44-7.253333 40.021333-30.293333 38.528-52.565333-0.768-9.728-4.266667-18.346667-9.984-26.24 19.626667-5.76 35.114667-16.213333 42.112-36.096 7.125333-20.394667 1.621333-38.4-12.672-53.333333 28.16-19.754667 34.858667-44.672 18.645333-75.648h140.458667c6.570667 0 13.013333-0.597333 19.370666-2.645334 31.957333-9.813333 48.810667-42.88 35.626667-71.552-10.154667-22.186667-28.629333-33.152-52.608-33.450666z" fill="#FFFFFF"></path></svg>'},{name:"19",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M270.506667 413.909333c31.146667-0.298667 115.626667-0.085333 146.858666-0.085333h158.464c-8.533333-7.68-15.914667-14.506667-23.594666-20.906667-29.781333-24.874667-25.813333-71.082667 14.208-88.874666 22.954667-10.24 44.970667-5.632 64 11.52 34.944 31.274667 69.632 62.677333 104.277333 93.994666 3.413333 2.986667 6.528 4.437333 11.178667 4.437334 11.221333-0.085333 26.88-0.128 46.933333-0.170667a17.066667 17.066667 0 0 1 17.109333 17.066667l0.682667 288.853333a17.066667 17.066667 0 0 1-17.066667 17.152l-49.578666-0.085333a22.101333 22.101333 0 0 0-10.88 2.602666c-15.829333 8.832-31.701333 17.493333-47.616 26.24a18.133333 18.133333 0 0 1-9.301334 2.346667h-168.405333a68.693333 68.693333 0 0 1-17.834667-2.56c-29.44-7.253333-40.021333-30.293333-38.528-52.565333 0.768-9.728 4.266667-18.346667 9.984-26.24-19.626667-5.76-35.114667-16.213333-42.112-36.096-7.125333-20.394667-1.621333-38.4 12.672-53.333334-28.16-19.754667-34.858667-44.672-18.645333-75.648H272.853333c-6.570667 0-13.013333-0.597333-19.370666-2.645333-31.957333-9.813333-48.810667-42.88-35.626667-71.552 10.154667-22.186667 28.629333-33.152 52.608-33.450667z" fill="#FFFFFF"></path></svg>'},{name:"20",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M667.733333 480.128H400v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 213.333333a155.605333 155.605333 0 0 0-155.392 155.434667v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 509.013333v292.010667a28.885333 28.885333 0 0 0 28.885333 28.885333h340.138667a28.885333 28.885333 0 0 0 28.928-28.885333V509.013333a28.885333 28.885333 0 0 0-28.928-28.885333z" fill="#FFFFFF"></path></svg>'},{name:"21",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M400.042667 437.461333v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 170.666667a155.605333 155.605333 0 0 0-155.392 155.434666v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 466.346667v292.010666a28.885333 28.885333 0 0 0 28.885333 28.885334h340.138667a28.885333 28.885333 0 0 0 28.928-28.885334V466.346667a28.885333 28.885333 0 0 0-28.928-28.885334H400.042667z" fill="#FFFFFF"></path><path d="M595.242667 437.461333v-111.36a97.706667 97.706667 0 0 0-97.621334-97.621333 97.706667 97.706667 0 0 0-97.578666 97.621333 28.885333 28.885333 0 0 1-57.813334 0A155.605333 155.605333 0 0 1 497.621333 170.666667a155.605333 155.605333 0 0 1 155.434667 155.434666v111.36h14.634667c16 0 28.928 12.928 28.928 28.885334v292.010666a28.885333 28.885333 0 0 1-28.928 28.885334H327.552A28.885333 28.885333 0 0 1 298.666667 758.357333V466.346667c0-15.957333 12.928-28.885333 28.885333-28.885334h267.690667z" fill="#FFFFFF"></path></svg>'},{name:"22",icon:'<svg viewBox="0 0 1024 1024"><path d="M511.999787 512.000213m-511.999787 0a511.999787 511.999787 0 1 0 1023.999573 0 511.999787 511.999787 0 1 0-1023.999573 0Z" fill="#6D768D"></path><path d="M381.354508 364.586941c0 54.015977 29.013321 103.935957 75.946635 130.986613a152.53327 152.53327 0 0 0 151.935936 0 151.12527 151.12527 0 0 0 75.946636-130.986613A151.594604 151.594604 0 0 0 533.333111 213.333671a151.594604 151.594604 0 0 0-151.89327 151.25327zM660.479725 498.901552a185.258589 185.258589 0 0 1-127.146614 50.346646c-49.066646 0-93.866628-19.199992-127.06128-50.346646C317.141201 544.853533 255.999893 637.440161 255.999893 744.106783c0 13.183995 10.709329 23.850657 23.978657 23.850657h506.709122a23.893323 23.893323 0 0 0 23.978657-23.893323c0-106.538622-61.098641-199.25325-150.186604-245.205232z" fill="#FFFFFF"></path></svg>'},{name:"23",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M445.610667 401.578667a129.322667 129.322667 0 1 0 258.645333 0 129.322667 129.322667 0 0 0-258.645333 0z m237.568 114.901333a157.354667 157.354667 0 0 1-216.362667 0 236.373333 236.373333 0 0 0-127.957333 209.706667c0 11.264 9.130667 20.394667 20.394666 20.394666h431.402667a20.394667 20.394667 0 0 0 20.394667-20.394666 236.373333 236.373333 0 0 0-127.872-209.706667zM409.813333 401.578667c0-40.362667 14.592-77.397333 38.698667-106.112a112.725333 112.725333 0 0 0-29.013333-3.925334 112.64 112.64 0 0 0-112.426667 112.469334 112.64 112.64 0 0 0 144.853333 107.648 164.693333 164.693333 0 0 1-42.112-110.08z m-18.602666 136.704a136.533333 136.533333 0 0 1-65.706667-34.474667 205.44 205.44 0 0 0-111.232 182.4c0 9.813333 7.936 17.706667 17.706667 17.706667H303.36a273.621333 273.621333 0 0 1 87.893333-165.632z" fill="#FFFFFF"></path></svg>'}]}],Y=(t,e=[])=>{let n=t.split("_");const r=Object(s["X"])([...G,...e]);let i=r.find(t=>t.type===n[0]);if(i){let t=i.list.find(t=>t.name===n[1]);return t?t.icon:""}return""};var K={hyperlink:U,note:$,attachment:V,nodeIconList:G,getNodeIconListIcon:Y},X=n("09a0");const Z=(t,e)=>{const n=new o["d"],r=(new o["j"]).text(t);return e.text(r),n.add(r),n.bbox()},J={radius:3,fontSize:12,fill:"",height:20,paddingX:8};function Q(){const t=this.getData("image");if(!t)return;const e=this.getImgShowSize(),n=(new o["e"]).load(t).size(...e),{defaultNodeImage:r}=this.mindMap.opt;if(r){const e=new Image;e.onerror=()=>{n.load(r)},e.src=t}return this.getData("imageTitle")&&n.attr("title",this.getData("imageTitle")),n.on("dblclick",t=>{this.mindMap.emit("node_img_dblclick",this,t)}),n.on("mouseenter",t=>{this.mindMap.emit("node_img_mouseenter",this,n,t)}),n.on("mouseleave",t=>{this.mindMap.emit("node_img_mouseleave",this,n,t)}),n.on("mousemove",t=>{this.mindMap.emit("node_img_mousemove",this,n,t)}),{node:n,width:e[0],height:e[1]}}function tt(){const{custom:t,width:e,height:n}=this.getData("imageSize");return t?[e,n]:Object(s["ib"])(e,n,this.mindMap.themeConfig.imgMaxWidth,this.mindMap.themeConfig.imgMaxHeight)}function et(){let t=this.getData();if(!t.icon||t.icon.length<=0)return[];let e=this.mindMap.themeConfig.iconSize;return t.icon.map(t=>{let n=K.getNodeIconListIcon(t,this.mindMap.opt.iconList||[]),r=null;return r=/^<svg/.test(n)?Object(o["i"])(n):(new o["e"]).load(n),r.size(e,e),r.on("click",e=>{this.mindMap.emit("node_icon_click",this,t,e,r)}),r.on("mouseenter",e=>{this.mindMap.emit("node_icon_mouseenter",this,t,e,r)}),r.on("mouseleave",e=>{this.mindMap.emit("node_icon_mouseleave",this,t,e,r)}),{node:r,width:e,height:e}})}function nt(t){const e=this.hasCustomWidth();let n="string"===typeof t?t:this.getData("text"),{textAutoWrapWidth:r,emptyTextMeasureHeightText:i}=this.mindMap.opt;r=e?this.customTextWidth:r;let a=new o["d"],l=!1;if(this.getData("resetRichText")&&(delete this.nodeData.data.resetRichText,l=!0),[X["a"].CHANGE_THEME].includes(this.mindMap.renderer.renderSource)&&(this.hasCustomStyle()||(l=!0)),l&&!Object(s["T"])(n)){let t=Object(s["g"])(n),e=this.style.createStyleText();if(t){n=Object(s["fb"])(n);let t=n;n=Object(s["b"])(n,"span",e),n===t&&(n=Object(s["b"])(n,"strong",e))}else n=`<p><span style="${e}">${n}</span></p>`;this.setData({text:n})}let c=`<div>${n}</div>`;this.mindMap.commonCaches.measureRichtextNodeTextSizeEl||(this.mindMap.commonCaches.measureRichtextNodeTextSizeEl=document.createElement("div"),this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.position="fixed",this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.left="-999999px",this.mindMap.el.appendChild(this.mindMap.commonCaches.measureRichtextNodeTextSizeEl));let h=this.mindMap.commonCaches.measureRichtextNodeTextSizeEl;h.innerHTML=c;let u=h.children[0];u.classList.add("smm-richtext-node-wrap"),Object(s["c"])(u),u.style.maxWidth=r+"px",u.style.width=e?this.customTextWidth+"px":"";let{width:d,height:f}=u.getBoundingClientRect();if(f<=0){h.innerHTML=`<p>${i}</p>`;let t=h.children[0];t.classList.add("smm-richtext-node-wrap"),f=t.getBoundingClientRect().height,h.innerHTML=c}d=Math.min(Math.ceil(d)+1,r),f=Math.ceil(f),a.attr("data-width",d),a.attr("data-height",f);const p=Object(s["m"])({el:h.children[0],width:d,height:f});return a.add(p),{node:a,nodeContent:p,width:d,height:f}}function rt(t){if(this.getData("richText"))return this.createRichTextNode(t);const e="string"===typeof t?t:this.getData("text");this.getData("resetRichText")&&delete this.nodeData.data.resetRichText;let n=new o["d"],r=this.getStyle("fontSize",!1),i=[];Object(s["T"])(e)||(i=String(e).split(/\n/gim));const{textAutoWrapWidth:a,emptyTextMeasureHeightText:l}=this.mindMap.opt;let c=i.length>1;i.forEach((t,e)=>{let n=t.split(""),r=[],o=[];while(n.length){let t=n.shift(),e=[...o,t].join("");Z(e,this.style).width<=a?o.push(t):(r.push(o.join("")),o=[t])}o.length>0&&r.push(o.join("")),r.length>1&&(c=!0),i[e]=r.join("\n")}),i=i.join("\n").split(/\n/gim),i.forEach((t,e)=>{let i=(new o["j"]).text(t);this.style.text(i),i.y(r*X["g"]*e+(X["g"]-1)*r/2),n.add(i)});let{width:h,height:u}=n.bbox();if(u<=0){const t=(new o["j"]).text(l);this.style.text(t);const e=t.bbox();u=e.height}return h=Math.min(Math.ceil(h),a),u=Math.ceil(u),n.attr("data-width",h),n.attr("data-height",u),n.attr("data-ismultiLine",c||i.length>1),{node:n,width:h,height:u}}function it(){let{hyperlink:t,hyperlinkTitle:e}=this.getData();if(!t)return;const{customHyperlinkJump:n}=this.mindMap.opt;let r=this.mindMap.themeConfig.iconSize,i=(new o["i"]).size(r,r),s=(new o["a"]).to(t).target("_blank");s.node.addEventListener("click",e=>{"function"===typeof n&&(e.preventDefault(),n(t,this))}),e&&i.add(Object(o["i"])(`<title>${e}</title>`)),s.rect(r,r).fill({color:"transparent"});let a=Object(o["i"])(K.hyperlink).size(r,r);return this.style.iconNode(a),s.add(a),i.add(s),{node:i,width:r,height:r}}function ot(){const t=this.getData("tag");if(!t||t.length<=0)return[];let{maxTag:e,tagsColorMap:n}=this.mindMap.opt;n=n||{};const r=[];return t.slice(0,e).forEach((t,e)=>{let i="",a={...J};"string"===typeof t?i=t:(i=t.text,a={...J,...t.style});const l="undefined"!==typeof a.width,c=new o["d"];c.on("click",()=>{this.mindMap.emit("node_tag_click",this,t,e,c)});const h=(new o["j"]).text(i);this.style.tagText(h,a);const{width:u,height:d}=h.bbox(),f=l?a.width:u+2*a.paddingX,p=l?Math.max(f,u):f,m=Math.max(a.height,d);l?h.x((p-u)/2):h.x(l?0:a.paddingX),h.cy(-m/2);const g=(new o["h"]).size(f,a.height).cy(-m/2);l&&g.x((p-f)/2),this.style.tagRect(g,{...a,fill:a.fill||n[h.node.textContent]||Object(s["y"])(h.node.textContent)}),c.add(g).add(h),r.push({node:c,width:p,height:m})}),r}function st(){if(!this.getData("note"))return null;let t=this.mindMap.themeConfig.iconSize,e=(new o["i"]).attr("cursor","pointer").addClass("smm-node-note").size(t,t);e.add((new o["h"]).size(t,t).fill({color:"transparent"}));let n=Object(o["i"])(K.note).size(t,t);if(this.style.iconNode(n),e.add(n),!this.mindMap.opt.customNoteContentShow){if(!this.noteEl){this.noteEl=document.createElement("div"),this.noteEl.style.cssText=`\n          position: fixed;\n          padding: 10px;\n          border-radius: 5px;\n          box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\n          display: none;\n          background-color: #fff;\n          z-index: ${this.mindMap.opt.nodeNoteTooltipZIndex}\n      `;const t=this.mindMap.opt.customInnerElsAppendTo||document.body;t.appendChild(this.noteEl)}this.noteEl.innerText=this.getData("note")}return e.on("mouseover",()=>{const{left:t,top:e}=this.getNoteContentPosition();this.mindMap.opt.customNoteContentShow?this.mindMap.opt.customNoteContentShow.show(this.getData("note"),t,e,this):(this.noteEl.style.left=t+"px",this.noteEl.style.top=e+"px",this.noteEl.style.display="block")}),e.on("mouseout",()=>{this.mindMap.opt.customNoteContentShow?this.mindMap.opt.customNoteContentShow.hide():this.noteEl.style.display="none"}),e.on("click",t=>{this.mindMap.emit("node_note_click",this,t,e)}),{node:e,width:t,height:t}}function at(){const{attachmentUrl:t,attachmentName:e}=this.getData();if(!t)return;const n=this.mindMap.themeConfig.iconSize,r=(new o["i"]).attr("cursor","pointer").size(n,n);e&&r.add(Object(o["i"])(`<title>${e}</title>`)),r.add((new o["h"]).size(n,n).fill({color:"transparent"}));const i=Object(o["i"])(K.attachment).size(n,n);return this.style.iconNode(i),r.add(i),r.on("click",t=>{this.mindMap.emit("node_attachmentClick",this,t,r)}),r.on("contextmenu",t=>{this.mindMap.emit("node_attachmentContextmenu",this,t,r)}),{node:r,width:n,height:n}}function lt(){const t=this.mindMap.themeConfig.iconSize,{scaleY:e}=this.mindMap.view.getTransformData().transform,n=t*e;let{left:r,top:i}=this._noteData.node.node.getBoundingClientRect();return i+=n,{left:r,top:i}}function ct(t){this.mindMap.commonCaches.measureCustomNodeContentSizeEl||(this.mindMap.commonCaches.measureCustomNodeContentSizeEl=document.createElement("div"),this.mindMap.commonCaches.measureCustomNodeContentSizeEl.style.cssText="\n      position: fixed;\n      left: -99999px;\n      top: -99999px;\n    ",this.mindMap.el.appendChild(this.mindMap.commonCaches.measureCustomNodeContentSizeEl)),this.mindMap.commonCaches.measureCustomNodeContentSizeEl.innerHTML="",this.mindMap.commonCaches.measureCustomNodeContentSizeEl.appendChild(t);let e=this.mindMap.commonCaches.measureCustomNodeContentSizeEl.getBoundingClientRect();return{width:e.width,height:e.height}}function ht(){return!!this._customNodeContent}var ut={createImgNode:Q,getImgShowSize:tt,createIconNode:et,createRichTextNode:nt,createTextNode:rt,createHyperlinkNode:it,createTagNode:ot,createNoteNode:st,createAttachmentNode:at,getNoteContentPosition:lt,measureCustomNodeContentSize:ct,isUseCustomNodeContent:ht};function dt(){if(!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot)return;const{alwaysShowExpandBtn:t,notShowExpandBtn:e}=this.mindMap.opt;if(!t&&!e){let{width:t,height:e}=this;this._unVisibleRectRegionNode||(this._unVisibleRectRegionNode=new o["h"],this._unVisibleRectRegionNode.fill({color:"transparent"})),this.group.add(this._unVisibleRectRegionNode),this.renderer.layout.renderExpandBtnRect(this._unVisibleRectRegionNode,this.expandBtnSize,t,e,this)}}function ft(){this._unVisibleRectRegionNode&&(this._unVisibleRectRegionNode.remove(),this._unVisibleRectRegionNode=null)}function pt(){this.needRerenderExpandBtnPlaceholderRect&&(this.needRerenderExpandBtnPlaceholderRect=!1,this.renderExpandBtnPlaceholderRect()),this.nodeData.children&&this.nodeData.children.length>0?this._unVisibleRectRegionNode||this.renderExpandBtnPlaceholderRect():this._unVisibleRectRegionNode&&this.clearExpandBtnPlaceholderRect()}var mt={renderExpandBtnPlaceholderRect:dt,clearExpandBtnPlaceholderRect:ft,updateExpandBtnPlaceholderRect:pt};function gt(){this.checkEnableDragModifyNodeWidth()&&(this._dragHandleNodes=null,this.dragHandleWidth=2,this.dragHandleMousedownX=0,this.isDragHandleMousedown=!1,this.dragHandleIndex=0,this.dragHandleMousedownCustomTextWidth=0,this.dragHandleMousedownBodyCursor="",this.dragHandleMousedownLeft=0,this.onDragMousemoveHandle=this.onDragMousemoveHandle.bind(this),window.addEventListener("mousemove",this.onDragMousemoveHandle),this.onDragMouseupHandle=this.onDragMouseupHandle.bind(this),window.addEventListener("mouseup",this.onDragMouseupHandle),this.mindMap.on("node_mouseup",this.onDragMouseupHandle))}function vt(t){if(!this.isDragHandleMousedown)return;t.stopPropagation(),t.preventDefault();let{minNodeTextModifyWidth:e,maxNodeTextModifyWidth:n,isUseCustomNodeContent:r,customCreateNodeContent:i}=this.mindMap.opt;const o=r&&i&&this._customNodeContent;document.body.style.cursor="ew-resize",this.group.css({cursor:"ew-resize"});const{scaleX:s}=this.mindMap.draw.transform(),a=t.clientX-this.dragHandleMousedownX;let l=this.dragHandleMousedownCustomTextWidth+(0===this.dragHandleIndex?-a:a)/s;if(l=Math.max(l,e),-1!==n&&(l=Math.min(l,n)),!o&&this.getData("image")){const t=this.getImgShowSize();this._rectInfo.textContentWidth-this.customTextWidth+l<=t[0]&&(l=t[0]+this.customTextWidth-this._rectInfo.textContentWidth)}this.customTextWidth=l,0===this.dragHandleIndex&&(this.left=this.dragHandleMousedownLeft+a/s),this.reRender(o?[]:["text"],{ignoreUpdateCustomTextWidth:!0})}function yt(){this.isDragHandleMousedown&&(document.body.style.cursor=this.dragHandleMousedownBodyCursor,this.group.css({cursor:"default"}),this.isDragHandleMousedown=!1,this.dragHandleMousedownX=0,this.dragHandleIndex=0,this.dragHandleMousedownCustomTextWidth=0,this.setData({customTextWidth:this.customTextWidth}),this.mindMap.render(),this.mindMap.emit("dragModifyNodeWidthEnd",this))}function bt(){const t=[new o["h"],new o["h"]];return t.forEach((t,e)=>{t.size(this.dragHandleWidth,this.height).fill({color:"transparent"}).css({cursor:"ew-resize"}),t.on("mousedown",t=>{t.stopPropagation(),t.preventDefault(),this.dragHandleMousedownX=t.clientX,this.dragHandleIndex=e,this.dragHandleMousedownCustomTextWidth=void 0===this.customTextWidth?this._textData?this._textData.width:this.width:this.customTextWidth,this.dragHandleMousedownBodyCursor=document.body.style.cursor,this.dragHandleMousedownLeft=this.left,this.isDragHandleMousedown=!0})}),t}function wt(){this.checkEnableDragModifyNodeWidth()&&(this._dragHandleNodes||(this._dragHandleNodes=this.createDragHandleNode()),this.getData("isActive")?(this._dragHandleNodes.forEach(t=>{t.height(this.height),this.group.add(t)}),this._dragHandleNodes[1].x(this.width-this.dragHandleWidth)):this._dragHandleNodes.forEach(t=>{t.remove()}))}var xt={initDragHandle:gt,onDragMousemoveHandle:vt,onDragMouseupHandle:yt,createDragHandleNode:bt,updateDragHandle:wt};function Ct(){this.mindMap.cooperate&&(this._userListGroup=new o["d"],this.group.add(this._userListGroup))}function Et(t){const{avatarSize:e,fontSize:n}=this.mindMap.opt.cooperateStyle,r=new o["d"],i=t.isMore?t.name:String(t.name)[0],a=(new o["b"]).size(e,e);a.fill({color:t.color||Object(s["y"])(i)});const l=(new o["j"]).text(i).fill({color:"#fff"}).css({"font-size":n+"px"}).dx(-n/2).dy((e-n)/2);return r.add(a).add(l),r}function kt(t){const{avatarSize:e}=this.mindMap.opt.cooperateStyle;return(new o["e"]).load(t.avatar).size(e,e)}function Nt(){if(!this._userListGroup)return;const{avatarSize:t}=this.mindMap.opt.cooperateStyle;this._userListGroup.clear();const e=this.userList.length,n=Math.floor(this.width/t),r=[];e>n?r.push(...this.userList.slice(0,n-1),{isMore:!0,name:"+"+(e-n+1)}):r.push(...this.userList),r.forEach((e,n)=>{let r=null;r=e.avatar?this.createImageAvatar(e):this.createTextAvatar(e),r.on("click",t=>{this.mindMap.emit("node_cooperate_avatar_click",e,this,r,t)}),r.on("mouseenter",t=>{this.mindMap.emit("node_cooperate_avatar_mouseenter",e,this,r,t)}),r.on("mouseleave",t=>{this.mindMap.emit("node_cooperate_avatar_mouseleave",e,this,r,t)}),r.x(n*t).cy(-t/2),this._userListGroup.add(r)})}function Ot(t){this.userList.find(e=>e.id==t.id)||(this.userList.push(t),this.updateUserListNode())}function Tt(t){const e=this.userList.findIndex(e=>e.id==t.id);-1!==e&&(this.userList.splice(e,1),this.updateUserListNode())}function Mt(){this.userList=[],this.updateUserListNode()}var St={createUserListNode:Ct,updateUserListNode:Nt,createTextAvatar:Et,createImageAvatar:kt,addUser:Ot,removeUser:Tt,emptyUser:Mt};class Lt{constructor(t={}){this.opt=t,this.nodeData=this.handleData(t.data||{}),this.nodeDataSnapshot="",this.uid=t.uid,this.mindMap=t.mindMap,this.renderer=t.renderer,this.draw=this.mindMap.draw,this.nodeDraw=this.mindMap.nodeDraw,this.lineDraw=this.mindMap.lineDraw,this.style=new r["a"](this),this.effectiveStyles={},this.shapeInstance=new i["a"](this),this.shapePadding={paddingX:0,paddingY:0},this.isRoot=void 0!==t.isRoot&&t.isRoot,this.isGeneralization=void 0!==t.isGeneralization&&t.isGeneralization,this.generalizationBelongNode=null,this.layerIndex=void 0===t.layerIndex?0:t.layerIndex,this.width=t.width||0,this.height=t.height||0,this.customTextWidth=t.data.data.customTextWidth||void 0,this._left=t.left||0,this._top=t.top||0,this.customLeft=t.data.data.customLeft||void 0,this.customTop=t.data.data.customTop||void 0,this.isDrag=!1,this.parent=t.parent||null,this.children=t.children||[],this.userList=[],this.group=null,this.shapeNode=null,this.hoverNode=null,this._customNodeContent=null,this._imgData=null,this._iconData=null,this._textData=null,this._hyperlinkData=null,this._tagData=null,this._noteData=null,this.noteEl=null,this.noteContentIsShow=!1,this._attachmentData=null,this._prefixData=null,this._postfixData=null,this._expandBtn=null,this._lastExpandBtnType=null,this._showExpandBtn=!1,this._openExpandNode=null,this._closeExpandNode=null,this._fillExpandNode=null,this._userListGroup=null,this._lines=[],this._generalizationList=[],this._unVisibleRectRegionNode=null,this._isMouseenter=!1,this._rectInfo={imgContentWidth:0,imgContentHeight:0,textContentWidth:0,textContentHeight:0},this._generalizationNodeWidth=0,this._generalizationNodeHeight=0,this.textContentItemMargin=this.mindMap.opt.textContentMargin,this.blockContentMargin=this.mindMap.opt.imgTextMargin,this.expandBtnSize=this.mindMap.opt.expandBtnSize,this.isMultipleChoice=!1,this.needLayout=!1,this.isHide=!1;const e=Object.getPrototypeOf(this);e.bindEvent||(Object.keys(x).forEach(t=>{e[t]=x[t]}),Object.keys(A).forEach(t=>{e[t]=A[t]}),Object.keys(mt).forEach(t=>{e[t]=mt[t]}),Object.keys(W).forEach(t=>{e[t]=W[t]}),Object.keys(ut).forEach(t=>{e[t]=ut[t]}),this.mindMap.cooperate&&Object.keys(St).forEach(t=>{e[t]=St[t]}),Object.keys(xt).forEach(t=>{e[t]=xt[t]}),e.bindEvent=!0),this.getSize(),this.initDragHandle()}get left(){return this.customLeft||this._left}set left(t){this._left=t}get top(){return this.customTop||this._top}set top(t){this._top=t}reset(){this.children=[],this.parent=null,this.isRoot=!1,this.layerIndex=0,this.left=0,this.top=0}resetWhenDelete(){this._isMouseenter=!1}handleData(t){return t.data.expand=!1!==t.data.expand,t.data.isActive=!0===t.data.isActive,t.children=t.children||[],t}createNodeData(t){const{isUseCustomNodeContent:e,customCreateNodeContent:n,createNodePrefixContent:r,createNodePostfixContent:i}=this.mindMap.opt,o=["custom","image","icon","text","hyperlink","tag","note","attachment","prefix","postfix",...this.mindMap.nodeInnerPrefixList.map(t=>t.name)],a={};Array.isArray(t)?o.forEach(e=>{t.includes(e)&&(a[e]=!0)}):o.forEach(t=>{a[t]=!0}),e&&n&&a.custom&&(this._customNodeContent=n(this)),this._customNodeContent?Object(s["c"])(this._customNodeContent):(a.image&&(this._imgData=this.createImgNode()),a.icon&&(this._iconData=this.createIconNode()),a.text&&(this._textData=this.createTextNode()),a.hyperlink&&(this._hyperlinkData=this.createHyperlinkNode()),a.tag&&(this._tagData=this.createTagNode()),a.note&&(this._noteData=this.createNoteNode()),a.attachment&&(this._attachmentData=this.createAttachmentNode()),this.mindMap.nodeInnerPrefixList.forEach(t=>{a[t.name]&&(this[`_${t.name}Data`]=t.createContent(this))}),a.prefix&&(this._prefixData=r?r(this):null,this._prefixData&&this._prefixData.el&&Object(s["c"])(this._prefixData.el)),a.postfix&&(this._postfixData=i?i(this):null,this._postfixData&&this._postfixData.el&&Object(s["c"])(this._postfixData.el)))}getSize(t,e={}){const n=e.ignoreUpdateCustomTextWidth||!1;n||(this.customTextWidth=this.getData("customTextWidth")||void 0),this.customLeft=this.getData("customLeft")||void 0,this.customTop=this.getData("customTop")||void 0,this.createNodeData(t);const{width:r,height:i}=this.getNodeRect(),o=this.width!==r||this.height!==i;return this.width=r,this.height=i,o}getNodeRect(){if(this.isUseCustomNodeContent()){const t=this.measureCustomNodeContentSize(this._customNodeContent);return{width:this.hasCustomWidth()?this.customTextWidth:t.width,height:t.height}}const{tagPosition:t}=this.mindMap.opt,e=t===X["a"].TAG_POSITION.BOTTOM;let n=0,r=0,i=0,o=0,s=0,a=0;if(this._imgData&&(this._rectInfo.imgContentWidth=n=this._imgData.width,this._rectInfo.imgContentHeight=r=this._imgData.height),this.mindMap.nodeInnerPrefixList.forEach(t=>{const e=this[`_${t.name}Data`];e&&(i+=e.width,o=Math.max(o,e.height))}),this._prefixData&&(i+=this._prefixData.width,o=Math.max(o,this._prefixData.height)),this._iconData.length>0&&(i+=this._iconData.reduce((t,e)=>(o=Math.max(o,e.height),t+(e.width+this.textContentItemMargin)),0)),this._textData&&(i+=this._textData.width,o=Math.max(o,this._textData.height)),this._hyperlinkData&&(i+=this._hyperlinkData.width,o=Math.max(o,this._hyperlinkData.height)),this._tagData.length>0){let t=0;const n=this._tagData.reduce((e,n)=>(t=Math.max(t,n.height),e+(n.width+this.textContentItemMargin)),0);e?(s=n,a=t):(i+=n,o=Math.max(o,t))}this._noteData&&(i+=this._noteData.width,o=Math.max(o,this._noteData.height)),this._attachmentData&&(i+=this._attachmentData.width,o=Math.max(o,this._attachmentData.height)),this._postfixData&&(i+=this._postfixData.width,o=Math.max(o,this._postfixData.height)),this._rectInfo.textContentWidth=i,this._rectInfo.textContentHeight=o;let l=r>0&&o>0?this.blockContentMargin:0;const{paddingX:c,paddingY:h}=this.getPaddingVale();let u=Math.max(n,i),d=r+o;e&&a>0&&o>0&&(l+=this.blockContentMargin,u=Math.max(u,s),d+=a);const{paddingX:f,paddingY:p}=this.shapeInstance.getShapePadding(u,d,c,h);this.shapePadding.paddingX=f,this.shapePadding.paddingY=p;const m=this.getBorderWidth();return{width:u+2*c+2*f+m,height:d+2*h+l+2*p+m}}layout(){if(!this.group)return;this.group.clear();const{hoverRectPadding:t,tagPosition:e,openRealtimeRenderOnNodeTextEdit:n}=this.mindMap.opt;let{width:r,height:i,textContentItemMargin:a}=this,{paddingY:l}=this.getPaddingVale();const c=this.getBorderWidth()/2;l+=this.shapePadding.paddingY+c,this.shapeNode=this.shapeInstance.createShape(),this.shapeNode.addClass("smm-node-shape"),this.shapeNode.translate(c,c),this.style.shape(this.shapeNode),this.group.add(this.shapeNode),this.renderExpandBtnPlaceholderRect(),this.createUserListNode&&this.createUserListNode(),this.isGeneralization&&this.generalizationBelongNode&&this.group.addClass("generalization_"+this.generalizationBelongNode.uid);const h=()=>{this.hoverNode=(new o["h"]).size(r+2*t,i+2*t).x(-t).y(-t),this.hoverNode.addClass("smm-hover-node"),this.style.hoverNode(this.hoverNode,r,i),this.group.add(this.hoverNode)};if(this.isUseCustomNodeContent()){const t=Object(s["m"])({el:this._customNodeContent,width:r,height:i});return this.group.add(t),void h()}const u=e===X["a"].TAG_POSITION.BOTTOM,{textContentHeight:d}=this._rectInfo;let f=0;this._imgData&&(f=this._imgData.height,this.group.add(this._imgData.node),this._imgData.node.cx(r/2).y(l));let p=new o["d"],m=0;if(this.mindMap.nodeInnerPrefixList.forEach(t=>{const e=this[`_${t.name}Data`];e&&(e.node.x(m).y((d-e.height)/2),p.add(e.node),m+=e.width+a)}),this._prefixData){const t=Object(s["m"])({el:this._prefixData.el,width:this._prefixData.width,height:this._prefixData.height});t.x(m).y((d-this._prefixData.height)/2),p.add(t),m+=this._prefixData.width+a}let g=new o["d"];if(this._iconData&&this._iconData.length>0){let t=0;this._iconData.forEach(e=>{e.node.x(m+t).y((d-e.height)/2),g.add(e.node),t+=e.width+a}),p.add(g),m+=t}if(this._textData){const t=this._textData.node.attr("data-offsetx")||0;this._textData.node.attr("data-offsetx",m),(this._textData.nodeContent||this._textData.node).x(-t).x(m).y((d-this._textData.height)/2),n&&this._textData.node.opacity(this.mindMap.renderer.textEdit.getCurrentEditNode()===this?0:1),p.add(this._textData.node),m+=this._textData.width+a}this._hyperlinkData&&(this._hyperlinkData.node.x(m).y((d-this._hyperlinkData.height)/2),p.add(this._hyperlinkData.node),m+=this._hyperlinkData.width+a);let v=new o["d"];if(this._tagData&&this._tagData.length>0)if(u){let t=0;this._tagData.forEach(e=>{e.node.x(t).y(0),v.add(e.node),t+=e.width+a}),v.cx(r/2).y(l+f+d+(f>0&&d>0?this.blockContentMargin:0)+this.blockContentMargin),this.group.add(v)}else{let t=0;this._tagData.forEach(e=>{e.node.x(m+t).y((d-e.height)/2),v.add(e.node),t+=e.width+a}),p.add(v),m+=t}if(this._noteData&&(this._noteData.node.x(m).y((d-this._noteData.height)/2),p.add(this._noteData.node),m+=this._noteData.width),this._attachmentData&&(this._attachmentData.node.x(m).y((d-this._attachmentData.height)/2),p.add(this._attachmentData.node),m+=this._attachmentData.width),this._postfixData){const t=Object(s["m"])({el:this._postfixData.el,width:this._postfixData.width,height:this._postfixData.height});t.x(m).y((d-this._postfixData.height)/2),p.add(t),m+=this._postfixData.width}this.group.add(p),p.translate(r/2-p.bbox().width/2,l+f+(f>0&&d>0?this.blockContentMargin:0)),h(),this.mindMap.emit("node_layout_end",this)}bindGroupEvent(){this.group.on("click",t=>{if(this.mindMap.emit("node_click",this,t),this.isMultipleChoice)return t.stopPropagation(),void(this.isMultipleChoice=!1);this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate&&this.userList.length>0||this.active(t)}),this.group.on("mousedown",t=>{const{readonly:e,enableCtrlKeyNodeSelection:n,useLeftKeySelectionRightKeyDrag:r,mousedownEventPreventDefault:i}=this.mindMap.opt;if(i&&t.preventDefault(),e||(this.isRoot?3!==t.which||r||t.stopPropagation():2!==t.which&&t.stopPropagation()),!e&&(t.ctrlKey||t.metaKey)&&n){this.isMultipleChoice=!0;const t=this.getData("isActive");t||this.mindMap.emit("before_node_active",this,this.renderer.activeNodeList),this.mindMap.renderer[t?"removeNodeFromActiveList":"addNodeToActiveList"](this,!0),this.renderer.emitNodeActiveEvent(t?null:this)}this.mindMap.emit("node_mousedown",this,t)}),this.group.on("mouseup",t=>{this.isRoot||2===t.which||this.mindMap.opt.readonly||t.stopPropagation(),this.mindMap.emit("node_mouseup",this,t)}),this.group.on("mouseenter",t=>{this.isDrag||(this._isMouseenter=!0,this.showExpandBtn(),this.isGeneralization&&this.handleGeneralizationMouseenter(),this.mindMap.emit("node_mouseenter",this,t))}),this.group.on("mouseleave",t=>{this._isMouseenter&&(this._isMouseenter=!1,this.hideExpandBtn(),this.isGeneralization&&this.handleGeneralizationMouseleave(),this.mindMap.emit("node_mouseleave",this,t))}),this.group.on("dblclick",t=>{const{readonly:e,onlyOneEnableActiveNodeOnCooperate:n}=this.mindMap.opt;e||t.ctrlKey||t.metaKey||(t.stopPropagation(),n&&this.userList.length>0||this.mindMap.emit("node_dblclick",this,t))}),this.group.on("contextmenu",t=>{const{readonly:e,useLeftKeySelectionRightKeyDrag:n}=this.mindMap.opt;e||t.ctrlKey||(t.stopPropagation(),t.preventDefault(),this.mindMap.select&&!n&&this.mindMap.select.hasSelectRange()||(this.getData("isActive")&&1===this.renderer.activeNodeList.length||(this.renderer.clearActiveNodeList(),this.active(t)),this.mindMap.emit("node_contextmenu",t,this)))})}active(t){this.mindMap.opt.readonly||(t&&t.stopPropagation(),this.getData("isActive")||(this.mindMap.emit("before_node_active",this,this.renderer.activeNodeList),this.renderer.clearActiveNodeList(),this.renderer.addNodeToActiveList(this,!0),this.renderer.emitNodeActiveEvent(this)))}deactivate(){this.mindMap.renderer.removeNodeFromActiveList(this),this.mindMap.renderer.emitNodeActiveEvent()}update(t){if(!this.group)return;this.updateNodeActiveClass();const{alwaysShowExpandBtn:e,notShowExpandBtn:n}=this.mindMap.opt;if(!n){const t=this.nodeData.children.length;if(e)this._expandBtn&&t<=0?this.removeExpandBtn():this.renderExpandBtn();else{const{isActive:e,expand:n}=this.getData();t<=0?this.removeExpandBtn():!n||e||this._isMouseenter?this.showExpandBtn():this.hideExpandBtn()}}this.updateDragHandle(),this.renderGeneralization(t),this.updateUserListNode&&this.updateUserListNode();const r=this.group.transform();this.nodeDataSnapshot=JSON.stringify(this.getData()),this.left===r.translateX&&this.top===r.translateY||this.group.translate(this.left-r.translateX,this.top-r.translateY)}getNodePosInClient(t,e){const n=this.mindMap.draw.transform(),{scaleX:r,scaleY:i,translateX:o,translateY:s}=n,a=t*r+o,l=e*i+s;return{left:a,top:l}}checkIsInClient(t=0){const{left:e,top:n}=this.getNodePosInClient(this.left,this.top);return e+this.width>0-t&&n+this.height>0-t&&e<this.mindMap.width+t&&n<this.mindMap.height+t}reRender(t,e){const n=this.getSize(t,e);return this.layout(),this.update(),n}updateNodeActiveClass(){if(!this.group)return;const t=this.getData("isActive");this.group[t?"addClass":"removeClass"]("active")}updateNodeByActive(t){this.group&&(t?this.showExpandBtn():this.hideExpandBtn(),this.updateNodeActiveClass(),this.updateDragHandle())}render(t=(()=>{}),e=!1,n=!1){this.renderLine();const{openPerformance:r,performanceConfig:i}=this.mindMap.opt;if(e||!r||this.checkIsInClient(i.padding)||this.isRoot?this.group?(this.nodeDraw.has(this.group)||this.nodeDraw.add(this.group),this.needLayout&&(this.needLayout=!1,this.layout()),this.updateExpandBtnPlaceholderRect(),this.update(e)):(this.group=new o["d"],this.group.addClass("smm-node"),this.group.css({cursor:"default"}),this.bindGroupEvent(),this.nodeDraw.add(this.group),this.layout(),this.update(e)):r&&i.removeNodeWhenOutCanvas&&this.removeSelf(),this.children&&this.children.length&&!1!==this.getData("expand")){let r=0;this.children.forEach(i=>{const o=()=>{i.render(()=>{r++,r>=this.children.length&&t()},e,n)};n?setTimeout(o,0):o()})}else t();this.nodeData.inserting&&(delete this.nodeData.inserting,this.active(),this.mindMap.emit("node_dblclick",this,null,!0))}removeSelf(){this.group&&(this.group.remove(),this.removeGeneralization())}remove(){this.group&&(this.group.remove(),this.removeGeneralization(),this.removeLine(),this.children&&this.children.length&&this.children.forEach(t=>{t.remove()}))}destroy(){this.removeLine(),this.parent&&this.parent.removeLine(),this.group&&(this.emptyUser&&this.emptyUser(),this.resetWhenDelete(),this.group.remove(),this.removeGeneralization(),this.group=null,this.style.onRemove())}hide(){if(this.group&&this.group.hide(),this.hideGeneralization(),this.parent){const t=this.parent.children.indexOf(this);this.parent._lines[t]&&this.parent._lines[t].hide(),this._lines.forEach(t=>{t.hide()})}this.children&&this.children.length&&this.children.forEach(t=>{t.hide()})}show(){if(this.group){if(this.group.show(),this.showGeneralization(),this.parent){const t=this.parent.children.indexOf(this);this.parent._lines[t]&&this.parent._lines[t].show(),this._lines.forEach(t=>{t.show()})}this.children&&this.children.length&&this.children.forEach(t=>{t.show()})}}setOpacity(t){this.group&&this.group.opacity(t),this._lines.forEach(e=>{e.opacity(t)}),this.children.forEach(e=>{e.setOpacity(t)}),this.setGeneralizationOpacity(t)}hideChildren(){this._lines.forEach(t=>{t.hide()}),this.children&&this.children.length&&this.children.forEach(t=>{t.hide()})}showChildren(){this._lines.forEach(t=>{t.show()}),this.children&&this.children.length&&this.children.forEach(t=>{t.show()})}startDrag(){this.isDrag=!0,this.group&&this.group.addClass("smm-node-dragging")}endDrag(){this.isDrag=!1,this.group&&this.group.removeClass("smm-node-dragging")}renderLine(t=!1){if(!1===this.getData("expand"))return;let e=this.nodeData.children.length;this.mindMap.opt.layout!==X["a"].LAYOUT.FISHBONE||!this.isRoot&&1!==this.layerIndex||(e=0),e>this._lines.length?new Array(e-this._lines.length).fill(0).forEach(()=>{this._lines.push(this.lineDraw.path())}):e<this._lines.length&&(this._lines.slice(e).forEach(t=>{t.remove()}),this._lines=this._lines.slice(0,e)),this.renderer.layout.renderLine(this,this._lines,(...t)=>{this.styleLine(...t)},this.style.getStyle("lineStyle",!0)),t&&this.children&&this.children.length>0&&this.children.forEach(e=>{e.renderLine(t)})}getShape(){return this.mindMap.themeConfig.nodeUseLineStyle?X["a"].SHAPE.RECTANGLE:this.style.getStyle("shape",!1,!1)}hasCustomPosition(){return void 0!==this.customLeft&&void 0!==this.customTop}ancestorHasCustomPosition(){let t=this;while(t){if(t.hasCustomPosition())return!0;t=t.parent}return!1}ancestorHasGeneralization(){let t=this.parent;while(t){if(t.checkHasGeneralization())return!0;t=t.parent}return!1}addChildren(t){this.children.push(t)}styleLine(t,e,n){const r=e.getSelfInhertStyle("lineWidth")||e.getStyle("lineWidth",!0),i=e.getSelfInhertStyle("lineColor")||this.getRainbowLineColor(e)||e.getStyle("lineColor",!0),o=e.getSelfInhertStyle("lineDasharray")||e.getStyle("lineDasharray",!0);this.style.line(t,{width:r,color:i,dasharray:o},n,e)}getRainbowLineColor(t){return this.mindMap.rainbowLines?this.mindMap.rainbowLines.getNodeColor(t):""}removeLine(){this._lines.forEach(t=>{t.remove()}),this._lines=[]}isAncestor(t){if(this.uid===t.uid)return!1;let e=t.parent;while(e){if(this.uid===e.uid)return!0;e=e.parent}return!1}isParent(t){if(this.uid===t.uid)return!1;const e=t.parent;return!(!e||this.uid!==e.uid)}isBrother(t){return!(!this.parent||this.uid===t.uid)&&this.parent.children.find(e=>e.uid===t.uid)}getIndexInBrothers(){return this.parent&&this.parent.children?this.parent.children.findIndex(t=>t.uid===this.uid):-1}getPaddingVale(){return{paddingX:this.getStyle("paddingX"),paddingY:this.getStyle("paddingY")}}getStyle(t,e){const n=this.style.merge(t,e);return void 0===n?"":n}getSelfStyle(t){return this.style.getSelfStyle(t)}getParentSelfStyle(t){return this.parent?this.parent.getSelfStyle(t)||this.parent.getParentSelfStyle(t):null}getSelfInhertStyle(t){return this.getSelfStyle(t)||this.getParentSelfStyle(t)}getBorderWidth(){return this.style.merge("borderWidth",!1)||0}getData(t){return t?this.nodeData.data[t]:this.nodeData.data}getPureData(t=!0,e=!1){return Object(s["k"])({},this,t,e)}getAncestorNodes(){const t=[];let e=this.parent;while(e)t.unshift(e),e=e.parent;return t}hasCustomStyle(){return this.style.hasCustomStyle()}getRect(){return this.group?this.group.rbox():null}getRectInSvg(){const{scaleX:t,scaleY:e,translateX:n,translateY:r}=this.mindMap.draw.transform();let{left:i,top:o,width:s,height:a}=this;const l=(i+s)*t+n,c=(o+a)*e+r;return i=i*t+n,o=o*e+r,{left:i,right:l,top:o,bottom:c,width:s*t,height:a*e}}highlight(){this.group&&this.group.addClass("smm-node-highlight")}closeHighlight(){this.group&&this.group.removeClass("smm-node-highlight")}fakeClone(){const t=new Lt({...this.opt,uid:Object(s["o"])()});return Object.keys(this).forEach(e=>{t[e]=this[e]}),t}createSvgTextNode(t=""){return(new o["j"]).text(t)}getSvgObjects(){return{SVG:o["i"],G:o["d"],Rect:o["h"]}}checkEnableDragModifyNodeWidth(){const{enableDragModifyNodeWidth:t,isUseCustomNodeContent:e,customCreateNodeContent:n}=this.mindMap.opt;return t&&(this.mindMap.richText||e&&n)}hasCustomWidth(){return this.checkEnableDragModifyNodeWidth()&&void 0!==this.customTextWidth}}var At=e["a"]=Lt},5733:function(t,e,n){"use strict";var r=n("d056");class i{constructor(t){this.mindMap=t.mindMap,this.isMousedown=!1,this.mousedownPos={x:0,y:0},this.startViewPos={x:0,y:0},this.currentState=null}calculationMiniMap(t,e){let{svg:n,rect:r,origWidth:i,origHeight:o,scaleX:s,scaleY:a}=this.mindMap.getSvgData({ignoreWatermark:!0});const l=this.mindMap.elRect;r.x-=l.left,r.x2-=l.left,r.y-=l.top,r.y2-=l.top;let c=t/e,h=0,u=0;c>r.ratio?(u=e,h=r.ratio*u):(h=t,u=h/r.ratio);let d=h/r.width,f=(t-h)/2,p=(e-u)/2,m=r.width*s,g=r.height*a,v=(m-r.width)/2,y=(g-r.height)/2,b=r.x-v,w=r.x2+v,x=r.y-y,C=r.y2+y,E={left:0,top:0,right:0,bottom:0};E.left=Math.max(0,-b/m*h)+f,E.right=Math.max(0,(w-i)/m*h)+f,E.top=Math.max(0,-x/g*u)+p,E.bottom=Math.max(0,(C-o)/g*u)+p,E.top>p+u&&(E.top=p+u),E.left>f+h&&(E.left=f+h),Object.keys(E).forEach(t=>{E[t]=E[t]+"px"}),this.removeNodeContent(n);const k=n.svg();return this.currentState={viewBoxStyle:{...E},miniMapBoxScale:d,miniMapBoxLeft:f,miniMapBoxTop:p},{getImgUrl:async t=>{const e=await this.mindMap.doExport.fixSvgStrAndToBlob(k);t(e)},svgHTML:k,viewBoxStyle:E,miniMapBoxScale:d,miniMapBoxLeft:f,miniMapBoxTop:p}}removeNodeContent(t){if(t.hasClass("smm-node")){let e=t.findOne(".smm-node-shape"),n=e.attr("fill");return(Object(r["U"])(n)||Object(r["S"])(n))&&e.attr("fill",Object(r["K"])(this.mindMap.themeConfig)),t.clear(),void t.add(e)}let e=t.children();e&&e.length>0&&e.forEach(t=>{this.removeNodeContent(t)})}onMousedown(t){this.isMousedown=!0,this.mousedownPos={x:t.clientX,y:t.clientY};let e=this.mindMap.view.getTransformData();this.startViewPos={x:e.state.x,y:e.state.y}}onMousemove(t,e=5){if(!this.isMousedown||this.isViewBoxMousedown)return;let n=t.clientX-this.mousedownPos.x,r=t.clientY-this.mousedownPos.y;this.mindMap.view.translateXTo(n*e+this.startViewPos.x),this.mindMap.view.translateYTo(r*e+this.startViewPos.y)}onMouseup(){this.isMousedown=!1,this.isViewBoxMousedown=!1}onViewBoxMousedown(t){this.isViewBoxMousedown=!0,this.mousedownPos={x:t.clientX,y:t.clientY};let e=this.mindMap.view.getTransformData();this.startViewPos={x:e.state.x,y:e.state.y}}onViewBoxMousemove(t){if(!this.isViewBoxMousedown||!this.currentState||this.isMousedown)return;let e=t.clientX-this.mousedownPos.x,n=t.clientY-this.mousedownPos.y;const{viewBoxStyle:r,miniMapBoxScale:i,miniMapBoxLeft:o,miniMapBoxTop:s}=this.currentState,a=Math.max(o,Number.parseFloat(r.left)+e),l=Math.max(o,Number.parseFloat(r.right)-e),c=Math.max(s,Number.parseFloat(r.top)+n),h=Math.max(s,Number.parseFloat(r.bottom)-n);this.mindMap.emit("mini_map_view_box_position_change",{left:a+"px",right:l+"px",top:c+"px",bottom:h+"px"}),this.mindMap.view.translateXTo(-e/i+this.startViewPos.x),this.mindMap.view.translateYTo(-n/i+this.startViewPos.y)}}i.instanceName="miniMap",e["a"]=i},5865:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u5}));var r=n("6f27"),i=n("703f"),o=n("b923"),s=n("6ffb"),a=n("e3da"),l=n("442c"),c=n("72a8"),h=n("f201"),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},u(t,e)};function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},f.apply(this,arguments)};function p(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function m(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function g(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}var v=g;function y(t,e){var n,r,i,o,s=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i],n)s.call(n,r)&&(t[r]=n[r]);return t}var b=y;function w(t){return"string"===typeof t||t instanceof String}var x=w;function C(t){return t instanceof Array}var E=C;function k(t,e,n){var r=0,i=t.length;for(n=n||null;r<i;r+=1)if(!1===e.call(n,t[r],r,t))break}var N=k,O=E,T=N,M=v;function S(t,e,n){O(t)?T(t,e,n):M(t,e,n)}var L=S,A=x,D=L;function _(t,e,n){var r=t.style;A(e)?r[e]=n:D(e,(function(t,e){r[e]=t}))}var R=_,P=E;function I(t,e,n){var r,i;if(n=n||0,!P(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(i=e.length,r=n;n>=0&&r<i;r+=1)if(e[r]===t)return r;return-1}var j=I;function z(t){return void 0===t}var B=z,F=B;function H(t){return t&&t.className?F(t.className.baseVal)?t.className:t.className.baseVal:""}var q=H,W=E,U=B;function $(t,e){e=W(e)?e.join(" "):e,e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),U(t.className.baseVal)?t.className=e:t.className.baseVal=e}var V=$,G=L,Y=j,K=q,X=V;function Z(t){var e,n=Array.prototype.slice.call(arguments,1),r=t.classList,i=[];r?G(n,(function(e){t.classList.add(e)})):(e=K(t),e&&(n=[].concat(e.split(/\s+/),n)),G(n,(function(t){Y(t,i)<0&&i.push(t)})),X(t,i))}var J=Z,Q=N,tt=j,et=q,nt=V;function rt(t){var e,n,r=Array.prototype.slice.call(arguments,1),i=t.classList;i?Q(r,(function(t){i.remove(t)})):(e=et(t).split(/\s+/),n=[],Q(e,(function(t){tt(t,r)<0&&n.push(t)})),nt(t,n))}var it=rt;function ot(t){return"number"===typeof t||t instanceof Number}var st=ot;function at(t){return null===t}var lt=at,ct=v;function ht(t,e){var n=document.createElement("img"),r="";return ct(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}var ut=ht,dt=B,ft=ut,pt=6048e5;function mt(t){var e=(new Date).getTime();return e-t>pt}function gt(t,e){var n="https://www.google-analytics.com/collect",r=location.hostname,i="event",o="use",s="TOAST UI "+t+" for "+r+": Statistics",a=window.localStorage.getItem(s);(dt(window.tui)||!1!==window.tui.usageStatistics)&&(a&&!mt(a)||(window.localStorage.setItem(s,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||ft(n,{v:1,t:i,tid:e,cid:r,dp:r,dh:t,el:t,ec:o})}),1e3)))}var vt=gt;/Mac/.test(navigator.platform);var yt=/[\u0020]+/g,bt=/[>(){}[\]+-.!#|]/g,wt=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,xt=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,Ct=/[*_~`]/g,Et=/!\[.*\]\(.*\)/g,kt=/[[\]]/g,Nt=/(?:^|[^\\])\\(?!\\)/g,Ot='[&<>"]',Tt=new RegExp(Ot,"g");function Mt(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}}function St(t){return Tt.test(t)?t.replace(Tt,Mt):t}function Lt(){vt("editor","UA-129966929-1")}function At(t,e){return-1!==t.indexOf(e)}var Dt=["rel","target","hreflang","type"],_t={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function Rt(t){if(!t)return null;var e={};return Dt.forEach((function(n){B(t[n])||(e[n]=t[n])})),e}function Pt(t,e){for(var n="",r=0;r<e;r+=1)n+=t;return n}function It(t){var e=!1;return v(_t,(function(n){return n.test(t)&&(e=!0),!e})),e}function jt(t){var e=[],n=Et.exec(t);while(n)e.push([n.index,n.index+n[0].length]),n=Et.exec(t);return t.replace(kt,(function(t,n){var r=e.some((function(t){return n>t[0]&&n<t[1]}));return r?t:"\\"+t}))}function zt(t){var e=function(t){return"\\"+t},n=function(t){return t+"\\"},r=t.replace(yt," ");return xt.test(r)&&(r=r.replace(xt,e)),Nt.test(r)&&(r=r.replace(Nt,n)),r=r.replace(Ct,e),wt.test(r)&&(r=r.replace(wt,e)),It(r)&&(r=r.replace(bt,e)),r}function Bt(t){var e;return e=-1===t.indexOf('"')?'""':-1===t.indexOf("'")?"''":"()",e[0]+t+e[1]}function Ft(t){return lt(t)||B(t)}function Ht(t,e){if(null===t&&t===e)return!0;if("object"!==typeof t||"object"!==typeof e||Ft(t)||Ft(e))return t===e;for(var n in t)if(t[n]!==e[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function qt(t){return t[t.length-1]}function Wt(t,e,n){return t>=e&&t<=n}function Ut(t){return"object"===typeof t&&null!==t}function $t(t,e){var n=f({},t);return t&&e&&Object.keys(e).forEach((function(t){Ut(n[t])?Array.isArray(e[t])?n[t]=Vt(e[t]):n.hasOwnProperty(t)?n[t]=$t(n[t],e[t]):n[t]=Gt(e[t]):n[t]=e[t]})),n}function Vt(t){return t.map((function(t){return Ut(t)?Array.isArray(t)?Vt(t):Gt(t):t}))}function Gt(t){var e=Object.keys(t);return e.length?e.reduce((function(e,n){return Ut(t[n])?e[n]=Array.isArray(t[n])?Vt(t[n]):Gt(t[n]):e[n]=t[n],e}),{}):t}function Yt(t,e){return void 0===e&&(e={}),Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&"object"===typeof t[n]?Array.isArray(e[n])?t[n]=e[n]:Yt(t[n],e[n]):t[n]=e[n]})),t}function Kt(t,e){return t>e?[e,t]:[t,e]}var Xt=N;function Zt(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],Xt(t,(function(t){e.push(t)}))}return e}var Jt=Zt;function Qt(t,e){var n=t.nodes.paragraph;return e?n.create(null,x(e)?t.text(e):e):n.createAndFill()}function te(t,e,n){return t.text(e,n)}function ee(t,e,n){void 0===n&&(n=e);var r=t.doc.content.size,i=r>0?r-1:1;return s["h"].create(t.doc,Math.min(e,i),Math.min(n,i))}function ne(t,e,n){var r=e.pos;return t.replaceWith(r,r,Qt(n)),t.setSelection(ee(t,r+1))}function re(t){for(var e=t.state,n=t.from,i=t.startIndex,o=t.endIndex,s=t.createText,a=e.tr,l=e.doc,c=e.schema,h=i;h<=o;h+=1){var u=l.child(h),d=u.nodeSize,f=u.textContent,p=u.content,m=s(f),g=m?te(c,m):r["c"].empty,v=a.mapping.map(n),y=v+p.size;a.replaceWith(v,y,g),n+=d}return a}function ie(t,e,n,r){var i=n.length;t.split(e).delete(e-i,e).insert(t.mapping.map(e),r).setSelection(ee(t,t.mapping.map(e)-i))}function oe(t){return t.sourcepos[0][0]}function se(t){return t.sourcepos[1][0]}function ae(t){return t.sourcepos[0][1]}function le(t){return t.sourcepos[1][1]}function ce(t){var e=t.type;return"htmlBlock"===e||"htmlInline"===e}function he(t){var e=t.type;return"strike"===e||"strong"===e||"emph"===e||"code"===e||"link"===e||"image"===e}function ue(t){return t&&"codeBlock"===t.type}function de(t){return t&&("item"===t.type||"list"===t.type)}function fe(t){return de(t)&&"ordered"===t.listData.type}function pe(t){return de(t)&&"ordered"!==t.listData.type}function me(t){return t&&("tableCell"===t.type||"tableDelimCell"===t.type)}function ge(t){switch(t.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}function ve(t,e,n){void 0===n&&(n=!0),t=n?t:t.parent;while(t&&"document"!==t.type){if(e(t))return t;t=t.parent}return null}function ye(t,e,n){void 0===n&&(n=!0),t=n?t:t.parent;while(t&&"document"!==t.type)e(t),t=t.parent}function be(t,e){return[t[0],t[1]+e]}function we(t,e){return[t[0],e]}function xe(t){var e=t.firstChild.literal;switch(t.type){case"emph":return"*"+e+"*";case"strong":return"**"+e+"**";case"strike":return"~~"+e+"~~";case"code":return"`"+e+"`";case"link":case"image":var n=t,r=n.destination,i=n.title,o="link"===t.type?"":"!";return o+"["+e+"]("+r+(i?' "'+i+'"':"")+")";default:return null}}function Ce(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function Ee(t){var e=[],n=t.walker(),r=null;while(r=n.next()){var i=r.node;"text"===i.type&&e.push(i.literal)}return e.join("")}var ke=[],Ne={},Oe=/\$\$widget\d+\s/;function Te(t){var e=t.search(Oe);if(-1!==e){var n=t.substring(e),r=n.replace(Oe,"").replace("$$","");t=t.substring(0,e),t+=Te(r)}return t}function Me(t,e){return"$$"+t+" "+e+"$$"}function Se(t,e){var n=Ne[t],r=n.rule,i=n.toDOM,o=Te(e).match(r);return o&&(e=o[0]),i(e)}function Le(){return ke}function Ae(t){ke=t,ke.forEach((function(t,e){Ne["widget"+e]=t}))}function De(t,e,n,r){return t.concat(_e(e,n,r))}function _e(t,e,n){void 0===n&&(n=0);var r=[],i=(ke[n]||{}).rule,o=n+1;if(t=Te(t),i&&i.test(t)){var s=void 0;while(-1!==(s=t.search(i))){var a=t.substring(0,s);a&&(r=De(r,a,e,o)),t=t.substring(s);var l=t.match(i)[0],c="widget"+n;r.push(e.nodes.widget.create({info:c},e.text(Me(c,l)))),t=t.substring(l.length)}t&&(r=De(r,t,e,o))}else t&&(r=n<ke.length-1?De(r,t,e,o):[e.text(t)]);return r}function Re(t){var e,n="",r=t.walker();while(e=r.next()){var i=e.node,o=e.entering;o&&(i!==t&&"text"!==i.type?(n+=xe(i),r.resumeAt(t,!1),r.next()):"text"===i.type&&(n+=i.literal))}return n}function Pe(){return{deleteSelection:function(){return l["c"]},selectAll:function(){return l["g"]},undo:function(){return h["c"]},redo:function(){return h["b"]}}}function Ie(t){return new s["d"]({props:{decorations:function(e){var n=e.doc;if(t.text&&1===n.childCount&&n.firstChild.isTextblock&&0===n.firstChild.content.size){var r=document.createElement("span");return J(r,"placeholder"),t.className&&J(r,t.className),r.textContent=t.text,i["b"].create(n,[i["a"].widget(1,r)])}return null}}})}var je=j,ze=q;function Be(t,e){var n;return t.classList?t.classList.contains(e):(n=ze(t).split(/\s+/),je(e,n)>-1)}var Fe=Be,He=j,qe=Jt,We=Element.prototype,Ue=We.matches||We.webkitMatchesSelector||We.mozMatchesSelector||We.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return He(this,qe(e.querySelectorAll(t)))>-1};function $e(t,e){return Ue.call(t,e)}var Ve=$e,Ge="[A-Za-z][A-Za-z0-9-]*",Ye="[a-zA-Z_:][a-zA-Z0-9:._-]*",Ke="[^\"'=<>`\\x00-\\x20]+",Xe="'[^']*'",Ze='"[^"]*"',Je="(?:"+Ke+"|"+Xe+"|"+Ze+")",Qe="(?:\\s*=\\s*"+Je+")",tn="(?:\\s+"+Ye+Qe+"?)",en="<("+Ge+")("+tn+")*\\s*/?>",nn="</("+Ge+")\\s*[>]",rn="(?:"+en+"|"+nn+")",on=new RegExp("^"+rn,"i"),sn=/<br\s*\/*>/i,an=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,ln="</p><p>";function cn(t,e,n){var r=parseInt(t.left,10),i=parseInt(t.top,10),o=parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10),s=parseInt(t.height,10)+parseInt(t.paddingTop,10)+parseInt(t.paddingBottom,10);return e>=r&&e<=r+o&&n>=i&&n<=i+s}var hn="toastui-editor-";function un(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=void 0;s=Array.isArray(o)?o[0]?o[1]:null:o,s&&n.push(""+hn+s)}return n.join(" ")}function dn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return hn+"md-"+t})).join(" ")}function fn(t){return(null===t||void 0===t?void 0:t.nodeType)===Node.TEXT_NODE}function pn(t){return t&&t.nodeType===Node.ELEMENT_NODE}function mn(t,e){var n=Jt(t.querySelectorAll(e));return n.length?n:[]}function gn(t,e){e=E(e)?Jt(e):[e],e.forEach((function(e){t.appendChild(e)}))}function vn(t,e){e.parentNode&&e.parentNode.insertBefore(t,e)}function yn(t){t.parentNode&&t.parentNode.removeChild(t)}function bn(t){var e=[];while(t.firstChild)e.push(t.firstChild),t.parentNode&&t.parentNode.insertBefore(t.firstChild,t);return yn(t),e}function wn(t,e,n){B(n)&&(n=!Fe(t,e));var r=n?J:it;r(t,e)}function xn(t,e){var n=document.createElement("div");x(t)?n.innerHTML=t:n.appendChild(t);var r=n.firstChild;return e&&e.appendChild(r),r}function Cn(t){var e=window.getComputedStyle(t);return["margin-left","margin-right"].reduce((function(t,n){return t+parseInt(e.getPropertyValue(n),10)}),0)+t.offsetWidth}function En(t,e){var n;n=x(e)?function(t){return Ve(t,e)}:function(t){return t===e};while(t&&t!==document){if(pn(t)&&n(t))return t;t=t.parentNode}return null}function kn(t,e){var n=0,r=0;while(t&&t!==e){var i=t.offsetTop,o=t.offsetLeft,s=t.offsetParent;if(n+=i,r+=o,s===e.offsetParent)break;t=t.offsetParent}return{offsetTop:n,offsetLeft:r}}function Nn(t,e){Object.keys(t).forEach((function(n){Ft(t[n])?e.removeAttribute(n):e.setAttribute(n,t[n])}))}function On(t){var e=t.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>"),n=new RegExp(rn,"ig"),r=e.match(n);return null===r||void 0===r||r.forEach((function(t,n){if(sn.test(t)){var i=ln;if(n){var o=r[n-1],s=o.match(en);if(s&&!/br/i.test(s[1])){var a=s[1];i="</"+a+"><"+a+">"}}e=e.replace(sn,i)}})),e}function Tn(t){var e=/<img class="ProseMirror-separator" alt="">/g,n=/ class="ProseMirror-trailingBreak"/g,r=t;return r=r.replace(e,""),r=r.replace(n,""),r}var Mn=new s["e"]("widget"),Sn=5,Ln=function(){function t(t,e){var n=this;this.popup=null,this.removeWidget=function(){n.popup&&(n.rootEl.removeChild(n.popup),n.popup=null)},this.rootEl=t.dom.parentElement,this.eventEmitter=e,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("loadUI",(function(){n.rootEl=En(t.dom.parentElement,"."+un("defaultUI"))})),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return t.prototype.update=function(t){var e=Mn.getState(t.state);if(this.removeWidget(),e){var n=e.node,r=e.style,i=t.coordsAtPos(e.pos),o=i.top,s=i.left,a=i.bottom,l=a-o,c=this.rootEl.getBoundingClientRect(),h=o-c.top;R(n,{opacity:"0"}),this.rootEl.appendChild(n),R(n,{position:"absolute",left:s-c.left+Sn+"px",top:("bottom"===r?h+l-Sn:h-l)+"px",opacity:"1"}),this.popup=n,t.focus()}},t.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},t}();function An(t){return new s["d"]({key:Mn,state:{init:function(){return null},apply:function(t){return t.getMeta("widget")}},view:function(e){return new Ln(e,t)}})}function Dn(t){t.listen("addImageBlobHook",(function(t,e){var n=new FileReader;n.onload=function(t){var n=t.target;return e(n.result)},n.readAsDataURL(t)}))}function _n(t,e,n){var r=function(n,r){t.emit("command","addImage",{imageUrl:n,altText:r||e.name||"image"})};t.emit("addImageBlobHook",e,r,n)}function Rn(t){var e=Jt(t).filter((function(t){var e=t.type;return-1!==e.indexOf("image")}));if(1===e.length){var n=e[0];if(n)return n.getAsFile()}return null}function Pn(t){var e=t.eventEmitter;return new s["d"]({props:{handleDOMEvents:{drop:function(t,n){var r,i=null===(r=n.dataTransfer)||void 0===r?void 0:r.files;return i&&N(i,(function(t){return-1===t.type.indexOf("image")||(n.preventDefault(),n.stopPropagation(),_n(e,t,n.type),!1)})),!0}}}})}var In=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function jn(t){var e=document.createElement("span"),n=Se(t.attrs.info,t.textContent);return e.className="tui-widget",e.appendChild(n),{dom:e}}function zn(t){return"widget"===t.type.name}var Bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(t){var e=t.textContent,n=e.match(/\$\$(widget\d+)/),r=n[1];return{info:r}}}]}},enumerable:!1,configurable:!0}),e}(In),Fn=function(){function t(t){this.timer=null,this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=t,this.placeholder={text:""}}return t.prototype.createState=function(){return s["b"].create({schema:this.schema,plugins:this.createPlugins()})},t.prototype.initEvent=function(){var t=this,e=t.eventEmitter,n=t.view,r=t.editorType;n.dom.addEventListener("focus",(function(){return e.emit("focus",r)})),n.dom.addEventListener("blur",(function(){return e.emit("blur",r)}))},t.prototype.emitChangeEvent=function(t){this.eventEmitter.emit("caretChange",this.editorType),t.docChanged&&this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(t.prototype,"defaultPlugins",{get:function(){var t=this.createInputRules(),e=p(p([],this.keymaps),[Object(a["a"])(f({"Shift-Enter":l["a"].Enter},l["a"])),Object(h["a"])(),Ie(this.placeholder),An(this.eventEmitter),Pn(this.context)]);return t?e.concat(t):e},enumerable:!1,configurable:!0}),t.prototype.createInputRules=function(){var t=Le(),e=t.map((function(t){var e=t.rule;return new c["a"](e,(function(t,n,r,i){var o=t.schema,s=t.tr,a=t.doc,l=n.input.match(new RegExp(e,"g")),c=a.resolve(r),h=c.parent,u=0;if(zn(h)&&(h=c.node(c.depth-1)),h.forEach((function(t){return zn(t)&&(u+=1)})),l.length>u){var d=qt(l),f=_e(d,o);return s.replaceWith(i-d.length+1,i,f)}return null}))}));return e.length?Object(c["b"])({rules:e}):null},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.createSchema=function(){return new r["i"]({nodes:this.specs.nodes,marks:this.specs.marks})},t.prototype.createKeymaps=function(t){var e=Pe(),n=e.undo,r=e.redo,i=this.specs.keymaps(t),o={"Mod-z":n(),"Shift-Mod-z":r()};return t?i.concat(Object(a["a"])(o)):i},t.prototype.createCommands=function(){return this.specs.commands(this.view)},t.prototype.createPluginProps=function(){var t=this;return this.extraPlugins.map((function(e){return e(t.eventEmitter)}))},t.prototype.focus=function(){var t=this;this.clearTimer(),this.timer=setTimeout((function(){t.view.focus(),t.view.dispatch(t.view.state.tr.scrollIntoView())}))},t.prototype.blur=function(){this.view.dom.blur()},t.prototype.destroy=function(){var t=this;this.clearTimer(),this.view.destroy(),Object.keys(this).forEach((function(e){delete t[e]}))},t.prototype.moveCursorToStart=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection(ee(e,1)).scrollIntoView()),t&&this.focus()},t.prototype.moveCursorToEnd=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection(ee(e,e.doc.content.size-1)).scrollIntoView()),t&&this.focus()},t.prototype.setScrollTop=function(t){this.view.dom.scrollTop=t},t.prototype.getScrollTop=function(){return this.view.dom.scrollTop},t.prototype.setPlaceholder=function(t){this.placeholder.text=t,this.view.dispatch(this.view.state.tr.scrollIntoView())},t.prototype.setHeight=function(t){R(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){R(this.el,{minHeight:t+"px"})},t.prototype.getElement=function(){return this.el},t}();function Hn(t){return t instanceof Function}var qn=Hn,Wn=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function Un(t,e,n){return t.focus(),e(n)(t.state,t.dispatch,t)}var $n=function(){function t(t){this.specs=t}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this.specs.filter((function(t){return"node"===t.type})).reduce((function(t,e){var n,r=e.name,i=e.schema;return f(f({},t),(n={},n[r]=i,n))}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marks",{get:function(){return this.specs.filter((function(t){return"mark"===t.type})).reduce((function(t,e){var n,r=e.name,i=e.schema;return f(f({},t),(n={},n[r]=i,n))}),{})},enumerable:!1,configurable:!0}),t.prototype.commands=function(t,e){var n=this.specs.filter((function(t){var e=t.commands;return e})).reduce((function(e,n){var r={},i=n.commands();return qn(i)?r[n.name]=function(e){return Un(t,i,e)}:Object.keys(i).forEach((function(e){r[e]=function(n){return Un(t,i[e],n)}})),f(f({},e),r)}),{}),r=Pe();return Object.keys(r).forEach((function(e){n[e]=function(n){return Un(t,r[e],n)}})),e&&Object.keys(e).forEach((function(r){n[r]=function(n){return Un(t,e[r],n)}})),n},t.prototype.keymaps=function(t){var e=this.specs.filter((function(t){return t.keymaps})).map((function(t){return t.keymaps()}));return e.map((function(e){return t||Object.keys(e).forEach((function(t){At(Wn,t)||delete e[t]})),Object(a["a"])(e)}))},t.prototype.setContext=function(t){this.specs.forEach((function(e){e.setContext(t)}))},t}();function Vn(t){var e=t.from,n=t.to;return t instanceof s["a"]?[e+1,n-1]:[e,n]}function Gn(t){return t.index(0)+1}function Yn(t,e,n){void 0===n&&(n=1);var r=0;return t.forEach((function(t,i){zn(t)&&i+2<e&&(r+=2*n)})),r}function Kn(t,e,n){void 0===n&&(n=e);var r=e===n,i=t.resolve(e),o=Gn(i),s=o,a=i.start(1),l=a;if(!r){var c=t.resolve(n===t.content.size?n-1:n);l=c.start(1),s=Gn(c),c.pos===t.content.size&&(n=t.content.size-2)}var h=Math.max(e-a+1,1),u=Math.max(n-l+1,1);return[[o,h+Yn(t.child(o-1),h,-1)],[s,u+Yn(t.child(s-1),u,-1)]]}function Xn(t,e){for(var n=[],r=0,i=0;r<e;r+=1){var o=t.child(r);n[r]=i,i+=o.nodeSize}return n}function Zn(t,e,n){var r=Xn(t,n[0]),i=e[0]-1,o=n[0]-1,s=t.child(i),a=t.child(o),l=r[i],c=r[o];return l+=e[1]+Yn(s,e[1]-1),c+=n[1]+Yn(a,n[1]-1),[l,Math.min(c,t.content.size)]}function Jn(t){var e=t.$from,n=t.$to,r=t.from,i=t.to,o=e.doc;return t instanceof s["a"]&&(e=o.resolve(r+1),n=o.resolve(i-1)),0===e.depth&&(e=o.resolve(r-1),n=e),{startFromOffset:e.start(1),endFromOffset:n.start(1),startToOffset:e.end(1),endToOffset:n.end(1),startIndex:e.index(0),endIndex:n.index(0),from:e.pos,to:n.pos}}function Qn(t,e){for(var n=1,r=1,i=0,o=0;i<t.childCount;i+=1){var s=t.child(i).nodeSize;if(n=o+1,r=o+s-1,i===e)break;o+=s}return{startOffset:n,endOffset:r}}var tr="heading",er="blockQuote",nr="listItem",rr="table",ir="tableCell",or="codeBlock",sr="thematicBreak",ar="link",lr="code",cr="meta",hr="delimiter",ur="taskDelimiter",dr="markedText",fr="html",pr="customBlock",mr={strong:2,emph:1,strike:2};function gr(t,e,n,r){return{start:t,end:e,spec:{type:n,attrs:r}}}function vr(t,e,n){var r=t.level,i=t.headingType,o=[gr(e,n,tr,{level:r})];return"atx"===i?o.push(gr(e,be(e,r),hr)):o.push(gr(we(n,0),n,tr,{seText:!0})),o}function yr(t,e,n){var r=t.type,i=be(e,mr[r]),o=be(n,-mr[r]);return[gr(i,o,r),gr(e,i,hr),gr(o,n,hr)]}function br(t,e,n,r){return[gr(t,e,ar),gr(we(t,n[1]+1),we(e,r),ar,{desc:!0}),gr(we(e,r+2),be(e,-1),ar,{url:!0})]}function wr(t,e,n){var r=t.lastChild,i=r?le(r)+1:3,o=be(e,1);return p([gr(e,o,cr)],br(e,n,o,i))}function xr(t,e,n){var r=t.lastChild,i=t.extendedAutolink,o=r?le(r)+1:2;return i?[gr(e,n,ar,{desc:!0})]:br(e,n,e,o)}function Cr(t,e,n){var r=t.tickCount,i=be(e,r),o=be(n,-r);return[gr(e,n,lr),gr(e,i,lr,{start:!0}),gr(i,o,lr,{marked:!0}),gr(o,n,lr,{end:!0})]}function Er(t,e,n,r){var i={start:e,end:n,spec:{attrs:{className:r+"-line-background",codeStart:e[0],codeEnd:n[0]}},lineBackground:!0};return"item"!==t.type&&"blockQuote"!==t.type?[f(f({},i),{end:e,spec:{attrs:{className:r+"-line-background start"}}}),f(f({},i),{start:[Math.min(e[0]+1,n[0]),e[1]]})]:null}function kr(t,e,n,r){var i=t.fenceOffset,o=t.fenceLength,s=t.fenceChar,a=t.info,l=t.infoPadding,c=t.parent,h=i+o,u=[gr(we(e,1),n,or)];s&&u.push(gr(e,be(e,h),hr)),a&&u.push(gr(be(e,o),be(e,o+l+a.length),cr));var d="^(\\s{0,4})("+s+"{"+o+",})",f=new RegExp(d);f.test(r)&&u.push(gr(we(n,1),n,hr));var p=Er(c,e,n,"code-block");return p?u.concat(p):u}function Nr(t,e,n){var r=t,i=r.offset,o=r.syntaxLength,s=r.info,a=r.parent,l=i+o,c=[gr(we(e,1),n,pr)];c.push(gr(e,be(e,l),hr)),s&&c.push(gr(be(e,l),be(e,o+s.length),cr)),c.push(gr(we(n,1),n,hr));var h=Er(a,e,n,"custom-block");return h?c.concat(h):c}function Or(t,e){var n=[];while(t){var r=t.type;"paragraph"!==r&&"codeBlock"!==r||n.push(gr([oe(t),ae(t)-1],[se(t),le(t)+1],e)),t=t.next}return n}function Tr(t){var e=[];while(t)e.push(gr([oe(t),ae(t)],[se(t),le(t)+1],dr)),t=t.next;return e}function Mr(t,e,n){var r=t.parent&&"blockQuote"!==t.parent.type?[gr(e,n,er)]:[];if(t.firstChild){var i=[];"paragraph"===t.firstChild.type?i=Tr(t.firstChild.firstChild):"list"===t.firstChild.type&&(i=Or(t.firstChild,dr)),r=p(p([],r),i)}return r}function Sr(t){var e=0;while(t.parent.parent&&"item"===t.parent.parent.type)t=t.parent.parent,e+=1;var n=[{odd:!0},{even:!0}][e%2];return[nr,f(f({},n),{listStyle:!0})]}function Lr(t,e){var n=t.listData,r=n.padding,i=n.task,o=Sr(t),s=[gr.apply(void 0,p([e,be(e,r)],o))];return i&&(s.push(gr(be(e,r),be(e,r+3),ur)),s.push(gr(be(e,r+1),be(e,r+2),cr))),s.concat(Or(t.firstChild,dr))}var Ar={heading:vr,strong:yr,emph:yr,strike:yr,link:xr,image:wr,code:Cr,codeBlock:kr,blockQuote:Mr,item:Lr,customBlock:Nr},Dr={thematicBreak:sr,table:rr,tableCell:ir,htmlInline:fr};function _r(t,e,n,r){var i=t.type;return qn(Ar[i])?Ar[i](t,e,n,r):Dr[i]?[gr(e,n,Dr[i])]:null}var Rr={};function Pr(t){var e=t.schema,n=t.toastMark;return new s["d"]({appendTransaction:function(t,r,i){var o=t[0],s=i.tr;if(o.docChanged){var a=[],l=o.getMeta("editResult");l.forEach((function(t){var e=t.nodes,r=t.removedNodeRange;if(e.length){a=a.concat(Hr(s,e));for(var i=0,o=e;i<o.length;i++){var l=o[i],c=l.walker(),h=c.next();while(h){var u=h.node,d=h.entering;d&&(a=a.concat(qr(u,n))),h=c.next()}}}else if(r)for(var f=s.doc.childCount-1,p=r.line,m=p[0],g=p[1],v=Math.min(m,f),y=Math.min(g,f),b=v;b<=y;b+=1)Rr[b]=!0})),zr(s,e,a)}return s.setMeta("widget",o.getMeta("widget"))}})}function Ir(t,e,n){return Object.keys(n).some((function(r){return n[r]!==t.child(e).attrs[r]}))}function jr(t,e,n,r,i){void 0===i&&(i={});for(var o=r.startIndex,s=r.endIndex,a=r.from,l=r.to,c=!1,h=o;h<=s;h+=1)delete Rr[h],c=Ir(e,h,i);c&&t.setBlockType(a,l,n,i)}function zr(t,e,n){var r=t.doc,i=e.nodes.paragraph,o=Xn(r,r.childCount);n.forEach((function(n){var s=n.start,a=n.end,l=n.spec,c=n.lineBackground,h=Math.min(s[0],r.childCount)-1,u=Math.min(a[0],r.childCount)-1,d=r.child(h),f=r.child(u),p=o[h],m=o[u];if(p+=s[1]+Yn(d,s[1]-1),m+=a[1]+Yn(f,a[1]-1),l)if(c){var g={from:p,to:m,startIndex:h,endIndex:u};jr(t,r,i,g,l.attrs)}else t.addMark(p,m,e.mark(l.type,l.attrs));else t.removeMark(p,m)})),Br(t,o,i)}function Br(t,e,n){Object.keys(Rr).forEach((function(r){var i=Number(r),o=Math.min(Number(r)+1,t.doc.childCount-1),s=e[i],a=e[o]-1;i===o&&(a+=2),t.setBlockType(s,a,n)}))}function Fr(t,e,n){var r=[];Rr={};for(var i=e[0]-1;i<n[0];i+=1){var o=t.child(i),s=o.attrs.codeEnd,a=o.attrs.codeStart;if(a&&s&&!At(r,a)){r.push(a),s=Math.min(s,t.childCount);for(var l=a-1,c=n[0],h=l;h<c;h+=1)Rr[h]=!0}}}function Hr(t,e){var n=t.doc,r=e[0].sourcepos[0],i=qt(e).sourcepos,o=i[1],s=[r[0],r[1]],a=[o[0],o[1]+1],l=[];return Fr(n,r,o),l.push({start:s,end:a}),l}function qr(t,e){var n=e.getLineTexts(),r=[oe(t),ae(t)],i=[se(t),le(t)+1],o=_r(t,r,i,n[i[0]-1]);return null!==o&&void 0!==o?o:[]}var Wr=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"];function Ur(t){var e=t.type;return de(t)?t.listData.task?"taskList":"ordered"===t.listData.type?"orderedList":"bulletList":-1!==e.indexOf("table")?"table":At(Wr,e)?e:null}function $r(t){var e={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},n=!0;return ye(t,(function(t){var r=Ur(t);r&&("bulletList"===r||"orderedList"===r?n&&(e[r]={active:!0},e.indent.disabled=!1,e.outdent.disabled=!1,n=!1):e[r]={active:!0})})),e}function Vr(t){var e=t.toastMark,n=t.eventEmitter;return new s["d"]({view:function(){return{update:function(t,r){var i=t.state,o=i.doc,s=i.selection;if(!(r&&r.doc.eq(o)&&r.selection.eq(s))){var a=s.from,l=i.doc.resolve(a).start(),c=i.doc.content.findIndex(a).index+1,h=a-l;a===l&&(h+=1);var u=[c,h],d=e.findNodeAtPosition(u),f=$r(d);n.emit("changeToolbarState",{cursorPos:u,mdNode:d,toolbarState:f}),n.emit("setFocusedNode",d)}}}}})}var Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(In),Yr=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function Kr(t,e){return Xr(t,e-1)}function Xr(t,e){return t.child(e).textContent}var Zr=/^\s*> ?/,Jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("block-quote")},0]}}},enumerable:!1,configurable:!0}),e.prototype.createBlockQuoteText=function(t,e){return e?t.replace(Zr,"").trim():"> "+t.trim()},e.prototype.extendBlockQuote=function(){var t=this;return function(e,n){var r=e.selection,i=e.doc,o=e.tr,s=e.schema,a=Jn(r),l=a.endFromOffset,c=a.endToOffset,h=a.endIndex,u=a.to,d=Xr(i,h),f=Zr.test(d);if(f&&u>l&&r.empty){var p=!d.replace(Zr,"").trim();if(p)o.deleteRange(l,c).split(o.mapping.map(c));else{var m=d.slice(u-l).trim(),g=te(s,t.createBlockQuoteText(m));ie(o,c,m,g)}return n(o),!0}return!1}},e.prototype.commands=function(){var t=this;return function(){return function(e,n){var r=e.selection,i=e.doc,o=Jn(r),s=o.startFromOffset,a=o.endToOffset,l=o.startIndex,c=o.endIndex,h=Zr.test(Xr(i,l)),u=re({state:e,startIndex:l,endIndex:c,from:s,createText:function(e){return t.createBlockQuoteText(e,h)}});return n(u.setSelection(ee(u,u.mapping.map(a)))),!0}}},e.prototype.keymaps=function(){var t=this.commands()();return{"alt-q":t,"alt-Q":t,Enter:this.extendBlockQuote()}},e}(Yr),Qr=/(^\s*)([-*+] |[\d]+\. )/,ti=/(^\s*)([\d])+\.( \[[ xX]])? /,ei=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,ni=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,ri=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,ii=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,oi=/(^\s*)([-*+])( \[[ xX]]) /;function si(t){return ti.test(t)?"ordered":"bullet"}function ai(t){var e=0;while(t&&"document"!==t.type)"list"===t.type&&(e+=1),t=t.parent;return e}function li(t,e,n,r){var i=t.getLineTexts(),o=i.length,s=[],a=e;while(r?a<o:a>1){a=r?a+1:a-1;var l=t.findFirstNodeAtLine(a),c=ai(l);if(c===n)s.push({line:a,depth:n,mdNode:l});else if(c<n)break}return s}function ci(t){var e=t.toastMark,n=t.mdNode,r=t.line,i=ai(n),o=li(e,r,i,!1).reverse(),s=li(e,r,i,!0);return o.concat([{line:r,depth:i,mdNode:n}]).concat(s)}function hi(t){if(!Qr.test(t))return"* "+t;var e=si(t);return"bullet"===e&&ni.test(t)?t=t.replace(oi,"$1$2 "):"ordered"===e&&(t=t.replace(ti,"$1* ")),t}function ui(t,e){if(!Qr.test(t))return e+". "+t;var n=si(t);if("bullet"===n||"ordered"===n&&ni.test(t))t=t.replace(ni,"$1"+e+". ");else if("ordered"===n){var r=ei.exec(t)[3];Number(r)!==e&&(t=t.replace(ti,"$1"+e+". "))}return t}function di(t,e,n,r){void 0===r&&(r=0);var i=Number.MAX_VALUE,o=0,s=e.map((function(e,s){var a=e.line;i=Math.min(a-1,i),o=Math.max(a-1,o);var l=Kr(t,a);return l="bullet"===n?hi(l):ui(l,s+1+r),{text:l,line:a}}));return{changedResults:s,firstIndex:i,lastIndex:o}}function fi(t,e){var n=ci(e);return di(e.doc,n,t)}var pi={bullet:function(t){return fi("bullet",t)},ordered:function(t){return fi("ordered",t)},task:function(t){var e=t.mdNode,n=t.doc,r=t.line,i=Kr(n,r);return e.listData.task?i=i.replace(ii,"$1$2"):de(e)&&(i=i.replace(Qr,"$1$2[ ] ")),{changedResults:[{text:i,line:r}]}}},mi={bullet:function(t){var e=t.doc,n=t.line,r=Kr(e,n),i=[{text:"* "+r,line:n}];return{changedResults:i}},ordered:function(t){for(var e=t.toastMark,n=t.doc,r=t.line,i=t.startLine,o=Kr(n,r),s=1,a=i,l=0,c=i-1;c>0;c-=1){var h=e.findFirstNodeAtLine(c),u=Kr(n,c),d=u&&!!ve(h,(function(t){return de(t)})),f=ei.exec(Kr(n,c));if(!f&&!d)break;if(f||!d){var p=f,m=p[1],g=p[3];if(!m){s=Number(g),a=c;break}}else l+=1}var v=s+r-a-l,y=[{text:v+". "+o,line:r}];return{changedResults:y}},task:function(t){var e=t.doc,n=t.line,r=Kr(e,n),i=[{text:"* [ ] "+r,line:n}];return{changedResults:i}}},gi={bullet:function(t){var e=t.line,n=t.doc,r=Kr(n,e),i=ri.exec(r),o=i[1],s=i[2];return{listSyntax:""+o+s}},ordered:function(t){var e=t.toastMark,n=t.line,r=t.mdNode,i=t.doc,o=ai(r),s=Kr(i,n),a=ei.exec(s),l=a[1],c=a[3],h=a[4],u=Number(c)+1,d=""+l+u+h,p=li(e,n,o,!0),m=p.filter((function(t){var e=ei.exec(Kr(i,t.line));return e&&e[1].length===l.length&&!!ve(t.mdNode,(function(t){return fe(t)}))}));return f({listSyntax:d},di(i,m,"ordered",u))}};function vi(t,e,n,r,i){var o=[],s=Kr(t,n),a=ei.exec(s);while(a){var l=a[1],c=a[4],h=a[5],u=l.length;if(u===i)o.push(te(e,""+l+r+c+h)),r+=1,n+=1;else if(u>i){var d=vi(t,e,n,1,u);n=d.line,o=o.concat(d.nodes)}if(u<i||n>t.childCount)break;s=Kr(t,n),a=ei.exec(s)}return{nodes:o,line:n}}var yi=/(^\s{1,4})(.*)/;function bi(t,e,n){return t<e||Qr.test(n)||Zr.test(n)}function wi(t,e,n){var r=n.$from;0===r.depth&&(r=t.resolve(r.pos-1));var i=r.node(1),o=r.start(1),s=i.content.size;return i.rangeHasMark(0,s,e.marks.table)&&r.pos-o!==s&&r.pos!==o}function xi(t,e){var n=e.from,r=e.to;if("indent"===e.type){var i=4;n+=i,r+=(e.lineLen+1)*i}else{var o=e.spaceLenList;n-=o[0];for(var s=0;s<o.length;s+=1)r-=o[s]}return ee(t,n,r)}var Ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(t){var e=t.attrs;return e.className?["div",{class:dn(e.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),e.prototype.reorderList=function(t,e){var n=this.context,r=n.view,i=n.toastMark,o=n.schema,s=r.state,a=s.tr,l=s.selection,c=s.doc,h=i.findFirstNodeAtLine(t),u=h;while(h&&!pe(h)&&"document"!==h.parent.type)if(h=h.parent,fe(h)){u=h;break}u&&(t=u.sourcepos[0][0]);var d=ei.exec(Kr(c,t)),f=d[1],p=d[3],m=f.length,g=vi(c,o,t,Number(p),m),v=g.line,y=g.nodes;e=Math.max(e,v-1);for(var b=Qn(c,t-1).startOffset,w=t-1;w<=e-1;w+=1){var x=c.child(w),C=x.nodeSize,E=x.content,k=a.mapping.map(b),N=k+E.size;a.replaceWith(k,N,y[w-t+1]),b+=C}var O=ee(a,l.from,l.to);r.dispatch(a.setSelection(O))},e.prototype.indent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var i=n.schema,o=n.selection,s=n.doc,a=Jn(o),l=a.from,c=a.to,h=a.startFromOffset,u=a.startIndex,d=a.endIndex;if(t&&wi(s,i,o))return!1;var f=Xr(s,u);if(t&&bi(l,c,f)||!t&&Qr.test(f)){var p=re({state:n,from:h,startIndex:u,endIndex:d,createText:function(t){return"    "+t}}),m={type:"indent",from:l,to:c,lineLen:d-u};r(p.setSelection(xi(p,m))),ei.test(f)&&e.reorderList(u+1,d+1)}else t&&r(n.tr.insert(c,te(i,"    ")));return!0}}},e.prototype.outdent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var i=n.selection,o=n.doc,s=n.schema,a=Jn(i),l=a.from,c=a.to,h=a.startFromOffset,u=a.startIndex,d=a.endIndex;if(t&&wi(o,s,i))return!1;var f=Xr(o,u);if(t&&bi(l,c,f)||!t&&Qr.test(f)){var p=[],m=re({state:n,from:h,startIndex:u,endIndex:d,createText:function(t){var e=yi.exec(t);return p.push(e?e[1].length:0),t.replace(yi,"$2")}}),g={type:"outdent",from:l,to:c,spaceLenList:p};r(m.setSelection(xi(m,g))),ei.test(f)&&e.reorderList(u+1,d+1)}else if(t){var v=f.slice(0,c-h),y=v.replace(/\s{1,4}$/,""),b=c-(v.length-y.length);r(n.tr.delete(b,c))}return!0}}},e.prototype.deleteLines=function(){var t=this;return function(e,n){var r=t.context.view,i=Jn(e.selection),o=i.startFromOffset,s=i.endToOffset,a=function(){return n(e.tr.deleteRange(o,s)),!0};return Object(l["b"])(a,l["e"])(e,n,r)}},e.prototype.moveDown=function(){return function(t,e){var n=t.doc,r=t.tr,i=t.selection,o=t.schema,s=Jn(i),a=s.startFromOffset,l=s.endToOffset,c=s.endIndex;if(c<n.content.childCount-1){var h=n.child(c+1),u=h.nodeSize,d=h.textContent;return r.delete(l,l+u).split(a).insert(r.mapping.map(a)-2,te(o,d)),e(r),!0}return!1}},e.prototype.moveUp=function(){return function(t,e){var n=t.tr,r=t.doc,i=t.selection,o=t.schema,s=Jn(i),a=s.startFromOffset,l=s.endToOffset,c=s.startIndex;if(c>0){var h=r.child(c-1),u=h.nodeSize,d=h.textContent;return n.delete(a-u,a).split(n.mapping.map(l)).insert(n.mapping.map(l),te(o,d)),e(n),!0}return!1}},e.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},e.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},e}(In),Ei=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e}(In),ki=/^#{1,6}\s/,Ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.level,r=e.seText,i="heading|heading"+n;return r&&(i+="|delimiter|setext"),["span",{class:dn.apply(void 0,i.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.createHeadingText=function(t,e,n){var r=e.replace(n,"").trim(),i="";while(t>0)i+="#",t-=1;return i+" "+r},e.prototype.commands=function(){var t=this;return function(e){return function(n,r){var i=e.level,o=Jn(n.selection),s=o.startFromOffset,a=o.endToOffset,l=o.startIndex,c=o.endIndex,h=re({state:n,from:s,startIndex:l,endIndex:c,createText:function(e){var n=e.match(ki),r=n?n[0]:"";return t.createHeadingText(i,e,r)}});return r(h.setSelection(ee(h,h.mapping.map(a)))),!0}}},e}(Yr),Oi="```",Ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("code-block")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,i=t.tr,o=Jn(n),s=o.startFromOffset,a=o.endToOffset,l=te(r,Oi);return i.insert(s,l).split(s+Oi.length),i.split(i.mapping.map(a)).insert(i.mapping.map(a),l),e(i.setSelection(ee(i,i.mapping.map(a)-(Oi.length+2)))),!0}}},e.prototype.keepIndentation=function(){var t=this;return function(e,n){var r=e.selection,i=e.tr,o=e.doc,s=e.schema,a=t.context.toastMark,l=Jn(r),c=l.startFromOffset,h=l.endToOffset,u=l.endIndex,d=l.from,f=l.to,p=Xr(o,u);if(d===f&&p.trim()){var m=p.match(/^\s+/),g=a.findFirstNodeAtLine(u+1);if(ue(g)&&m){var v=m[0],y=p.slice(f-c),b=te(s,v+y);return ie(i,h,y,b),n(i),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,Enter:this.keepIndentation()}},e}(Yr),Mi=/\||\s/g;function Si(t){return[Ai(t),Ai(t,!0)]}function Li(t,e){for(var n=[],r=0;r<e;r+=1)n.push(Ai(t));return n}function Ai(t,e){for(var n="|",r=0;r<t;r+=1)n+=e?" --- |":"  |";return n}function Di(t){return t?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}var _i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("table")},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendTable=function(){var t=this;return function(e,n){var r=e.selection,i=e.doc,o=e.tr,s=e.schema;if(!r.empty)return!1;var a=Jn(r),l=a.endFromOffset,c=a.endToOffset,h=a.endIndex,u=a.to,d=Xr(i,h),f=[h+1,u-l+1],p=t.context.toastMark.findNodeAtPosition(f),m=ve(p,(function(t){return me(t)&&("tableDelimRow"===t.parent.type||"tableBody"===t.parent.parent.type)}));if(m){var g=!d.replace(Mi,"").trim(),v=m.parent,y=v.parent.parent.columns.length,b=Ai(y);return g?o.deleteRange(l,c).split(o.mapping.map(c)):o.split(c).insert(o.mapping.map(c),te(s,b)).setSelection(ee(o,o.mapping.map(c)-2)),n(o),!0}return!1}},e.prototype.moveTableCell=function(t){var e=this;return function(n,r){var i=n.selection,o=n.tr,s=Jn(i),a=s.endFromOffset,l=s.endIndex,c=s.to,h=[l+1,c-a],u=e.context.toastMark.findNodeAtPosition(h),d=ve(u,(function(t){return me(t)}));if(d){var f=d.parent,p=Di(t),m=p.type,g=p.parentType,v=p.childType,y=le(d);if(d[m])y=le(d[m])-1;else{var b=f[m]||f.parent.type!==g?f[m]:f.parent[m][v];if("next"===m){var w=b?le(b[v]):0;y+=w+2}else"prev"===m&&(y=b?-4:0)}return r(o.setSelection(ee(o,a+y))),!0}return!1}},e.prototype.addTable=function(){return function(t){return function(e,n){var r=e.selection,i=e.tr,o=e.schema,s=t,a=s.columnCount,l=s.rowCount,c=Jn(r).endToOffset,h=Si(a),u=Li(a,l-1),d=p(p([],h),u);return d.forEach((function(t){i.split(i.mapping.map(c)).insert(i.mapping.map(c),te(o,t))})),n(i.setSelection(ee(i,c+4))),!0}}},e.prototype.commands=function(){return{addTable:this.addTable()}},e.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},e}(Yr),Ri="***",Pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("thematic-break")},0]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,i=t.tr,o=Jn(n),s=o.from,a=o.to,l=o.endToOffset,c=te(r,Ri);return i.split(s).replaceWith(i.mapping.map(s),i.mapping.map(a),c).split(i.mapping.map(a)).setSelection(ee(i,i.mapping.map(l))),e(i),!0}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(Yr);function Ii(t,e){var n=t.type,r=t.sourcepos,i=r[0][0];return e<=i&&("codeBlock"===n||"heading"===n||n.match("table"))}var ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.odd,r=e.even,i=e.listStyle,o="list-item";return i&&(o+="|list-item-style"),n&&(o+="|list-item-odd"),r&&(o+="|list-item-even"),["span",{class:dn.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendList=function(){var t=this;return function(e,n){var r=e.selection,i=e.doc,o=e.schema,s=e.tr,a=t.context.toastMark,l=Jn(r),c=l.to,h=l.startFromOffset,u=l.endFromOffset,d=l.endIndex,f=l.endToOffset,p=Xr(i,d),m=Qr.test(p);if(!m||r.from===h||!r.empty)return!1;var g=!p.replace(ni,"").trim();if(g)s.deleteRange(u,f).split(s.mapping.map(f));else{var v=si(p),y=a.findFirstNodeAtLine(d+1),b=p.slice(c-u),w={toastMark:a,mdNode:y,doc:i,line:d+1},x=gi[v](w),C=x.listSyntax,E=x.changedResults;if(null===E||void 0===E?void 0:E.length){s.split(c),E.unshift({text:C+b,line:d+1}),t.changeToListPerLine(s,E,{from:c,startLine:E[0].line,endLine:qt(E).line});var k=s.mapping.map(f)-b.length;s.setSelection(ee(s,k))}else{var N=te(o,C+b);ie(s,f,b,N)}}return n(s),!0}},e.prototype.toList=function(t){var e=this;return function(){return function(n,r){for(var i=n.doc,o=n.tr,s=n.selection,a=e.context.toastMark,l=Jn(s),c=l.startIndex+1,h=l.endIndex+1,u=l.endToOffset,d=[],f=c;f<=h;f+=1){var p=a.findFirstNodeAtLine(f);if(p&&Ii(p,f))break;if(-1===d.indexOf(f)){var m={toastMark:a,mdNode:p,doc:i,line:f,startLine:c},g=(de(p)?pi[t](m):mi[t](m)).changedResults,v=e.changeToListPerLine(o,g,{from:Qn(i,g[0].line-1).startOffset,startLine:g[0].line,endLine:qt(g).line,indexDiff:1});u=Math.max(v,u),g&&(d=d.concat(g.map((function(t){return t.line}))))}}return r(o.setSelection(ee(o,o.mapping.map(u)))),!0}}},e.prototype.changeToListPerLine=function(t,e,n){for(var r=n.from,i=n.startLine,o=n.endLine,s=n.indexDiff,a=void 0===s?0:s,l=0,c=function(n){var i=t.doc.child(n),o=i.nodeSize,s=i.content,c=t.mapping.map(r),u=c+s.size,d=e.filter((function(t){return t.line-a===n}))[0];d&&(t.replaceWith(c,u,te(h.context.schema,d.text)),l=Math.max(l,r+s.size)),r+=o},h=this,u=i-a;u<=o-a;u+=1)c(u);return l},e.prototype.toggleTask=function(){var t=this;return function(e,n){for(var r=e.selection,i=e.tr,o=e.doc,s=e.schema,a=t.context.toastMark,l=Jn(r),c=l.startIndex,h=l.endIndex,u=null,d=c;d<=h;d+=1){var f=a.findFirstNodeAtLine(d+1);if(de(f)&&f.listData.task){var p=f.listData,m=p.checked,g=p.padding,v=m?" ":"x",y=f.sourcepos[0],b=Qn(o,y[0]-1).startOffset;b+=y[1]+g,u=i.replaceWith(b,b+1,s.text(v))}}return!!u&&(n(u),!0)}},e.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},e.prototype.keymaps=function(){var t=this.toList("bullet")(),e=this.toList("ordered")(),n=this.toList("task")(),r=this.toggleTask();return{"Mod-u":t,"Mod-U":t,"Mod-o":e,"Mod-O":e,"alt-t":n,"alt-T":n,"Shift-Ctrl-x":r,"Shift-Ctrl-X":r,Enter:this.extendList()}},e}(Yr);function zi(t,e){return function(){return function(n,r){var i=n.tr,o=n.selection,s=qn(t)?t:function(e){return t.test(e)},a=e.length,l=i.doc,c=Vn(o),h=c[0],u=c[1],d=Math.max(h-a,1),f=Math.min(u+a,l.content.size-1),p=o.content(),m=p.content.textBetween(0,p.content.size,"\n"),g=l.textBetween(d,h,"\n"),v=l.textBetween(u,f,"\n");if(m=""+g+m+v,g&&v&&s(m))i.delete(f-a,f).delete(d,d+a);else{i.insertText(e,u).insertText(e,h);var y=o.empty?ee(i,h+a):ee(i,h+a,u+a);i.setSelection(y)}return r(i),!0}}}var Bi=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,Fi="**",Hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("strong")},0]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return zi(Bi,Fi)},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Yr),qi=/^(~{2}).*([\s\S]*)\1$/m,Wi="~~",Ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("strike")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return zi(qi,Wi)},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Yr),$i=/^(\*|_).*([\s\S]*)\1$/m,Vi="*",Gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("emph")},0]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return zi($i,Vi)},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Yr),Yi=/^(`).*([\s\S]*)\1$/m,Ki="`",Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.start,r=e.end,i=e.marked,o="code";return n&&(o+="|delimiter|start"),r&&(o+="|delimiter|end"),i&&(o+="|marked-text"),["span",{class:dn.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return zi(Yi,Ki)},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Yr),Zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.url,r=e.desc,i="link";return n&&(i+="|link-url|marked-text"),r&&(i+="|link-desc|marked-text"),["span",{class:dn.apply(void 0,i.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.addLinkOrImage=function(t){return function(e){return function(n,r){var i=n.selection,o=n.tr,s=n.schema,a=Vn(i),l=a[0],c=a[1],h=e,u=h.linkText,d=h.altText,f=h.linkUrl,p=h.imageUrl,m=u,g=f,v="";return"image"===t&&(m=d,g=p,v="!"),m=jt(m),v+="["+m+"]("+g+")",r(o.replaceWith(l,c,te(s,v))),!0}}},e.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},e}(Yr),Ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),e}(Yr),Qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("delimiter")},0]}}},enumerable:!1,configurable:!0}),e}(Yr),to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("meta")},0]}}},enumerable:!1,configurable:!0}),e}(Yr),eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("marked-text")},0]}}},enumerable:!1,configurable:!0}),e}(Yr),no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("table-cell")},0]}}},enumerable:!1,configurable:!0}),e}(Yr),ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("html")},0]}}},enumerable:!1,configurable:!0}),e}(Yr),io="$$",oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:dn("custom-block")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){var r=e.selection,i=e.schema,o=e.tr,s=Jn(r),a=s.startFromOffset,l=s.endToOffset;if(!(null===t||void 0===t?void 0:t.info))return!1;var c=""+io+t.info,h=te(i,c),u=te(i,io);return o.insert(a,h).split(a+c.length),o.split(o.mapping.map(l)).insert(o.mapping.map(l),u),n(o.setSelection(ee(o,o.mapping.map(l)-(io.length+2)))),!0}}},e}(Yr),so=/x|backspace/i,ao=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function lo(t){var e=t.schema,n=t.toastMark;return new s["d"]({props:{handleDOMEvents:{keyup:function(t,r){var i,o=t.state,s=o.doc,a=o.tr,l=o.selection;if(l.empty&&so.test(r.key)){var c=Jn(l),h=c.startIndex,u=c.startFromOffset,d=c.from,f=[h+1,d-u+1],p=n.findNodeAtPosition(f),m=ve(p,(function(t){var e;return"paragraph"===t.type&&"item"===(null===(e=t.parent)||void 0===e?void 0:e.type)}));if(null===(i=null===m||void 0===m?void 0:m.firstChild)||void 0===i?void 0:i.literal){var g=m.firstChild,v=g.literal.match(ao);if(v){var y=g.sourcepos[0],b=v[1],w=v[2],x=v[3],C=b.length+x.length,E=Qn(s,y[0]-1).startOffset,k=y[1]+E;if(w){var N=C?C+1:0;a.replaceWith(k,N+k,e.text(w)),t.dispatch(a)}else C||(a.insertText(" ",k),t.dispatch(a))}}}return!1}}}})}var co="cut",ho=/\r\n|\n|\r/,uo=function(t){function e(e,n){var r=t.call(this,e)||this,i=n.toastMark,o=n.useCommandShortcut,s=void 0===o||o,a=n.mdPlugins,l=void 0===a?[]:a;return r.editorType="markdown",r.el.classList.add("md-mode"),r.toastMark=i,r.extraPlugins=l,r.specs=r.createSpecs(),r.schema=r.createSchema(),r.context=r.createContext(),r.keymaps=r.createKeymaps(s),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(f(f({},r.context),{view:r.view})),r.createClipboard(),r.eventEmitter.listen("changePreviewTabWrite",(function(t){return r.toggleActive(!0,t)})),r.eventEmitter.listen("changePreviewTabPreview",(function(){return r.toggleActive(!1)})),r.initEvent(),r}return d(e,t),e.prototype.toggleActive=function(t,e){wn(this.el,"active",t),t?e||this.focus():this.blur()},e.prototype.createClipboard=function(){var t=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=un("pseudo-clipboard"),this.clipboard.addEventListener("paste",(function(e){var n=e.clipboardData||window.clipboardData,r=n&&n.items;if(r){var i=Jt(r).some((function(t){return"string"===t.kind&&"text/rtf"===t.type}));if(!i){var o=Rn(r);o&&(e.preventDefault(),_n(t.eventEmitter,o,e.type))}}})),this.clipboard.addEventListener("input",(function(e){var n=e.target.value;t.replaceSelection(n),e.preventDefault(),e.target.value=""})),this.el.insertBefore(this.clipboard,this.view.dom)},e.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSpecs=function(){return new $n([new Gr,new Ci,new Bn,new Ei,new Ni,new Jr,new Ti,new oo,new _i,new no,new Pi,new ji,new Hi,new Ui,new Gi,new Xi,new Zi,new Qi,new Ji,new eo,new to,new ro])},e.prototype.createPlugins=function(){return p([Pr(this.context),Vr(this.context),lo(this.context)],this.createPluginProps()).concat(this.defaultPlugins)},e.prototype.createView=function(){var t=this;return new i["c"](this.el,{state:this.createState(),dispatchTransaction:function(e){t.updateMarkdown(e);var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e)},handleKeyDown:function(e,n){return(n.metaKey||n.ctrlKey)&&"V"===n.key.toUpperCase()&&t.clipboard.focus(),t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{copy:function(e,n){return t.captureCopy(n)},cut:function(e,n){return t.captureCopy(n,co)},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1}},nodeViews:{widget:jn}})},e.prototype.createCommands=function(){return this.specs.commands(this.view)},e.prototype.captureCopy=function(t,e){t.preventDefault();var n=this.view.state,r=n.selection,i=n.tr;if(r.empty)return!0;var o=this.getChanged(r.content());return t.clipboardData?t.clipboardData.setData("text/plain",o):window.clipboardData.setData("Text",o),e===co&&this.view.dispatch(i.deleteSelection().scrollIntoView().setMeta("uiEvent",co)),!0},e.prototype.updateMarkdown=function(t){var e=this;t.docChanged&&t.steps.forEach((function(n,r){if(n.slice&&!(n instanceof o["b"])){var i=t.docs[r],s=[n.from,n.to],a=s[0],l=s[1],c=Kn(i,a,l),h=c[0],u=c[1],d=e.getChanged(n.slice);h[0]===u[0]&&h[1]===u[1]&&""===d&&(d="\n");var f=e.toastMark.editMarkdown(h,u,d);e.eventEmitter.emit("updatePreview",f),t.setMeta("editResult",f).scrollIntoView()}}))},e.prototype.getChanged=function(t){var e="",n=0,r=t.content.size;return t.content.nodesBetween(n,r,(function(t,i){t.isText?e+=t.text.slice(Math.max(n,i)-i,r-i):t.isBlock&&i>0&&(e+="\n")})),e},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=Zn(n.doc,t,e),i=r[0],o=r[1];this.view.dispatch(n.setSelection(ee(n,i,o)).scrollIntoView())},e.prototype.replaceSelection=function(t,e,n){var i,o=this.view.state,s=o.tr,a=o.schema,l=o.doc,c=t.split(ho),h=c.map((function(t){return Qt(a,_e(t,a))})),u=new r["j"](r["c"].from(h),1,1);if(this.focus(),e&&n){var d=Zn(l,e,n),f=d[0],p=d[1];i=s.replaceRange(f,p,u)}else i=s.replaceSelection(u);this.view.dispatch(i.scrollIntoView())},e.prototype.deleteSelection=function(t,e){var n,r=this.view.state,i=r.tr,o=r.doc;if(t&&e){var s=Zn(o,t,e),a=s[0],l=s[1];n=i.deleteRange(a,l)}else n=i.deleteSelection();this.view.dispatch(n.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,i=n.selection,o=i.from,s=i.to;if(t&&e){var a=Zn(r,t,e);o=a[0],s=a[1]}return r.textBetween(o,s,"\n")},e.prototype.getSelection=function(){var t=this.view.state.selection,e=t.from,n=t.to;return Kn(this.view.state.tr.doc,e,n)},e.prototype.setMarkdown=function(t,e){void 0===e&&(e=!0);var n=t.split(ho),r=this.view.state,i=r.tr,o=r.doc,s=r.schema,a=n.map((function(t){return Qt(s,_e(t,s))}));this.view.dispatch(i.replaceWith(0,o.content.size,a)),e&&this.moveCursorToEnd(!0)},e.prototype.addWidget=function(t,e,n){var r=this.view.state,i=r.tr,o=r.doc,s=r.selection,a=n?Zn(o,n,n)[0]:s.to;this.view.dispatch(i.setMeta("widget",{pos:a,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,i=r.tr,o=r.schema,s=r.doc,a=Zn(s,t,e),l=_e(n,o);this.view.dispatch(i.replaceWith(a[0],a[1],l))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,i=t||Kn(n,r.from)[0],o=this.toastMark.findNodeAtPosition(i);return"text"===o.type&&"paragraph"!==o.parent.type&&(o=o.parent),o.sourcepos[1][1]+=1,{range:o.sourcepos,type:o.type}},e.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map((function(t){return Te(t)})).join("\n")},e.prototype.getToastMark=function(){return this.toastMark},e}(Fn),fo="_feEventKey";function po(t,e){var n,r=t[fo];return r||(r=t[fo]={}),n=r[e],n||(n=r[e]=[]),n}var mo=po,go=x,vo=L,yo=mo;function bo(t,e,n){go(e)?vo(e.split(/\s+/g),(function(e){wo(t,e,n)})):vo(e,(function(e,n){wo(t,n,e)}))}function wo(t,e,n){var r,i=yo(t,e);n?(vo(i,(function(i,o){return n!==i.handler||(xo(t,e,i.wrappedHandler),r=o,!1)})),i.splice(r,1)):(vo(i,(function(n){xo(t,e,n.wrappedHandler)})),i.splice(0,i.length))}function xo(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}var Co=bo,Eo=x,ko=L,No=mo;function Oo(t,e,n,r){Eo(e)?ko(e.split(/\s+/g),(function(e){To(t,e,n,r)})):ko(e,(function(e,r){To(t,r,e,n)}))}function To(t,e,n,r){function i(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,i):"attachEvent"in t&&t.attachEvent("on"+e,i),Mo(t,e,n,i)}function Mo(t,e,n,r){var i=No(t,e),o=!1;ko(i,(function(t){return t.handler!==n||(o=!0,!1)})),o||i.push({handler:n,wrappedHandler:r})}var So=Oo,Lo=function(t,e){return Lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Lo(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ao(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Lo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Do=function(){return Do=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Do.apply(this,arguments)};function _o(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var Ro="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},Po={};function Io(t){var e,n,r=Po[t];if(r)return r;for(r=Po[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function jo(t,e,n){var r,i,o,s,a,l="";for("string"!==typeof e&&(n=e,e=jo.defaultChars),"undefined"===typeof n&&(n=!0),a=Io(e),r=0,i=t.length;r<i;r++)if(o=t.charCodeAt(r),n&&37===o&&r+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3)))l+=t.slice(r,r+3),r+=2;else if(o<128)l+=a[o];else if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i&&(s=t.charCodeAt(r+1),s>=56320&&s<=57343)){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(t[r]);return l}jo.defaultChars=";/?:@&=+$,-_.!~*'()#",jo.componentChars="-_.!~*'()";var zo=jo,Bo={},Fo={},Ho="Á",qo="á",Wo="Ă",Uo="ă",$o="∾",Vo="∿",Go="∾̳",Yo="Â",Ko="â",Xo="´",Zo="А",Jo="а",Qo="Æ",ts="æ",es="⁡",ns="𝔄",rs="𝔞",is="À",os="à",ss="ℵ",as="ℵ",ls="Α",cs="α",hs="Ā",us="ā",ds="⨿",fs="&",ps="&",ms="⩕",gs="⩓",vs="∧",ys="⩜",bs="⩘",ws="⩚",xs="∠",Cs="⦤",Es="∠",ks="⦨",Ns="⦩",Os="⦪",Ts="⦫",Ms="⦬",Ss="⦭",Ls="⦮",As="⦯",Ds="∡",_s="∟",Rs="⊾",Ps="⦝",Is="∢",js="Å",zs="⍼",Bs="Ą",Fs="ą",Hs="𝔸",qs="𝕒",Ws="⩯",Us="≈",$s="⩰",Vs="≊",Gs="≋",Ys="'",Ks="⁡",Xs="≈",Zs="≊",Js="Å",Qs="å",ta="𝒜",ea="𝒶",na="≔",ra="*",ia="≈",oa="≍",sa="Ã",aa="ã",la="Ä",ca="ä",ha="∳",ua="⨑",da="≌",fa="϶",pa="‵",ma="∽",ga="⋍",va="∖",ya="⫧",ba="⊽",wa="⌅",xa="⌆",Ca="⌅",Ea="⎵",ka="⎶",Na="≌",Oa="Б",Ta="б",Ma="„",Sa="∵",La="∵",Aa="∵",Da="⦰",_a="϶",Ra="ℬ",Pa="ℬ",Ia="Β",ja="β",za="ℶ",Ba="≬",Fa="𝔅",Ha="𝔟",qa="⋂",Wa="◯",Ua="⋃",$a="⨀",Va="⨁",Ga="⨂",Ya="⨆",Ka="★",Xa="▽",Za="△",Ja="⨄",Qa="⋁",tl="⋀",el="⤍",nl="⧫",rl="▪",il="▴",ol="▾",sl="◂",al="▸",ll="␣",cl="▒",hl="░",ul="▓",dl="█",fl="=⃥",pl="≡⃥",ml="⫭",gl="⌐",vl="𝔹",yl="𝕓",bl="⊥",wl="⊥",xl="⋈",Cl="⧉",El="┐",kl="╕",Nl="╖",Ol="╗",Tl="┌",Ml="╒",Sl="╓",Ll="╔",Al="─",Dl="═",_l="┬",Rl="╤",Pl="╥",Il="╦",jl="┴",zl="╧",Bl="╨",Fl="╩",Hl="⊟",ql="⊞",Wl="⊠",Ul="┘",$l="╛",Vl="╜",Gl="╝",Yl="└",Kl="╘",Xl="╙",Zl="╚",Jl="│",Ql="║",tc="┼",ec="╪",nc="╫",rc="╬",ic="┤",oc="╡",sc="╢",ac="╣",lc="├",cc="╞",hc="╟",uc="╠",dc="‵",fc="˘",pc="˘",mc="¦",gc="𝒷",vc="ℬ",yc="⁏",bc="∽",wc="⋍",xc="⧅",Cc="\\",Ec="⟈",kc="•",Nc="•",Oc="≎",Tc="⪮",Mc="≏",Sc="≎",Lc="≏",Ac="Ć",Dc="ć",_c="⩄",Rc="⩉",Pc="⩋",Ic="∩",jc="⋒",zc="⩇",Bc="⩀",Fc="ⅅ",Hc="∩︀",qc="⁁",Wc="ˇ",Uc="ℭ",$c="⩍",Vc="Č",Gc="č",Yc="Ç",Kc="ç",Xc="Ĉ",Zc="ĉ",Jc="∰",Qc="⩌",th="⩐",eh="Ċ",nh="ċ",rh="¸",ih="¸",oh="⦲",sh="¢",ah="·",lh="·",ch="𝔠",hh="ℭ",uh="Ч",dh="ч",fh="✓",ph="✓",mh="Χ",gh="χ",vh="ˆ",yh="≗",bh="↺",wh="↻",xh="⊛",Ch="⊚",Eh="⊝",kh="⊙",Nh="®",Oh="Ⓢ",Th="⊖",Mh="⊕",Sh="⊗",Lh="○",Ah="⧃",Dh="≗",_h="⨐",Rh="⫯",Ph="⧂",Ih="∲",jh="”",zh="’",Bh="♣",Fh="♣",Hh=":",qh="∷",Wh="⩴",Uh="≔",$h="≔",Vh=",",Gh="@",Yh="∁",Kh="∘",Xh="∁",Zh="ℂ",Jh="≅",Qh="⩭",tu="≡",eu="∮",nu="∯",ru="∮",iu="𝕔",ou="ℂ",su="∐",au="∐",lu="©",cu="©",hu="℗",uu="∳",du="↵",fu="✗",pu="⨯",mu="𝒞",gu="𝒸",vu="⫏",yu="⫑",bu="⫐",wu="⫒",xu="⋯",Cu="⤸",Eu="⤵",ku="⋞",Nu="⋟",Ou="↶",Tu="⤽",Mu="⩈",Su="⩆",Lu="≍",Au="∪",Du="⋓",_u="⩊",Ru="⊍",Pu="⩅",Iu="∪︀",ju="↷",zu="⤼",Bu="⋞",Fu="⋟",Hu="⋎",qu="⋏",Wu="¤",Uu="↶",$u="↷",Vu="⋎",Gu="⋏",Yu="∲",Ku="∱",Xu="⌭",Zu="†",Ju="‡",Qu="ℸ",td="↓",ed="↡",nd="⇓",rd="‐",id="⫤",od="⊣",sd="⤏",ad="˝",ld="Ď",cd="ď",hd="Д",ud="д",dd="‡",fd="⇊",pd="ⅅ",md="ⅆ",gd="⤑",vd="⩷",yd="°",bd="∇",wd="Δ",xd="δ",Cd="⦱",Ed="⥿",kd="𝔇",Nd="𝔡",Od="⥥",Td="⇃",Md="⇂",Sd="´",Ld="˙",Ad="˝",Dd="`",_d="˜",Rd="⋄",Pd="⋄",Id="⋄",jd="♦",zd="♦",Bd="¨",Fd="ⅆ",Hd="ϝ",qd="⋲",Wd="÷",Ud="÷",$d="⋇",Vd="⋇",Gd="Ђ",Yd="ђ",Kd="⌞",Xd="⌍",Zd="$",Jd="𝔻",Qd="𝕕",tf="¨",ef="˙",nf="⃜",rf="≐",of="≑",sf="≐",af="∸",lf="∔",cf="⊡",hf="⌆",uf="∯",df="¨",ff="⇓",pf="⇐",mf="⇔",gf="⫤",vf="⟸",yf="⟺",bf="⟹",wf="⇒",xf="⊨",Cf="⇑",Ef="⇕",kf="∥",Nf="⤓",Of="↓",Tf="↓",Mf="⇓",Sf="⇵",Lf="̑",Af="⇊",Df="⇃",_f="⇂",Rf="⥐",Pf="⥞",If="⥖",jf="↽",zf="⥟",Bf="⥗",Ff="⇁",Hf="↧",qf="⊤",Wf="⤐",Uf="⌟",$f="⌌",Vf="𝒟",Gf="𝒹",Yf="Ѕ",Kf="ѕ",Xf="⧶",Zf="Đ",Jf="đ",Qf="⋱",tp="▿",ep="▾",np="⇵",rp="⥯",ip="⦦",op="Џ",sp="џ",ap="⟿",lp="É",cp="é",hp="⩮",up="Ě",dp="ě",fp="Ê",pp="ê",mp="≖",gp="≕",vp="Э",yp="э",bp="⩷",wp="Ė",xp="ė",Cp="≑",Ep="ⅇ",kp="≒",Np="𝔈",Op="𝔢",Tp="⪚",Mp="È",Sp="è",Lp="⪖",Ap="⪘",Dp="⪙",_p="∈",Rp="⏧",Pp="ℓ",Ip="⪕",jp="⪗",zp="Ē",Bp="ē",Fp="∅",Hp="∅",qp="◻",Wp="∅",Up="▫",$p=" ",Vp=" ",Gp=" ",Yp="Ŋ",Kp="ŋ",Xp=" ",Zp="Ę",Jp="ę",Qp="𝔼",tm="𝕖",em="⋕",nm="⧣",rm="⩱",im="ε",om="Ε",sm="ε",am="ϵ",lm="≖",cm="≕",hm="≂",um="⪖",dm="⪕",fm="⩵",pm="=",mm="≂",gm="≟",vm="⇌",ym="≡",bm="⩸",wm="⧥",xm="⥱",Cm="≓",Em="ℯ",km="ℰ",Nm="≐",Om="⩳",Tm="≂",Mm="Η",Sm="η",Lm="Ð",Am="ð",Dm="Ë",_m="ë",Rm="€",Pm="!",Im="∃",jm="∃",zm="ℰ",Bm="ⅇ",Fm="ⅇ",Hm="≒",qm="Ф",Wm="ф",Um="♀",$m="ﬃ",Vm="ﬀ",Gm="ﬄ",Ym="𝔉",Km="𝔣",Xm="ﬁ",Zm="◼",Jm="▪",Qm="fj",tg="♭",eg="ﬂ",ng="▱",rg="ƒ",ig="𝔽",og="𝕗",sg="∀",ag="∀",lg="⋔",cg="⫙",hg="ℱ",ug="⨍",dg="½",fg="⅓",pg="¼",mg="⅕",gg="⅙",vg="⅛",yg="⅔",bg="⅖",wg="¾",xg="⅗",Cg="⅜",Eg="⅘",kg="⅚",Ng="⅝",Og="⅞",Tg="⁄",Mg="⌢",Sg="𝒻",Lg="ℱ",Ag="ǵ",Dg="Γ",_g="γ",Rg="Ϝ",Pg="ϝ",Ig="⪆",jg="Ğ",zg="ğ",Bg="Ģ",Fg="Ĝ",Hg="ĝ",qg="Г",Wg="г",Ug="Ġ",$g="ġ",Vg="≥",Gg="≧",Yg="⪌",Kg="⋛",Xg="≥",Zg="≧",Jg="⩾",Qg="⪩",tv="⩾",ev="⪀",nv="⪂",rv="⪄",iv="⋛︀",ov="⪔",sv="𝔊",av="𝔤",lv="≫",cv="⋙",hv="⋙",uv="ℷ",dv="Ѓ",fv="ѓ",pv="⪥",mv="≷",gv="⪒",vv="⪤",yv="⪊",bv="⪊",wv="⪈",xv="≩",Cv="⪈",Ev="≩",kv="⋧",Nv="𝔾",Ov="𝕘",Tv="`",Mv="≥",Sv="⋛",Lv="≧",Av="⪢",Dv="≷",_v="⩾",Rv="≳",Pv="𝒢",Iv="ℊ",jv="≳",zv="⪎",Bv="⪐",Fv="⪧",Hv="⩺",qv=">",Wv=">",Uv="≫",$v="⋗",Vv="⦕",Gv="⩼",Yv="⪆",Kv="⥸",Xv="⋗",Zv="⋛",Jv="⪌",Qv="≷",ty="≳",ey="≩︀",ny="≩︀",ry="ˇ",iy=" ",oy="½",sy="ℋ",ay="Ъ",ly="ъ",cy="⥈",hy="↔",uy="⇔",dy="↭",fy="^",py="ℏ",my="Ĥ",gy="ĥ",vy="♥",yy="♥",by="…",wy="⊹",xy="𝔥",Cy="ℌ",Ey="ℋ",ky="⤥",Ny="⤦",Oy="⇿",Ty="∻",My="↩",Sy="↪",Ly="𝕙",Ay="ℍ",Dy="―",_y="─",Ry="𝒽",Py="ℋ",Iy="ℏ",jy="Ħ",zy="ħ",By="≎",Fy="≏",Hy="⁃",qy="‐",Wy="Í",Uy="í",$y="⁣",Vy="Î",Gy="î",Yy="И",Ky="и",Xy="İ",Zy="Е",Jy="е",Qy="¡",tb="⇔",eb="𝔦",nb="ℑ",rb="Ì",ib="ì",ob="ⅈ",sb="⨌",ab="∭",lb="⧜",cb="℩",hb="Ĳ",ub="ĳ",db="Ī",fb="ī",pb="ℑ",mb="ⅈ",gb="ℐ",vb="ℑ",yb="ı",bb="ℑ",wb="⊷",xb="Ƶ",Cb="⇒",Eb="℅",kb="∞",Nb="⧝",Ob="ı",Tb="⊺",Mb="∫",Sb="∬",Lb="ℤ",Ab="∫",Db="⊺",_b="⋂",Rb="⨗",Pb="⨼",Ib="⁣",jb="⁢",zb="Ё",Bb="ё",Fb="Į",Hb="į",qb="𝕀",Wb="𝕚",Ub="Ι",$b="ι",Vb="⨼",Gb="¿",Yb="𝒾",Kb="ℐ",Xb="∈",Zb="⋵",Jb="⋹",Qb="⋴",tw="⋳",ew="∈",nw="⁢",rw="Ĩ",iw="ĩ",ow="І",sw="і",aw="Ï",lw="ï",cw="Ĵ",hw="ĵ",uw="Й",dw="й",fw="𝔍",pw="𝔧",mw="ȷ",gw="𝕁",vw="𝕛",yw="𝒥",bw="𝒿",ww="Ј",xw="ј",Cw="Є",Ew="є",kw="Κ",Nw="κ",Ow="ϰ",Tw="Ķ",Mw="ķ",Sw="К",Lw="к",Aw="𝔎",Dw="𝔨",_w="ĸ",Rw="Х",Pw="х",Iw="Ќ",jw="ќ",zw="𝕂",Bw="𝕜",Fw="𝒦",Hw="𝓀",qw="⇚",Ww="Ĺ",Uw="ĺ",$w="⦴",Vw="ℒ",Gw="Λ",Yw="λ",Kw="⟨",Xw="⟪",Zw="⦑",Jw="⟨",Qw="⪅",tx="ℒ",ex="«",nx="⇤",rx="⤟",ix="←",ox="↞",sx="⇐",ax="⤝",lx="↩",cx="↫",hx="⤹",ux="⥳",dx="↢",fx="⤙",px="⤛",mx="⪫",gx="⪭",vx="⪭︀",yx="⤌",bx="⤎",wx="❲",xx="{",Cx="[",Ex="⦋",kx="⦏",Nx="⦍",Ox="Ľ",Tx="ľ",Mx="Ļ",Sx="ļ",Lx="⌈",Ax="{",Dx="Л",_x="л",Rx="⤶",Px="“",Ix="„",jx="⥧",zx="⥋",Bx="↲",Fx="≤",Hx="≦",qx="⟨",Wx="⇤",Ux="←",$x="←",Vx="⇐",Gx="⇆",Yx="↢",Kx="⌈",Xx="⟦",Zx="⥡",Jx="⥙",Qx="⇃",tC="⌊",eC="↽",nC="↼",rC="⇇",iC="↔",oC="↔",sC="⇔",aC="⇆",lC="⇋",cC="↭",hC="⥎",uC="↤",dC="⊣",fC="⥚",pC="⋋",mC="⧏",gC="⊲",vC="⊴",yC="⥑",bC="⥠",wC="⥘",xC="↿",CC="⥒",EC="↼",kC="⪋",NC="⋚",OC="≤",TC="≦",MC="⩽",SC="⪨",LC="⩽",AC="⩿",DC="⪁",_C="⪃",RC="⋚︀",PC="⪓",IC="⪅",jC="⋖",zC="⋚",BC="⪋",FC="⋚",HC="≦",qC="≶",WC="≶",UC="⪡",$C="≲",VC="⩽",GC="≲",YC="⥼",KC="⌊",XC="𝔏",ZC="𝔩",JC="≶",QC="⪑",tE="⥢",eE="↽",nE="↼",rE="⥪",iE="▄",oE="Љ",sE="љ",aE="⇇",lE="≪",cE="⋘",hE="⌞",uE="⇚",dE="⥫",fE="◺",pE="Ŀ",mE="ŀ",gE="⎰",vE="⎰",yE="⪉",bE="⪉",wE="⪇",xE="≨",CE="⪇",EE="≨",kE="⋦",NE="⟬",OE="⇽",TE="⟦",ME="⟵",SE="⟵",LE="⟸",AE="⟷",DE="⟷",_E="⟺",RE="⟼",PE="⟶",IE="⟶",jE="⟹",zE="↫",BE="↬",FE="⦅",HE="𝕃",qE="𝕝",WE="⨭",UE="⨴",$E="∗",VE="_",GE="↙",YE="↘",KE="◊",XE="◊",ZE="⧫",JE="(",QE="⦓",tk="⇆",ek="⌟",nk="⇋",rk="⥭",ik="‎",ok="⊿",sk="‹",ak="𝓁",lk="ℒ",ck="↰",hk="↰",uk="≲",dk="⪍",fk="⪏",pk="[",mk="‘",gk="‚",vk="Ł",yk="ł",bk="⪦",wk="⩹",xk="<",Ck="<",Ek="≪",kk="⋖",Nk="⋋",Ok="⋉",Tk="⥶",Mk="⩻",Sk="◃",Lk="⊴",Ak="◂",Dk="⦖",_k="⥊",Rk="⥦",Pk="≨︀",Ik="≨︀",jk="¯",zk="♂",Bk="✠",Fk="✠",Hk="↦",qk="↦",Wk="↧",Uk="↤",$k="↥",Vk="▮",Gk="⨩",Yk="М",Kk="м",Xk="—",Zk="∺",Jk="∡",Qk=" ",tN="ℳ",eN="𝔐",nN="𝔪",rN="℧",iN="µ",oN="*",sN="⫰",aN="∣",lN="·",cN="⊟",hN="−",uN="∸",dN="⨪",fN="∓",pN="⫛",mN="…",gN="∓",vN="⊧",yN="𝕄",bN="𝕞",wN="∓",xN="𝓂",CN="ℳ",EN="∾",kN="Μ",NN="μ",ON="⊸",TN="⊸",MN="∇",SN="Ń",LN="ń",AN="∠⃒",DN="≉",_N="⩰̸",RN="≋̸",PN="ŉ",IN="≉",jN="♮",zN="ℕ",BN="♮",FN=" ",HN="≎̸",qN="≏̸",WN="⩃",UN="Ň",$N="ň",VN="Ņ",GN="ņ",YN="≇",KN="⩭̸",XN="⩂",ZN="Н",JN="н",QN="–",tO="⤤",eO="↗",nO="⇗",rO="↗",iO="≠",oO="≐̸",sO="​",aO="​",lO="​",cO="​",hO="≢",uO="⤨",dO="≂̸",fO="≫",pO="≪",mO="\n",gO="∄",vO="∄",yO="𝔑",bO="𝔫",wO="≧̸",xO="≱",CO="≱",EO="≧̸",kO="⩾̸",NO="⩾̸",OO="⋙̸",TO="≵",MO="≫⃒",SO="≯",LO="≯",AO="≫̸",DO="↮",_O="⇎",RO="⫲",PO="∋",IO="⋼",jO="⋺",zO="∋",BO="Њ",FO="њ",HO="↚",qO="⇍",WO="‥",UO="≦̸",$O="≰",VO="↚",GO="⇍",YO="↮",KO="⇎",XO="≰",ZO="≦̸",JO="⩽̸",QO="⩽̸",tT="≮",eT="⋘̸",nT="≴",rT="≪⃒",iT="≮",oT="⋪",sT="⋬",aT="≪̸",lT="∤",cT="⁠",hT=" ",uT="𝕟",dT="ℕ",fT="⫬",pT="¬",mT="≢",gT="≭",vT="∦",yT="∉",bT="≠",wT="≂̸",xT="∄",CT="≯",ET="≱",kT="≧̸",NT="≫̸",OT="≹",TT="⩾̸",MT="≵",ST="≎̸",LT="≏̸",AT="∉",DT="⋵̸",_T="⋹̸",RT="∉",PT="⋷",IT="⋶",jT="⧏̸",zT="⋪",BT="⋬",FT="≮",HT="≰",qT="≸",WT="≪̸",UT="⩽̸",$T="≴",VT="⪢̸",GT="⪡̸",YT="∌",KT="∌",XT="⋾",ZT="⋽",JT="⊀",QT="⪯̸",tM="⋠",eM="∌",nM="⧐̸",rM="⋫",iM="⋭",oM="⊏̸",sM="⋢",aM="⊐̸",lM="⋣",cM="⊂⃒",hM="⊈",uM="⊁",dM="⪰̸",fM="⋡",pM="≿̸",mM="⊃⃒",gM="⊉",vM="≁",yM="≄",bM="≇",wM="≉",xM="∤",CM="∦",EM="∦",kM="⫽⃥",NM="∂̸",OM="⨔",TM="⊀",MM="⋠",SM="⊀",LM="⪯̸",AM="⪯̸",DM="⤳̸",_M="↛",RM="⇏",PM="↝̸",IM="↛",jM="⇏",zM="⋫",BM="⋭",FM="⊁",HM="⋡",qM="⪰̸",WM="𝒩",UM="𝓃",$M="∤",VM="∦",GM="≁",YM="≄",KM="≄",XM="∤",ZM="∦",JM="⋢",QM="⋣",tS="⊄",eS="⫅̸",nS="⊈",rS="⊂⃒",iS="⊈",oS="⫅̸",sS="⊁",aS="⪰̸",lS="⊅",cS="⫆̸",hS="⊉",uS="⊃⃒",dS="⊉",fS="⫆̸",pS="≹",mS="Ñ",gS="ñ",vS="≸",yS="⋪",bS="⋬",wS="⋫",xS="⋭",CS="Ν",ES="ν",kS="#",NS="№",OS=" ",TS="≍⃒",MS="⊬",SS="⊭",LS="⊮",AS="⊯",DS="≥⃒",_S=">⃒",RS="⤄",PS="⧞",IS="⤂",jS="≤⃒",zS="<⃒",BS="⊴⃒",FS="⤃",HS="⊵⃒",qS="∼⃒",WS="⤣",US="↖",$S="⇖",VS="↖",GS="⤧",YS="Ó",KS="ó",XS="⊛",ZS="Ô",JS="ô",QS="⊚",tL="О",eL="о",nL="⊝",rL="Ő",iL="ő",oL="⨸",sL="⊙",aL="⦼",lL="Œ",cL="œ",hL="⦿",uL="𝔒",dL="𝔬",fL="˛",pL="Ò",mL="ò",gL="⧁",vL="⦵",yL="Ω",bL="∮",wL="↺",xL="⦾",CL="⦻",EL="‾",kL="⧀",NL="Ō",OL="ō",TL="Ω",ML="ω",SL="Ο",LL="ο",AL="⦶",DL="⊖",_L="𝕆",RL="𝕠",PL="⦷",IL="“",jL="‘",zL="⦹",BL="⊕",FL="↻",HL="⩔",qL="∨",WL="⩝",UL="ℴ",$L="ℴ",VL="ª",GL="º",YL="⊶",KL="⩖",XL="⩗",ZL="⩛",JL="Ⓢ",QL="𝒪",tA="ℴ",eA="Ø",nA="ø",rA="⊘",iA="Õ",oA="õ",sA="⨶",aA="⨷",lA="⊗",cA="Ö",hA="ö",uA="⌽",dA="‾",fA="⏞",pA="⎴",mA="⏜",gA="¶",vA="∥",yA="∥",bA="⫳",wA="⫽",xA="∂",CA="∂",EA="П",kA="п",NA="%",OA=".",TA="‰",MA="⊥",SA="‱",LA="𝔓",AA="𝔭",DA="Φ",_A="φ",RA="ϕ",PA="ℳ",IA="☎",jA="Π",zA="π",BA="⋔",FA="ϖ",HA="ℏ",qA="ℎ",WA="ℏ",UA="⨣",$A="⊞",VA="⨢",GA="+",YA="∔",KA="⨥",XA="⩲",ZA="±",JA="±",QA="⨦",tD="⨧",eD="±",nD="ℌ",rD="⨕",iD="𝕡",oD="ℙ",sD="£",aD="⪷",lD="⪻",cD="≺",hD="≼",uD="⪷",dD="≺",fD="≼",pD="≺",mD="⪯",gD="≼",vD="≾",yD="⪯",bD="⪹",wD="⪵",xD="⋨",CD="⪯",ED="⪳",kD="≾",ND="′",OD="″",TD="ℙ",MD="⪹",SD="⪵",LD="⋨",AD="∏",DD="∏",_D="⌮",RD="⌒",PD="⌓",ID="∝",jD="∝",zD="∷",BD="∝",FD="≾",HD="⊰",qD="𝒫",WD="𝓅",UD="Ψ",$D="ψ",VD=" ",GD="𝔔",YD="𝔮",KD="⨌",XD="𝕢",ZD="ℚ",JD="⁗",QD="𝒬",t_="𝓆",e_="ℍ",n_="⨖",r_="?",i_="≟",o_='"',s_='"',a_="⇛",l_="∽̱",c_="Ŕ",h_="ŕ",u_="√",d_="⦳",f_="⟩",p_="⟫",m_="⦒",g_="⦥",v_="⟩",y_="»",b_="⥵",w_="⇥",x_="⤠",C_="⤳",E_="→",k_="↠",N_="⇒",O_="⤞",T_="↪",M_="↬",S_="⥅",L_="⥴",A_="⤖",D_="↣",__="↝",R_="⤚",P_="⤜",I_="∶",j_="ℚ",z_="⤍",B_="⤏",F_="⤐",H_="❳",q_="}",W_="]",U_="⦌",$_="⦎",V_="⦐",G_="Ř",Y_="ř",K_="Ŗ",X_="ŗ",Z_="⌉",J_="}",Q_="Р",tR="р",eR="⤷",nR="⥩",rR="”",iR="”",oR="↳",sR="ℜ",aR="ℛ",lR="ℜ",cR="ℝ",hR="ℜ",uR="▭",dR="®",fR="®",pR="∋",mR="⇋",gR="⥯",vR="⥽",yR="⌋",bR="𝔯",wR="ℜ",xR="⥤",CR="⇁",ER="⇀",kR="⥬",NR="Ρ",OR="ρ",TR="ϱ",MR="⟩",SR="⇥",LR="→",AR="→",DR="⇒",_R="⇄",RR="↣",PR="⌉",IR="⟧",jR="⥝",zR="⥕",BR="⇂",FR="⌋",HR="⇁",qR="⇀",WR="⇄",UR="⇌",$R="⇉",VR="↝",GR="↦",YR="⊢",KR="⥛",XR="⋌",ZR="⧐",JR="⊳",QR="⊵",tP="⥏",eP="⥜",nP="⥔",rP="↾",iP="⥓",oP="⇀",sP="˚",aP="≓",lP="⇄",cP="⇌",hP="‏",uP="⎱",dP="⎱",fP="⫮",pP="⟭",mP="⇾",gP="⟧",vP="⦆",yP="𝕣",bP="ℝ",wP="⨮",xP="⨵",CP="⥰",EP=")",kP="⦔",NP="⨒",OP="⇉",TP="⇛",MP="›",SP="𝓇",LP="ℛ",AP="↱",DP="↱",_P="]",RP="’",PP="’",IP="⋌",jP="⋊",zP="▹",BP="⊵",FP="▸",HP="⧎",qP="⧴",WP="⥨",UP="℞",$P="Ś",VP="ś",GP="‚",YP="⪸",KP="Š",XP="š",ZP="⪼",JP="≻",QP="≽",tI="⪰",eI="⪴",nI="Ş",rI="ş",iI="Ŝ",oI="ŝ",sI="⪺",aI="⪶",lI="⋩",cI="⨓",hI="≿",uI="С",dI="с",fI="⊡",pI="⋅",mI="⩦",gI="⤥",vI="↘",yI="⇘",bI="↘",wI="§",xI=";",CI="⤩",EI="∖",kI="∖",NI="✶",OI="𝔖",TI="𝔰",MI="⌢",SI="♯",LI="Щ",AI="щ",DI="Ш",_I="ш",RI="↓",PI="←",II="∣",jI="∥",zI="→",BI="↑",FI="­",HI="Σ",qI="σ",WI="ς",UI="ς",$I="∼",VI="⩪",GI="≃",YI="≃",KI="⪞",XI="⪠",ZI="⪝",JI="⪟",QI="≆",tj="⨤",ej="⥲",nj="←",rj="∘",ij="∖",oj="⨳",sj="⧤",aj="∣",lj="⌣",cj="⪪",hj="⪬",uj="⪬︀",dj="Ь",fj="ь",pj="⌿",mj="⧄",gj="/",vj="𝕊",yj="𝕤",bj="♠",wj="♠",xj="∥",Cj="⊓",Ej="⊓︀",kj="⊔",Nj="⊔︀",Oj="√",Tj="⊏",Mj="⊑",Sj="⊏",Lj="⊑",Aj="⊐",Dj="⊒",_j="⊐",Rj="⊒",Pj="□",Ij="□",jj="⊓",zj="⊏",Bj="⊑",Fj="⊐",Hj="⊒",qj="⊔",Wj="▪",Uj="□",$j="▪",Vj="→",Gj="𝒮",Yj="𝓈",Kj="∖",Xj="⌣",Zj="⋆",Jj="⋆",Qj="☆",tz="★",ez="ϵ",nz="ϕ",rz="¯",iz="⊂",oz="⋐",sz="⪽",az="⫅",lz="⊆",cz="⫃",hz="⫁",uz="⫋",dz="⊊",fz="⪿",pz="⥹",mz="⊂",gz="⋐",vz="⊆",yz="⫅",bz="⊆",wz="⊊",xz="⫋",Cz="⫇",Ez="⫕",kz="⫓",Nz="⪸",Oz="≻",Tz="≽",Mz="≻",Sz="⪰",Lz="≽",Az="≿",Dz="⪰",_z="⪺",Rz="⪶",Pz="⋩",Iz="≿",jz="∋",zz="∑",Bz="∑",Fz="♪",Hz="¹",qz="²",Wz="³",Uz="⊃",$z="⋑",Vz="⪾",Gz="⫘",Yz="⫆",Kz="⊇",Xz="⫄",Zz="⊃",Jz="⊇",Qz="⟉",tB="⫗",eB="⥻",nB="⫂",rB="⫌",iB="⊋",oB="⫀",sB="⊃",aB="⋑",lB="⊇",cB="⫆",hB="⊋",uB="⫌",dB="⫈",fB="⫔",pB="⫖",mB="⤦",gB="↙",vB="⇙",yB="↙",bB="⤪",wB="ß",xB="\t",CB="⌖",EB="Τ",kB="τ",NB="⎴",OB="Ť",TB="ť",MB="Ţ",SB="ţ",LB="Т",AB="т",DB="⃛",_B="⌕",RB="𝔗",PB="𝔱",IB="∴",jB="∴",zB="∴",BB="Θ",FB="θ",HB="ϑ",qB="ϑ",WB="≈",UB="∼",$B="  ",VB=" ",GB=" ",YB="≈",KB="∼",XB="Þ",ZB="þ",JB="˜",QB="∼",tF="≃",eF="≅",nF="≈",rF="⨱",iF="⊠",oF="×",sF="⨰",aF="∭",lF="⤨",cF="⌶",hF="⫱",uF="⊤",dF="𝕋",fF="𝕥",pF="⫚",mF="⤩",gF="‴",vF="™",yF="™",bF="▵",wF="▿",xF="◃",CF="⊴",EF="≜",kF="▹",NF="⊵",OF="◬",TF="≜",MF="⨺",SF="⃛",LF="⨹",AF="⧍",DF="⨻",_F="⏢",RF="𝒯",PF="𝓉",IF="Ц",jF="ц",zF="Ћ",BF="ћ",FF="Ŧ",HF="ŧ",qF="≬",WF="↞",UF="↠",$F="Ú",VF="ú",GF="↑",YF="↟",KF="⇑",XF="⥉",ZF="Ў",JF="ў",QF="Ŭ",tH="ŭ",eH="Û",nH="û",rH="У",iH="у",oH="⇅",sH="Ű",aH="ű",lH="⥮",cH="⥾",hH="𝔘",uH="𝔲",dH="Ù",fH="ù",pH="⥣",mH="↿",gH="↾",vH="▀",yH="⌜",bH="⌜",wH="⌏",xH="◸",CH="Ū",EH="ū",kH="¨",NH="_",OH="⏟",TH="⎵",MH="⏝",SH="⋃",LH="⊎",AH="Ų",DH="ų",_H="𝕌",RH="𝕦",PH="⤒",IH="↑",jH="↑",zH="⇑",BH="⇅",FH="↕",HH="↕",qH="⇕",WH="⥮",UH="↿",$H="↾",VH="⊎",GH="↖",YH="↗",KH="υ",XH="ϒ",ZH="ϒ",JH="Υ",QH="υ",tq="↥",eq="⊥",nq="⇈",rq="⌝",iq="⌝",oq="⌎",sq="Ů",aq="ů",lq="◹",cq="𝒰",hq="𝓊",uq="⋰",dq="Ũ",fq="ũ",pq="▵",mq="▴",gq="⇈",vq="Ü",yq="ü",bq="⦧",wq="⦜",xq="ϵ",Cq="ϰ",Eq="∅",kq="ϕ",Nq="ϖ",Oq="∝",Tq="↕",Mq="⇕",Sq="ϱ",Lq="ς",Aq="⊊︀",Dq="⫋︀",_q="⊋︀",Rq="⫌︀",Pq="ϑ",Iq="⊲",jq="⊳",zq="⫨",Bq="⫫",Fq="⫩",Hq="В",qq="в",Wq="⊢",Uq="⊨",$q="⊩",Vq="⊫",Gq="⫦",Yq="⊻",Kq="∨",Xq="⋁",Zq="≚",Jq="⋮",Qq="|",tW="‖",eW="|",nW="‖",rW="∣",iW="|",oW="❘",sW="≀",aW=" ",lW="𝔙",cW="𝔳",hW="⊲",uW="⊂⃒",dW="⊃⃒",fW="𝕍",pW="𝕧",mW="∝",gW="⊳",vW="𝒱",yW="𝓋",bW="⫋︀",wW="⊊︀",xW="⫌︀",CW="⊋︀",EW="⊪",kW="⦚",NW="Ŵ",OW="ŵ",TW="⩟",MW="∧",SW="⋀",LW="≙",AW="℘",DW="𝔚",_W="𝔴",RW="𝕎",PW="𝕨",IW="℘",jW="≀",zW="≀",BW="𝒲",FW="𝓌",HW="⋂",qW="◯",WW="⋃",UW="▽",$W="𝔛",VW="𝔵",GW="⟷",YW="⟺",KW="Ξ",XW="ξ",ZW="⟵",JW="⟸",QW="⟼",tU="⋻",eU="⨀",nU="𝕏",rU="𝕩",iU="⨁",oU="⨂",sU="⟶",aU="⟹",lU="𝒳",cU="𝓍",hU="⨆",uU="⨄",dU="△",fU="⋁",pU="⋀",mU="Ý",gU="ý",vU="Я",yU="я",bU="Ŷ",wU="ŷ",xU="Ы",CU="ы",EU="¥",kU="𝔜",NU="𝔶",OU="Ї",TU="ї",MU="𝕐",SU="𝕪",LU="𝒴",AU="𝓎",DU="Ю",_U="ю",RU="ÿ",PU="Ÿ",IU="Ź",jU="ź",zU="Ž",BU="ž",FU="З",HU="з",qU="Ż",WU="ż",UU="ℨ",$U="​",VU="Ζ",GU="ζ",YU="𝔷",KU="ℨ",XU="Ж",ZU="ж",JU="⇝",QU="𝕫",t$="ℤ",e$="𝒵",n$="𝓏",r$="‍",i$="‌",o$={Aacute:Ho,aacute:qo,Abreve:Wo,abreve:Uo,ac:$o,acd:Vo,acE:Go,Acirc:Yo,acirc:Ko,acute:Xo,Acy:Zo,acy:Jo,AElig:Qo,aelig:ts,af:es,Afr:ns,afr:rs,Agrave:is,agrave:os,alefsym:ss,aleph:as,Alpha:ls,alpha:cs,Amacr:hs,amacr:us,amalg:ds,amp:fs,AMP:ps,andand:ms,And:gs,and:vs,andd:ys,andslope:bs,andv:ws,ang:xs,ange:Cs,angle:Es,angmsdaa:ks,angmsdab:Ns,angmsdac:Os,angmsdad:Ts,angmsdae:Ms,angmsdaf:Ss,angmsdag:Ls,angmsdah:As,angmsd:Ds,angrt:_s,angrtvb:Rs,angrtvbd:Ps,angsph:Is,angst:js,angzarr:zs,Aogon:Bs,aogon:Fs,Aopf:Hs,aopf:qs,apacir:Ws,ap:Us,apE:$s,ape:Vs,apid:Gs,apos:Ys,ApplyFunction:Ks,approx:Xs,approxeq:Zs,Aring:Js,aring:Qs,Ascr:ta,ascr:ea,Assign:na,ast:ra,asymp:ia,asympeq:oa,Atilde:sa,atilde:aa,Auml:la,auml:ca,awconint:ha,awint:ua,backcong:da,backepsilon:fa,backprime:pa,backsim:ma,backsimeq:ga,Backslash:va,Barv:ya,barvee:ba,barwed:wa,Barwed:xa,barwedge:Ca,bbrk:Ea,bbrktbrk:ka,bcong:Na,Bcy:Oa,bcy:Ta,bdquo:Ma,becaus:Sa,because:La,Because:Aa,bemptyv:Da,bepsi:_a,bernou:Ra,Bernoullis:Pa,Beta:Ia,beta:ja,beth:za,between:Ba,Bfr:Fa,bfr:Ha,bigcap:qa,bigcirc:Wa,bigcup:Ua,bigodot:$a,bigoplus:Va,bigotimes:Ga,bigsqcup:Ya,bigstar:Ka,bigtriangledown:Xa,bigtriangleup:Za,biguplus:Ja,bigvee:Qa,bigwedge:tl,bkarow:el,blacklozenge:nl,blacksquare:rl,blacktriangle:il,blacktriangledown:ol,blacktriangleleft:sl,blacktriangleright:al,blank:ll,blk12:cl,blk14:hl,blk34:ul,block:dl,bne:fl,bnequiv:pl,bNot:ml,bnot:gl,Bopf:vl,bopf:yl,bot:bl,bottom:wl,bowtie:xl,boxbox:Cl,boxdl:El,boxdL:kl,boxDl:Nl,boxDL:Ol,boxdr:Tl,boxdR:Ml,boxDr:Sl,boxDR:Ll,boxh:Al,boxH:Dl,boxhd:_l,boxHd:Rl,boxhD:Pl,boxHD:Il,boxhu:jl,boxHu:zl,boxhU:Bl,boxHU:Fl,boxminus:Hl,boxplus:ql,boxtimes:Wl,boxul:Ul,boxuL:$l,boxUl:Vl,boxUL:Gl,boxur:Yl,boxuR:Kl,boxUr:Xl,boxUR:Zl,boxv:Jl,boxV:Ql,boxvh:tc,boxvH:ec,boxVh:nc,boxVH:rc,boxvl:ic,boxvL:oc,boxVl:sc,boxVL:ac,boxvr:lc,boxvR:cc,boxVr:hc,boxVR:uc,bprime:dc,breve:fc,Breve:pc,brvbar:mc,bscr:gc,Bscr:vc,bsemi:yc,bsim:bc,bsime:wc,bsolb:xc,bsol:Cc,bsolhsub:Ec,bull:kc,bullet:Nc,bump:Oc,bumpE:Tc,bumpe:Mc,Bumpeq:Sc,bumpeq:Lc,Cacute:Ac,cacute:Dc,capand:_c,capbrcup:Rc,capcap:Pc,cap:Ic,Cap:jc,capcup:zc,capdot:Bc,CapitalDifferentialD:Fc,caps:Hc,caret:qc,caron:Wc,Cayleys:Uc,ccaps:$c,Ccaron:Vc,ccaron:Gc,Ccedil:Yc,ccedil:Kc,Ccirc:Xc,ccirc:Zc,Cconint:Jc,ccups:Qc,ccupssm:th,Cdot:eh,cdot:nh,cedil:rh,Cedilla:ih,cemptyv:oh,cent:sh,centerdot:ah,CenterDot:lh,cfr:ch,Cfr:hh,CHcy:uh,chcy:dh,check:fh,checkmark:ph,Chi:mh,chi:gh,circ:vh,circeq:yh,circlearrowleft:bh,circlearrowright:wh,circledast:xh,circledcirc:Ch,circleddash:Eh,CircleDot:kh,circledR:Nh,circledS:Oh,CircleMinus:Th,CirclePlus:Mh,CircleTimes:Sh,cir:Lh,cirE:Ah,cire:Dh,cirfnint:_h,cirmid:Rh,cirscir:Ph,ClockwiseContourIntegral:Ih,CloseCurlyDoubleQuote:jh,CloseCurlyQuote:zh,clubs:Bh,clubsuit:Fh,colon:Hh,Colon:qh,Colone:Wh,colone:Uh,coloneq:$h,comma:Vh,commat:Gh,comp:Yh,compfn:Kh,complement:Xh,complexes:Zh,cong:Jh,congdot:Qh,Congruent:tu,conint:eu,Conint:nu,ContourIntegral:ru,copf:iu,Copf:ou,coprod:su,Coproduct:au,copy:lu,COPY:cu,copysr:hu,CounterClockwiseContourIntegral:uu,crarr:du,cross:fu,Cross:pu,Cscr:mu,cscr:gu,csub:vu,csube:yu,csup:bu,csupe:wu,ctdot:xu,cudarrl:Cu,cudarrr:Eu,cuepr:ku,cuesc:Nu,cularr:Ou,cularrp:Tu,cupbrcap:Mu,cupcap:Su,CupCap:Lu,cup:Au,Cup:Du,cupcup:_u,cupdot:Ru,cupor:Pu,cups:Iu,curarr:ju,curarrm:zu,curlyeqprec:Bu,curlyeqsucc:Fu,curlyvee:Hu,curlywedge:qu,curren:Wu,curvearrowleft:Uu,curvearrowright:$u,cuvee:Vu,cuwed:Gu,cwconint:Yu,cwint:Ku,cylcty:Xu,dagger:Zu,Dagger:Ju,daleth:Qu,darr:td,Darr:ed,dArr:nd,dash:rd,Dashv:id,dashv:od,dbkarow:sd,dblac:ad,Dcaron:ld,dcaron:cd,Dcy:hd,dcy:ud,ddagger:dd,ddarr:fd,DD:pd,dd:md,DDotrahd:gd,ddotseq:vd,deg:yd,Del:bd,Delta:wd,delta:xd,demptyv:Cd,dfisht:Ed,Dfr:kd,dfr:Nd,dHar:Od,dharl:Td,dharr:Md,DiacriticalAcute:Sd,DiacriticalDot:Ld,DiacriticalDoubleAcute:Ad,DiacriticalGrave:Dd,DiacriticalTilde:_d,diam:Rd,diamond:Pd,Diamond:Id,diamondsuit:jd,diams:zd,die:Bd,DifferentialD:Fd,digamma:Hd,disin:qd,div:Wd,divide:Ud,divideontimes:$d,divonx:Vd,DJcy:Gd,djcy:Yd,dlcorn:Kd,dlcrop:Xd,dollar:Zd,Dopf:Jd,dopf:Qd,Dot:tf,dot:ef,DotDot:nf,doteq:rf,doteqdot:of,DotEqual:sf,dotminus:af,dotplus:lf,dotsquare:cf,doublebarwedge:hf,DoubleContourIntegral:uf,DoubleDot:df,DoubleDownArrow:ff,DoubleLeftArrow:pf,DoubleLeftRightArrow:mf,DoubleLeftTee:gf,DoubleLongLeftArrow:vf,DoubleLongLeftRightArrow:yf,DoubleLongRightArrow:bf,DoubleRightArrow:wf,DoubleRightTee:xf,DoubleUpArrow:Cf,DoubleUpDownArrow:Ef,DoubleVerticalBar:kf,DownArrowBar:Nf,downarrow:Of,DownArrow:Tf,Downarrow:Mf,DownArrowUpArrow:Sf,DownBreve:Lf,downdownarrows:Af,downharpoonleft:Df,downharpoonright:_f,DownLeftRightVector:Rf,DownLeftTeeVector:Pf,DownLeftVectorBar:If,DownLeftVector:jf,DownRightTeeVector:zf,DownRightVectorBar:Bf,DownRightVector:Ff,DownTeeArrow:Hf,DownTee:qf,drbkarow:Wf,drcorn:Uf,drcrop:$f,Dscr:Vf,dscr:Gf,DScy:Yf,dscy:Kf,dsol:Xf,Dstrok:Zf,dstrok:Jf,dtdot:Qf,dtri:tp,dtrif:ep,duarr:np,duhar:rp,dwangle:ip,DZcy:op,dzcy:sp,dzigrarr:ap,Eacute:lp,eacute:cp,easter:hp,Ecaron:up,ecaron:dp,Ecirc:fp,ecirc:pp,ecir:mp,ecolon:gp,Ecy:vp,ecy:yp,eDDot:bp,Edot:wp,edot:xp,eDot:Cp,ee:Ep,efDot:kp,Efr:Np,efr:Op,eg:Tp,Egrave:Mp,egrave:Sp,egs:Lp,egsdot:Ap,el:Dp,Element:_p,elinters:Rp,ell:Pp,els:Ip,elsdot:jp,Emacr:zp,emacr:Bp,empty:Fp,emptyset:Hp,EmptySmallSquare:qp,emptyv:Wp,EmptyVerySmallSquare:Up,emsp13:$p,emsp14:Vp,emsp:Gp,ENG:Yp,eng:Kp,ensp:Xp,Eogon:Zp,eogon:Jp,Eopf:Qp,eopf:tm,epar:em,eparsl:nm,eplus:rm,epsi:im,Epsilon:om,epsilon:sm,epsiv:am,eqcirc:lm,eqcolon:cm,eqsim:hm,eqslantgtr:um,eqslantless:dm,Equal:fm,equals:pm,EqualTilde:mm,equest:gm,Equilibrium:vm,equiv:ym,equivDD:bm,eqvparsl:wm,erarr:xm,erDot:Cm,escr:Em,Escr:km,esdot:Nm,Esim:Om,esim:Tm,Eta:Mm,eta:Sm,ETH:Lm,eth:Am,Euml:Dm,euml:_m,euro:Rm,excl:Pm,exist:Im,Exists:jm,expectation:zm,exponentiale:Bm,ExponentialE:Fm,fallingdotseq:Hm,Fcy:qm,fcy:Wm,female:Um,ffilig:$m,fflig:Vm,ffllig:Gm,Ffr:Ym,ffr:Km,filig:Xm,FilledSmallSquare:Zm,FilledVerySmallSquare:Jm,fjlig:Qm,flat:tg,fllig:eg,fltns:ng,fnof:rg,Fopf:ig,fopf:og,forall:sg,ForAll:ag,fork:lg,forkv:cg,Fouriertrf:hg,fpartint:ug,frac12:dg,frac13:fg,frac14:pg,frac15:mg,frac16:gg,frac18:vg,frac23:yg,frac25:bg,frac34:wg,frac35:xg,frac38:Cg,frac45:Eg,frac56:kg,frac58:Ng,frac78:Og,frasl:Tg,frown:Mg,fscr:Sg,Fscr:Lg,gacute:Ag,Gamma:Dg,gamma:_g,Gammad:Rg,gammad:Pg,gap:Ig,Gbreve:jg,gbreve:zg,Gcedil:Bg,Gcirc:Fg,gcirc:Hg,Gcy:qg,gcy:Wg,Gdot:Ug,gdot:$g,ge:Vg,gE:Gg,gEl:Yg,gel:Kg,geq:Xg,geqq:Zg,geqslant:Jg,gescc:Qg,ges:tv,gesdot:ev,gesdoto:nv,gesdotol:rv,gesl:iv,gesles:ov,Gfr:sv,gfr:av,gg:lv,Gg:cv,ggg:hv,gimel:uv,GJcy:dv,gjcy:fv,gla:pv,gl:mv,glE:gv,glj:vv,gnap:yv,gnapprox:bv,gne:wv,gnE:xv,gneq:Cv,gneqq:Ev,gnsim:kv,Gopf:Nv,gopf:Ov,grave:Tv,GreaterEqual:Mv,GreaterEqualLess:Sv,GreaterFullEqual:Lv,GreaterGreater:Av,GreaterLess:Dv,GreaterSlantEqual:_v,GreaterTilde:Rv,Gscr:Pv,gscr:Iv,gsim:jv,gsime:zv,gsiml:Bv,gtcc:Fv,gtcir:Hv,gt:qv,GT:Wv,Gt:Uv,gtdot:$v,gtlPar:Vv,gtquest:Gv,gtrapprox:Yv,gtrarr:Kv,gtrdot:Xv,gtreqless:Zv,gtreqqless:Jv,gtrless:Qv,gtrsim:ty,gvertneqq:ey,gvnE:ny,Hacek:ry,hairsp:iy,half:oy,hamilt:sy,HARDcy:ay,hardcy:ly,harrcir:cy,harr:hy,hArr:uy,harrw:dy,Hat:fy,hbar:py,Hcirc:my,hcirc:gy,hearts:vy,heartsuit:yy,hellip:by,hercon:wy,hfr:xy,Hfr:Cy,HilbertSpace:Ey,hksearow:ky,hkswarow:Ny,hoarr:Oy,homtht:Ty,hookleftarrow:My,hookrightarrow:Sy,hopf:Ly,Hopf:Ay,horbar:Dy,HorizontalLine:_y,hscr:Ry,Hscr:Py,hslash:Iy,Hstrok:jy,hstrok:zy,HumpDownHump:By,HumpEqual:Fy,hybull:Hy,hyphen:qy,Iacute:Wy,iacute:Uy,ic:$y,Icirc:Vy,icirc:Gy,Icy:Yy,icy:Ky,Idot:Xy,IEcy:Zy,iecy:Jy,iexcl:Qy,iff:tb,ifr:eb,Ifr:nb,Igrave:rb,igrave:ib,ii:ob,iiiint:sb,iiint:ab,iinfin:lb,iiota:cb,IJlig:hb,ijlig:ub,Imacr:db,imacr:fb,image:pb,ImaginaryI:mb,imagline:gb,imagpart:vb,imath:yb,Im:bb,imof:wb,imped:xb,Implies:Cb,incare:Eb,in:"∈",infin:kb,infintie:Nb,inodot:Ob,intcal:Tb,int:Mb,Int:Sb,integers:Lb,Integral:Ab,intercal:Db,Intersection:_b,intlarhk:Rb,intprod:Pb,InvisibleComma:Ib,InvisibleTimes:jb,IOcy:zb,iocy:Bb,Iogon:Fb,iogon:Hb,Iopf:qb,iopf:Wb,Iota:Ub,iota:$b,iprod:Vb,iquest:Gb,iscr:Yb,Iscr:Kb,isin:Xb,isindot:Zb,isinE:Jb,isins:Qb,isinsv:tw,isinv:ew,it:nw,Itilde:rw,itilde:iw,Iukcy:ow,iukcy:sw,Iuml:aw,iuml:lw,Jcirc:cw,jcirc:hw,Jcy:uw,jcy:dw,Jfr:fw,jfr:pw,jmath:mw,Jopf:gw,jopf:vw,Jscr:yw,jscr:bw,Jsercy:ww,jsercy:xw,Jukcy:Cw,jukcy:Ew,Kappa:kw,kappa:Nw,kappav:Ow,Kcedil:Tw,kcedil:Mw,Kcy:Sw,kcy:Lw,Kfr:Aw,kfr:Dw,kgreen:_w,KHcy:Rw,khcy:Pw,KJcy:Iw,kjcy:jw,Kopf:zw,kopf:Bw,Kscr:Fw,kscr:Hw,lAarr:qw,Lacute:Ww,lacute:Uw,laemptyv:$w,lagran:Vw,Lambda:Gw,lambda:Yw,lang:Kw,Lang:Xw,langd:Zw,langle:Jw,lap:Qw,Laplacetrf:tx,laquo:ex,larrb:nx,larrbfs:rx,larr:ix,Larr:ox,lArr:sx,larrfs:ax,larrhk:lx,larrlp:cx,larrpl:hx,larrsim:ux,larrtl:dx,latail:fx,lAtail:px,lat:mx,late:gx,lates:vx,lbarr:yx,lBarr:bx,lbbrk:wx,lbrace:xx,lbrack:Cx,lbrke:Ex,lbrksld:kx,lbrkslu:Nx,Lcaron:Ox,lcaron:Tx,Lcedil:Mx,lcedil:Sx,lceil:Lx,lcub:Ax,Lcy:Dx,lcy:_x,ldca:Rx,ldquo:Px,ldquor:Ix,ldrdhar:jx,ldrushar:zx,ldsh:Bx,le:Fx,lE:Hx,LeftAngleBracket:qx,LeftArrowBar:Wx,leftarrow:Ux,LeftArrow:$x,Leftarrow:Vx,LeftArrowRightArrow:Gx,leftarrowtail:Yx,LeftCeiling:Kx,LeftDoubleBracket:Xx,LeftDownTeeVector:Zx,LeftDownVectorBar:Jx,LeftDownVector:Qx,LeftFloor:tC,leftharpoondown:eC,leftharpoonup:nC,leftleftarrows:rC,leftrightarrow:iC,LeftRightArrow:oC,Leftrightarrow:sC,leftrightarrows:aC,leftrightharpoons:lC,leftrightsquigarrow:cC,LeftRightVector:hC,LeftTeeArrow:uC,LeftTee:dC,LeftTeeVector:fC,leftthreetimes:pC,LeftTriangleBar:mC,LeftTriangle:gC,LeftTriangleEqual:vC,LeftUpDownVector:yC,LeftUpTeeVector:bC,LeftUpVectorBar:wC,LeftUpVector:xC,LeftVectorBar:CC,LeftVector:EC,lEg:kC,leg:NC,leq:OC,leqq:TC,leqslant:MC,lescc:SC,les:LC,lesdot:AC,lesdoto:DC,lesdotor:_C,lesg:RC,lesges:PC,lessapprox:IC,lessdot:jC,lesseqgtr:zC,lesseqqgtr:BC,LessEqualGreater:FC,LessFullEqual:HC,LessGreater:qC,lessgtr:WC,LessLess:UC,lesssim:$C,LessSlantEqual:VC,LessTilde:GC,lfisht:YC,lfloor:KC,Lfr:XC,lfr:ZC,lg:JC,lgE:QC,lHar:tE,lhard:eE,lharu:nE,lharul:rE,lhblk:iE,LJcy:oE,ljcy:sE,llarr:aE,ll:lE,Ll:cE,llcorner:hE,Lleftarrow:uE,llhard:dE,lltri:fE,Lmidot:pE,lmidot:mE,lmoustache:gE,lmoust:vE,lnap:yE,lnapprox:bE,lne:wE,lnE:xE,lneq:CE,lneqq:EE,lnsim:kE,loang:NE,loarr:OE,lobrk:TE,longleftarrow:ME,LongLeftArrow:SE,Longleftarrow:LE,longleftrightarrow:AE,LongLeftRightArrow:DE,Longleftrightarrow:_E,longmapsto:RE,longrightarrow:PE,LongRightArrow:IE,Longrightarrow:jE,looparrowleft:zE,looparrowright:BE,lopar:FE,Lopf:HE,lopf:qE,loplus:WE,lotimes:UE,lowast:$E,lowbar:VE,LowerLeftArrow:GE,LowerRightArrow:YE,loz:KE,lozenge:XE,lozf:ZE,lpar:JE,lparlt:QE,lrarr:tk,lrcorner:ek,lrhar:nk,lrhard:rk,lrm:ik,lrtri:ok,lsaquo:sk,lscr:ak,Lscr:lk,lsh:ck,Lsh:hk,lsim:uk,lsime:dk,lsimg:fk,lsqb:pk,lsquo:mk,lsquor:gk,Lstrok:vk,lstrok:yk,ltcc:bk,ltcir:wk,lt:xk,LT:Ck,Lt:Ek,ltdot:kk,lthree:Nk,ltimes:Ok,ltlarr:Tk,ltquest:Mk,ltri:Sk,ltrie:Lk,ltrif:Ak,ltrPar:Dk,lurdshar:_k,luruhar:Rk,lvertneqq:Pk,lvnE:Ik,macr:jk,male:zk,malt:Bk,maltese:Fk,Map:"⤅",map:Hk,mapsto:qk,mapstodown:Wk,mapstoleft:Uk,mapstoup:$k,marker:Vk,mcomma:Gk,Mcy:Yk,mcy:Kk,mdash:Xk,mDDot:Zk,measuredangle:Jk,MediumSpace:Qk,Mellintrf:tN,Mfr:eN,mfr:nN,mho:rN,micro:iN,midast:oN,midcir:sN,mid:aN,middot:lN,minusb:cN,minus:hN,minusd:uN,minusdu:dN,MinusPlus:fN,mlcp:pN,mldr:mN,mnplus:gN,models:vN,Mopf:yN,mopf:bN,mp:wN,mscr:xN,Mscr:CN,mstpos:EN,Mu:kN,mu:NN,multimap:ON,mumap:TN,nabla:MN,Nacute:SN,nacute:LN,nang:AN,nap:DN,napE:_N,napid:RN,napos:PN,napprox:IN,natural:jN,naturals:zN,natur:BN,nbsp:FN,nbump:HN,nbumpe:qN,ncap:WN,Ncaron:UN,ncaron:$N,Ncedil:VN,ncedil:GN,ncong:YN,ncongdot:KN,ncup:XN,Ncy:ZN,ncy:JN,ndash:QN,nearhk:tO,nearr:eO,neArr:nO,nearrow:rO,ne:iO,nedot:oO,NegativeMediumSpace:sO,NegativeThickSpace:aO,NegativeThinSpace:lO,NegativeVeryThinSpace:cO,nequiv:hO,nesear:uO,nesim:dO,NestedGreaterGreater:fO,NestedLessLess:pO,NewLine:mO,nexist:gO,nexists:vO,Nfr:yO,nfr:bO,ngE:wO,nge:xO,ngeq:CO,ngeqq:EO,ngeqslant:kO,nges:NO,nGg:OO,ngsim:TO,nGt:MO,ngt:SO,ngtr:LO,nGtv:AO,nharr:DO,nhArr:_O,nhpar:RO,ni:PO,nis:IO,nisd:jO,niv:zO,NJcy:BO,njcy:FO,nlarr:HO,nlArr:qO,nldr:WO,nlE:UO,nle:$O,nleftarrow:VO,nLeftarrow:GO,nleftrightarrow:YO,nLeftrightarrow:KO,nleq:XO,nleqq:ZO,nleqslant:JO,nles:QO,nless:tT,nLl:eT,nlsim:nT,nLt:rT,nlt:iT,nltri:oT,nltrie:sT,nLtv:aT,nmid:lT,NoBreak:cT,NonBreakingSpace:hT,nopf:uT,Nopf:dT,Not:fT,not:pT,NotCongruent:mT,NotCupCap:gT,NotDoubleVerticalBar:vT,NotElement:yT,NotEqual:bT,NotEqualTilde:wT,NotExists:xT,NotGreater:CT,NotGreaterEqual:ET,NotGreaterFullEqual:kT,NotGreaterGreater:NT,NotGreaterLess:OT,NotGreaterSlantEqual:TT,NotGreaterTilde:MT,NotHumpDownHump:ST,NotHumpEqual:LT,notin:AT,notindot:DT,notinE:_T,notinva:RT,notinvb:PT,notinvc:IT,NotLeftTriangleBar:jT,NotLeftTriangle:zT,NotLeftTriangleEqual:BT,NotLess:FT,NotLessEqual:HT,NotLessGreater:qT,NotLessLess:WT,NotLessSlantEqual:UT,NotLessTilde:$T,NotNestedGreaterGreater:VT,NotNestedLessLess:GT,notni:YT,notniva:KT,notnivb:XT,notnivc:ZT,NotPrecedes:JT,NotPrecedesEqual:QT,NotPrecedesSlantEqual:tM,NotReverseElement:eM,NotRightTriangleBar:nM,NotRightTriangle:rM,NotRightTriangleEqual:iM,NotSquareSubset:oM,NotSquareSubsetEqual:sM,NotSquareSuperset:aM,NotSquareSupersetEqual:lM,NotSubset:cM,NotSubsetEqual:hM,NotSucceeds:uM,NotSucceedsEqual:dM,NotSucceedsSlantEqual:fM,NotSucceedsTilde:pM,NotSuperset:mM,NotSupersetEqual:gM,NotTilde:vM,NotTildeEqual:yM,NotTildeFullEqual:bM,NotTildeTilde:wM,NotVerticalBar:xM,nparallel:CM,npar:EM,nparsl:kM,npart:NM,npolint:OM,npr:TM,nprcue:MM,nprec:SM,npreceq:LM,npre:AM,nrarrc:DM,nrarr:_M,nrArr:RM,nrarrw:PM,nrightarrow:IM,nRightarrow:jM,nrtri:zM,nrtrie:BM,nsc:FM,nsccue:HM,nsce:qM,Nscr:WM,nscr:UM,nshortmid:$M,nshortparallel:VM,nsim:GM,nsime:YM,nsimeq:KM,nsmid:XM,nspar:ZM,nsqsube:JM,nsqsupe:QM,nsub:tS,nsubE:eS,nsube:nS,nsubset:rS,nsubseteq:iS,nsubseteqq:oS,nsucc:sS,nsucceq:aS,nsup:lS,nsupE:cS,nsupe:hS,nsupset:uS,nsupseteq:dS,nsupseteqq:fS,ntgl:pS,Ntilde:mS,ntilde:gS,ntlg:vS,ntriangleleft:yS,ntrianglelefteq:bS,ntriangleright:wS,ntrianglerighteq:xS,Nu:CS,nu:ES,num:kS,numero:NS,numsp:OS,nvap:TS,nvdash:MS,nvDash:SS,nVdash:LS,nVDash:AS,nvge:DS,nvgt:_S,nvHarr:RS,nvinfin:PS,nvlArr:IS,nvle:jS,nvlt:zS,nvltrie:BS,nvrArr:FS,nvrtrie:HS,nvsim:qS,nwarhk:WS,nwarr:US,nwArr:$S,nwarrow:VS,nwnear:GS,Oacute:YS,oacute:KS,oast:XS,Ocirc:ZS,ocirc:JS,ocir:QS,Ocy:tL,ocy:eL,odash:nL,Odblac:rL,odblac:iL,odiv:oL,odot:sL,odsold:aL,OElig:lL,oelig:cL,ofcir:hL,Ofr:uL,ofr:dL,ogon:fL,Ograve:pL,ograve:mL,ogt:gL,ohbar:vL,ohm:yL,oint:bL,olarr:wL,olcir:xL,olcross:CL,oline:EL,olt:kL,Omacr:NL,omacr:OL,Omega:TL,omega:ML,Omicron:SL,omicron:LL,omid:AL,ominus:DL,Oopf:_L,oopf:RL,opar:PL,OpenCurlyDoubleQuote:IL,OpenCurlyQuote:jL,operp:zL,oplus:BL,orarr:FL,Or:HL,or:qL,ord:WL,order:UL,orderof:$L,ordf:VL,ordm:GL,origof:YL,oror:KL,orslope:XL,orv:ZL,oS:JL,Oscr:QL,oscr:tA,Oslash:eA,oslash:nA,osol:rA,Otilde:iA,otilde:oA,otimesas:sA,Otimes:aA,otimes:lA,Ouml:cA,ouml:hA,ovbar:uA,OverBar:dA,OverBrace:fA,OverBracket:pA,OverParenthesis:mA,para:gA,parallel:vA,par:yA,parsim:bA,parsl:wA,part:xA,PartialD:CA,Pcy:EA,pcy:kA,percnt:NA,period:OA,permil:TA,perp:MA,pertenk:SA,Pfr:LA,pfr:AA,Phi:DA,phi:_A,phiv:RA,phmmat:PA,phone:IA,Pi:jA,pi:zA,pitchfork:BA,piv:FA,planck:HA,planckh:qA,plankv:WA,plusacir:UA,plusb:$A,pluscir:VA,plus:GA,plusdo:YA,plusdu:KA,pluse:XA,PlusMinus:ZA,plusmn:JA,plussim:QA,plustwo:tD,pm:eD,Poincareplane:nD,pointint:rD,popf:iD,Popf:oD,pound:sD,prap:aD,Pr:lD,pr:cD,prcue:hD,precapprox:uD,prec:dD,preccurlyeq:fD,Precedes:pD,PrecedesEqual:mD,PrecedesSlantEqual:gD,PrecedesTilde:vD,preceq:yD,precnapprox:bD,precneqq:wD,precnsim:xD,pre:CD,prE:ED,precsim:kD,prime:ND,Prime:OD,primes:TD,prnap:MD,prnE:SD,prnsim:LD,prod:AD,Product:DD,profalar:_D,profline:RD,profsurf:PD,prop:ID,Proportional:jD,Proportion:zD,propto:BD,prsim:FD,prurel:HD,Pscr:qD,pscr:WD,Psi:UD,psi:$D,puncsp:VD,Qfr:GD,qfr:YD,qint:KD,qopf:XD,Qopf:ZD,qprime:JD,Qscr:QD,qscr:t_,quaternions:e_,quatint:n_,quest:r_,questeq:i_,quot:o_,QUOT:s_,rAarr:a_,race:l_,Racute:c_,racute:h_,radic:u_,raemptyv:d_,rang:f_,Rang:p_,rangd:m_,range:g_,rangle:v_,raquo:y_,rarrap:b_,rarrb:w_,rarrbfs:x_,rarrc:C_,rarr:E_,Rarr:k_,rArr:N_,rarrfs:O_,rarrhk:T_,rarrlp:M_,rarrpl:S_,rarrsim:L_,Rarrtl:A_,rarrtl:D_,rarrw:__,ratail:R_,rAtail:P_,ratio:I_,rationals:j_,rbarr:z_,rBarr:B_,RBarr:F_,rbbrk:H_,rbrace:q_,rbrack:W_,rbrke:U_,rbrksld:$_,rbrkslu:V_,Rcaron:G_,rcaron:Y_,Rcedil:K_,rcedil:X_,rceil:Z_,rcub:J_,Rcy:Q_,rcy:tR,rdca:eR,rdldhar:nR,rdquo:rR,rdquor:iR,rdsh:oR,real:sR,realine:aR,realpart:lR,reals:cR,Re:hR,rect:uR,reg:dR,REG:fR,ReverseElement:pR,ReverseEquilibrium:mR,ReverseUpEquilibrium:gR,rfisht:vR,rfloor:yR,rfr:bR,Rfr:wR,rHar:xR,rhard:CR,rharu:ER,rharul:kR,Rho:NR,rho:OR,rhov:TR,RightAngleBracket:MR,RightArrowBar:SR,rightarrow:LR,RightArrow:AR,Rightarrow:DR,RightArrowLeftArrow:_R,rightarrowtail:RR,RightCeiling:PR,RightDoubleBracket:IR,RightDownTeeVector:jR,RightDownVectorBar:zR,RightDownVector:BR,RightFloor:FR,rightharpoondown:HR,rightharpoonup:qR,rightleftarrows:WR,rightleftharpoons:UR,rightrightarrows:$R,rightsquigarrow:VR,RightTeeArrow:GR,RightTee:YR,RightTeeVector:KR,rightthreetimes:XR,RightTriangleBar:ZR,RightTriangle:JR,RightTriangleEqual:QR,RightUpDownVector:tP,RightUpTeeVector:eP,RightUpVectorBar:nP,RightUpVector:rP,RightVectorBar:iP,RightVector:oP,ring:sP,risingdotseq:aP,rlarr:lP,rlhar:cP,rlm:hP,rmoustache:uP,rmoust:dP,rnmid:fP,roang:pP,roarr:mP,robrk:gP,ropar:vP,ropf:yP,Ropf:bP,roplus:wP,rotimes:xP,RoundImplies:CP,rpar:EP,rpargt:kP,rppolint:NP,rrarr:OP,Rrightarrow:TP,rsaquo:MP,rscr:SP,Rscr:LP,rsh:AP,Rsh:DP,rsqb:_P,rsquo:RP,rsquor:PP,rthree:IP,rtimes:jP,rtri:zP,rtrie:BP,rtrif:FP,rtriltri:HP,RuleDelayed:qP,ruluhar:WP,rx:UP,Sacute:$P,sacute:VP,sbquo:GP,scap:YP,Scaron:KP,scaron:XP,Sc:ZP,sc:JP,sccue:QP,sce:tI,scE:eI,Scedil:nI,scedil:rI,Scirc:iI,scirc:oI,scnap:sI,scnE:aI,scnsim:lI,scpolint:cI,scsim:hI,Scy:uI,scy:dI,sdotb:fI,sdot:pI,sdote:mI,searhk:gI,searr:vI,seArr:yI,searrow:bI,sect:wI,semi:xI,seswar:CI,setminus:EI,setmn:kI,sext:NI,Sfr:OI,sfr:TI,sfrown:MI,sharp:SI,SHCHcy:LI,shchcy:AI,SHcy:DI,shcy:_I,ShortDownArrow:RI,ShortLeftArrow:PI,shortmid:II,shortparallel:jI,ShortRightArrow:zI,ShortUpArrow:BI,shy:FI,Sigma:HI,sigma:qI,sigmaf:WI,sigmav:UI,sim:$I,simdot:VI,sime:GI,simeq:YI,simg:KI,simgE:XI,siml:ZI,simlE:JI,simne:QI,simplus:tj,simrarr:ej,slarr:nj,SmallCircle:rj,smallsetminus:ij,smashp:oj,smeparsl:sj,smid:aj,smile:lj,smt:cj,smte:hj,smtes:uj,SOFTcy:dj,softcy:fj,solbar:pj,solb:mj,sol:gj,Sopf:vj,sopf:yj,spades:bj,spadesuit:wj,spar:xj,sqcap:Cj,sqcaps:Ej,sqcup:kj,sqcups:Nj,Sqrt:Oj,sqsub:Tj,sqsube:Mj,sqsubset:Sj,sqsubseteq:Lj,sqsup:Aj,sqsupe:Dj,sqsupset:_j,sqsupseteq:Rj,square:Pj,Square:Ij,SquareIntersection:jj,SquareSubset:zj,SquareSubsetEqual:Bj,SquareSuperset:Fj,SquareSupersetEqual:Hj,SquareUnion:qj,squarf:Wj,squ:Uj,squf:$j,srarr:Vj,Sscr:Gj,sscr:Yj,ssetmn:Kj,ssmile:Xj,sstarf:Zj,Star:Jj,star:Qj,starf:tz,straightepsilon:ez,straightphi:nz,strns:rz,sub:iz,Sub:oz,subdot:sz,subE:az,sube:lz,subedot:cz,submult:hz,subnE:uz,subne:dz,subplus:fz,subrarr:pz,subset:mz,Subset:gz,subseteq:vz,subseteqq:yz,SubsetEqual:bz,subsetneq:wz,subsetneqq:xz,subsim:Cz,subsub:Ez,subsup:kz,succapprox:Nz,succ:Oz,succcurlyeq:Tz,Succeeds:Mz,SucceedsEqual:Sz,SucceedsSlantEqual:Lz,SucceedsTilde:Az,succeq:Dz,succnapprox:_z,succneqq:Rz,succnsim:Pz,succsim:Iz,SuchThat:jz,sum:zz,Sum:Bz,sung:Fz,sup1:Hz,sup2:qz,sup3:Wz,sup:Uz,Sup:$z,supdot:Vz,supdsub:Gz,supE:Yz,supe:Kz,supedot:Xz,Superset:Zz,SupersetEqual:Jz,suphsol:Qz,suphsub:tB,suplarr:eB,supmult:nB,supnE:rB,supne:iB,supplus:oB,supset:sB,Supset:aB,supseteq:lB,supseteqq:cB,supsetneq:hB,supsetneqq:uB,supsim:dB,supsub:fB,supsup:pB,swarhk:mB,swarr:gB,swArr:vB,swarrow:yB,swnwar:bB,szlig:wB,Tab:xB,target:CB,Tau:EB,tau:kB,tbrk:NB,Tcaron:OB,tcaron:TB,Tcedil:MB,tcedil:SB,Tcy:LB,tcy:AB,tdot:DB,telrec:_B,Tfr:RB,tfr:PB,there4:IB,therefore:jB,Therefore:zB,Theta:BB,theta:FB,thetasym:HB,thetav:qB,thickapprox:WB,thicksim:UB,ThickSpace:$B,ThinSpace:VB,thinsp:GB,thkap:YB,thksim:KB,THORN:XB,thorn:ZB,tilde:JB,Tilde:QB,TildeEqual:tF,TildeFullEqual:eF,TildeTilde:nF,timesbar:rF,timesb:iF,times:oF,timesd:sF,tint:aF,toea:lF,topbot:cF,topcir:hF,top:uF,Topf:dF,topf:fF,topfork:pF,tosa:mF,tprime:gF,trade:vF,TRADE:yF,triangle:bF,triangledown:wF,triangleleft:xF,trianglelefteq:CF,triangleq:EF,triangleright:kF,trianglerighteq:NF,tridot:OF,trie:TF,triminus:MF,TripleDot:SF,triplus:LF,trisb:AF,tritime:DF,trpezium:_F,Tscr:RF,tscr:PF,TScy:IF,tscy:jF,TSHcy:zF,tshcy:BF,Tstrok:FF,tstrok:HF,twixt:qF,twoheadleftarrow:WF,twoheadrightarrow:UF,Uacute:$F,uacute:VF,uarr:GF,Uarr:YF,uArr:KF,Uarrocir:XF,Ubrcy:ZF,ubrcy:JF,Ubreve:QF,ubreve:tH,Ucirc:eH,ucirc:nH,Ucy:rH,ucy:iH,udarr:oH,Udblac:sH,udblac:aH,udhar:lH,ufisht:cH,Ufr:hH,ufr:uH,Ugrave:dH,ugrave:fH,uHar:pH,uharl:mH,uharr:gH,uhblk:vH,ulcorn:yH,ulcorner:bH,ulcrop:wH,ultri:xH,Umacr:CH,umacr:EH,uml:kH,UnderBar:NH,UnderBrace:OH,UnderBracket:TH,UnderParenthesis:MH,Union:SH,UnionPlus:LH,Uogon:AH,uogon:DH,Uopf:_H,uopf:RH,UpArrowBar:PH,uparrow:IH,UpArrow:jH,Uparrow:zH,UpArrowDownArrow:BH,updownarrow:FH,UpDownArrow:HH,Updownarrow:qH,UpEquilibrium:WH,upharpoonleft:UH,upharpoonright:$H,uplus:VH,UpperLeftArrow:GH,UpperRightArrow:YH,upsi:KH,Upsi:XH,upsih:ZH,Upsilon:JH,upsilon:QH,UpTeeArrow:tq,UpTee:eq,upuparrows:nq,urcorn:rq,urcorner:iq,urcrop:oq,Uring:sq,uring:aq,urtri:lq,Uscr:cq,uscr:hq,utdot:uq,Utilde:dq,utilde:fq,utri:pq,utrif:mq,uuarr:gq,Uuml:vq,uuml:yq,uwangle:bq,vangrt:wq,varepsilon:xq,varkappa:Cq,varnothing:Eq,varphi:kq,varpi:Nq,varpropto:Oq,varr:Tq,vArr:Mq,varrho:Sq,varsigma:Lq,varsubsetneq:Aq,varsubsetneqq:Dq,varsupsetneq:_q,varsupsetneqq:Rq,vartheta:Pq,vartriangleleft:Iq,vartriangleright:jq,vBar:zq,Vbar:Bq,vBarv:Fq,Vcy:Hq,vcy:qq,vdash:Wq,vDash:Uq,Vdash:$q,VDash:Vq,Vdashl:Gq,veebar:Yq,vee:Kq,Vee:Xq,veeeq:Zq,vellip:Jq,verbar:Qq,Verbar:tW,vert:eW,Vert:nW,VerticalBar:rW,VerticalLine:iW,VerticalSeparator:oW,VerticalTilde:sW,VeryThinSpace:aW,Vfr:lW,vfr:cW,vltri:hW,vnsub:uW,vnsup:dW,Vopf:fW,vopf:pW,vprop:mW,vrtri:gW,Vscr:vW,vscr:yW,vsubnE:bW,vsubne:wW,vsupnE:xW,vsupne:CW,Vvdash:EW,vzigzag:kW,Wcirc:NW,wcirc:OW,wedbar:TW,wedge:MW,Wedge:SW,wedgeq:LW,weierp:AW,Wfr:DW,wfr:_W,Wopf:RW,wopf:PW,wp:IW,wr:jW,wreath:zW,Wscr:BW,wscr:FW,xcap:HW,xcirc:qW,xcup:WW,xdtri:UW,Xfr:$W,xfr:VW,xharr:GW,xhArr:YW,Xi:KW,xi:XW,xlarr:ZW,xlArr:JW,xmap:QW,xnis:tU,xodot:eU,Xopf:nU,xopf:rU,xoplus:iU,xotime:oU,xrarr:sU,xrArr:aU,Xscr:lU,xscr:cU,xsqcup:hU,xuplus:uU,xutri:dU,xvee:fU,xwedge:pU,Yacute:mU,yacute:gU,YAcy:vU,yacy:yU,Ycirc:bU,ycirc:wU,Ycy:xU,ycy:CU,yen:EU,Yfr:kU,yfr:NU,YIcy:OU,yicy:TU,Yopf:MU,yopf:SU,Yscr:LU,yscr:AU,YUcy:DU,yucy:_U,yuml:RU,Yuml:PU,Zacute:IU,zacute:jU,Zcaron:zU,zcaron:BU,Zcy:FU,zcy:HU,Zdot:qU,zdot:WU,zeetrf:UU,ZeroWidthSpace:$U,Zeta:VU,zeta:GU,zfr:YU,Zfr:KU,ZHcy:XU,zhcy:ZU,zigrarr:JU,zopf:QU,Zopf:t$,Zscr:e$,zscr:n$,zwj:r$,zwnj:i$},s$="Á",a$="á",l$="Â",c$="â",h$="´",u$="Æ",d$="æ",f$="À",p$="à",m$="&",g$="&",v$="Å",y$="å",b$="Ã",w$="ã",x$="Ä",C$="ä",E$="¦",k$="Ç",N$="ç",O$="¸",T$="¢",M$="©",S$="©",L$="¤",A$="°",D$="÷",_$="É",R$="é",P$="Ê",I$="ê",j$="È",z$="è",B$="Ð",F$="ð",H$="Ë",q$="ë",W$="½",U$="¼",$$="¾",V$=">",G$=">",Y$="Í",K$="í",X$="Î",Z$="î",J$="¡",Q$="Ì",tV="ì",eV="¿",nV="Ï",rV="ï",iV="«",oV="<",sV="<",aV="¯",lV="µ",cV="·",hV=" ",uV="¬",dV="Ñ",fV="ñ",pV="Ó",mV="ó",gV="Ô",vV="ô",yV="Ò",bV="ò",wV="ª",xV="º",CV="Ø",EV="ø",kV="Õ",NV="õ",OV="Ö",TV="ö",MV="¶",SV="±",LV="£",AV='"',DV='"',_V="»",RV="®",PV="®",IV="§",jV="­",zV="¹",BV="²",FV="³",HV="ß",qV="Þ",WV="þ",UV="×",$V="Ú",VV="ú",GV="Û",YV="û",KV="Ù",XV="ù",ZV="¨",JV="Ü",QV="ü",tG="Ý",eG="ý",nG="¥",rG="ÿ",iG={Aacute:s$,aacute:a$,Acirc:l$,acirc:c$,acute:h$,AElig:u$,aelig:d$,Agrave:f$,agrave:p$,amp:m$,AMP:g$,Aring:v$,aring:y$,Atilde:b$,atilde:w$,Auml:x$,auml:C$,brvbar:E$,Ccedil:k$,ccedil:N$,cedil:O$,cent:T$,copy:M$,COPY:S$,curren:L$,deg:A$,divide:D$,Eacute:_$,eacute:R$,Ecirc:P$,ecirc:I$,Egrave:j$,egrave:z$,ETH:B$,eth:F$,Euml:H$,euml:q$,frac12:W$,frac14:U$,frac34:$$,gt:V$,GT:G$,Iacute:Y$,iacute:K$,Icirc:X$,icirc:Z$,iexcl:J$,Igrave:Q$,igrave:tV,iquest:eV,Iuml:nV,iuml:rV,laquo:iV,lt:oV,LT:sV,macr:aV,micro:lV,middot:cV,nbsp:hV,not:uV,Ntilde:dV,ntilde:fV,Oacute:pV,oacute:mV,Ocirc:gV,ocirc:vV,Ograve:yV,ograve:bV,ordf:wV,ordm:xV,Oslash:CV,oslash:EV,Otilde:kV,otilde:NV,Ouml:OV,ouml:TV,para:MV,plusmn:SV,pound:LV,quot:AV,QUOT:DV,raquo:_V,reg:RV,REG:PV,sect:IV,shy:jV,sup1:zV,sup2:BV,sup3:FV,szlig:HV,THORN:qV,thorn:WV,times:UV,Uacute:$V,uacute:VV,Ucirc:GV,ucirc:YV,Ugrave:KV,ugrave:XV,uml:ZV,Uuml:JV,uuml:QV,Yacute:tG,yacute:eG,yen:nG,yuml:rG},oG="&",sG="'",aG=">",lG="<",cG='"',hG={amp:oG,apos:sG,gt:aG,lt:lG,quot:cG},uG={},dG={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},fG=Ro&&Ro.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uG,"__esModule",{value:!0});var pG=fG(dG),mG=String.fromCodePoint||function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t),e};function gG(t){return t>=55296&&t<=57343||t>1114111?"�":(t in pG.default&&(t=pG.default[t]),mG(t))}uG.default=gG;var vG=Ro&&Ro.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.decodeHTML=Fo.decodeHTMLStrict=Fo.decodeXML=void 0;var yG=vG(o$),bG=vG(iG),wG=vG(hG),xG=vG(uG),CG=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function EG(t){var e=NG(t);return function(t){return String(t).replace(CG,e)}}Fo.decodeXML=EG(wG.default),Fo.decodeHTMLStrict=EG(yG.default);var kG=function(t,e){return t<e?1:-1};function NG(t){return function(e){if("#"===e.charAt(1)){var n=e.charAt(2);return"X"===n||"x"===n?xG.default(parseInt(e.substr(3),16)):xG.default(parseInt(e.substr(2),10))}return t[e.slice(1,-1)]||e}}Fo.decodeHTML=function(){for(var t=Object.keys(bG.default).sort(kG),e=Object.keys(yG.default).sort(kG),n=0,r=0;n<e.length;n++)t[r]===e[n]?(e[n]+=";?",r++):e[n]+=";";var i=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=NG(yG.default);function s(t){return";"!==t.substr(-1)&&(t+=";"),o(t)}return function(t){return String(t).replace(i,s)}}();var OG={},TG=Ro&&Ro.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(OG,"__esModule",{value:!0}),OG.escapeUTF8=OG.escape=OG.encodeNonAsciiHTML=OG.encodeHTML=OG.encodeXML=void 0;var MG=TG(hG),SG=RG(MG.default),LG=PG(SG);OG.encodeXML=WG(SG);var AG=TG(o$),DG=RG(AG.default),_G=PG(DG);function RG(t){return Object.keys(t).sort().reduce((function(e,n){return e[t[n]]="&"+n+";",e}),{})}function PG(t){for(var e=[],n=[],r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];1===o.length?e.push("\\"+o):n.push(o)}e.sort();for(var s=0;s<e.length-1;s++){var a=s;while(a<e.length-1&&e[a].charCodeAt(1)+1===e[a+1].charCodeAt(1))a+=1;var l=1+a-s;l<3||e.splice(s,l,e[s]+"-"+e[a])}return n.unshift("["+e.join("")+"]"),new RegExp(n.join("|"),"g")}OG.encodeHTML=BG(DG,_G),OG.encodeNonAsciiHTML=WG(DG);var IG=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,jG=null!=String.prototype.codePointAt?function(t){return t.codePointAt(0)}:function(t){return 1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536};function zG(t){return"&#x"+(t.length>1?jG(t):t.charCodeAt(0)).toString(16).toUpperCase()+";"}function BG(t,e){return function(n){return n.replace(e,(function(e){return t[e]})).replace(IG,zG)}}var FG=new RegExp(LG.source+"|"+IG.source,"g");function HG(t){return t.replace(FG,zG)}function qG(t){return t.replace(LG,zG)}function WG(t){return function(e){return e.replace(FG,(function(e){return t[e]||zG(e)}))}}OG.escape=HG,OG.escapeUTF8=qG,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var e=Fo,n=OG;function r(t,n){return(!n||n<=0?e.decodeXML:e.decodeHTML)(t)}function i(t,n){return(!n||n<=0?e.decodeXML:e.decodeHTMLStrict)(t)}function o(t,e){return(!e||e<=0?n.encodeXML:n.encodeHTML)(t)}t.decode=r,t.decodeStrict=i,t.encode=o;var s=OG;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return s.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return s.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return s.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return s.encodeHTML}});var a=Fo;Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return a.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return a.decodeXML}})}(Bo);var UG="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",$G=92,VG=/[\\&]/,GG="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",YG=new RegExp("\\\\"+GG+"|"+UG,"gi"),KG='[&<>"]',XG=new RegExp(KG,"g"),ZG=function(t){return t.charCodeAt(0)===$G?t.charAt(1):Bo.decodeHTML(t)};function JG(t){return VG.test(t)?t.replace(YG,ZG):t}function QG(t){try{return zo(t)}catch(e){return t}}function tY(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}}function eY(t){return XG.test(t)?t.replace(XG,tY):t}function nY(t,e){for(var n=[],r=0;r<e;r++)n.push(t);return n.join("")}function rY(t){return!t||!/[^ \t]+/.test(t)}var iY=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.next=function(){var t=this.current,e=this.entering;if(null===t)return null;var n=oY(t);return e&&n?t.firstChild?(this.current=t.firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:null===t.next?(this.current=t.parent,this.entering=!1):(this.current=t.next,this.entering=!0),{entering:e,node:t}},t.prototype.resumeAt=function(t,e){this.current=t,this.entering=!0===e},t}();function oY(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var sY=1,aY={};function lY(t){return aY[t]}function cY(t){delete aY[t]}function hY(){aY={}}var uY=function(){function t(t,e){this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,this.id="document"===t?-1:sY++,this.type=t,this.sourcepos=e,aY[this.id]=this}return t.prototype.isContainer=function(){return oY(this)},t.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next),this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev),this.parent=null,this.next=null,this.prev=null},t.prototype.replaceWith=function(t){this.insertBefore(t),this.unlink()},t.prototype.insertAfter=function(t){t.unlink(),t.next=this.next,t.next&&(t.next.prev=t),t.prev=this,this.next=t,this.parent&&(t.parent=this.parent,t.next||(t.parent.lastChild=t))},t.prototype.insertBefore=function(t){t.unlink(),t.prev=this.prev,t.prev&&(t.prev.next=t),t.next=this,this.prev=t,t.parent=this.parent,t.prev||(t.parent.firstChild=t)},t.prototype.appendChild=function(t){t.unlink(),t.parent=this,this.lastChild?(this.lastChild.next=t,t.prev=this.lastChild,this.lastChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.prependChild=function(t){t.unlink(),t.parent=this,this.firstChild?(this.firstChild.prev=t,t.next=this.firstChild,this.firstChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.walker=function(){return new iY(this)},t}(),dY=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.open=!0,r.lineOffsets=null,r.stringContent=null,r.lastLineBlank=!1,r.lastLineChecked=!1,r.type=e,r}return Ao(e,t),e}(uY),fY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listData=null,e}return Ao(e,t),e}(dY),pY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.headingType="atx",e}return Ao(e,t),e}(dY),mY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFenced=!1,e.fenceChar=null,e.fenceLength=0,e.fenceOffset=-1,e.info=null,e.infoPadding=0,e}return Ao(e,t),e}(dY),gY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columns=[],e}return Ao(e,t),e}(dY),vY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startIdx=0,e.endIdx=0,e.paddingLeft=0,e.paddingRight=0,e.ignored=!1,e}return Ao(e,t),e}(dY),yY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="",e.dest="",e.label="",e}return Ao(e,t),e}(dY),bY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syntaxLength=0,e.offset=-1,e.info="",e}return Ao(e,t),e}(dY),wY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.htmlBlockType=-1,e}return Ao(e,t),e}(dY),xY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destination=null,e.title=null,e.extendedAutolink=!1,e}return Ao(e,t),e}(uY),CY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tickCount=0,e}return Ao(e,t),e}(uY),EY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info="",e}return Ao(e,t),e}(uY);function kY(t,e){switch(t){case"heading":return new pY(t,e);case"list":case"item":return new fY(t,e);case"link":case"image":return new xY(t,e);case"codeBlock":return new mY(t,e);case"htmlBlock":return new wY(t,e);case"table":return new gY(t,e);case"tableCell":return new vY(t,e);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new dY(t,e);case"code":return new CY(t,e);case"refDef":return new yY(t,e);case"customBlock":return new bY(t,e);case"customInline":return new EY(t,e);default:return new uY(t,e)}}function NY(t){return"codeBlock"===t.type}function OY(t){return"htmlBlock"===t.type}function TY(t){return"heading"===t.type}function MY(t){return"list"===t.type}function SY(t){return"table"===t.type}function LY(t){return"refDef"===t.type}function AY(t){return"customBlock"===t.type}function DY(t){return"customInline"===t.type}function _Y(t,e){var n=kY("text",e);return n.literal=t,n}var RY,PY="[A-Za-z][A-Za-z0-9-]*",IY="[a-zA-Z_:][a-zA-Z0-9:._-]*",jY="[^\"'=<>`\\x00-\\x20]+",zY="'[^']*'",BY='"[^"]*"',FY="(?:"+jY+"|"+zY+"|"+BY+")",HY="(?:\\s*=\\s*"+FY+")",qY="(?:\\s+"+IY+HY+"?)",WY="<"+PY+qY+"*\\s*/?>",UY="</"+PY+"\\s*[>]",$Y="\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e",VY="[<][?].*?[?][>]",GY="<![A-Z]+\\s+[^>]*>",YY="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",KY="(?:"+WY+"|"+UY+"|"+$Y+"|"+VY+"|"+GY+"|"+YY+")",XY=new RegExp("^"+KY,"i");if(String.fromCodePoint)RY=function(t){try{return String.fromCodePoint(t)}catch(e){if(e instanceof RangeError)return String.fromCharCode(65533);throw e}};else{var ZY=String.fromCharCode,JY=Math.floor;RY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,i=16384,o=[],s=-1,a=t.length;if(!a)return"";var l="";while(++s<a){var c=Number(t[s]);if(!isFinite(c)||c<0||c>1114111||JY(c)!==c)return String.fromCharCode(65533);c<=65535?o.push(c):(c-=65536,n=55296+(c>>10),r=c%1024+56320,o.push(n,r)),(s+1===a||o.length>i)&&(l+=ZY.apply(void 0,o),o.length=0)}return l}}var QY=RY,tK="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+",eK="[^<\\s]*[^<?!.,:*_?~\\s]",nK="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function rK(t){var e=/\)+$/.exec(t);if(e){for(var n=0,r=0,i=t;r<i.length;r++){var o=i[r];"("===o?n<0?n=1:n+=1:")"===o&&(n-=1)}if(n<0){var s=Math.min(-n,e[0].length);return t.substring(0,t.length-s)}}return t}function iK(t){return t.replace(/&[A-Za-z0-9]+;$/,"")}function oK(t){var e,n=new RegExp(nK,"g"),r=[];while(e=n.exec(t)){var i=e[0];/[_-]+$/.test(i)||r.push({text:i,range:[e.index,e.index+i.length-1],url:"mailto:"+i})}return r}function sK(t){var e,n=new RegExp("(www|https?://)."+tK+eK,"g"),r=[];while(e=n.exec(t)){var i=iK(rK(e[0])),o="www"===e[1]?"http://":"";r.push({text:i,range:[e.index,e.index+i.length-1],url:""+o+i})}return r}function aK(t){return _o(_o([],sK(t)),oK(t)).sort((function(t,e){return t.range[0]-e.range[0]}))}function lK(t,e){var n;"boolean"===typeof e&&(e=aK);var r=function(){var t=n.entering,r=n.node;if(t&&"text"===r.type&&"link"!==r.parent.type){var i=r.literal,o=e(i);if(!o||!o.length)return"continue";for(var s=0,a=r.sourcepos[0],l=a[0],c=a[1],h=function(t,e){return[[l,c+t],[l,c+e]]},u=[],d=0,f=o;d<f.length;d++){var p=f[d],m=p.range,g=p.url,v=p.text;m[0]>s&&u.push(_Y(i.substring(s,m[0]),h(s,m[0]-1)));var y=kY("link",h.apply(void 0,m));y.appendChild(_Y(v,h.apply(void 0,m))),y.destination=g,y.extendedAutolink=!0,u.push(y),s=m[1]+1}s<i.length&&u.push(_Y(i.substring(s),h(s,i.length-1)));for(var b=0,w=u;b<w.length;b++){var x=w[b];r.insertBefore(x)}r.unlink()}};while(n=t.next())r()}function cK(t){return t[t.length-1]}function hK(t){return t.slice(1,t.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function uK(t,e){Object.keys(t).forEach((function(n){e(n,t[n])}))}function dK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Do({},t);return e.forEach((function(t){delete r[t]})),r}function fK(t){return!Object.keys(t).length}function pK(t){Object.keys(t).forEach((function(e){delete t[e]}))}var mK=10,gK=42,vK=95,yK=96,bK=91,wK=93,xK=126,CK=60,EK=33,kK=92,NK=38,OK=40,TK=41,MK=58,SK=39,LK=34,AK=36,DK="\\\\"+GG,_K=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),RK=new RegExp('^(?:"('+DK+'|[^"\\x00])*"|\'('+DK+"|[^'\\x00])*'|\\(("+DK+"|[^()\\x00])*\\))"),PK=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,IK=new RegExp("^"+GG),jK=new RegExp("^"+UG,"i"),zK=/`+/,BK=/^`+/,FK=/\.\.\./g,HK=/--+/g,qK=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,WK=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,UK=/^ *(?:\n *)?/,$K=/^[ \t\n\x0b\x0c\x0d]/,VK=/^\s/,GK=/ *$/,YK=/^ */,KK=/^ *(?:\n|$)/,XK=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,ZK=/^[^\n`\[\]\\!<&*_'"~$]+/m,JK=function(){function t(t){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=t}return t.prototype.sourcepos=function(t,e){var n=this.linePosOffset+this.lineOffsets[this.lineIdx],r=this.lineStartNum+this.lineIdx,i=[r,t+n];return"number"===typeof e?[i,[r,e+n]]:i},t.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},t.prototype.match=function(t){var e=t.exec(this.subject.slice(this.pos));return null===e?null:(this.pos+=e.index+e[0].length,e[0])},t.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},t.prototype.spnl=function(){return this.match(UK),!0},t.prototype.parseBackticks=function(t){var e=this.pos+1,n=this.match(BK);if(null===n)return!1;var r,i=this.pos;while(null!==(r=this.match(zK)))if(r===n){var o=this.subject.slice(i,this.pos-n.length),s=this.sourcepos(e,this.pos),a=o.split("\n");if(a.length>1){var l=cK(a);this.lineIdx+=a.length-1,this.linePosOffset=-(this.pos-l.length-n.length),s[1]=this.sourcepos(this.pos),o=a.join(" ")}var c=kY("code",s);return o.length>0&&null!==o.match(/[^ ]/)&&" "==o[0]&&" "==o[o.length-1]?c.literal=o.slice(1,o.length-1):c.literal=o,c.tickCount=n.length,t.appendChild(c),!0}return this.pos=i,t.appendChild(_Y(n,this.sourcepos(e,this.pos-1))),!0},t.prototype.parseBackslash=function(t){var e,n=this.subject;this.pos+=1;var r=this.pos;return this.peek()===mK?(this.pos+=1,e=kY("linebreak",this.sourcepos(this.pos-1,this.pos)),t.appendChild(e),this.nextLine()):IK.test(n.charAt(this.pos))?(t.appendChild(_Y(n.charAt(this.pos),this.sourcepos(r,this.pos))),this.pos+=1):t.appendChild(_Y("\\",this.sourcepos(r,r))),!0},t.prototype.parseAutolink=function(t){var e,n,r,i=this.pos+1;return(e=this.match(qK))?(n=e.slice(1,e.length-1),r=kY("link",this.sourcepos(i,this.pos)),r.destination=QG("mailto:"+n),r.title="",r.appendChild(_Y(n,this.sourcepos(i+1,this.pos-1))),t.appendChild(r),!0):!!(e=this.match(WK))&&(n=e.slice(1,e.length-1),r=kY("link",this.sourcepos(i,this.pos)),r.destination=QG(n),r.title="",r.appendChild(_Y(n,this.sourcepos(i+1,this.pos-1))),t.appendChild(r),!0)},t.prototype.parseHtmlTag=function(t){var e=this.pos+1,n=this.match(XY);if(null===n)return!1;var r=kY("htmlInline",this.sourcepos(e,this.pos));return r.literal=n,t.appendChild(r),!0},t.prototype.scanDelims=function(t){var e=0,n=this.pos;if(t===SK||t===LK)e++,this.pos++;else while(this.peek()===t)e++,this.pos++;if(0===e||e<2&&(t===xK||t===AK))return this.pos=n,null;var r,i=0===n?"\n":this.subject.charAt(n-1),o=this.peek();r=-1===o?"\n":QY(o);var s,a,l=VK.test(r),c=_K.test(r),h=VK.test(i),u=_K.test(i),d=!l&&(!c||h||u),f=!h&&(!u||l||c);return t===vK?(s=d&&(!f||u),a=f&&(!d||c)):t===SK||t===LK?(s=d&&!f,a=f):t===AK?(s=!l,a=!h):(s=d,a=f),this.pos=n,{numdelims:e,canOpen:s,canClose:a}},t.prototype.handleDelim=function(t,e){var n=this.scanDelims(t);if(!n)return!1;var r,i=n.numdelims,o=this.pos+1;this.pos+=i,r=t===SK?"’":t===LK?"“":this.subject.slice(o-1,this.pos);var s=_Y(r,this.sourcepos(o,this.pos));return e.appendChild(s),(n.canOpen||n.canClose)&&(this.options.smart||t!==SK&&t!==LK)&&(this.delimiters={cc:t,numdelims:i,origdelims:i,node:s,previous:this.delimiters,next:null,canOpen:n.canOpen,canClose:n.canClose},this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)),!0},t.prototype.removeDelimiter=function(t){null!==t.previous&&(t.previous.next=t.next),null===t.next?this.delimiters=t.previous:t.next.previous=t.previous},t.prototype.removeDelimitersBetween=function(t,e){t.next!==e&&(t.next=e,e.previous=t)},t.prototype.processEmphasis=function(t){var e,n,r,i,o,s,a,l=!1,c=(e={},e[vK]=[t,t,t],e[gK]=[t,t,t],e[SK]=[t],e[LK]=[t],e[xK]=[t],e[AK]=[t],e);r=this.delimiters;while(null!==r&&r.previous!==t)r=r.previous;while(null!==r){var h=r.cc,u=h===vK||h===gK;if(r.canClose){n=r.previous,a=!1;while(null!==n&&n!==t&&n!==c[h][u?r.origdelims%3:0]){if(l=u&&(r.canOpen||n.canClose)&&r.origdelims%3!==0&&(n.origdelims+r.origdelims)%3===0,n.cc===r.cc&&n.canOpen&&!l){a=!0;break}n=n.previous}if(i=r,u||h===xK||h===AK)if(a){if(n){var d=r.numdelims>=2&&n.numdelims>=2?2:1,f=u?0:1;o=n.node,s=r.node;var p=u?1===d?"emph":"strong":"strike";h===AK&&(p="customInline");var m=kY(p),g=o.sourcepos[1],v=s.sourcepos[0];m.sourcepos=[[g[0],g[1]-d+1],[v[0],v[1]+d-1]],o.sourcepos[1][1]-=d,s.sourcepos[0][1]+=d,o.literal=o.literal.slice(d),s.literal=s.literal.slice(d),n.numdelims-=d,r.numdelims-=d;var y=o.next,b=void 0;while(y&&y!==s)b=y.next,y.unlink(),m.appendChild(y),y=b;if(h===AK){var w=m.firstChild,x=w.literal||"",C=x.split(/\s/)[0];m.info=C,x.length<=C.length?w.unlink():(w.sourcepos[0][1]+=C.length,w.literal=x.replace(C+" ",""))}if(o.insertAfter(m),this.removeDelimitersBetween(n,r),n.numdelims<=f&&(0===n.numdelims&&o.unlink(),this.removeDelimiter(n)),r.numdelims<=f){0===r.numdelims&&s.unlink();var E=r.next;this.removeDelimiter(r),r=E}}}else r=r.next;else h===SK?(r.node.literal="’",a&&(n.node.literal="‘"),r=r.next):h===LK&&(r.node.literal="”",a&&(n.node.literal="“"),r=r.next);a||(c[h][u?i.origdelims%3:0]=i.previous,i.canOpen||this.removeDelimiter(i))}else r=r.next}while(null!==this.delimiters&&this.delimiters!==t)this.removeDelimiter(this.delimiters)},t.prototype.parseLinkTitle=function(){var t=this.match(RK);return null===t?null:JG(t.substr(1,t.length-2))},t.prototype.parseLinkDestination=function(){var t=this.match(PK);if(null===t){if(this.peek()===CK)return null;var e=this.pos,n=0,r=void 0;while(-1!==(r=this.peek()))if(r===kK&&IK.test(this.subject.charAt(this.pos+1)))this.pos+=1,-1!==this.peek()&&(this.pos+=1);else if(r===OK)this.pos+=1,n+=1;else if(r===TK){if(n<1)break;this.pos+=1,n-=1}else{if(null!==$K.exec(QY(r)))break;this.pos+=1}return this.pos===e&&r!==TK||0!==n?null:(t=this.subject.substr(e,this.pos-e),QG(JG(t)))}return QG(JG(t.substr(1,t.length-2)))},t.prototype.parseLinkLabel=function(){var t=this.match(XK);return null===t||t.length>1001?0:t.length},t.prototype.parseOpenBracket=function(t){var e=this.pos;this.pos+=1;var n=_Y("[",this.sourcepos(this.pos,this.pos));return t.appendChild(n),this.addBracket(n,e,!1),!0},t.prototype.parseBang=function(t){var e=this.pos;if(this.pos+=1,this.peek()===bK){this.pos+=1;var n=_Y("![",this.sourcepos(this.pos-1,this.pos));t.appendChild(n),this.addBracket(n,e+1,!0)}else{n=_Y("!",this.sourcepos(this.pos,this.pos));t.appendChild(n)}return!0},t.prototype.parseCloseBracket=function(t){var e=null,n=null,r=!1;this.pos+=1;var i=this.pos,o=this.brackets;if(null===o)return t.appendChild(_Y("]",this.sourcepos(i,i))),!0;if(!o.active)return t.appendChild(_Y("]",this.sourcepos(i,i))),this.removeBracket(),!0;var s=o.image,a=this.pos;this.peek()===OK&&(this.pos++,this.spnl()&&null!==(e=this.parseLinkDestination())&&this.spnl()&&($K.test(this.subject.charAt(this.pos-1))&&(n=this.parseLinkTitle()),1)&&this.spnl()&&this.peek()===TK?(this.pos+=1,r=!0):this.pos=a);var l="";if(!r){var c=this.pos,h=this.parseLinkLabel();if(h>2?l=this.subject.slice(c,c+h):o.bracketAfter||(l=this.subject.slice(o.index,i)),0===h&&(this.pos=a),l){l=hK(l);var u=this.refMap[l];u&&(e=u.destination,n=u.title,r=!0)}}if(r){var d=kY(s?"image":"link");d.destination=e,d.title=n||"",d.sourcepos=[o.startpos,this.sourcepos(this.pos)];var f=o.node.next,p=void 0;while(f)p=f.next,f.unlink(),d.appendChild(f),f=p;if(t.appendChild(d),this.processEmphasis(o.previousDelimiter),this.removeBracket(),o.node.unlink(),!s){o=this.brackets;while(null!==o)o.image||(o.active=!1),o=o.previous}return this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:l}),!0}return this.removeBracket(),this.pos=i,t.appendChild(_Y("]",this.sourcepos(i,i))),this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:l}),!0},t.prototype.addBracket=function(t,e,n){null!==this.brackets&&(this.brackets.bracketAfter=!0),this.brackets={node:t,startpos:this.sourcepos(e+(n?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:e,image:n,active:!0}},t.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)},t.prototype.parseEntity=function(t){var e,n=this.pos+1;return!!(e=this.match(jK))&&(t.appendChild(_Y(Bo.decodeHTML(e),this.sourcepos(n,this.pos))),!0)},t.prototype.parseString=function(t){var e,n=this.pos+1;if(e=this.match(ZK)){if(this.options.smart){var r=e.replace(FK,"…").replace(HK,(function(t){var e=0,n=0;return t.length%3===0?n=t.length/3:t.length%2===0?e=t.length/2:t.length%3===2?(e=1,n=(t.length-2)/3):(e=2,n=(t.length-4)/3),nY("—",n)+nY("–",e)}));t.appendChild(_Y(r,this.sourcepos(n,this.pos)))}else{var i=_Y(e,this.sourcepos(n,this.pos));t.appendChild(i)}return!0}return!1},t.prototype.parseNewline=function(t){this.pos+=1;var e=t.lastChild;if(e&&"text"===e.type&&" "===e.literal[e.literal.length-1]){var n=" "===e.literal[e.literal.length-2],r=e.literal.length;e.literal=e.literal.replace(GK,"");var i=r-e.literal.length;e.sourcepos[1][1]-=i,t.appendChild(kY(n?"linebreak":"softbreak",this.sourcepos(this.pos-i,this.pos)))}else t.appendChild(kY("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(YK),!0},t.prototype.parseReference=function(t,e){if(!this.options.referenceDefinition)return 0;this.subject=t.stringContent,this.pos=0;var n=null,r=this.pos,i=this.parseLinkLabel();if(0===i)return 0;var o=this.subject.substr(0,i);if(this.peek()!==MK)return this.pos=r,0;this.pos++,this.spnl();var s=this.parseLinkDestination();if(null===s)return this.pos=r,0;var a=this.pos;this.spnl(),this.pos!==a&&(n=this.parseLinkTitle()),null===n&&(n="",this.pos=a);var l=!0;if(null===this.match(KK)&&(""===n?l=!1:(n="",this.pos=a,l=null!==this.match(KK))),!l)return this.pos=r,0;var c=hK(o);if(""===c)return this.pos=r,0;var h=this.getReferenceDefSourcepos(t);t.sourcepos[0][0]=h[1][0]+1;var u=kY("refDef",h);return u.title=n,u.dest=s,u.label=c,t.insertBefore(u),e[c]?this.refDefCandidateMap[u.id]=u:e[c]=IZ(u),this.pos-r},t.prototype.mergeTextNodes=function(t){var e,n=[];while(e=t.next()){var r=e.entering,i=e.node;if(r&&"text"===i.type)n.push(i);else if(1===n.length)n=[];else if(n.length>1){var o=n[0],s=n[n.length-1];o.sourcepos&&s.sourcepos&&(o.sourcepos[1]=s.sourcepos[1]),o.next=s.next,o.next&&(o.next.prev=o);for(var a=1;a<n.length;a+=1)o.literal+=n[a].literal,n[a].unlink();n=[]}}},t.prototype.getReferenceDefSourcepos=function(t){for(var e=t.stringContent.split(/\n|\r\n/),n=!1,r=0,i={line:0,ch:0},o=0;o<e.length;o+=1){var s=e[o];if($K.test(s))break;if(/\:/.test(s)&&0===r){if(n)break;var a=s.indexOf(":")===s.length-1?o+1:o;i={line:a,ch:e[a].length},n=!0}var l=s.match(/'|"/g);if(l&&(r+=l.length),2===r){i={line:o,ch:s.length};break}}return[[t.sourcepos[0][0],t.sourcepos[0][1]],[t.sourcepos[0][0]+i.line,i.ch]]},t.prototype.parseInline=function(t){var e,n=!1,r=this.peek();if(-1===r)return!1;switch(r){case mK:n=this.parseNewline(t);break;case kK:n=this.parseBackslash(t);break;case yK:n=this.parseBackticks(t);break;case gK:case vK:case xK:case AK:n=this.handleDelim(r,t);break;case SK:case LK:n=!!(null===(e=this.options)||void 0===e?void 0:e.smart)&&this.handleDelim(r,t);break;case bK:n=this.parseOpenBracket(t);break;case EK:n=this.parseBang(t);break;case wK:n=this.parseCloseBracket(t);break;case CK:n=this.parseAutolink(t)||this.parseHtmlTag(t);break;case NK:t.disabledEntityParse||(n=this.parseEntity(t));break;default:n=this.parseString(t);break}return n||(this.pos+=1,t.appendChild(_Y(QY(r),this.sourcepos(this.pos,this.pos+1)))),!0},t.prototype.parse=function(t){this.subject=t.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=t.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=t.sourcepos[0][0],TY(t)&&(this.lineOffsets[0]+=t.level+1);while(this.parseInline(t));t.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(t.walker());var e=this.options,n=e.extendedAutolinks,r=e.customParser;if(n&&lK(t.walker(),n),r&&t.firstChild){var i,o=t.firstChild.walker();while(i=o.next()){var s=i.node,a=i.entering;r[s.type]&&r[s.type](s,{entering:a,options:this.options})}}},t}(),QK=/^\[([ \txX])\][ \t]+/;function tX(t,e){if(e.firstChild&&"paragraph"===e.firstChild.type){var n=e.firstChild,r=n.stringContent.match(QK);if(r){var i=r[0].length;n.stringContent=n.stringContent.substring(i-1),n.sourcepos[0][1]+=i,n.lineOffsets[0]+=i,e.listData.task=!0,e.listData.checked=/[xX]/.test(r[1])}}}var eX={continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableHead"===t||"tableBody"===t},acceptsLines:!1},nX={continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableRow"===t},acceptsLines:!1},rX={continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableRow"===t||"tableDelimRow"===t},acceptsLines:!1},iX={continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableDelimCell"===t},acceptsLines:!1},oX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},sX={continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableCell"===t},acceptsLines:!1},aX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},lX=4,cX=9,hX=62,uX=60,dX=32,fX=91,pX=/[^ \t\f\v\r\n]/,mX=/^(?:`{3,}|~{3,})(?= *$)/;function gX(t){var e=t;while(e){if(e.lastLineBlank)return!0;var n=e.type;if(e.lastLineChecked||"list"!==n&&"item"!==n){e.lastLineChecked=!0;break}e.lastLineChecked=!0,e=e.lastChild}return!1}function vX(t,e){return e<t.length?t.charCodeAt(e):-1}function yX(t){return!pX.test(t)}function bX(t){return t===dX||t===cX}var wX=/^\$\$$/,xX={continue:function(t,e){var n=t.currentLine,r=n.match(wX);if(r)return t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2;var i=e.offset;while(i>0&&bX(vX(n,t.offset)))t.advanceOffset(1,!0),i--;return 0},finalize:function(t,e){if(null!==e.stringContent){var n=e.stringContent,r=n.indexOf("\n"),i=n.slice(0,r),o=n.slice(r+1),s=i.match(/^(\s*)(.*)/);e.info=JG(s[2].trim()),e.literal=o,e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},CX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},EX={continue:function(){return 0},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},kX={continue:function(){return 0},finalize:function(t,e){var n=e.firstChild;while(n){if(gX(n)&&n.next){e.listData.tight=!1;break}var r=n.firstChild;while(r){if(gX(r)&&(n.next||r.next)){e.listData.tight=!1;break}r=r.next}n=n.next}},canContain:function(t){return"item"===t},acceptsLines:!1},NX={continue:function(t){var e=t.currentLine;return t.indented||vX(e,t.nextNonspace)!==hX?1:(t.advanceNextNonspace(),t.advanceOffset(1,!1),bX(vX(e,t.offset))&&t.advanceOffset(1,!0),0)},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},OX={continue:function(t,e){if(t.blank){if(null===e.firstChild)return 1;t.advanceNextNonspace()}else{if(!(t.indent>=e.listData.markerOffset+e.listData.padding))return 1;t.advanceOffset(e.listData.markerOffset+e.listData.padding,!0)}return 0},finalize:tX,canContain:function(t){return"item"!==t},acceptsLines:!1},TX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},MX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},SX={continue:function(t,e){var n=t.currentLine,r=t.indent;if(e.isFenced){var i=r<=3&&n.charAt(t.nextNonspace)===e.fenceChar&&n.slice(t.nextNonspace).match(mX);if(i&&i[0].length>=e.fenceLength)return t.lastLineLength=t.offset+r+i[0].length,t.finalize(e,t.lineNumber),2;var o=e.fenceOffset;while(o>0&&bX(vX(n,t.offset)))t.advanceOffset(1,!0),o--}else if(r>=lX)t.advanceOffset(lX,!0);else{if(!t.blank)return 1;t.advanceNextNonspace()}return 0},finalize:function(t,e){var n;if(null!==e.stringContent){if(e.isFenced){var r=e.stringContent,i=r.indexOf("\n"),o=r.slice(0,i),s=r.slice(i+1),a=o.match(/^(\s*)(.*)/);e.infoPadding=a[1].length,e.info=JG(a[2].trim()),e.literal=s}else e.literal=null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,"\n");e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},LX={continue:function(t,e){return!t.blank||6!==e.htmlBlockType&&7!==e.htmlBlockType?0:1},finalize:function(t,e){var n;e.literal=(null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,""))||null,e.stringContent=null},canContain:function(){return!1},acceptsLines:!0},AX={continue:function(t){return t.blank?1:0},finalize:function(t,e){if(null!==e.stringContent){var n,r=!1;while(vX(e.stringContent,0)===fX&&(n=t.inlineParser.parseReference(e,t.refMap)))e.stringContent=e.stringContent.slice(n),r=!0;r&&yX(e.stringContent)&&e.unlink()}},canContain:function(){return!1},acceptsLines:!0},DX=CX,_X=CX,RX={document:EX,list:kX,blockQuote:NX,item:OX,heading:TX,thematicBreak:MX,codeBlock:SX,htmlBlock:LX,paragraph:AX,table:eX,tableBody:nX,tableHead:rX,tableRow:sX,tableCell:aX,tableDelimRow:iX,tableDelimCell:oX,refDef:DX,customBlock:xX,frontMatter:_X};function PX(t){for(var e=0,n=0,r=[],i=0;i<t.length;i+=1)if("|"===t[i]&&"\\"!==t[i-1]){var o=t.substring(e,i);0===e&&rY(o)?n=i+1:r.push(o),e=i+1}if(e<t.length){o=t.substring(e,t.length);rY(o)||r.push(o)}return[n,r]}function IX(t,e,n,r){for(var i=[],o=0,s=e;o<s.length;o++){var a=s[o],l=a.match(/^[ \t]+/),c=l?l[0].length:0,h=void 0,u=void 0;if(c===a.length)c=0,h=0,u="";else{var d=a.match(/[ \t]+$/);h=d?d[0].length:0,u=a.slice(c,a.length-h)}var f=r+c,p=kY(t,[[n,r],[n,r+a.length-1]]);p.stringContent=u.replace(/\\\|/g,"|"),p.startIdx=i.length,p.endIdx=i.length,p.lineOffsets=[f-1],p.paddingLeft=c,p.paddingRight=h,i.push(p),r+=a.length+1}return i}function jX(t){var e=null,n=t.stringContent,r=n[0],i=n[n.length-1];return":"===i?e=":"===r?"center":"right":":"===r&&(e="left"),{align:e}}var zX=function(t,e){var n=e.stringContent;if("paragraph"===e.type&&!t.indented&&!t.blank){var r=n.length-1,i=n.lastIndexOf("\n",r-1)+1,o=n.slice(i,r),s=t.currentLine.slice(t.nextNonspace),a=PX(o),l=a[0],c=a[1],h=PX(s),u=h[0],d=h[1],f=/^[ \t]*:?-+:?[ \t]*$/;if(!c.length||!d.length||d.some((function(t){return!f.test(t)}))||1===d.length&&0!==s.indexOf("|"))return 0;var p=e.lineOffsets,m=t.lineNumber-1,g=cK(p)+1,v=kY("table",[[m,g],[t.lineNumber,t.offset]]);if(v.columns=d.map((function(){return{align:null}})),e.insertAfter(v),1===p.length)e.unlink();else{e.stringContent=n.slice(0,i);var y=n.lastIndexOf("\n",i-2)+1,b=i-y-1;t.lastLineLength=p[p.length-2]+b,t.finalize(e,m-1)}t.advanceOffset(t.currentLine.length-t.offset,!1);var w=kY("tableHead",[[m,g],[t.lineNumber,t.offset]]);v.appendChild(w);var x=kY("tableRow",[[m,g],[m,g+o.length-1]]),C=kY("tableDelimRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.offset]]);w.appendChild(x),w.appendChild(C),IX("tableCell",c,m,g+l).forEach((function(t){x.appendChild(t)}));var E=IX("tableDelimCell",d,t.lineNumber,t.nextNonspace+1+u);return E.forEach((function(t){C.appendChild(t)})),v.columns=E.map(jX),t.tip=v,2}return 0},BX=function(t,e){if("table"!==e.type&&"tableBody"!==e.type||!t.blank&&-1===t.currentLine.indexOf("|"))return 0;if(t.advanceOffset(t.currentLine.length-t.offset,!1),t.blank){var n=e;return"tableBody"===e.type&&(n=e.parent,t.finalize(e,t.lineNumber-1)),t.finalize(n,t.lineNumber-1),0}var r=e;"table"===e.type&&(r=t.addChild("tableBody",t.nextNonspace),r.stringContent=null);var i=kY("tableRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.currentLine.length]]);r.appendChild(i);var o=r.parent,s=t.currentLine.slice(t.nextNonspace),a=PX(s),l=a[0],c=a[1];return IX("tableCell",c,t.lineNumber,t.nextNonspace+1+l).forEach((function(t,e){e>=o.columns.length&&(t.ignored=!0),i.appendChild(t)})),2},FX=/^(\$\$)(\s*[a-zA-Z])+/,HX=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,qX=function(t){var e;if(!t.indented&&!HX.test(t.currentLine)&&(e=t.currentLine.match(FX))){var n=e[1].length;t.closeUnmatchedBlocks();var r=t.addChild("customBlock",t.nextNonspace);return r.syntaxLength=n,r.offset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},WX=/^`{3,}(?!.*`)|^~{3,}/,UX=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+WY+"|"+UY+")\\s*$","i")],$X=/^(?:=+|-+)[ \t]*$/,VX=/^#{1,6}(?:[ \t]+|$)/,GX=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,YX=/^[*+-]/,KX=/^(\d{1,9})([.)])/;function XX(t,e){var n,r,i=t.currentLine.slice(t.nextNonspace),o={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:t.indent,task:!1,checked:!1};if(t.indent>=4)return null;if(n=i.match(YX))o.type="bullet",o.bulletChar=n[0][0];else{if(!(n=i.match(KX))||"paragraph"===e.type&&"1"!==n[1])return null;o.type="ordered",o.start=parseInt(n[1],10),o.delimiter=n[2]}if(r=vX(t.currentLine,t.nextNonspace+n[0].length),-1!==r&&r!==cX&&r!==dX)return null;if("paragraph"===e.type&&!t.currentLine.slice(t.nextNonspace+n[0].length).match(pX))return null;t.advanceNextNonspace(),t.advanceOffset(n[0].length,!0);var s=t.column,a=t.offset;do{t.advanceOffset(1,!0),r=vX(t.currentLine,t.offset)}while(t.column-s<5&&bX(r));var l=-1===vX(t.currentLine,t.offset),c=t.column-s;return c>=5||c<1||l?(o.padding=n[0].length+1,t.column=s,t.offset=a,bX(vX(t.currentLine,t.offset))&&t.advanceOffset(1,!0)):o.padding=n[0].length+c,o}function ZX(t,e){return t.type===e.type&&t.delimiter===e.delimiter&&t.bulletChar===e.bulletChar}function JX(t,e){return t.options.disallowDeepHeading&&("blockQuote"===e.type||"item"===e.type)}var QX=function(t){return t.indented||vX(t.currentLine,t.nextNonspace)!==hX?0:(t.advanceNextNonspace(),t.advanceOffset(1,!1),bX(vX(t.currentLine,t.offset))&&t.advanceOffset(1,!0),t.closeUnmatchedBlocks(),t.addChild("blockQuote",t.nextNonspace),1)},tZ=function(t,e){var n;if(!t.indented&&!JX(t,e)&&(n=t.currentLine.slice(t.nextNonspace).match(VX))){t.advanceNextNonspace(),t.advanceOffset(n[0].length,!1),t.closeUnmatchedBlocks();var r=t.addChild("heading",t.nextNonspace);return r.level=n[0].trim().length,r.headingType="atx",r.stringContent=t.currentLine.slice(t.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),t.advanceOffset(t.currentLine.length-t.offset),2}return 0},eZ=function(t){var e;if(!t.indented&&(e=t.currentLine.slice(t.nextNonspace).match(WX))){var n=e[0].length;t.closeUnmatchedBlocks();var r=t.addChild("codeBlock",t.nextNonspace);return r.isFenced=!0,r.fenceLength=n,r.fenceChar=e[0][0],r.fenceOffset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},nZ=function(t,e){if(!t.indented&&vX(t.currentLine,t.nextNonspace)===uX){var n=t.currentLine.slice(t.nextNonspace),r=t.options.disallowedHtmlBlockTags,i=void 0;for(i=1;i<=7;i++){var o=n.match(UX[i]);if(o){if(7===i){if("paragraph"===e.type)return 0;if(r.length>0){var s=new RegExp("</?(?:"+r.join("|")+")","i");if(s.test(o[0]))return 0}}t.closeUnmatchedBlocks();var a=t.addChild("htmlBlock",t.offset);return a.htmlBlockType=i,2}}}return 0},rZ=function(t,e){var n;if(null!==e.stringContent&&!t.indented&&"paragraph"===e.type&&!JX(t,e.parent)&&(n=t.currentLine.slice(t.nextNonspace).match($X))){t.closeUnmatchedBlocks();var r=void 0;while(vX(e.stringContent,0)===fX&&(r=t.inlineParser.parseReference(e,t.refMap)))e.stringContent=e.stringContent.slice(r);if(e.stringContent.length>0){var i=kY("heading",e.sourcepos);return i.level="="===n[0][0]?1:2,i.headingType="setext",i.stringContent=e.stringContent,e.insertAfter(i),e.unlink(),t.tip=i,t.advanceOffset(t.currentLine.length-t.offset,!1),2}return 0}return 0},iZ=function(t){return!t.indented&&GX.test(t.currentLine.slice(t.nextNonspace))?(t.closeUnmatchedBlocks(),t.addChild("thematicBreak",t.nextNonspace),t.advanceOffset(t.currentLine.length-t.offset,!1),2):0},oZ=function(t,e){var n,r=e;return t.indented&&"list"!==e.type||!(n=XX(t,r))?0:(t.closeUnmatchedBlocks(),"list"===t.tip.type&&ZX(r.listData,n)||(r=t.addChild("list",t.nextNonspace),r.listData=n),r=t.addChild("item",t.nextNonspace),r.listData=n,1)},sZ=function(t){return t.indented&&"paragraph"!==t.tip.type&&!t.blank?(t.advanceOffset(lX,!0),t.closeUnmatchedBlocks(),t.addChild("codeBlock",t.offset),2):0},aZ=[QX,tZ,eZ,nZ,rZ,iZ,oZ,sZ,zX,BX,qX],lZ=/^(-{3}|\+{3}|;{3})$/,cZ=function(t,e){var n=t.currentLine,r=t.lineNumber,i=t.indented;if(1===r&&!i&&"document"===e.type&&lZ.test(n)){t.closeUnmatchedBlocks();var o=t.addChild("frontMatter",t.nextNonspace);return o.stringContent=n,t.advanceNextNonspace(),t.advanceOffset(n.length,!1),2}return 0},hZ={continue:function(t,e){var n=t.currentLine,r=n.match(lZ);return"frontMatter"===e.type&&r?(e.stringContent+=n,t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2):0},finalize:function(t,e){null!==e.stringContent&&(e.literal=e.stringContent,e.stringContent=null)},canContain:function(){return!1},acceptsLines:!0},uZ=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],dZ=/^[#`~*+_=<>0-9-;$]/,fZ=/\r\n|\n|\r/;function pZ(){return kY("document",[[1,1],[0,0]])}var mZ={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},gZ=function(){function t(t){this.options=Do(Do({},mZ),t),this.doc=pZ(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter&&(RX.frontMatter=hZ,aZ.unshift(cZ)),this.inlineParser=new JK(this.options)}return t.prototype.advanceOffset=function(t,e){void 0===e&&(e=!1);var n,r,i,o=this.currentLine;while(t>0&&(i=o[this.offset]))"\t"===i?(n=4-this.column%4,e?(this.partiallyConsumedTab=n>t,r=n>t?t:n,this.column+=r,this.offset+=this.partiallyConsumedTab?0:1,t-=r):(this.partiallyConsumedTab=!1,this.column+=n,this.offset+=1,t-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,t-=1)},t.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},t.prototype.findNextNonspace=function(){var t,e=this.currentLine,n=this.offset,r=this.column;while(""!==(t=e.charAt(n)))if(" "===t)n++,r++;else{if("\t"!==t)break;n++,r+=4-r%4}this.blank="\n"===t||"\r"===t||""===t,this.nextNonspace=n,this.nextNonspaceColumn=r,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=lX},t.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var t=4-this.column%4;this.tip.stringContent+=nY(" ",t)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset],this.tip.stringContent+=this.currentLine.slice(this.offset)+"\n"},t.prototype.addChild=function(t,e){while(!RX[this.tip.type].canContain(t))this.finalize(this.tip,this.lineNumber-1);var n=e+1,r=kY(t,[[this.lineNumber,n],[0,0]]);return r.stringContent="",this.tip.appendChild(r),this.tip=r,r},t.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){while(this.oldtip!==this.lastMatchedContainer){var t=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=t}this.allClosed=!0}},t.prototype.finalize=function(t,e){var n=t.parent;t.open=!1,t.sourcepos[1]=[e,this.lastLineLength],RX[t.type].finalize(this,t),this.tip=n},t.prototype.processInlines=function(t){var e,n=this.options.customParser,r=t.walker();this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;while(e=r.next()){var i=e.node,o=e.entering,s=i.type;n&&n[s]&&n[s](i,{entering:o,options:this.options}),o||"paragraph"!==s&&"heading"!==s&&("tableCell"!==s||i.ignored)||this.inlineParser.parse(i)}},t.prototype.incorporateLine=function(t){var e=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,-1!==t.indexOf("\0")&&(t=t.replace(/\0/g,"�")),this.currentLine=t;var n,r=!0;while((n=e.lastChild)&&n.open){switch(e=n,this.findNextNonspace(),RX[e.type]["continue"](this,e)){case 0:break;case 1:r=!1;break;case 2:return void(this.lastLineLength=t.length);default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!r){e=e.parent;break}}this.allClosed=e===this.oldtip,this.lastMatchedContainer=e;var i="paragraph"!==e.type&&RX[e.type].acceptsLines,o=aZ.length;while(!i){if(this.findNextNonspace(),"table"!==e.type&&"tableBody"!==e.type&&"paragraph"!==e.type&&!this.indented&&!dZ.test(t.slice(this.nextNonspace))){this.advanceNextNonspace();break}var s=0;while(s<o){var a=aZ[s](this,e);if(1===a){e=this.tip;break}if(2===a){e=this.tip,i=!0;break}s++}if(s===o){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks(),this.blank&&e.lastChild&&(e.lastChild.lastLineBlank=!0);var l=e.type,c=this.blank&&!("blockQuote"===l||NY(e)&&e.isFenced||"item"===l&&!e.firstChild&&e.sourcepos[0][0]===this.lineNumber),h=e;while(h)h.lastLineBlank=c,h=h.parent;RX[l].acceptsLines?(this.addLine(),OY(e)&&e.htmlBlockType>=1&&e.htmlBlockType<=5&&uZ[e.htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=t.length,this.finalize(e,this.lineNumber))):this.offset<t.length&&!this.blank&&(e=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}else this.addLine();this.lastLineLength=t.length},t.prototype.parse=function(t,e){this.doc=pZ(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var n=t.split(fZ),r=n.length;this.lines=e||n,this.options.referenceDefinition&&this.clearRefMaps(),t.charCodeAt(t.length-1)===mK&&(r-=1);for(var i=0;i<r;i++)this.incorporateLine(n[i]);while(this.tip)this.finalize(this.tip,r);return this.processInlines(this.doc),this.doc},t.prototype.partialParseStart=function(t,e){this.doc=pZ(),this.tip=this.doc,this.lineNumber=t-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";for(var n=e.length,r=0;r<n;r++)this.incorporateLine(e[r]);return this.doc},t.prototype.partialParseExtends=function(t){for(var e=0;e<t.length;e++)this.incorporateLine(t[e])},t.prototype.partialParseFinish=function(){while(this.tip)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},t.prototype.setRefMaps=function(t,e,n){this.refMap=t,this.refLinkCandidateMap=e,this.refDefCandidateMap=n},t.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){pK(t)}))},t}();function vZ(t,e){return t[0]<e[0]?1:t[0]>e[0]?-1:t[1]<e[1]?1:t[1]>e[1]?-1:0}function yZ(t,e){var n=t[0],r=t[1];return 1===vZ(r,e)?1:-1===vZ(n,e)?-1:0}function bZ(t,e){if(t.parent===e.parent&&t!==e){var n=t.next;while(n&&n!==e){for(var r=n.next,i=0,o=["parent","prev","next"];i<o.length;i++){var s=o[i];n[s]&&(cY(n[s].id),n[s]=null)}n=r}t.next=e.next,e.next?e.next.prev=t:t.parent.lastChild=t}}function wZ(t){var e=[],n=t.firstChild;while(n)e.push(n),n=n.next;return e}function xZ(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];t.insertBefore(i)}}function CZ(t,e){for(var n=e.length-1;n>=0;n-=1)t.prependChild(e[n])}function EZ(t,e){if(t&&t.parent&&0!==e){var n,r=t.parent.walker();r.resumeAt(t,!0);while(n=r.next()){var i=n.node,o=n.entering;o&&(i.sourcepos[0][0]+=e,i.sourcepos[1][0]+=e)}}}function kZ(t,e){var n=t[0],r=t[1];return r[0]<e?1:n[0]>e?-1:0}function NZ(t,e){var n=t.firstChild;while(n){var r=kZ(n.sourcepos,e);if(0===r)return n;if(-1===r)return n.prev||n;n=n.next}return t.lastChild}function OZ(t){while(t.lastChild)t=t.lastChild;return t}function TZ(t){while(t.parent&&"document"!==t.parent.type&&t.parent.sourcepos[0][0]===t.sourcepos[0][0])t=t.parent;return t}function MZ(t,e){var n=t.firstChild,r=null;while(n){var i=kZ(n.sourcepos,e);if(0===i){if(n.sourcepos[0][0]===e||!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===i)break;r=n,n=n.next}}return r?TZ(OZ(r)):null}function SZ(t,e){var n=t,r=null;while(n){var i=yZ(n.sourcepos,e);if(0===i){if(!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===i)return r;if(!n.next)return r;n=n.next}}return n}function LZ(t){return lY(t)||null}function AZ(t,e,n){if(void 0===n&&(n=null),e){var r=e.walker();while(e&&e!==n){t(e);var i=r.next();if(!i)break;e=i.node}}}function DZ(t){var e=LZ(t);if(!e)return!0;while(e&&"document"!==e.type){if(!e.parent&&!e.prev&&!e.next)return!0;e=e.parent}return!1}var _Z=/\r\n|\n|\r/;function RZ(t){var e=t.match(/^[ \t]+/);if(e&&(e[0].length>=2||/\t/.test(e[0])))return!0;var n=e?t.slice(e.length):t;return YX.test(n)||KX.test(n)}function PZ(t){return!yX(t)&&-1!==t.indexOf("|")}function IZ(t){var e=t.id,n=t.title,r=t.sourcepos,i=t.dest;return{id:e,title:n,sourcepos:r,unlinked:!1,destination:i}}var jZ=function(){function t(t,e){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(null===e||void 0===e?void 0:e.referenceDefinition),this.parser=new gZ(e),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},t=t||"",this.lineTexts=t.split(_Z),this.root=this.parser.parse(t,this.lineTexts)}return t.prototype.updateLineTexts=function(t,e,n){var r,i=t[0],o=t[1],s=e[0],a=e[1],l=n.split(_Z),c=l.length,h=this.lineTexts[i-1],u=this.lineTexts[s-1];l[0]=h.slice(0,o-1)+l[0],l[c-1]=l[c-1]+u.slice(a-1);var d=s-i+1;return(r=this.lineTexts).splice.apply(r,_o([i-1,d],l)),c-d},t.prototype.updateRootNodeState=function(){if(1===this.lineTexts.length&&""===this.lineTexts[0])return this.root.lastLineBlank=!0,void(this.root.sourcepos=[[1,1],[1,0]]);this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);var t=this.lineTexts,e=t.length-1;while(""===t[e])e-=1;t.length-2>e&&(e+=1),this.root.sourcepos[1]=[e+1,t[e].length]},t.prototype.replaceRangeNodes=function(t,e,n){t?(xZ(t,n),bZ(t,e),[t.id,e.id].forEach((function(t){return cY(t)})),t.unlink()):e?(xZ(e,n),cY(e.id),e.unlink()):CZ(this.root,n)},t.prototype.getNodeRange=function(t,e){var n=NZ(this.root,t[0]),r=NZ(this.root,e[0]);return r&&r.next&&e[0]+1===r.next.sourcepos[0][0]&&(r=r.next),[n,r]},t.prototype.trigger=function(t,e){this.eventHandlerMap[t].forEach((function(t){t(e)}))},t.prototype.extendEndLine=function(t){while(""===this.lineTexts[t])t+=1;return t},t.prototype.parseRange=function(t,e,n,r){t&&t.prev&&(MY(t.prev)&&RZ(this.lineTexts[n-1])||SY(t.prev)&&PZ(this.lineTexts[n-1]))&&(t=t.prev,n=t.sourcepos[0][0]);var i=this.lineTexts.slice(n-1,r),o=this.parser.partialParseStart(n,i),s=e?e.next:this.root.firstChild,a=o.lastChild,l=a&&NY(a)&&a.open,c=a&&AY(a)&&a.open,h=a&&MY(a);while((l||c)&&s||h&&s&&("list"===s.type||s.sourcepos[0][1]>=2)){var u=this.extendEndLine(s.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(r,u)),t||(t=e),e=s,r=u,s=s.next}this.parser.partialParseFinish();var d=wZ(o);return{newNodes:d,extStartNode:t,extEndNode:e}},t.prototype.getRemovedNodeRange=function(t,e){return!t||t&&LY(t)||e&&LY(e)?null:{id:[t.id,e.id],line:[t.sourcepos[0][0]-1,e.sourcepos[1][0]-1]}},t.prototype.markDeletedRefMap=function(t,e){var n=this;if(!fK(this.refMap)){var r=function(t){if(LY(t)){var e=n.refMap[t.label];e&&t.id===e.id&&(e.unlinked=!0)}};t&&AZ(r,t.parent,e),e&&AZ(r,e)}},t.prototype.replaceWithNewRefDefState=function(t){var e=this;if(!fK(this.refMap)){var n=function(t){if(LY(t)){var n=t.label,r=e.refMap[n];r&&!r.unlinked||(e.refMap[n]=IZ(t))}};t.forEach((function(t){AZ(n,t)}))}},t.prototype.replaceWithRefDefCandidate=function(){var t=this;fK(this.refDefCandidateMap)||uK(this.refDefCandidateMap,(function(e,n){var r=n.label,i=n.sourcepos,o=t.refMap[r];(!o||o.unlinked||o.sourcepos[0][0]>i[0][0])&&(t.refMap[r]=IZ(n))}))},t.prototype.getRangeWithRefDef=function(t,e,n,r,i){if(this.referenceDefinition&&!fK(this.refMap)){var o=NZ(this.root,t-1),s=NZ(this.root,e+1);o&&LY(o)&&o!==n&&o!==r&&(n=o,t=n.sourcepos[0][0]),s&&LY(s)&&s!==n&&s!==r&&(r=s,e=this.extendEndLine(r.sourcepos[1][0]+i))}return[n,r,t,e]},t.prototype.parse=function(t,e,n){void 0===n&&(n=0);var r=this.getNodeRange(t,e),i=r[0],o=r[1],s=i?Math.min(i.sourcepos[0][0],t[0]):t[0],a=this.extendEndLine((o?Math.max(o.sourcepos[1][0],e[0]):e[0])+n),l=this.parseRange.apply(this,this.getRangeWithRefDef(s,a,i,o,n)),c=l.newNodes,h=l.extStartNode,u=l.extEndNode,d=this.getRemovedNodeRange(h,u),f=u?u.next:this.root.firstChild;return this.referenceDefinition?(this.markDeletedRefMap(h,u),this.replaceRangeNodes(h,u,c),this.replaceWithNewRefDefState(c)):this.replaceRangeNodes(h,u,c),{nodes:c,removedNodeRange:d,nextNode:f}},t.prototype.parseRefLink=function(){var t=this,e=[];return fK(this.refMap)||uK(this.refMap,(function(n,r){r.unlinked&&delete t.refMap[n],uK(t.refLinkCandidateMap,(function(r,i){var o=i.node,s=i.refLabel;s===n&&e.push(t.parse(o.sourcepos[0],o.sourcepos[1]))}))})),e},t.prototype.removeUnlinkedCandidate=function(){fK(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){uK(t,(function(e){DZ(e)&&delete t[e]}))}))},t.prototype.editMarkdown=function(t,e,n){var r=this.updateLineTexts(t,e,n),i=this.parse(t,e,r),o=dK(i,"nextNode");EZ(i.nextNode,r),this.updateRootNodeState();var s=[o];return this.referenceDefinition&&(this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),s=s.concat(this.parseRefLink())),this.trigger("change",s),s},t.prototype.getLineTexts=function(){return this.lineTexts},t.prototype.getRootNode=function(){return this.root},t.prototype.findNodeAtPosition=function(t){var e=SZ(this.root,t);return e&&e!==this.root?e:null},t.prototype.findFirstNodeAtLine=function(t){return MZ(this.root,t)},t.prototype.on=function(t,e){this.eventHandlerMap[t].push(e)},t.prototype.off=function(t,e){var n=this.eventHandlerMap[t],r=n.indexOf(e);n.splice(r,1)},t.prototype.findNodeById=function(t){return LZ(t)},t.prototype.removeAllNode=function(){hY()},t}(),zZ=["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"],BZ=new RegExp("<(/?(?:"+zZ.join("|")+")[^>]*>)","ig");function FZ(t){return BZ.test(t)?t.replace(BZ,(function(t,e){return"&lt;"+e})):t}var HZ={heading:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"h"+t.level,outerNewLine:!0}},text:function(t){return{type:"text",content:t.literal}},softbreak:function(t,e){var n=e.options;return{type:"html",content:n.softbreak}},linebreak:function(){return{type:"html",content:"<br />\n"}},emph:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"em"}},strong:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"strong"}},paragraph:function(t,e){var n,r=e.entering,i=null===(n=t.parent)||void 0===n?void 0:n.parent;return i&&"list"===i.type&&i.listData.tight?null:{type:r?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(t,e){var n=e.entering,r=t.listData,i=r.type,o=r.start,s="bullet"===i?"ul":"ol",a={};return"ol"===s&&null!==o&&1!==o&&(a.start=o.toString()),{type:n?"openTag":"closeTag",tagName:s,attributes:a,outerNewLine:!0}},item:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(t,e){var n=e.options,r=n.tagFilter?FZ(t.literal):t.literal;return{type:"html",content:r}},htmlBlock:function(t,e){var n=e.options,r=n.tagFilter?FZ(t.literal):t.literal;return n.nodeId?[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:r},{type:"closeTag",tagName:"div",outerNewLine:!0}]:{type:"html",content:r,outerNewLine:!0}},code:function(t){return[{type:"openTag",tagName:"code"},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t.info,n=e?e.split(/\s+/):[],r=[];return n.length>0&&n[0].length>0&&r.push("language-"+eY(n[0])),[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:r},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(t,e){var n=e.entering;if(n){var r=t,i=r.title,o=r.destination;return{type:"openTag",tagName:"a",attributes:Do({href:eY(o)},i&&{title:eY(i)})}}return{type:"closeTag",tagName:"a"}},image:function(t,e){var n=e.getChildrenText,r=e.skipChildren,i=t,o=i.title,s=i.destination;return r(),{type:"openTag",tagName:"img",selfClose:!0,attributes:Do({src:eY(s),alt:n(t)},o&&{title:eY(o)})}},customBlock:function(t,e,n){var r=t.info.trim().toLowerCase(),i=n[r];if(i)try{return i(t,e)}catch(o){console.warn("[@toast-ui/editor] - The error occurred when "+r+" block node was parsed in markdown renderer: "+o)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(t){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(t,e,n){var r=t,i=r.info,o=r.firstChild,s=i.trim().toLowerCase(),a=n[s],l=e.entering;if(a)try{return a(t,e)}catch(c){console.warn("[@toast-ui/editor] - The error occurred when "+s+" inline node was parsed in markdown renderer: "+c)}return l?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+i+(o?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},qZ={strike:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"del"}},item:function(t,e){var n=e.entering,r=t.listData,i=r.checked,o=r.task;if(n){var s={type:"openTag",tagName:"li",outerNewLine:!0};return o?[s,{type:"openTag",tagName:"input",selfClose:!0,attributes:Do(Do({},i&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:s}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(t,e){var n=e.entering;if(n)return{type:"openTag",tagName:"tr",outerNewLine:!0};var r=[];if(t.lastChild)for(var i=t.parent.parent.columns.length,o=t.lastChild.endIdx,s=o+1;s<i;s+=1)r.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0});return r.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),r},tableCell:function(t,e){var n=e.entering;if(t.ignored)return{type:"text",content:""};var r=t.parent.parent,i="tableHead"===r.type?"th":"td",o=r.parent,s=o.columns[t.startIdx],a=(null===s||void 0===s?void 0:s.align)?{align:s.align}:null;return n?Do({type:"openTag",tagName:i,outerNewLine:!0},a&&{attributes:a}):{type:"closeTag",tagName:i,outerNewLine:!0}}},WZ={softbreak:"\n",gfm:!1,tagFilter:!1,nodeId:!1};function UZ(t){var e=[],n=t.walker(),r=null;while(r=n.next()){var i=r.node;"text"===i.type&&e.push(i.literal)}return e.join("")}var $Z=function(){function t(t){this.buffer=[],this.options=Do(Do({},WZ),t),this.convertors=this.createConvertors(),delete this.options.convertors}return t.prototype.createConvertors=function(){var t=Do({},HZ);if(this.options.gfm&&(t=Do(Do({},t),qZ)),this.options.convertors){var e=this.options.convertors,n=Object.keys(e),r=Do(Do({},HZ),qZ);n.forEach((function(n){var i=t[n],o=e[n],s=-1===Object.keys(r).indexOf(n)?n.toLowerCase():n;t[s]=i?function(t,e,n){return e.origin=function(){return i(t,e,n)},o(t,e)}:o}))}return t},t.prototype.getConvertors=function(){return this.convertors},t.prototype.getOptions=function(){return this.options},t.prototype.render=function(t){var e=this;this.buffer=[];var n=t.walker(),r=null,i=function(){var t=r.node,i=r.entering,s=o.convertors[t.type];if(!s)return"continue";var a=!1,l={entering:i,leaf:!oY(t),options:o.options,getChildrenText:UZ,skipChildren:function(){a=!0}},c=AY(t)||DY(t)?s(t,l,o.convertors):s(t,l);if(c){var h=Array.isArray(c)?c:[c];h.forEach((function(n,r){"openTag"===n.type&&e.options.nodeId&&0===r&&(n.attributes||(n.attributes={}),n.attributes["data-nodeid"]=String(t.id)),e.renderHTMLNode(n)})),a&&(n.resumeAt(t,!1),n.next())}},o=this;while(r=n.next())i();return this.addNewLine(),this.buffer.join("")},t.prototype.renderHTMLNode=function(t){switch(t.type){case"openTag":case"closeTag":this.renderElementNode(t);break;case"text":this.renderTextNode(t);break;case"html":this.renderRawHtmlNode(t);break}},t.prototype.generateOpenTagString=function(t){var e=this,n=t.tagName,r=t.classNames,i=t.attributes;this.buffer.push("<"+n),r&&r.length>0&&this.buffer.push(' class="'+r.join(" ")+'"'),i&&Object.keys(i).forEach((function(t){var n=i[t];e.buffer.push(" "+t+'="'+n+'"')})),t.selfClose&&this.buffer.push(" /"),this.buffer.push(">")},t.prototype.generateCloseTagString=function(t){var e=t.tagName;this.buffer.push("</"+e+">")},t.prototype.addNewLine=function(){this.buffer.length&&"\n"!==cK(cK(this.buffer))&&this.buffer.push("\n")},t.prototype.addOuterNewLine=function(t){t.outerNewLine&&this.addNewLine()},t.prototype.addInnerNewLine=function(t){t.innerNewLine&&this.addNewLine()},t.prototype.renderTextNode=function(t){this.buffer.push(eY(t.content))},t.prototype.renderRawHtmlNode=function(t){this.addOuterNewLine(t),this.buffer.push(t.content),this.addOuterNewLine(t)},t.prototype.renderElementNode=function(t){"openTag"===t.type?(this.addOuterNewLine(t),this.generateOpenTagString(t),t.selfClose?this.addOuterNewLine(t):this.addInnerNewLine(t)):(this.addInnerNewLine(t),this.generateCloseTagString(t),this.addOuterNewLine(t))},t}();
/*! @license DOMPurify 2.3.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.3/LICENSE */function VZ(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var GZ=Object.hasOwnProperty,YZ=Object.setPrototypeOf,KZ=Object.isFrozen,XZ=Object.getPrototypeOf,ZZ=Object.getOwnPropertyDescriptor,JZ=Object.freeze,QZ=Object.seal,tJ=Object.create,eJ="undefined"!==typeof Reflect&&Reflect,nJ=eJ.apply,rJ=eJ.construct;nJ||(nJ=function(t,e,n){return t.apply(e,n)}),JZ||(JZ=function(t){return t}),QZ||(QZ=function(t){return t}),rJ||(rJ=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(VZ(e))))});var iJ=pJ(Array.prototype.forEach),oJ=pJ(Array.prototype.pop),sJ=pJ(Array.prototype.push),aJ=pJ(String.prototype.toLowerCase),lJ=pJ(String.prototype.match),cJ=pJ(String.prototype.replace),hJ=pJ(String.prototype.indexOf),uJ=pJ(String.prototype.trim),dJ=pJ(RegExp.prototype.test),fJ=mJ(TypeError);function pJ(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return nJ(t,e,r)}}function mJ(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return rJ(t,n)}}function gJ(t,e){YZ&&YZ(t,null);var n=e.length;while(n--){var r=e[n];if("string"===typeof r){var i=aJ(r);i!==r&&(KZ(e)||(e[n]=i),r=i)}t[r]=!0}return t}function vJ(t){var e=tJ(null),n=void 0;for(n in t)nJ(GZ,t,[n])&&(e[n]=t[n]);return e}function yJ(t,e){while(null!==t){var n=ZZ(t,e);if(n){if(n.get)return pJ(n.get);if("function"===typeof n.value)return pJ(n.value)}t=XZ(t)}function r(t){return console.warn("fallback value for",t),null}return r}var bJ=JZ(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wJ=JZ(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xJ=JZ(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),CJ=JZ(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),EJ=JZ(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),kJ=JZ(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),NJ=JZ(["#text"]),OJ=JZ(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),TJ=JZ(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),MJ=JZ(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),SJ=JZ(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),LJ=QZ(/\{\{[\s\S]*|[\s\S]*\}\}/gm),AJ=QZ(/<%[\s\S]*|[\s\S]*%>/gm),DJ=QZ(/^data-[\-\w.\u00B7-\uFFFF]/),_J=QZ(/^aria-[\-\w]+$/),RJ=QZ(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),PJ=QZ(/^(?:\w+script|data):/i),IJ=QZ(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),jJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function zJ(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var BJ=function(){return"undefined"===typeof window?null:window},FJ=function(t,e){if("object"!==("undefined"===typeof t?"undefined":jJ(t))||"function"!==typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(t){return t}})}catch(o){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function HJ(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BJ(),e=function(t){return HJ(t)};if(e.version="2.3.3",e.removed=[],!t||!t.document||9!==t.document.nodeType)return e.isSupported=!1,e;var n=t.document,r=t.document,i=t.DocumentFragment,o=t.HTMLTemplateElement,s=t.Node,a=t.Element,l=t.NodeFilter,c=t.NamedNodeMap,h=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,u=t.Text,d=t.Comment,f=t.DOMParser,p=t.trustedTypes,m=a.prototype,g=yJ(m,"cloneNode"),v=yJ(m,"nextSibling"),y=yJ(m,"childNodes"),b=yJ(m,"parentNode");if("function"===typeof o){var w=r.createElement("template");w.content&&w.content.ownerDocument&&(r=w.content.ownerDocument)}var x=FJ(p,n),C=x&&tt?x.createHTML(""):"",E=r,k=E.implementation,N=E.createNodeIterator,O=E.createDocumentFragment,T=E.getElementsByTagName,M=n.importNode,S={};try{S=vJ(r).documentMode?r.documentMode:{}}catch(Bt){}var L={};e.isSupported="function"===typeof b&&k&&"undefined"!==typeof k.createHTMLDocument&&9!==S;var A=LJ,D=AJ,_=DJ,R=_J,P=PJ,I=IJ,j=RJ,z=null,B=gJ({},[].concat(zJ(bJ),zJ(wJ),zJ(xJ),zJ(EJ),zJ(NJ))),F=null,H=gJ({},[].concat(zJ(OJ),zJ(TJ),zJ(MJ),zJ(SJ))),q=null,W=null,U=!0,$=!0,V=!1,G=!1,Y=!1,K=!1,X=!1,Z=!1,J=!1,Q=!0,tt=!1,et=!0,nt=!0,rt=!1,it={},ot=null,st=gJ({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),at=null,lt=gJ({},["audio","video","img","source","image","track"]),ct=null,ht=gJ({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ut="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",ft="http://www.w3.org/1999/xhtml",pt=ft,mt=!1,gt=void 0,vt=["application/xhtml+xml","text/html"],yt="text/html",bt=void 0,wt=null,xt=r.createElement("form"),Ct=function(t){wt&&wt===t||(t&&"object"===("undefined"===typeof t?"undefined":jJ(t))||(t={}),t=vJ(t),z="ALLOWED_TAGS"in t?gJ({},t.ALLOWED_TAGS):B,F="ALLOWED_ATTR"in t?gJ({},t.ALLOWED_ATTR):H,ct="ADD_URI_SAFE_ATTR"in t?gJ(vJ(ht),t.ADD_URI_SAFE_ATTR):ht,at="ADD_DATA_URI_TAGS"in t?gJ(vJ(lt),t.ADD_DATA_URI_TAGS):lt,ot="FORBID_CONTENTS"in t?gJ({},t.FORBID_CONTENTS):st,q="FORBID_TAGS"in t?gJ({},t.FORBID_TAGS):{},W="FORBID_ATTR"in t?gJ({},t.FORBID_ATTR):{},it="USE_PROFILES"in t&&t.USE_PROFILES,U=!1!==t.ALLOW_ARIA_ATTR,$=!1!==t.ALLOW_DATA_ATTR,V=t.ALLOW_UNKNOWN_PROTOCOLS||!1,G=t.SAFE_FOR_TEMPLATES||!1,Y=t.WHOLE_DOCUMENT||!1,Z=t.RETURN_DOM||!1,J=t.RETURN_DOM_FRAGMENT||!1,Q=!1!==t.RETURN_DOM_IMPORT,tt=t.RETURN_TRUSTED_TYPE||!1,X=t.FORCE_BODY||!1,et=!1!==t.SANITIZE_DOM,nt=!1!==t.KEEP_CONTENT,rt=t.IN_PLACE||!1,j=t.ALLOWED_URI_REGEXP||j,pt=t.NAMESPACE||ft,gt=gt=-1===vt.indexOf(t.PARSER_MEDIA_TYPE)?yt:t.PARSER_MEDIA_TYPE,bt="application/xhtml+xml"===gt?function(t){return t}:aJ,G&&($=!1),J&&(Z=!0),it&&(z=gJ({},[].concat(zJ(NJ))),F=[],!0===it.html&&(gJ(z,bJ),gJ(F,OJ)),!0===it.svg&&(gJ(z,wJ),gJ(F,TJ),gJ(F,SJ)),!0===it.svgFilters&&(gJ(z,xJ),gJ(F,TJ),gJ(F,SJ)),!0===it.mathMl&&(gJ(z,EJ),gJ(F,MJ),gJ(F,SJ))),t.ADD_TAGS&&(z===B&&(z=vJ(z)),gJ(z,t.ADD_TAGS)),t.ADD_ATTR&&(F===H&&(F=vJ(F)),gJ(F,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&gJ(ct,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(ot===st&&(ot=vJ(ot)),gJ(ot,t.FORBID_CONTENTS)),nt&&(z["#text"]=!0),Y&&gJ(z,["html","head","body"]),z.table&&(gJ(z,["tbody"]),delete q.tbody),JZ&&JZ(t),wt=t)},Et=gJ({},["mi","mo","mn","ms","mtext"]),kt=gJ({},["foreignobject","desc","title","annotation-xml"]),Nt=gJ({},wJ);gJ(Nt,xJ),gJ(Nt,CJ);var Ot=gJ({},EJ);gJ(Ot,kJ);var Tt=function(t){var e=b(t);e&&e.tagName||(e={namespaceURI:ft,tagName:"template"});var n=aJ(t.tagName),r=aJ(e.tagName);if(t.namespaceURI===dt)return e.namespaceURI===ft?"svg"===n:e.namespaceURI===ut?"svg"===n&&("annotation-xml"===r||Et[r]):Boolean(Nt[n]);if(t.namespaceURI===ut)return e.namespaceURI===ft?"math"===n:e.namespaceURI===dt?"math"===n&&kt[r]:Boolean(Ot[n]);if(t.namespaceURI===ft){if(e.namespaceURI===dt&&!kt[r])return!1;if(e.namespaceURI===ut&&!Et[r])return!1;var i=gJ({},["title","style","font","a","script"]);return!Ot[n]&&(i[n]||!Nt[n])}return!1},Mt=function(t){sJ(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch(Bt){try{t.outerHTML=C}catch(Bt){t.remove()}}},St=function(t,n){try{sJ(e.removed,{attribute:n.getAttributeNode(t),from:n})}catch(Bt){sJ(e.removed,{attribute:null,from:n})}if(n.removeAttribute(t),"is"===t&&!F[t])if(Z||J)try{Mt(n)}catch(Bt){}else try{n.setAttribute(t,"")}catch(Bt){}},Lt=function(t){var e=void 0,n=void 0;if(X)t="<remove></remove>"+t;else{var i=lJ(t,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=x?x.createHTML(t):t;if(pt===ft)try{e=(new f).parseFromString(o,gt)}catch(Bt){}if(!e||!e.documentElement){e=k.createDocument(pt,"template",null);try{e.documentElement.innerHTML=mt?"":o}catch(Bt){}}var s=e.body||e.documentElement;return t&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),pt===ft?T.call(e,Y?"html":"body")[0]:Y?e.documentElement:s},At=function(t){return N.call(t.ownerDocument||t,t,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Dt=function(t){return!(t instanceof u||t instanceof d)&&!("string"===typeof t.nodeName&&"string"===typeof t.textContent&&"function"===typeof t.removeChild&&t.attributes instanceof h&&"function"===typeof t.removeAttribute&&"function"===typeof t.setAttribute&&"string"===typeof t.namespaceURI&&"function"===typeof t.insertBefore)},_t=function(t){return"object"===("undefined"===typeof s?"undefined":jJ(s))?t instanceof s:t&&"object"===("undefined"===typeof t?"undefined":jJ(t))&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName},Rt=function(t,n,r){L[t]&&iJ(L[t],(function(t){t.call(e,n,r,wt)}))},Pt=function(t){var n=void 0;if(Rt("beforeSanitizeElements",t,null),Dt(t))return Mt(t),!0;if(lJ(t.nodeName,/[\u0080-\uFFFF]/))return Mt(t),!0;var r=bt(t.nodeName);if(Rt("uponSanitizeElement",t,{tagName:r,allowedTags:z}),!_t(t.firstElementChild)&&(!_t(t.content)||!_t(t.content.firstElementChild))&&dJ(/<[/\w]/g,t.innerHTML)&&dJ(/<[/\w]/g,t.textContent))return Mt(t),!0;if("select"===r&&dJ(/<template/i,t.innerHTML))return Mt(t),!0;if(!z[r]||q[r]){if(nt&&!ot[r]){var i=b(t)||t.parentNode,o=y(t)||t.childNodes;if(o&&i)for(var s=o.length,l=s-1;l>=0;--l)i.insertBefore(g(o[l],!0),v(t))}return Mt(t),!0}return t instanceof a&&!Tt(t)?(Mt(t),!0):"noscript"!==r&&"noembed"!==r||!dJ(/<\/no(script|embed)/i,t.innerHTML)?(G&&3===t.nodeType&&(n=t.textContent,n=cJ(n,A," "),n=cJ(n,D," "),t.textContent!==n&&(sJ(e.removed,{element:t.cloneNode()}),t.textContent=n)),Rt("afterSanitizeElements",t,null),!1):(Mt(t),!0)},It=function(t,e,n){if(et&&("id"===e||"name"===e)&&(n in r||n in xt))return!1;if($&&!W[e]&&dJ(_,e));else if(U&&dJ(R,e));else{if(!F[e]||W[e])return!1;if(ct[e]);else if(dJ(j,cJ(n,I,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==hJ(n,"data:")||!at[t]){if(V&&!dJ(P,cJ(n,I,"")));else if(n)return!1}else;}return!0},jt=function(t){var n=void 0,r=void 0,i=void 0,o=void 0;Rt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F};o=s.length;while(o--){n=s[o];var l=n,c=l.name,h=l.namespaceURI;if(r=uJ(n.value),i=bt(c),a.attrName=i,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,Rt("uponSanitizeAttribute",t,a),r=a.attrValue,!a.forceKeepAttr&&(St(c,t),a.keepAttr))if(dJ(/\/>/i,r))St(c,t);else{G&&(r=cJ(r,A," "),r=cJ(r,D," "));var u=bt(t.nodeName);if(It(u,i,r))try{h?t.setAttributeNS(h,c,r):t.setAttribute(c,r),oJ(e.removed)}catch(Bt){}}}Rt("afterSanitizeAttributes",t,null)}},zt=function t(e){var n=void 0,r=At(e);Rt("beforeSanitizeShadowDOM",e,null);while(n=r.nextNode())Rt("uponSanitizeShadowNode",n,null),Pt(n)||(n.content instanceof i&&t(n.content),jt(n));Rt("afterSanitizeShadowDOM",e,null)};return e.sanitize=function(r,o){var a=void 0,l=void 0,c=void 0,h=void 0,u=void 0;if(mt=!r,mt&&(r="\x3c!--\x3e"),"string"!==typeof r&&!_t(r)){if("function"!==typeof r.toString)throw fJ("toString is not a function");if(r=r.toString(),"string"!==typeof r)throw fJ("dirty is not a string, aborting")}if(!e.isSupported){if("object"===jJ(t.toStaticHTML)||"function"===typeof t.toStaticHTML){if("string"===typeof r)return t.toStaticHTML(r);if(_t(r))return t.toStaticHTML(r.outerHTML)}return r}if(K||Ct(o),e.removed=[],"string"===typeof r&&(rt=!1),rt);else if(r instanceof s)a=Lt("\x3c!----\x3e"),l=a.ownerDocument.importNode(r,!0),1===l.nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!Z&&!G&&!Y&&-1===r.indexOf("<"))return x&&tt?x.createHTML(r):r;if(a=Lt(r),!a)return Z?null:C}a&&X&&Mt(a.firstChild);var d=At(rt?r:a);while(c=d.nextNode())3===c.nodeType&&c===h||Pt(c)||(c.content instanceof i&&zt(c.content),jt(c),h=c);if(h=null,rt)return r;if(Z){if(J){u=O.call(a.ownerDocument);while(a.firstChild)u.appendChild(a.firstChild)}else u=a;return Q&&(u=M.call(n,u,!0)),u}var f=Y?a.outerHTML:a.innerHTML;return G&&(f=cJ(f,A," "),f=cJ(f,D," ")),x&&tt?x.createHTML(f):f},e.setConfig=function(t){Ct(t),K=!0},e.clearConfig=function(){wt=null,K=!1},e.isValidAttribute=function(t,e,n){wt||Ct({});var r=bt(t),i=bt(e);return It(r,i,n)},e.addHook=function(t,e){"function"===typeof e&&(L[t]=L[t]||[],sJ(L[t],e))},e.removeHook=function(t){L[t]&&oJ(L[t])},e.removeHooks=function(t){L[t]&&(L[t]=[])},e.removeAllHooks=function(){L={}},e}var qJ=HJ(),WJ=["iframe","embed"],UJ=[];function $J(t){At(WJ,t)&&UJ.push(t.toLowerCase())}function VJ(t,e){return qJ.sanitize(t,f({ADD_TAGS:UJ,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},e))}function GJ(t,e){return t.literal.replace(new RegExp("(<\\s*"+e+"[^>]*>)|(</"+e+"\\s*[>])","ig"),"").trim()}function YJ(t){t=t.match(on)[0];var e=t.match(new RegExp(tn,"g"));return e?e.reduce((function(t,e){var n=e.trim().split("="),r=n[0],i=n.slice(1);return i.length&&(t[r]=i.join("=").replace(/'|"/g,"").trim()),t}),{}):{}}function KJ(t){return Jt(t.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{})}function XJ(t,e,n,r){var i=r.getToDOMNode(e)(t),o=n(i.outerHTML),s=document.createElement("div");s.innerHTML=o,i=s.firstChild;var a=KJ(i);return{dom:i,htmlAttrs:a}}var ZJ={htmlBlock:function(t,e,n){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:KJ(t),childrenHTML:t.innerHTML}}}],toDOM:function(r){var i=XJ(r,t,e,n),o=i.dom,s=i.htmlAttrs;return s.class=s.class?s.class+" html-block":"html-block",p([t,s],Jt(o.childNodes))}}},htmlInline:function(t,e,n){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:KJ(t)}}}],toDOM:function(r){var i=XJ(r,t,e,n).htmlAttrs;return[t,i,0]}}}};function JJ(t,e,n){var r={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach((function(i){t[i]&&Object.keys(t[i]).forEach((function(t){var o="htmlBlock"===i?"nodes":"marks";$J(t),r[o][t]=ZJ[i](t,e,n)}))})),r}var QJ=/^\s*<\s*\//,tQ={paragraph:function(t,e){var n=e.entering,r=e.origin,i=e.options;return i.nodeId?{type:n?"openTag":"closeTag",outerNewLine:!0,tagName:"p"}:r()},softbreak:function(t){var e=t.prev&&"htmlInline"===t.prev.type,n=e&&/<br ?\/?>/.test(t.prev.literal),r=n?"\n":"<br>\n";return{type:"html",content:r}},item:function(t,e){var n=e.entering;if(n){var r={},i=[];return t.listData.task&&(r["data-task"]="",i.push("task-list-item"),t.listData.checked&&(i.push("checked"),r["data-task-checked"]="")),{type:"openTag",tagName:"li",classNames:i,attributes:r,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(t){var e={"data-backticks":String(t.tickCount)};return[{type:"openTag",tagName:"code",attributes:e},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t,n=e.fenceLength,r=e.info,i=r?r.split(/\s+/):[],o=[],s={};if(n>3&&(s["data-backticks"]=n),i.length>0&&i[0].length>0){var a=i[0];o.push("lang-"+a),s["data-language"]=a}return[{type:"openTag",tagName:"pre",classNames:o},{type:"openTag",tagName:"code",attributes:s},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(t,e){var n=e.origin,r=e.entering,i=e.skipChildren,o=t.info;if(-1!==o.indexOf("widget")&&r){i();var s=Re(t),a=Se(o,s).outerHTML;return[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:a},{type:"closeTag",tagName:"span"}]}return n()}};function eQ(t,e){var n=f({},tQ);return t&&(n.link=function(e,n){var r=n.entering,i=n.origin,o=i();return r&&(o.attributes=f(f({},o.attributes),t)),o}),e&&Object.keys(e).forEach((function(t){var r=n[t],i=e[t];r&&qn(i)?n[t]=function(t,e){var n=f({},e);return n.origin=function(){return r(t,e)},i(t,n)}:At(["htmlBlock","htmlInline"],t)&&!qn(i)?n[t]=function(t,e){var n=t.literal.match(on);if(n){var r=n[0],o=n[1],s=n[3],a=(o||s).toLowerCase(),l=i[a],c=GJ(t,a);if(l){var h=f({},t);return h.attrs=YJ(r),h.childrenHTML=c,h.type=a,e.entering=!QJ.test(t.literal),l(h,e)}}return e.origin()}:n[t]=i})),n}var nQ=["list","item","blockQuote"],rQ=["UL","OL","BLOCKQUOTE"];function iQ(t,e){var n,r=t.child(e);return!r.childCount||1===r.childCount&&!(null===(n=r.firstChild.text)||void 0===n?void 0:n.trim())}function oQ(t,e,n){var r=oe(e)-1,i=se(e)-1,o=n[r].getBoundingClientRect(),s=n[i].offsetTop-n[r].offsetTop+n[i].clientHeight;return{height:s<=0?n[r].clientHeight:s+sQ(t,n,Math.min(i+1,t.childCount-1)),rect:o}}function sQ(t,e,n){var r=t.childCount-1,i=0;while(n<=r&&iQ(t,n))i+=e[n].clientHeight,n+=1;return i}function aQ(t,e){while(!t.getAttribute("data-nodeid")&&t.parentElement!==e)t=t.parentElement;return t}function lQ(t,e){var n=0;while(t&&t!==e){if(At(rQ,t.tagName)||(n+=t.offsetTop),t.offsetParent===e.offsetParent)break;t=t.parentElement}return n}function cQ(t,e){var n=e,r=null;while(n){var i=n.firstElementChild;if(!i)break;var o=hQ(i,t,lQ(n,e));r=n,n=o}var s=n||r;return s===e?null:s}function hQ(t,e,n){return t&&e>n+t.offsetTop?hQ(t.nextElementSibling,e,n)||t:null}function uQ(t,e,n,r){var i=Math.min((t-e)/n,1);return i*r}function dQ(t,e){var n=t.querySelector('[data-nodeid="'+e.id+'"]');while(!n||he(e))e=e.parent,n=t.querySelector('[data-nodeid="'+e.id+'"]');return fQ({mdNode:e,el:n})}function fQ(t){var e=t.mdNode,n=t.el;while((At(nQ,e.type)||"table"===e.type)&&e.firstChild)e=e.firstChild,n=n.firstElementChild;return{mdNode:e,el:n}}var pQ={};function mQ(t,e){pQ[t]=pQ[t]||{},pQ[t].height=e}function gQ(t,e){pQ[t]=pQ[t]||{},pQ[t].offsetTop=e}function vQ(t){return pQ[t]&&pQ[t].height}function yQ(t){return pQ[t]&&pQ[t].offsetTop}function bQ(t){t&&(delete pQ[Number(t.getAttribute("data-nodeid"))],Jt(t.children).forEach((function(t){bQ(t)})))}function wQ(t,e,n){var r=vQ(n),i=yQ(n),o=r||t.clientHeight,s=i||lQ(t,e)||t.offsetTop;return r||mQ(n,o),i||gQ(n,s),{nodeHeight:o,offsetTop:s}}var xQ=un("md-preview-highlight");function CQ(t,e){var n=t.firstChild;while(n&&n.next){if(ae(n.next)>e+1)break;n=n.next}return n}var EQ=function(){function t(t,e){var n=document.createElement("div");this.el=n,this.eventEmitter=t,this.isViewer=!!e.isViewer,this.el.className=un("md-preview");var r=e.linkAttributes,i=e.customHTMLRenderer,o=e.sanitizer,s=e.highlight,a=void 0!==s&&s;this.renderer=new $Z({gfm:!0,nodeId:!0,convertors:eQ(r,i)}),this.cursorNodeId=null,this.sanitizer=o,this.initEvent(a),this.initContentSection(),this.isViewer&&(this.previewContent.style.overflowWrap="break-word")}return t.prototype.initContentSection=function(){this.previewContent=xn('<div class="'+un("contents")+'"></div>'),this.isViewer||this.el.appendChild(this.previewContent)},t.prototype.toggleActive=function(t){wn(this.el,"active",t)},t.prototype.initEvent=function(t){var e=this;this.eventEmitter.listen("updatePreview",this.update.bind(this)),this.isViewer||(t&&(this.eventEmitter.listen("changeToolbarState",(function(t){var n=t.mdNode,r=t.cursorPos;e.updateCursorNode(n,r)})),this.eventEmitter.listen("blur",(function(){e.removeHighlight()}))),So(this.el,"scroll",(function(t){e.eventEmitter.emit("scroll","preview",cQ(t.target.scrollTop,e.previewContent))})),this.eventEmitter.listen("changePreviewTabPreview",(function(){return e.toggleActive(!0)})),this.eventEmitter.listen("changePreviewTabWrite",(function(){return e.toggleActive(!1)})))},t.prototype.removeHighlight=function(){if(this.cursorNodeId){var t=this.getElementByNodeId(this.cursorNodeId);t&&it(t,xQ)}},t.prototype.updateCursorNode=function(t,e){t&&(t=ve(t,(function(t){return!ge(t)})),"tableRow"===t.type?t=CQ(t,e[1]):"tableBody"===t.type&&(t=null));var n=t?t.id:null;if(this.cursorNodeId!==n){var r=this.getElementByNodeId(this.cursorNodeId),i=this.getElementByNodeId(n);r&&it(r,xQ),i&&J(i,xQ),this.cursorNodeId=n}},t.prototype.getElementByNodeId=function(t){return t?this.previewContent.querySelector('[data-nodeid="'+t+'"]'):null},t.prototype.update=function(t){var e=this;t.forEach((function(t){return e.replaceRangeNodes(t)})),this.eventEmitter.emit("afterPreviewRender",this)},t.prototype.replaceRangeNodes=function(t){var e=this,n=t.nodes,r=t.removedNodeRange,i=this.previewContent,o=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(n.map((function(t){return e.renderer.render(t)})).join("")));if(r){var s=r.id,a=s[0],l=s[1],c=this.getElementByNodeId(a),h=this.getElementByNodeId(l);if(c){c.insertAdjacentHTML("beforebegin",o);var u=c;while(u&&u!==h){var d=u.nextElementSibling;yn(u),bQ(u),u=d}(null===u||void 0===u?void 0:u.parentNode)&&(yn(u),bQ(u))}}else i.insertAdjacentHTML("afterbegin",o)},t.prototype.getRenderer=function(){return this.renderer},t.prototype.destroy=function(){Co(this.el,"scroll"),this.el=null},t.prototype.getElement=function(){return this.el},t.prototype.getHTML=function(){return Tn(this.previewContent.innerHTML)},t.prototype.setHTML=function(t){this.previewContent.innerHTML=t},t.prototype.setHeight=function(t){R(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){R(this.el,{minHeight:t+"px"})},t}();function kQ(t,e){var n=t.depth;while(n){var r=t.node(n);if(e(r,n))return{node:r,depth:n,offset:n>0?t.before(n):0};n-=1}return null}function NQ(t){return!!kQ(t,(function(t){var e=t.type;return"listItem"===e.name||"bulletList"===e.name||"orderedList"===e.name}))}function OQ(t){return!!kQ(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function TQ(t){return kQ(t,(function(t){var e=t.type;return"listItem"===e.name}))}function MQ(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}function SQ(t){return Object.keys(t).reduce((function(e,n){return"rawHTML"!==n&&t[n]&&(n="className"===n?"class":n,e[n]=t[n]),e}),{})}function LQ(t){return{tag:t,getAttrs:function(t){return["rawHTML","colspan","rowspan","extended"].reduce((function(e,n){var r="rawHTML"===n?"data-raw-html":n,i=t.getAttribute(r);return i&&(e[n]=At(["rawHTML","extended"],n)?i:Number(i)),e}),{})}}}function AQ(){return{htmlAttrs:{default:null},classNames:{default:null}}}function DQ(t){var e=t.htmlAttrs,n=t.classNames;return f(f({},e),{class:n?n.join(" "):null})}function _Q(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.contentMatchAt(r).findWrapping(e);if(o){var s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}return null}function RQ(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(s){for(var a=s.length?s[s.length-1]:e,l=a.contentMatch,c=r;l&&c<i;c+=1)l=l.matchType(n.child(c).type);if(l&&l.validEnd)return s}return null}function PQ(t,e,n,r){var i=_Q(t,n),o=RQ(e,n);if(i&&o){var s=i.map((function(t){return{type:t}})),a=o.map((function(t){return{type:t,attrs:r}}));return s.concat({type:n}).concat(a)}return null}function IQ(t,e,n,i,s){for(var a=e.start,l=e.end,c=e.startIndex,h=e.endIndex,u=e.parent,d=r["c"].empty,f=n.length-1;f>=0;f-=1)d=r["c"].from(n[f].type.create(n[f].attrs,d));t.step(new o["b"](a-(i?2:0),l,a,l,new r["j"](d,0,0),n.length,!0));var p=0;for(f=0;f<n.length;f+=1)if(n[f].type===s){p=f+1;break}for(var m=n.length-p,g=a+n.length-(i?2:0),v=(f=c,h);f<v;f+=1){var y=f===c;!y&&Object(o["g"])(t.doc,g,m)&&(t.split(g,m),g+=2*m),g+=u.child(f).nodeSize}return t}function jQ(t,e,n,i){var o=e.$from,s=e.$to,a=e.depth,l=e,c=!1;if(a>=2&&o.node(a-1).type.compatibleContent(n)&&0===e.startIndex&&o.index(a-1)){var h=t.doc.resolve(e.start-2);l=new r["g"](h,h,a),e.endIndex<e.parent.childCount&&(e=new r["g"](o,t.doc.resolve(s.end(a)),a)),c=!0}var u=PQ(l,e,n,i);return u?IQ(t,e,u,c,n):t}function zQ(t,e){var n=t.resolve(e);while("paragraph"!==n.node().type.name)e-=2,n=t.resolve(e);return TQ(n)}function BQ(t,e){var n=e.$from,r=e.$to,i=TQ(n),o=TQ(r);if(i&&o)while(o){var s=o.offset,a=o.node,l={task:!a.attrs.task,checked:!1};if(t.setNodeMarkup(s,null,l),s===i.offset)break;o=zQ(t.doc,s)}return t}function FQ(t,e,n){var r=e.$from,i=e.$to,o=TQ(r),s=TQ(i);if(o&&s)while(s){var a=s.offset,l=s.node,c=s.depth;l.attrs.task&&t.setNodeMarkup(a,null,{task:!1,checked:!1});var h=t.doc.resolve(a);if(h.parent.type!==n){var u=h.before(c-1);t.setNodeMarkup(u,n)}if(a===o.offset)break;s=zQ(t.doc,a)}return t}function HQ(t){return function(e,n){var r=e.selection,i=e.tr,o=r.$from,s=r.$to,a=o.blockRange(s);if(a){var l=NQ(o)?FQ(i,a,t):jQ(i,a,t);return n(l),!0}return!1}}function qQ(){return function(t,e){var n=t.selection,r=t.tr,i=t.schema,o=n.$from,s=n.$to,a=o.blockRange(s);if(a){var l=NQ(o)?BQ(r,a):jQ(r,a,i.nodes.bulletList,{task:!0});return e(l),!0}return!1}}function WQ(t){return function(e,n){var i=e.tr,s=e.selection,a=s.$from,l=s.$to,c=a.blockRange(l,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));if(c&&c.startIndex>0){var h=c.parent,u=h.child(c.startIndex-1);if(u.type!==t)return!1;var d=u.lastChild&&u.lastChild.type===h.type,f=d?r["c"].from(t.create()):null,p=new r["j"](r["c"].from(t.create(null,r["c"].from(h.type.create(null,f)))),d?3:1,0),m=c.start,g=c.end;return i.step(new o["b"](m-(d?3:1),g,m,g,p,1,!0)),n(i),!0}return!1}}function UQ(t,e,n){var i=e.$from,s=e.$to,a=e.end,l=e.depth,c=e.parent,h=s.end(l);return a<h&&(t.step(new o["b"](a-1,h,a,h,new r["j"](r["c"].from(n.create(null,c.copy())),1,0),1,!0)),e=new r["g"](t.doc.resolve(i.pos),t.doc.resolve(h),l)),t.lift(e,Object(o["k"])(e)),t}function $Q(t,e){for(var n=e.parent,i=e.end,s=e.endIndex-1,a=e.startIndex;s>a;s-=1)i-=n.child(s).nodeSize,t.delete(i-1,i+1);var l=t.doc.resolve(e.start),c=l.nodeAfter,h=0===e.startIndex,u=e.endIndex===n.childCount,d=l.node(-1),f=l.index(-1),p=d.canReplace(f+(h?0:1),f+1,null===c||void 0===c?void 0:c.content.append(u?r["c"].empty:r["c"].from(n)));if(c&&p){var m=l.pos,g=m+c.nodeSize;t.step(new o["b"](m-(h?1:0),g+(u?1:0),m+1,g-1,new r["j"]((h?r["c"].empty:r["c"].from(n.copy(r["c"].empty))).append(u?r["c"].empty:r["c"].from(n.copy(r["c"].empty))),h?0:1,u?0:1),h?0:1))}return t}function VQ(t){return function(e,n){var r=e.tr,i=e.selection,o=i.$from,s=i.$to,a=o.blockRange(s,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));if(a){var l=o.node(a.depth-1).type===t,c=l?UQ(r,a,t):$Q(r,a);return n(c),!0}return!1}}function GQ(t){return function(e,n){var i=e.tr,a=e.selection,l=a.$from,c=a.$to;if(l.depth<2||!l.sameParent(c))return!1;var h=l.node(-1);if(h.type!==t)return!1;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==t||l.index(-2)!==l.node(-2).childCount-1)return!1;for(var u=l.index(-1)>0,d=r["c"].empty,f=l.depth-(u?1:2);f>=l.depth-3;f-=1)d=r["c"].from(l.node(f).copy(d));return d=d.append(r["c"].from(t.createAndFill())),i.replace(u?l.before():l.before(-1),l.after(-3),new r["j"](d,u?3:2,2)),i.setSelection(s["f"].near(i.doc.resolve(l.pos+(u?3:2)))),n(i),!0}var p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m=p&&[null,{type:p}];return i.delete(l.pos,c.pos),!!Object(o["g"])(i.doc,l.pos,2,m)&&(i.split(l.pos,2,m),n(i),!0)}}function YQ(){return function(){return function(t,e){var n=t.selection,r=t.schema,i=n.$from,o=n.$to,s=i.blockRange(o);return!(!s||!NQ(i))&&WQ(r.nodes.listItem)(t,e)}}}function KQ(){return function(){return function(t,e){var n=t.selection,r=t.schema,i=n.$from,o=n.$to,s=i.blockRange(o);return!(!s||!NQ(i))&&VQ(r.nodes.listItem)(t,e)}}}function XQ(){return{indent:YQ(),outdent:KQ()}}var ZQ=new Map,JQ=function(){function t(t,e,n,r){this.table=t,this.tableRows=e,this.tableStartPos=n,this.rowInfo=r}return t.create=function(e){var n=kQ(e,(function(t){var e=t.type;return"table"===e.name}));if(n){var r=n.node,i=n.depth,o=n.offset,s=ZQ.get(r);if((null===s||void 0===s?void 0:s.tableStartPos)===o+1)return s;var a=[],l=e.start(i),c=r.child(0),h=r.child(1),u=QQ(c,l),d=QQ(h,l+c.nodeSize);c.forEach((function(t){return a.push(t)})),h.forEach((function(t){return a.push(t)}));var f=new t(r,a,l,u.concat(d));return ZQ.set(r,f),f}return null},Object.defineProperty(t.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),t.prototype.getCellInfo=function(t,e){return this.rowInfo[t][e]},t.prototype.posAt=function(t,e){for(var n=0,r=this.tableStartPos;;n+=1){var i=r+this.tableRows[n].nodeSize;if(n===t){var o=e;while(o<this.totalColumnCount&&this.rowInfo[n][o].offset<r)o+=1;return o===this.totalColumnCount?i:this.rowInfo[n][o].offset}r=i}},t.prototype.getNodeAndPos=function(t,e){var n=this.rowInfo[t][e];return{node:this.table.nodeAt(n.offset-this.tableStartOffset),pos:n.offset}},t.prototype.extendedRowspan=function(t,e){return!1},t.prototype.extendedColspan=function(t,e){return!1},t.prototype.getRowspanCount=function(t,e){return 0},t.prototype.getColspanCount=function(t,e){return 0},t.prototype.decreaseColspanCount=function(t,e){return 0},t.prototype.decreaseRowspanCount=function(t,e){return 0},t.prototype.getColspanStartInfo=function(t,e){return null},t.prototype.getRowspanStartInfo=function(t,e){return null},t.prototype.getCellStartOffset=function(t,e){var n=this.rowInfo[t][e].offset;return this.extendedRowspan(t,e)?this.posAt(t,e):n},t.prototype.getCellEndOffset=function(t,e){var n=this.rowInfo[t][e],r=n.offset,i=n.nodeSize;return this.extendedRowspan(t,e)?this.posAt(t,e):r+i},t.prototype.getCellIndex=function(t){for(var e=0;e<this.totalRowCount;e+=1)for(var n=this.rowInfo[e],r=0;r<this.totalColumnCount;r+=1)if(n[r].offset+1>t.pos)return[e,r];return[0,0]},t.prototype.getRectOffsets=function(t,e){var n,r,i;void 0===e&&(e=t),t.pos>e.pos&&(n=[e,t],t=n[0],e=n[1]);var o=this.getCellIndex(t),s=o[0],a=o[1],l=this.getCellIndex(e),c=l[0],h=l[1];return r=Kt(s,c),s=r[0],c=r[1],i=Kt(a,h),a=i[0],h=i[1],this.getSpannedOffsets({startRowIdx:s,startColIdx:a,endRowIdx:c,endColIdx:h})},t.prototype.getSpannedOffsets=function(t){return t},t}(),QQ=function(t,e){var n=[];return t.forEach((function(t,r){var i={rowspanMap:{},colspanMap:{},length:0};t.forEach((function(t,n){var o=t.nodeSize,s=0;while(i[s])s+=1;i[s]={offset:e+r+n+2,nodeSize:o},i.length+=1})),n.push(i)})),n};function t1(t,e){return Yt(JQ.prototype,t),QQ=e,JQ}function e1(t,e,n){for(var r=n.startRowIdx,i=n.startColIdx,o=n.endRowIdx,a=n.endColIdx,l=[],c=r;c<=o;c+=1)for(var h=i;h<=a;h+=1){var u=e.getCellInfo(c,h),d=u.offset,f=u.nodeSize;l.push(new s["g"](t.resolve(d+1),t.resolve(d+f-1)))}return l}function n1(t,e){var n=[];return t.childCount&&n.push(t),e.childCount&&n.push(e),r["c"].from(n)}var r1=function(t){function e(e,n){void 0===n&&(n=e);var r=this,i=e.node(0),o=JQ.create(e),s=o.getRectOffsets(e,n),a=e1(i,o,s);return r=t.call(this,a[0].$from,a[0].$to,a)||this,r.startCell=e,r.endCell=n,r.offsetMap=o,r.isCellSelection=!0,r.visible=!1,r}return d(e,t),e.prototype.map=function(t,n){var r=this.startCell.pos,i=this.endCell.pos,o=t.resolve(n.map(r)),a=t.resolve(n.map(i)),l=JQ.create(o);if(this.offsetMap.totalColumnCount>l.totalColumnCount||this.offsetMap.totalRowCount>l.totalRowCount){var c={tableBody:1,tableRow:2,tableCell:3,paragraph:4},h=c[a.parent.type.name],u=a.end(a.depth-h),d=Math.min(u-4,a.pos);return s["h"].create(t,d)}return new e(o,a)},e.prototype.eq=function(t){return t instanceof e&&t.startCell.pos===this.startCell.pos&&t.endCell.pos===this.endCell.pos},e.prototype.content=function(){for(var t=this.startCell.node(-2),e=this.startCell.start(-2),n=t.child(1).firstChild,i=t.child(0).type.create(),o=t.child(1).type.create(),s=JQ.create(this.startCell),a=s.getRectOffsets(this.startCell,this.endCell),l=a.startRowIdx,c=a.startColIdx,h=a.endRowIdx,u=a.endColIdx,d=!1,f=l;f<=h;f+=1){for(var p=[],m=c;m<=u;m+=1){var g=s.getCellInfo(f,m).offset,v=t.nodeAt(g-e);v&&(d="tableHeadCell"===v.type.name,s.extendedRowspan(f,m)||s.extendedColspan(f,m)?p.push(v.type.create({extended:!0})):p.push(v.copy(v.content)))}var y=n.copy(r["c"].from(p)),b=d?i:o;b.content=b.content.append(r["c"].from(y))}return new r["j"](n1(i,o),1,1)},e.prototype.toJSON=function(){return JSON.stringify(this)},e}(s["f"]);function i1(t,e,n){for(var r=e.nodes,i=r.tableRow,o=r.tableHeadCell,s=r.paragraph,a=[],l=0;l<t;l+=1){var c=n&&n[l],h=s.create(null,c?e.text(c):[]);a.push(o.create(null,h))}return[i.create(null,a)]}function o1(t,e,n,r){for(var i=n.nodes,o=i.tableRow,s=i.tableBodyCell,a=i.paragraph,l=[],c=0;c<t;c+=1){for(var h=[],u=0;u<e;u+=1){var d=r&&r[c*e+u],f=a.create(null,d?n.text(d):[]);h.push(s.create(null,f))}l.push(o.create(null,h))}return l}function s1(t,e,n,r){void 0===r&&(r=null);for(var i=n.nodes,o=i.tableHeadCell,s=i.tableBodyCell,a=i.paragraph,l=0===e?o:s,c=[],h=0;h<t;h+=1)c.push(l.create(r,a.create()));return c}function a1(t,e){while(t&&t!==e){if("TD"===t.nodeName||"TH"===t.nodeName)return t;t=t.parentNode}return null}function l1(t){return kQ(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function c1(t){if(t instanceof s["h"]){var e=t.$anchor,n=l1(e);if(n){var r=e.node(0).resolve(e.before(n.depth));return{anchor:r,head:r}}}var i=t,o=i.startCell,a=i.endCell;return{anchor:o,head:a}}function h1(t){var e;if(t.size){var n=t.content,r=t.openStart,i=t.openEnd;if(1!==n.childCount)return null;while(1===n.childCount&&(r>0&&i>0||"table"===(null===(e=n.firstChild)||void 0===e?void 0:e.type.name)))r-=1,i-=1,n=n.firstChild.content;if("tableHead"===n.firstChild.type.name||"tableBody"===n.firstChild.type.name)return n}return null}function u1(t){var e=t.startRowIdx,n=t.startColIdx,r=t.endRowIdx,i=t.endColIdx,o=r-e+1,s=i-n+1;return{rowCount:o,columnCount:s}}function d1(t,e){return f(f({},t.attrs),e)}var f1=new s["e"]("cellSelection"),p1=2,m1=function(){function t(t){this.view=t,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return t.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},t.prototype.handleMousedown=function(t){var e=a1(t.target,this.view.dom);if(t.button!==p1){if(e){var n=this.getCellPos(t);n&&(this.startCellPos=n),this.bindEvent()}}else t.preventDefault()},t.prototype.handleMousemove=function(t){var e,n=f1.getState(this.view.state),r=this.getCellPos(t),i=this.startCellPos;n?e=this.view.state.doc.resolve(n):i!==r&&(e=i),e&&i&&r&&this.setCellSelection(i,r)},t.prototype.handleMouseup=function(){this.startCellPos=null,this.unbindEvent(),null!==f1.getState(this.view.state)&&this.view.dispatch(this.view.state.tr.setMeta(f1,-1))},t.prototype.bindEvent=function(){var t=this.view.dom;t.addEventListener("mousemove",this.handlers.mousemove),t.addEventListener("mouseup",this.handlers.mouseup)},t.prototype.unbindEvent=function(){var t=this.view.dom;t.removeEventListener("mousemove",this.handlers.mousemove),t.removeEventListener("mouseup",this.handlers.mouseup)},t.prototype.getCellPos=function(t){var e=t.clientX,n=t.clientY,r=this.view.posAtCoords({left:e,top:n});if(r){var i=this.view.state.doc,o=i.resolve(r.pos),s=l1(o);if(s){var a=o.before(s.depth);return i.resolve(a)}}return null},t.prototype.setCellSelection=function(t,e){var n=this.view.state,r=n.selection,i=n.tr,o=null===f1.getState(this.view.state),s=new r1(t,e);if(o||!r.eq(s)){var a=i.setSelection(s);o&&a.setMeta(f1,e.pos),this.view.dispatch(a)}},t.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},t}(),g1=un("cell-selected");function v1(t){var e=t.selection,n=t.doc;if(e instanceof r1){var r=[],o=e.ranges;return o.forEach((function(t){var e=t.$from,n=t.$to;r.push(i["a"].node(e.pos-1,n.pos+1,{class:g1}))})),i["b"].create(n,r)}return null}function y1(){return new s["d"]({key:f1,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(f1);if(n)return-1===n?null:n;if(lt(e)||!t.docChanged)return e;var r=t.mapping.mapResult(e),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:v1,createSelectionBetween:function(t){var e=t.state;return lt(f1.getState(e))?null:e.selection}},view:function(t){return new m1(t)}})}var b1=function(){function t(){this.keys=[],this.values=[]}return t.prototype.getKeyIndex=function(t){return j(t,this.keys)},t.prototype.get=function(t){return this.values[this.getKeyIndex(t)]},t.prototype.set=function(t,e){var n=this.getKeyIndex(t);return n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e)),this},t.prototype.has=function(t){return this.getKeyIndex(t)>-1},t.prototype.delete=function(t){var e=this.getKeyIndex(t);return e>-1&&(this.keys.splice(e,1),this.values.splice(e,1),!0)},t.prototype.forEach=function(t,e){var n=this;void 0===e&&(e=this),this.values.forEach((function(r,i){r&&n.keys[i]&&t.call(e,r,n.keys[i],n)}))},t.prototype.clear=function(){this.keys=[],this.values=[]},t}(),w1="en-US",x1=function(){function t(){this.code=w1,this.langs=new b1}return t.prototype.setCode=function(t){this.code=t||w1},t.prototype.setLanguage=function(t,e){var n=this;t=[].concat(t),t.forEach((function(t){if(n.langs.has(t)){var r=n.langs.get(t);n.langs.set(t,b(r,e))}else n.langs.set(t,e)}))},t.prototype.get=function(t,e){e||(e=this.code);var n=this.langs.get(e);n||(n=this.langs.get(w1));var r=n[t];if(!r)throw new Error('There is no text key "'+t+'" in '+e);return r},t}(),C1=new x1,E1=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function k1(t,e){return E1.map((function(n){return n.map((function(n){var r=n.action,i=n.command,o=n.payload,s=n.disableInThead,a=n.className;return{label:C1.get(r),onClick:function(){t.emit("command",i,o)},disabled:e&&!!s,className:a}}))})).concat()}function N1(t){return new s["d"]({props:{handleDOMEvents:{contextmenu:function(e,n){var r=a1(n.target,e.dom);if(r){n.preventDefault();var i=n,o=i.clientX,s=i.clientY,a=e.dom.parentNode.getBoundingClientRect(),l=a.left,c=a.top,h="TH"===r.nodeName;return t.emit("contextmenu",{pos:{left:o-l+10+"px",top:s-c+30+"px"},menuGroups:k1(t,h),tableCell:r}),!0}return!1}}}})}function O1(){return new s["d"]({props:{handleDOMEvents:{mousedown:function(t,e){var n=e,r=n.clientX,i=n.clientY,o=t.posAtCoords({left:r,top:i});if(o){var s=t.state,a=s.doc,l=s.tr,c=a.resolve(o.pos),h=TQ(c),u=e.target,d=getComputedStyle(u,":before"),p=e,m=p.offsetX,g=p.offsetY;if(!h||!cn(d,m,g))return!1;e.preventDefault();var v=c.before(h.depth),y=h.node.attrs;return l.setNodeMarkup(v,null,f(f({},y),{checked:!y.checked})),t.dispatch(l),!0}return!1}}}})}var T1=["image","link","customBlock","frontMatter"],M1=["strong","strike","emph","code"],S1=["bulletList","orderedList","taskList"];function L1(t,e){var n=t.type.name;return"listItem"===n?t.attrs.task?"taskList":e.type.name:-1!==n.indexOf("table")?"table":n}function A1(t,e){e[t]={active:!0},S1.filter((function(e){return e!==t})).forEach((function(t){e[t]&&delete e[t]}))}function D1(t,e,n,r){M1.forEach((function(i){var o=n.marks[i],s=t.marksAcross(e)||[],a=!!o.isInSet(s);a&&(r[i]={active:!0})}))}function _1(t,e,n){var r=t.$from,i=t.$to,o=t.from,s=t.to,a={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}};return e.nodesBetween(o,s,(function(t,e,o){var s=L1(t,o);At(T1,s)||(At(S1,s)?(A1(s,a),a.indent.disabled=!1,a.outdent.disabled=!1):"paragraph"===s||"text"===s?D1(r,i,n,a):a[s]={active:!0})})),a}function R1(t){return new s["d"]({view:function(){return{update:function(e){var n=e.state,r=n.selection,i=n.doc,o=n.schema;t.emit("changeToolbarState",{toolbarState:_1(r,i,o)})}}}})}var P1=function(){function t(t,e,n,r){var o=this;this.openEditor=function(){if(o.innerEditorView)throw new Error("The editor is already opened.");o.dom.draggable=!1,o.wrapper.style.display="none",o.innerViewContainer.style.display="block",o.innerEditorView=new i["c"](o.innerViewContainer,{state:s["b"].create({doc:o.node,plugins:[Object(a["a"])({"Mod-z":function(){return Object(h["c"])(o.innerEditorView.state,o.innerEditorView.dispatch)},"Shift-Mod-z":function(){return Object(h["b"])(o.innerEditorView.state,o.innerEditorView.dispatch)},Tab:function(t,e){return e(t.tr.insertText("\t")),!0},Enter:l["f"],Escape:function(){return o.cancelEditing(),!0},"Ctrl-Enter":function(){return o.saveAndFinishEditing(),!0}}),Object(h["a"])()]}),dispatchTransaction:function(t){return o.dispatchInner(t)},handleDOMEvents:{mousedown:function(){return o.editorView.hasFocus()&&o.innerEditorView.focus(),!0},blur:function(){return o.saveAndFinishEditing(),!0}}}),o.innerEditorView.focus()},this.node=t,this.editorView=e,this.getPos=n,this.toDOMAdaptor=r,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=un("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=un("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return t.prototype.renderToolArea=function(){var t=this,e=document.createElement("div"),n=document.createElement("span"),r=document.createElement("button");e.className="tool",n.textContent=this.node.attrs.info,n.className="info",r.type="button",r.addEventListener("click",(function(){return t.openEditor()})),e.appendChild(n),e.appendChild(r),this.wrapper.appendChild(e)},t.prototype.renderCustomBlock=function(){var t=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(t){var e=t(this.node);while(this.wrapper.hasChildNodes())this.wrapper.removeChild(this.wrapper.lastChild);e&&this.wrapper.appendChild(e),this.renderToolArea()}},t.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=un("custom-block-editor"),this.innerViewContainer.style.display="none"},t.prototype.closeEditor=function(){this.innerEditorView&&(this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none"),this.wrapper.style.display="block"},t.prototype.saveAndFinishEditing=function(){var t=this.editorView.state.selection.to,e=this.editorView.state;this.editorView.dispatch(e.tr.setSelection(ee(e.tr,t))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},t.prototype.cancelEditing=function(){var t=Object(h["d"])(this.innerEditorView.state);this.canceled=!0;while(t--)Object(h["c"])(this.innerEditorView.state,this.innerEditorView.dispatch),Object(h["c"])(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var e=this.editorView.state.selection.to,n=this.editorView.state;this.editorView.dispatch(n.tr.setSelection(s["h"].create(n.doc,e))),this.editorView.focus(),this.closeEditor()},t.prototype.dispatchInner=function(t){var e=this.innerEditorView.state.applyTransaction(t),n=e.state,r=e.transactions;if(this.innerEditorView.updateState(n),!this.canceled&&qn(this.getPos)){for(var i=this.editorView.state.tr,s=o["d"].offset(this.getPos()+1),a=0;a<r.length;a+=1)for(var l=r[a].steps,c=0;c<l.length;c+=1)i.step(l[c].map(s));i.docChanged&&this.editorView.dispatch(i)}},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,this.innerEditorView||this.renderCustomBlock(),!0)},t.prototype.stopEvent=function(t){return!!this.innerEditorView&&!!t.target&&this.innerEditorView.dom.contains(t.target)},t.prototype.ignoreMutation=function(){return!0},t.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},t}(),I1="image-link",j1=function(){function t(t,e,n,r){var i,o=this;this.handleMousedown=function(t){t.preventDefault();var e=t.target,n=t.offsetX,r=t.offsetY;if(o.imageLink&&qn(o.getPos)&&Fe(e,I1)){var i=getComputedStyle(e,":before");if(t.stopPropagation(),cn(i,n,r)){var s=o.view.state.tr,a=o.getPos();s.setSelection(ee(s,a,a+1)),o.view.dispatch(s),o.eventEmitter.emit("openPopup","link",o.imageLink.attrs)}}},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.imageLink=null!==(i=t.marks.filter((function(t){var e=t.type;return"link"===e.name}))[0])&&void 0!==i?i:null,this.dom=this.createElement(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.createImageElement(this.node);if(this.imageLink){var e=document.createElement("span");return e.className=I1,e.appendChild(t),e}return t},t.prototype.createImageElement=function(t){var e=document.createElement("img"),n=t.attrs,r=n.imageUrl,i=n.altText,o=DQ(t.attrs);return e.src=r,i&&(e.alt=i),Nn(o,e),e},t.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)},t.prototype.stopEvent=function(){return!0},t.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)},t}(),z1="toastui-editor-ww-code-block",B1="toastui-editor-ww-code-block-language",F1=function(){function t(t,e,n,r){var i=this;this.contentDOM=null,this.input=null,this.timer=null,this.handleMousedown=function(t){var e=t.target,n=getComputedStyle(e,":after");if("none"!==n.backgroundImage&&qn(i.getPos)){var r=i.view.coordsAtPos(i.getPos()),o=r.top,s=r.right;i.createLanguageEditor({top:o,right:s})}},this.handleKeydown=function(t){"Enter"===t.key&&i.input&&(t.preventDefault(),i.changeLanguage())},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.node.attrs.language,e=document.createElement("div");e.setAttribute("data-language",t||"text"),e.className=z1;var n=this.createCodeBlockElement(),r=n.firstChild;e.appendChild(n),this.dom=e,this.contentDOM=r},t.prototype.createCodeBlockElement=function(){var t=document.createElement("pre"),e=document.createElement("code"),n=this.node.attrs.language,r=DQ(this.node.attrs);return n&&e.setAttribute("data-language",n),Nn(r,t),t.appendChild(e),t},t.prototype.createLanguageEditor=function(t){var e=this,n=t.top,r=t.right,i=document.createElement("span");i.className=B1;var o=document.createElement("input");o.type="text",o.value=this.node.attrs.language,i.appendChild(o),this.view.dom.parentElement.appendChild(i);var s=i.clientWidth;R(i,{top:n+10+"px",left:r-s-10+"px",width:s+"px"}),this.input=o,this.input.addEventListener("blur",(function(){return e.changeLanguage()})),this.input.addEventListener("keydown",this.handleKeydown),this.clearTimer(),this.timer=setTimeout((function(){e.input.focus()}))},t.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)},t.prototype.bindEvent=function(){var t=this;this.eventEmitter.listen("scroll",(function(){t.input&&t.reset()}))},t.prototype.changeLanguage=function(){if(this.input&&qn(this.getPos)){var t=this.input.value;this.reset();var e=this.getPos(),n=this.view.state.tr;n.setNodeMarkup(e,null,{language:t}),this.view.dispatch(n)}},t.prototype.reset=function(){var t;if(null===(t=this.input)||void 0===t?void 0:t.parentElement){var e=this.input.parentElement;this.input=null,yn(e)}},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.stopEvent=function(){return!0},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,!0)},t.prototype.destroy=function(){this.reset(),this.clearTimer(),this.dom&&this.dom.removeEventListener("click",this.handleMousedown)},t}(),H1=/MsoListParagraph/,q1=/style=(.|\n)*mso-/,W1=/mso-list:(.*)/,U1=/O:P/,$1=/^(n|u|l)/,V1="p.MsoListParagraph";function G1(t){return q1.test(t)}function Y1(t){var e=[],n=document.createTreeWalker(t,1,null,!1);while(n.nextNode()){var r=n.currentNode;if(pn(r)){var i=r,o=i.outerHTML,s=i.textContent,a=q1.test(o),l=W1.test(o);a&&!l&&s?e.push([r,!0]):(U1.test(r.nodeName)||a&&!s||l)&&e.push([r,!1])}}return e.forEach((function(t){var e=t[0],n=t[1];n?bn(e):yn(e)})),t.innerHTML.trim()}function K1(t,e){var n=t.getAttribute("style");if(n){var r=n.match(W1),i=r[1],o=i.trim().split(" "),s=o[1],a=parseInt(s.replace("level",""),10),l=$1.test(t.textContent||"");return{id:e,level:a,prev:null,parent:null,children:[],unordered:l,contents:Y1(t)}}return null}function X1(t,e){if(e.level<t.level)e.children.push(t),t.parent=e;else{while(e){if(e.level===t.level)break;e=e.parent}e&&(t.prev=e,t.parent=e.parent,t.parent&&t.parent.children.push(t))}}function Z1(t){var e=[];return t.forEach((function(t,n){var r=e[n-1],i=K1(t,n);i&&(r&&X1(i,r),e.push(i))})),e}function J1(t){var e=t[0].unordered?"ul":"ol",n=document.createElement(e);return t.forEach((function(t){var e=t.children,r=t.contents,i=document.createElement("li");i.innerHTML=r,n.appendChild(i),e.length&&n.appendChild(J1(e))})),n}function Q1(t){var e=Z1(t),n=e.filter((function(t){var e=t.parent;return!e}));return J1(n)}function t0(t){while(t){if(pn(t))break;t=t.nextSibling}return!t||!H1.test(t.className)}function e0(t){var e=document.createElement("div");e.innerHTML=t;var n=[],r=mn(e,V1);r.forEach((function(t){var r=t0(t.nextSibling);if(n.push(t),r){var i=Q1(n),o=t.nextSibling;o?vn(i,o):gn(e,i),n=[]}yn(t)}));var i=r.length?"<p></p>":"";return""+i+e.innerHTML}var n0="\x3c!--StartFragment--\x3e",r0="\x3c!--EndFragment--\x3e";function i0(t){var e=t.indexOf(n0),n=t.lastIndexOf(r0);return e>-1&&n>-1&&(t=t.slice(e+n0.length,n)),t.replace(/<br[^>]*>/g,ln)}function o0(t){return/<\/td>((?!<\/tr>)[\s\S])*$/i.test(t)&&(t="<tr>"+t+"</tr>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(t)&&(t="<table>"+t+"</table>"),t}function s0(t){return t=i0(t),t=o0(t),G1(t)&&(t=e0(t)),t}function a0(t){var e=t.reduce((function(t,e){return t.childCount>e.childCount?t:e}));return e.childCount}function l0(t,e,n){for(var r=[],i=t.childCount,o=0;o<i;o+=1)if(!t.child(o).attrs.extended){var s=o<i?n.create(t.child(o).attrs,t.child(o).content):n.createAndFill();r.push(s)}return r}function c0(t,e,n){var r=n.nodes,i=r.tableRow,o=r.tableHeadCell,s=l0(t,e,o);return i.create(null,s)}function h0(t,e,n){var r=n.nodes,i=r.tableRow,o=r.tableBodyCell,s=l0(t,e,o);return i.create(null,s)}function u0(t,e){for(var n=e.nodes,r=n.tableRow,i=n.tableBodyCell,o=[],s=0;s<t;s+=1){var a=i.createAndFill();o.push(a)}return r.create({dummyRowForPasting:!0},o)}function d0(t){var e=[],n=[];if("tableHead"===t.firstChild.type.name){var r=t.firstChild;r.forEach((function(t){return e.push(t)}))}if("tableBody"===t.lastChild.type.name){var i=t.lastChild;i.forEach((function(t){return n.push(t)}))}return p(p([],e),n)}function f0(t,e,n){var r=c0(t,e,n);return n.nodes.tableHead.create(null,r)}function p0(t,e,n){var r=t.map((function(t){return h0(t,e,n)}));if(!t.length){var i=u0(e,n);r.push(i)}return n.nodes.tableBody.create(null,r)}function m0(t,e,n,r){var i=a0(t);if(n&&r)return e.nodes.table.create(null,[p0(t,i,e)]);var o=t[0],s=t.slice(1),a=[f0(o,i,e)];return s.length&&a.push(p0(s,i,e)),e.nodes.table.create(null,a)}function g0(t,e,n){var i=[],o=t.content,s=t.openStart,a=t.openEnd;return o.forEach((function(t){if("table"===t.type.name){var o=h1(new r["j"](r["c"].from(t),0,0));if(o){var s=d0(o),a="tableBody"===o.firstChild.type.name,l=m0(s,e,a,n);i.push(l)}}else i.push(t)})),new r["j"](r["c"].from(i),s,a)}var v0=4,y0=2;function b0(t){return t*v0}function w0(t,e,n){var r=[],i=d0(t),o=i[0].childCount,s=i.length,a=0===e.startRowIdx,l=i.slice(0,s);if(a){var c=l.shift();if(c){var h=c0(c,o,n).content;r.push(h)}}return l.forEach((function(t){if(!t.attrs.dummyRowForPasting){var e=h0(t,o,n).content;r.push(e)}})),r}function x0(t,e,n){for(var r=e.startRowIdx,i=e.startColIdx,o=n.length,s=0,a=function(t){var e=n[t].childCount;n[t].forEach((function(t){var n=t.attrs,r=n.colspan;r>1&&(e+=r-1)})),s=Math.max(s,e)},l=0;l<o;l+=1)a(l);var c=r+o-1,h=i+s-1,u=Math.max(c+1-t.totalRowCount,0),d=Math.max(h+1-t.totalColumnCount,0);return{startRowIdx:r,startColIdx:i,endRowIdx:c,endColIdx:h,addedRowCount:u,addedColumnCount:d}}function C0(t,e){for(var n=t.startRowIdx,r=t.startColIdx,i=t.endRowIdx,o=t.endColIdx,s=t.addedRowCount,a=t.addedColumnCount,l=n;l<=i-s;l+=1)e.push({rowIdx:l,startColIdx:r,endColIdx:o-a})}function E0(t,e,n,r,i){for(var o=r.startRowIdx,s=r.startColIdx,a=r.endRowIdx,l=r.endColIdx,c=r.addedRowCount,h=r.addedColumnCount,u=n.totalRowCount,d=0,f=0;f<u;f+=1){var p=n.getCellInfo(f,l-h),m=p.offset,g=p.nodeSize,v=t.mapping.map(m+g),y=s1(h,f,e);if(t.insert(v,y),f>=o&&f<=a-c){var b=n.getCellInfo(f,l-h),w=t.mapping.map(b.offset),x=v+b0(h);i[d]={rowIdx:f,startColIdx:s,endColIdx:l,dummyOffsets:[w,x]},d+=1}}}function k0(t,e,n,r,i){var o=r.addedRowCount,s=r.addedColumnCount,a=r.startColIdx,l=r.endColIdx,c=t.mapping.maps.length,h=n.tableEndOffset-2,u=o1(o,n.totalColumnCount+s,e),d=h;t.insert(t.mapping.slice(c).map(d),u);for(var f=0;f<o;f+=1){var p=d+b0(a)+1,m=d+b0(l+1)+1,g=d+b0(n.totalColumnCount+s)+y0;i.push({rowIdx:f+n.totalRowCount,startColIdx:a,endColIdx:l,dummyOffsets:[p,m]}),d=g}}function N0(t,e,n,i){var o=t.mapping.maps.length;n.forEach((function(n,s){var a=n.rowIdx,l=n.startColIdx,c=n.endColIdx,h=n.dummyOffsets,u=t.mapping.slice(o),d=new r["j"](e[s],0,0),f=h?h[0]:i.getCellStartOffset(a,l),p=h?h[1]:i.getCellEndOffset(a,c);t.replace(u.map(f),u.map(p),d)}))}function O0(t,e){var n=t.state,r=n.selection,i=n.schema,o=n.tr,s=c1(r),a=s.anchor,l=s.head;if(a&&l){var c=h1(e);if(!c)return!1;var h=JQ.create(a),u=h.getRectOffsets(a,l),d=w0(c,u,i),f=x0(h,u,d),p=[];return M0(h,f)&&(C0(f,p),f.addedColumnCount&&E0(o,i,h,f,p),f.addedRowCount&&k0(o,i,h,f,p),N0(o,d,p,h),t.dispatch(o),T0(t,p,h.getCellInfo(0,0).offset)),!0}return!1}function T0(t,e,n){var r=t.state,i=r.tr,o=r.doc,s=JQ.create(o.resolve(n)),a=e[0],l=a.rowIdx,c=a.startColIdx,h=qt(e),u=h.rowIdx,d=h.endColIdx,f=s.getCellInfo(l,c).offset,p=s.getCellInfo(u,d).offset;t.dispatch(i.setSelection(new r1(o.resolve(f),o.resolve(p))))}function M0(t,e){var n=t.getSpannedOffsets(e),r=u1(n),i=r.rowCount,o=r.columnCount,s=u1(e),a=s.rowCount,l=s.columnCount;return i===a&&o===l}var S0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(In),L0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:f({},AQ()),parseDOM:[{tag:"p"}],toDOM:function(t){var e=t.attrs;return["p",DQ(e),0]}}},enumerable:!1,configurable:!0}),e}(In),A0=/\s{1,4}$/,D0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e.prototype.addSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,i=n.$from,o=n.$to,s=i.blockRange(o);return!(!s||NQ(i)||OQ(i))&&(e(r.insertText("    ",i.pos,o.pos)),!0)}},e.prototype.removeSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,i=n.$from,o=n.$to,s=n.from,a=i.blockRange(o);if(a&&!NQ(i)&&!OQ(i)){var l=i.nodeBefore;if(l&&l.isText){var c=l.text,h=c.replace(A0,""),u=c.length-h.length;return e(r.delete(s-u,s)),!0}}return!1}},e.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},e}(In),_0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this.levels.map((function(t){return{tag:"h"+t,getAttrs:function(e){var n=e.getAttribute("data-raw-html");return f({level:t},n&&{rawHTML:n})}}}));return{attrs:f({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},AQ()),content:"inline*",group:"block",defining:!0,parseDOM:t,toDOM:function(t){var e=t.attrs;return["h"+e.level,DQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){var r=e.schema.nodes[t.level?"heading":"paragraph"];return Object(l["h"])(r,t)(e,n)}}},e}(In),R0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:f({language:{default:null},rawHTML:{default:null}},AQ()),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){var e=t.getAttribute("data-raw-html"),n=t.firstElementChild;return f({language:(null===n||void 0===n?void 0:n.getAttribute("data-language"))||null},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"pre",["code",f({"data-language":e.language},DQ(e)),0]]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(l["h"])(t.schema.nodes.codeBlock)(t,e)}}},e.prototype.moveCursor=function(t){var e=this;return function(n,r){var i=n.tr,o=n.doc,s=n.schema,a=n.selection.$from,l=e.context.view;if(l.endOfTextblock(t)&&"codeBlock"===a.node().type.name){var c=a.parent.textContent.split("\n"),h="up"===t?a.start():a.end(),u="up"===t?[h,c[0].length+h]:[h-qt(c).length,h],d=o.resolve("up"===t?a.before():a.after()),f="up"===t?d.nodeBefore:d.nodeAfter;if(Wt(a.pos,u[0],u[1])&&!f){var p=ne(i,d,s);if(p)return r(p),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},e}(In),P0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:f({rawHTML:{default:null}},AQ()),parseDOM:[MQ("ul")],toDOM:function(t){var e=t.attrs;return["ul",DQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.changeList=function(){return function(t,e){return HQ(t.schema.nodes.bulletList)(t,e)}},e.prototype.commands=function(){return{bulletList:this.changeList,taskList:qQ}},e.prototype.keymaps=function(){var t=this.changeList(),e=XQ(),n=e.indent,r=e.outdent;return{"Mod-u":t,"Mod-U":t,Tab:n(),"Shift-Tab":r()}},e}(In),I0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:f({order:{default:1},rawHTML:{default:null}},AQ()),parseDOM:[{tag:"ol",getAttrs:function(t){var e=t.getAttribute("start"),n=t.getAttribute("data-raw-html");return f({order:t.hasAttribute("start")?Number(e):1},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"ol",f({start:1===e.order?null:e.order},DQ(e)),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return HQ(t.schema.nodes.orderedList)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()(),e=XQ(),n=e.indent,r=e.outdent;return{"Mod-o":t,"Mod-O":t,Tab:n(),"Shift-Tab":r()}},e}(In),j0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({task:t.hasAttribute("data-task"),checked:t.hasAttribute("data-task-checked")},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs,n=e.task,r=e.checked;if(!n)return[e.rawHTML||"li",0];var i=["task-list-item"];return r&&i.push("checked"),[e.rawHTML||"li",f({class:i.join(" "),"data-task":n},r&&{"data-task-checked":r}),0]}}},enumerable:!1,configurable:!0}),e.prototype.liftToPrevListItem=function(){return function(t,e){var n=t.selection,r=t.tr,i=t.schema,o=n.$from,s=n.empty,a=i.nodes.listItem,l=o.parent,c=o.node(-1);if(s&&!l.childCount&&c.type===a){if(o.index(-2)>=1)return r.delete(o.start(-1)-1,o.end(-1)),e(r),!0;var h=o.node(-3);if(h.type===a)return r.delete(o.start(-2)-1,o.end(-1)),e(r),!0}return!1}},e.prototype.keymaps=function(){var t=function(t,e){return GQ(t.schema.nodes.listItem)(t,e)};return{Backspace:this.liftToPrevListItem(),Enter:t}},e}(In),z0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},AQ()),content:"block+",group:"block",parseDOM:[MQ("blockquote")],toDOM:function(t){var e=t.attrs;return["blockquote",DQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(l["j"])(t.schema.nodes.blockQuote)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Alt-q":t,"Alt-Q":t}},e}(In),B0={left:K0,right:Y0,up:X0,down:Z0};function F0(t,e,n){var r=n[0],i=n[1],o=e.resolve(t.before(r-1));return i===r&&!o.nodeBefore}function H0(t){var e,n,r=t.depth;while(r){if(n=t.node(r),"tableBodyCell"===n.type.name)break;if("listItem"===n.type.name){var i=t.node(r-1),o=i.lastChild===n,s="paragraph"!==(null===(e=n.lastChild)||void 0===e?void 0:e.type.name);return!!o&&!s}r-=1}return!1}function q0(t,e,n,r,i){var o=e[0],s=e[1],a=e[2];if("left"===t||"up"===t){if(i&&!F0(n,r,[o,s]))return!1;var l=n.before(a),c=r.resolve(l).nodeBefore;if(c)return!1}return!0}function W0(t,e,n,r,i){if("right"===t||"down"===t){if(i&&!H0(n))return!1;var o=n.after(e),s=r.resolve(o).nodeAfter;if(s)return!1}return!0}function U0(t,e,n,r){var i=e[0],o=e[1],s=i+3,a=o>=s,l=a?i+1:o,c=q0(t,[o,s,l],n,r,a),h=W0(t,l,n,r,a);return c&&h}function $0(t,e,n){var r=n[0],i=n[1],o=e.getRowspanStartInfo(r,i),s="up"===t&&0===r,a="down"===t&&((null===o||void 0===o?void 0:o.count)>1?r+o.count-1:r)===e.totalRowCount-1;return s||a}function V0(t,e,n){var r=t.doc.resolve(e.tableStartOffset-1);return r.nodeBefore?t.setSelection(s["f"].near(r,-1)):ne(t,r,n)}function G0(t,e,n,r){void 0===r&&(r=!1);var i=t.doc.resolve(e.tableEndOffset);return r||!i.nodeAfter?ne(t,i,n):t.setSelection(s["f"].near(i,1))}function Y0(t,e){var n=t[0],r=t[1],i=e.totalRowCount,o=e.totalColumnCount,s=r===o-1,a=n===i-1&&s;if(!a){var l=r+1,c=e.getColspanStartInfo(n,r);(null===c||void 0===c?void 0:c.count)>1&&(l+=c.count-1),(s||l===o)&&(n+=1,l=0);var h=e.getCellInfo(n,l).offset;return h+2}return null}function K0(t,e){var n=t[0],r=t[1],i=e.totalColumnCount,o=0===r,s=0===n&&o;if(!s){r-=1,o&&(n-=1,r=i-1);var a=e.getCellInfo(n,r),l=a.offset,c=a.nodeSize;return l+c-2}return null}function X0(t,e){var n=t[0],r=t[1];if(n>0){var i=e.getCellInfo(n-1,r),o=i.offset,s=i.nodeSize;return o+s-2}return null}function Z0(t,e){var n=t[0],r=t[1],i=e.totalRowCount;if(n<i-1){var o=n+1,s=e.getRowspanStartInfo(n,r);(null===s||void 0===s?void 0:s.count)>1&&(o+=s.count-1);var a=e.getCellInfo(o,r).offset;return a+2}return null}function J0(t,e,n,r){var i=B0[t],o=i(n,r);if(o){var a="right"===t||"down"===t?1:-1;return e.setSelection(s["f"].near(e.doc.resolve(o),a))}return null}function Q0(t,e,n){var r=n[0],i=n[1];if("up"===t||"down"===t)return!1;var o=e.tableStartOffset,s=e.tableEndOffset,a=e.getCellInfo(r,i),l=a.offset,c=a.nodeSize,h="left"===t?o:s,u="left"===t?l-2:l+c+3;return h===u}function t3(t,e,n){var r=t.doc.resolve(e.before(n-3));return t.setSelection(new s["c"](r))}function e3(t,e,n){var r,i,o;return"up"===t?(r=n.startRowIdx,i=0,o=-1):(r=n.endRowIdx,i=e.totalColumnCount-1,o=e.getCellInfo(r,i).nodeSize+1),{targetRowIdx:r,insertColIdx:i,nodeSize:o}}function n3(t,e,n){var r=t.getCellInfo(e,0).offset,i=t.getCellInfo(e,n-1),o=i.offset,s=i.nodeSize;return{from:r,to:o+s}}var r3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:f({rawHTML:{default:null}},AQ()),parseDOM:[MQ("table")],toDOM:function(t){var e=t.attrs;return["table",DQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.addTable=function(){return function(t){return void 0===t&&(t={rowCount:2,columnCount:1,data:[]}),function(e,n){var r=t.rowCount,i=t.columnCount,o=t.data,s=e.schema,a=e.selection,l=e.tr,c=a.from,h=a.to,u=a.$from,d=c===h;if(d&&!OQ(u)){var f=s.nodes,p=f.tableHead,m=f.tableBody,g=null===o||void 0===o?void 0:o.slice(0,i),v=null===o||void 0===o?void 0:o.slice(i,o.length),y=i1(i,s,g),b=o1(r-1,i,s,v),w=s.nodes.table.create(null,[p.create(null,y),m.create(null,b)]);return n(l.replaceSelectionWith(w)),!0}return!1}}},e.prototype.removeTable=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,i=JQ.create(n.$anchor);if(i){var o=i.tableStartOffset,s=i.tableEndOffset,a=o-1,l=ee(r.delete(a,s),a);return e(r.setSelection(l)),!0}return!1}}},e.prototype.addColumn=function(t){return function(){return function(e,n){var r=e.selection,i=e.tr,o=e.schema,s=c1(r),a=s.anchor,l=s.head;if(a&&l){for(var c=JQ.create(a),h=c.getRectOffsets(a,l),u="left"===t?h.startColIdx:h.endColIdx+1,d=u1(h).columnCount,f=c.totalRowCount,p=0;p<f;p+=1){var m=s1(d,p,o);i.insert(i.mapping.map(c.posAt(p,u)),m)}return n(i),!0}return!1}}},e.prototype.removeColumn=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,i=c1(n),o=i.anchor,s=i.head;if(o&&s){var a=JQ.create(o),l=a.getRectOffsets(o,s),c=a.totalColumnCount,h=a.totalRowCount,u=u1(l).columnCount,d=u===c;if(d)return!1;for(var f=l.startColIdx,p=l.endColIdx,m=r.mapping.maps.length,g=0;g<h;g+=1)for(var v=p;v>=f;v-=1){var y=a.getCellInfo(g,v),b=y.offset,w=y.nodeSize,x=r.mapping.slice(m).map(b),C=x+w;r.delete(x,C)}return e(r),!0}return!1}}},e.prototype.addRow=function(t){return function(){return function(e,n){var r=e.selection,i=e.schema,o=e.tr,s=c1(r),a=s.anchor,l=s.head;if(a&&l){var c=JQ.create(a),h=c.totalColumnCount,u=c.getRectOffsets(a,l),d=u1(u).rowCount,f=e3(t,c,u),p=f.targetRowIdx,m=f.insertColIdx,g=f.nodeSize,v=0===p;if(!v){for(var y=[],b=o.mapping.map(c.posAt(p,m))+g,w=[],x=0;x<h;x+=1)w=w.concat(s1(1,p,i));for(var C=0;C<d;C+=1)y.push(i.nodes.tableRow.create(null,w));return n(o.insert(b,y)),!0}}return!1}}},e.prototype.removeRow=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,i=c1(n),o=i.anchor,s=i.head;if(o&&s){var a=JQ.create(o),l=a.totalRowCount,c=a.totalColumnCount,h=a.getRectOffsets(o,s),u=u1(h).rowCount,d=h.startRowIdx,f=h.endRowIdx,p=0===d,m=u===l-1;if(m||p)return!1;for(var g=f;g>=d;g-=1){var v=n3(a,g,c),y=v.from,b=v.to;r.delete(y-1,b+1)}return e(r),!0}return!1}}},e.prototype.alignColumn=function(){return function(t){return void 0===t&&(t={align:"center"}),function(e,n){var r=t.align,i=e.selection,o=e.tr,s=c1(i),a=s.anchor,l=s.head;if(a&&l){for(var c=JQ.create(a),h=c.totalRowCount,u=c.getRectOffsets(a,l),d=u.startColIdx,f=u.endColIdx,p=0;p<h;p+=1)for(var m=d;m<=f;m+=1)if(!c.extendedRowspan(p,m)&&!c.extendedColspan(p,m)){var g=c.getNodeAndPos(p,m),v=g.node,y=g.pos,b=d1(v,{align:r});o.setNodeMarkup(y,null,b)}return n(o),!0}return!1}}},e.prototype.moveToCell=function(t){return function(e,n){var r=e.selection,i=e.tr,o=e.schema,s=c1(r),a=s.anchor,l=s.head;if(a&&l){var c=JQ.create(a),h=c.getCellIndex(a),u=void 0;if(u=$0(t,c,h)?G0(i,c,o):J0(t,i,h,c),u)return n(u),!0}return!1}},e.prototype.moveInCell=function(t){var e=this;return function(n,r){var i=n.selection,o=n.tr,s=n.doc,a=n.schema,l=i.$from,c=e.context.view;if(!c.endOfTextblock(t))return!1;var h=kQ(l,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}));if(h){var u=kQ(l,(function(t){var e=t.type;return"paragraph"===e.name})),d=h.depth;if(u&&U0(t,[d,u.depth],l,s)){var f=c1(i).anchor,p=JQ.create(f),m=p.getCellIndex(f),g=void 0;if(Q0(t,p,m)?g=t3(o,l,d):$0(t,p,m)?"up"===t?g=V0(o,p,a):"down"===t&&(g=G0(o,p,a)):g=J0(t,o,m,p),g)return r(g),!0}}return!1}},e.prototype.deleteCells=function(){return function(t,e){var n=t.schema,r=t.selection,i=t.tr,o=c1(r),a=o.anchor,l=o.head,c=r instanceof s["h"];if(a&&l&&!c){for(var h=JQ.create(a),u=h.getRectOffsets(a,l),d=u.startRowIdx,f=u.startColIdx,p=u.endRowIdx,m=u.endColIdx,g=d;g<=p;g+=1)for(var v=f;v<=m;v+=1)if(!h.extendedRowspan(g,v)&&!h.extendedColspan(g,v)){var y=h.getNodeAndPos(g,v),b=y.node,w=y.pos,x=s1(1,g,n,b.attrs);i.replaceWith(i.mapping.map(w),i.mapping.map(w+b.nodeSize),x)}return e(i),!0}return!1}},e.prototype.exitTable=function(){return function(t,e){var n=t.selection,r=t.tr,i=t.schema,o=n.$from,s=kQ(o,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}));if(s){var a=kQ(o,(function(t){var e=t.type;return"paragraph"===e.name}));if(a){var l=c1(n).anchor,c=JQ.create(l);return e(G0(r,c,i,!0)),!0}}return!1}},e.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},e.prototype.keymaps=function(){var t=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:t,"Mod-Backspace":t,Delete:t,"Mod-Delete":t,"Mod-Enter":this.exitTable()}},e}(In),i3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:f({rawHTML:{default:null}},AQ()),parseDOM:[MQ("thead")],toDOM:function(t){var e=t.attrs;return["thead",DQ(e),0]}}},enumerable:!1,configurable:!0}),e}(In),o3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:f({rawHTML:{default:null}},AQ()),parseDOM:[{tag:"tbody",getAttrs:function(t){var e=t.querySelectorAll("tr"),n=e[0].children.length,r=t.getAttribute("data-raw-html");return!!n&&f({},r&&{rawHTML:r})}}],toDOM:function(t){var e=t.attrs;return["tbody",DQ(e),0]}}},enumerable:!1,configurable:!0}),e}(In),s3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:f({rawHTML:{default:null}},AQ()),parseDOM:[{tag:"tr",getAttrs:function(t){var e=t.children.length,n=t.getAttribute("data-raw-html");return!!e&&f({},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return["tr",DQ(e),0]}}},enumerable:!1,configurable:!0}),e}(In),a3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:f({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},AQ()),isolating:!0,parseDOM:[LQ("th")],toDOM:function(t){var e=t.attrs,n=SQ(e);return["th",f(f({},n),DQ(e)),0]}}},enumerable:!1,configurable:!0}),e}(In),l3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[LQ("td")],toDOM:function(t){var e=t.attrs,n=SQ(e);return["td",n,0]}}},enumerable:!1,configurable:!0}),e}(In),c3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{inline:!0,attrs:f({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},AQ()),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(t){var e=VJ(t,{RETURN_DOM_FRAGMENT:!0}).firstChild,n=e.getAttribute("src")||"",r=e.getAttribute("data-raw-html"),i=e.getAttribute("alt");return f({imageUrl:n,altText:i},r&&{rawHTML:r})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"img",f(f({src:St(e.imageUrl)},e.altText&&{alt:e.altText}),DQ(e))]}}},enumerable:!1,configurable:!0}),e.prototype.addImage=function(){return function(t){return function(e,n){var r=e.schema,i=e.tr,o=t,s=o.imageUrl,a=o.altText;if(!s)return!1;var l=r.nodes.image.createAndFill(f({imageUrl:s},a&&{altText:a}));return n(i.replaceSelectionWith(l).scrollIntoView()),!0}}},e.prototype.commands=function(){return{addImage:this.addImage()}},e}(In),h3=1,u3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},AQ()),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(t){var e=t.attrs;return["div",DQ(e),[e.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){var t=this;return function(){return function(e,n){var r,i=e.selection,o=i.$from,s=i.$to;if(o===s){var a=e.doc,l=e.schema.nodes,c=l.thematicBreak,h=l.paragraph,u=[c.create()],d=o.node(h3),f=a.child(a.childCount-1)===d,p=a.resolve(o.after(h3)),m=(null===(r=o.nodeAfter)||void 0===r?void 0:r.type.name)===t.name;return(f||m)&&u.push(h.create()),n(e.tr.insert(p.pos,u).scrollIntoView()),!0}return!1}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(In),d3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["b","strong"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},AQ()),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"strong",DQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return function(){return function(t,e){return Object(l["i"])(t.schema.marks.strong)(t,e)}}},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Yr),f3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["i","em"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},AQ()),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"em",DQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return function(){return function(t,e){return Object(l["i"])(t.schema.marks.emph)(t,e)}}},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Yr),p3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["s","del"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},AQ()),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"del",DQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(l["i"])(t.schema.marks.strike)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Yr),m3=function(t){function e(e){var n=t.call(this)||this;return n.linkAttributes=e,n}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:f({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},AQ()),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){var e=VJ(t,{RETURN_DOM_FRAGMENT:!0}).firstChild,n=e.getAttribute("href")||"",r=e.getAttribute("title")||"",i=e.getAttribute("data-raw-html");return f({linkUrl:n,title:r},i&&{rawHTML:i})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"a",f(f({href:St(n.linkUrl)},t.linkAttributes),DQ(n))]}}},enumerable:!1,configurable:!0}),e.prototype.addLink=function(){return function(t){return function(e,n){var r=t,i=r.linkUrl,o=r.linkText,s=void 0===o?"":o,a=e.schema,l=e.tr,c=e.selection,h=c.empty,u=c.from,d=c.to;if(u&&d&&i){var f={linkUrl:i},p=a.mark("link",f);if(h&&s){var m=te(a,s,p);l.replaceRangeWith(u,d,m)}else l.addMark(u,d,p);return n(l.scrollIntoView()),!0}return!1}}},e.prototype.toggleLink=function(){return function(t){return function(e,n){return Object(l["i"])(e.schema.marks.link,t)(e,n)}}},e.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},e}(Yr),g3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},AQ()),parseDOM:[{tag:"code",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"code",DQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(l["i"])(t.schema.marks.code)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Yr),v3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(t){var e=t.getAttribute("data-custom-info");return{info:e}}}],toDOM:function(t){var e=t.attrs;return["div",{"data-custom-info":e.info||null},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){return!!(null===t||void 0===t?void 0:t.info)&&Object(l["h"])(e.schema.nodes.customBlock,t)(e,n)}}},e}(In),y3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){var r=t.selection.$from;return!(!n.endOfTextblock("down")||"frontMatter"!==r.node().type.name)&&Object(l["d"])(t,e)}}},e.prototype.keymaps=function(){return{Enter:this.commands()()}},e}(In),b3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"htmlComment"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){var r=t.selection.$from;return!(!n.endOfTextblock("down")||"htmlComment"!==r.node().type.name)&&Object(l["d"])(t,e)}}},e.prototype.keymaps=function(){return{Enter:this.commands()()}},e}(In);function w3(t){return new $n([new S0,new L0,new D0,new _0,new R0,new P0,new I0,new j0,new z0,new r3,new i3,new o3,new s3,new a3,new l3,new c3,new u3,new d3,new f3,new p3,new m3(t),new g3,new v3,new y3,new Bn,new b3])}var x3=un("contents"),C3=function(t){function e(e,n){var r=t.call(this,e)||this,i=n.toDOMAdaptor,o=n.htmlSchemaMap,s=void 0===o?{}:o,a=n.linkAttributes,l=void 0===a?{}:a,c=n.useCommandShortcut,h=void 0===c||c,u=n.wwPlugins,d=void 0===u?[]:u,p=n.wwNodeViews,m=void 0===p?{}:p;return r.editorType="wysiwyg",r.el.classList.add("ww-mode"),r.toDOMAdaptor=i,r.linkAttributes=l,r.extraPlugins=d,r.pluginNodeViews=m,r.specs=r.createSpecs(),r.schema=r.createSchema(s),r.context=r.createContext(),r.keymaps=r.createKeymaps(h),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(f(f({},r.context),{view:r.view})),r.initEvent(),r}return d(e,t),e.prototype.createSpecs=function(){return w3(this.linkAttributes)},e.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSchema=function(t){return new r["i"]({nodes:f(f({},this.specs.nodes),t.nodes),marks:f(f({},this.specs.marks),t.marks)})},e.prototype.createPlugins=function(){return p([y1(),N1(this.eventEmitter),O1(),R1(this.eventEmitter)],this.createPluginProps()).concat(this.defaultPlugins)},e.prototype.createPluginNodeViews=function(){var t=this,e=t.eventEmitter,n=t.pluginNodeViews,r={};return n&&Object.keys(n).forEach((function(t){r[t]=function(r,i,o){return n[t](r,i,o,e)}})),r},e.prototype.createView=function(){var t=this,e=this,n=e.toDOMAdaptor,r=e.eventEmitter;return new i["c"](this.el,{state:this.createState(),attributes:{class:x3},nodeViews:f({customBlock:function(t,e,r){return new P1(t,e,r,n)},image:function(t,e,n){return new j1(t,e,n,r)},codeBlock:function(t,e,n){return new F1(t,e,n,r)},widget:jn},this.createPluginNodeViews()),dispatchTransaction:function(e){var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e.scrollIntoView()),t.eventEmitter.emit("setFocusedNode",n.selection.$from.node(1))},transformPastedHTML:s0,transformPasted:function(e){return g0(e,t.schema,OQ(t.view.state.selection.$from))},handlePaste:function(t,e,n){return O0(t,n)},handleKeyDown:function(e,n){return t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{paste:function(e,n){var r=n.clipboardData||window.clipboardData,i=null===r||void 0===r?void 0:r.items;if(i){var o=Jt(i).some((function(t){return"string"===t.kind&&"text/rtf"===t.type}));if(!o){var s=Rn(i);s&&(n.preventDefault(),_n(t.eventEmitter,s,n.type))}}return!1},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0}}})},e.prototype.createCommands=function(){return this.specs.commands(this.view,XQ())},e.prototype.getHTML=function(){return Tn(this.view.dom.innerHTML)},e.prototype.getModel=function(){return this.view.state.doc},e.prototype.getSelection=function(){var t=this.view.state.selection,e=t.from,n=t.to;return[e,n]},e.prototype.getSchema=function(){return this.view.state.schema},e.prototype.replaceSelection=function(t,e,n){var i=this.view.state,o=i.schema,s=i.tr,a=t.split("\n"),l=a.map((function(t){return Qt(o,_e(t,o))})),c=new r["j"](r["c"].from(l),1,1),h=st(e)&&st(n)?s.replaceRange(e,n,c):s.replaceSelection(c);this.view.dispatch(h),this.focus()},e.prototype.deleteSelection=function(t,e){var n=this.view.state.tr,r=st(t)&&st(e)?n.deleteRange(t,e):n.deleteSelection();this.view.dispatch(r.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,i=n.selection,o=i.from,s=i.to;return st(t)&&st(e)&&(o=t,s=e),r.textBetween(o,s,"\n")},e.prototype.setModel=function(t,e){void 0===e&&(e=!1);var n=this.view.state,r=n.tr,i=n.doc;this.view.dispatch(r.replaceWith(0,i.content.size,t)),e&&this.moveCursorToEnd(!0)},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=ee(n,t,e);this.view.dispatch(n.setSelection(r).scrollIntoView())},e.prototype.addWidget=function(t,e,n){var r=this.view,i=r.dispatch,o=r.state;i(o.tr.setMeta("widget",{pos:null!==n&&void 0!==n?n:o.selection.to,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,i=r.tr,o=r.schema,s=_e(n,o);this.view.dispatch(i.replaceWith(t,e,s))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,i=t?n.resolve(t):r.$from,o=i.marks(),s=i.node(),a=i.start(),l=i.end(),c=s.type.name;if(o.length||"paragraph"===c){var h=o[o.length-1],u=function(t){return!t.length||At(t,h)};c=h?h.type.name:"text",s.forEach((function(t,e){var n=t.isText,r=t.nodeSize,o=t.marks,s=i.pos-a;n&&e<=s&&e+r>=s&&u(o)&&(a+=e,l=a+r)}))}return{range:[a,l],type:c}},e}(Fn),E3=B,k3=lt;function N3(t){return!E3(t)&&!k3(t)}var O3=N3,T3=O3;function M3(t){return T3(t)&&!1!==t}var S3=M3,L3=S3;function A3(t){return!L3(t)}var D3=A3,_3=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"],R3=function(){function t(){var t=this;this.events=new b1,this.eventTypes=_3.reduce((function(t,e){return f(f({},t),{type:e})}),{}),this.hold=!1,_3.forEach((function(e){t.addEventType(e)}))}return t.prototype.listen=function(t,e){var n=this.getTypeInfo(t),r=this.events.get(n.type)||[];if(!this.hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(e.namespace=n.namespace),r.push(e),this.events.set(n.type,r)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getTypeInfo(t),i=this.events.get(r.type),o=[];return!this.hold&&i&&i.forEach((function(t){var n=t.apply(void 0,e);B(n)||o.push(n)})),o},t.prototype.emitReduce=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this.events.get(t);return!this.hold&&i&&i.forEach((function(t){var r=t.apply(void 0,p([e],n));D3(r)||(e=r)})),e},t.prototype.getTypeInfo=function(t){var e=t.split(".");return{type:e[0],namespace:e[1]}},t.prototype.hasEventType=function(t){return!B(this.eventTypes[this.getTypeInfo(t).type])},t.prototype.addEventType=function(t){if(this.hasEventType(t))throw new Error("There is already have event type "+t);this.eventTypes[t]=t},t.prototype.removeEventHandler=function(t,e){var n=this,r=this.getTypeInfo(t),i=r.type,o=r.namespace;i&&e?this.removeEventHandlerWithHandler(i,e):i&&!o?this.events.delete(i):!i&&o?this.events.forEach((function(t,e){n.removeEventHandlerWithTypeInfo(e,o)})):i&&o&&this.removeEventHandlerWithTypeInfo(i,o)},t.prototype.removeEventHandlerWithHandler=function(t,e){var n=this.events.get(t);if(n){var r=n.indexOf(e);n.indexOf(e)>=0&&n.splice(r,1)}},t.prototype.removeEventHandlerWithTypeInfo=function(t,e){var n=[],r=this.events.get(t);r&&(r.map((function(t){return t.namespace!==e&&n.push(t),null})),this.events.set(t,n))},t.prototype.getEvents=function(){return this.events},t.prototype.holdEventInvoke=function(t){this.hold=!0,t(),this.hold=!1},t}(),P3=function(){function t(t,e,n,r){this.eventEmitter=t,this.mdCommands=e,this.wwCommands=n,this.getEditorType=r,this.initEvent()}return t.prototype.initEvent=function(){var t=this;this.eventEmitter.listen("command",(function(e,n){t.exec(e,n)}))},t.prototype.addCommand=function(t,e,n){"markdown"===t?this.mdCommands[e]=n:this.wwCommands[e]=n},t.prototype.deleteCommand=function(t,e){"markdown"===t?delete this.mdCommands[e]:delete this.wwCommands[e]},t.prototype.exec=function(t,e){var n=this.getEditorType();"markdown"===n?this.mdCommands[t](e):this.wwCommands[t](e)},t}();function I3(t){return"\n"===t[t.length-1]?t.slice(0,t.length-1):t}function j3(t,e){var n=t.schema,r=e.literal,i=r.match(on);if(i){var o=i[1],s=i[3],a=(o||s).toLowerCase();return"htmlInline"===e.type&&!(!n.marks[a]&&!n.nodes[a])}return!1}function z3(t){var e=t.type;return At(["text","strong","emph","strike","image","link","code"],e)}function B3(t){return"softbreak"===(null===t||void 0===t?void 0:t.type)}function F3(t){var e=t.type,n=t.literal,r="htmlInline"===e&&n.match(on);if(r){var i=r[1],o=r[3],s=i||o;if(s)return At(["ul","ol","li"],s.toLowerCase())}return!1}function H3(t){var e=t.literal,n=/data-task/.test(e),r=/data-task-checked/.test(e);return{task:n,checked:r}}function q3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=document.createElement("div");r.innerHTML=VJ(t);var i=r.firstChild;return e.map((function(t){return i.getAttribute(t)||""}))}function W3(t){var e={};return Object.keys(t).forEach((function(n){var r=n.split(", ");r.forEach((function(r){var i=r.toLowerCase();e[i]=t[n]}))})),e}var U3={"b, strong":function(t,e,n){var r=t.schema.marks.strong;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"i, em":function(t,e,n){var r=t.schema.marks.emph;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"s, del":function(t,e,n){var r=t.schema.marks.strike;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},code:function(t,e,n){var r=t.schema.marks.code;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},a:function(t,e,n){var r=e.literal,i=t.schema.marks.link;if(n){var o=q3(r,"href")[0];t.openMark(i.create({linkUrl:o,rawHTML:n}))}else t.closeMark(i)},img:function(t,e,n){var r=e.literal;if(n){var i=q3(r,"src","alt"),o=i[0],s=i[1],a=t.schema.nodes.image;t.addNode(a,f({rawHTML:n,imageUrl:o},s&&{altText:s}))}},hr:function(t,e,n){t.addNode(t.schema.nodes.thematicBreak,{rawHTML:n})},br:function(t,e){var n=t.schema.nodes.paragraph,r=e.parent,i=e.prev,o=e.next;"paragraph"===(null===r||void 0===r?void 0:r.type)?(B3(i)&&t.openNode(n),B3(o)?t.closeNode():o&&(t.closeNode(),t.openNode(n))):"tableCell"===(null===r||void 0===r?void 0:r.type)&&(i&&(z3(i)||j3(t,i))&&t.closeNode(),o&&(z3(o)||j3(t,o))&&t.openNode(n))},pre:function(t,e,n){var r,i,o=document.createElement("div");o.innerHTML=e.literal;var s=null===(i=null===(r=o.firstChild)||void 0===r?void 0:r.firstChild)||void 0===i?void 0:i.textContent;t.openNode(t.schema.nodes.codeBlock,{rawHTML:n}),t.addText(I3(s)),t.closeNode()},"ul, ol":function(t,e,n){if("tableCell"===e.parent.type){var r=t.schema.nodes,i=r.bulletList,o=r.orderedList,s=r.paragraph,a="ul"===n?i:o;n?(e.prev&&!F3(e.prev)&&t.closeNode(),t.openNode(a,{rawHTML:n})):(t.closeNode(),e.next&&!F3(e.next)&&t.openNode(s))}},li:function(t,e,n){var r;if("tableCell"===(null===(r=e.parent)||void 0===r?void 0:r.type)){var i=t.schema.nodes,o=i.listItem,s=i.paragraph;if(n){var a=H3(e);e.prev&&!F3(e.prev)&&t.closeNode(),t.openNode(o,f({rawHTML:n},a)),e.next&&!F3(e.next)&&t.openNode(s)}else e.prev&&!F3(e.prev)&&t.closeNode(),t.closeNode()}}},$3=W3(U3);function V3(t){return"htmlInline"===t.type&&sn.test(t.literal)}function G3(t){Jt(t.childNodes).forEach((function(t){if(pn(t)){var e=t.nodeName.toLowerCase();t.setAttribute("data-raw-html",e),t.childNodes&&G3(t)}}))}var Y3={text:function(t,e){t.addText(e.literal||"")},paragraph:function(t,e,n,r){var i,o=n.entering;if(o){var s=t.schema.nodes.paragraph;"paragraph"===(null===(i=e.prev)||void 0===i?void 0:i.type)&&(t.openNode(s,r),t.closeNode()),t.openNode(s,r)}else t.closeNode()},heading:function(t,e,n,r){var i=n.entering;if(i){var o=e,s=o.level,a=o.headingType;t.openNode(t.schema.nodes.heading,f({level:s,headingType:a},r))}else t.closeNode()},codeBlock:function(t,e,n){var r=t.schema.nodes.codeBlock,i=e,o=i.info,s=i.literal;t.openNode(r,f({language:o},n)),t.addText(I3(s||"")),t.closeNode()},list:function(t,e,n,r){var i=n.entering;if(i){var o=t.schema.nodes,s=o.bulletList,a=o.orderedList,l=e.listData,c=l.type,h=l.start;"bullet"===c?t.openNode(s,r):t.openNode(a,f({order:h},r))}else t.closeNode()},item:function(t,e,n,r){var i=n.entering,o=t.schema.nodes.listItem,s=e.listData,a=s.task,l=s.checked;if(i){var c=f(f(f({},a&&{task:a}),l&&{checked:l}),r);t.openNode(o,c)}else t.closeNode()},blockQuote:function(t,e,n,r){var i=n.entering;i?t.openNode(t.schema.nodes.blockQuote,r):t.closeNode()},image:function(t,e,n,r){var i=n.entering,o=n.skipChildren,s=t.schema.nodes.image,a=e,l=a.destination,c=a.firstChild;i&&o&&o(),t.addNode(s,f(f({imageUrl:l},c&&{altText:c.literal}),r))},thematicBreak:function(t,e,n,r){t.addNode(t.schema.nodes.thematicBreak,r)},strong:function(t,e,n,r){var i=n.entering,o=t.schema.marks.strong;i?t.openMark(o.create(r)):t.closeMark(o)},emph:function(t,e,n,r){var i=n.entering,o=t.schema.marks.emph;i?t.openMark(o.create(r)):t.closeMark(o)},link:function(t,e,n,r){var i=n.entering,o=t.schema.marks.link,s=e,a=s.destination,l=s.title;if(i){var c=f({linkUrl:a,title:l},r);t.openMark(o.create(c))}else t.closeMark(o)},softbreak:function(t,e){if("paragraph"===e.parent.type){var n=e.prev,r=e.next;n&&!V3(n)&&t.closeNode(),r&&!V3(r)&&t.openNode(t.schema.nodes.paragraph)}},table:function(t,e,n,r){var i=n.entering;i?t.openNode(t.schema.nodes.table,r):t.closeNode()},tableHead:function(t,e,n,r){var i=n.entering;i?t.openNode(t.schema.nodes.tableHead,r):t.closeNode()},tableBody:function(t,e,n,r){var i=n.entering;i?t.openNode(t.schema.nodes.tableBody,r):t.closeNode()},tableRow:function(t,e,n,r){var i=n.entering;i?t.openNode(t.schema.nodes.tableRow,r):t.closeNode()},tableCell:function(t,e,n){var r=n.entering;if(!e.ignored){var i=function(e){return e&&(z3(e)||j3(t,e))};if(r){var o=t.schema.nodes,s=o.tableHeadCell,a=o.tableBodyCell,l=o.paragraph,c=e.parent.parent,h="tableHead"===c.type?s:a,u=c.parent,d=(u.columns[e.startIdx]||{}).align,p=f({},e.attrs);d&&(p.align=d),t.openNode(h,p),i(e.firstChild)&&t.openNode(l)}else i(e.lastChild)&&t.closeNode(),t.closeNode()}},strike:function(t,e,n,r){var i=n.entering,o=t.schema.marks.strike;i?t.openMark(o.create(r)):t.closeMark(o)},code:function(t,e,n,r){var i=t.schema.marks.code;t.openMark(i.create(r)),t.addText(I3(e.literal||"")),t.closeMark(i)},customBlock:function(t,e){var n=t.schema.nodes,r=n.customBlock,i=n.paragraph,o=e,s=o.info,a=o.literal;t.openNode(r,{info:s}),t.addText(I3(a||"")),t.closeNode(),e.next||(t.openNode(i),t.closeNode())},frontMatter:function(t,e){t.openNode(t.schema.nodes.frontMatter),t.addText(e.literal),t.closeNode()},htmlInline:function(t,e){var n=e.literal,r=n.match(on),i=r[1],o=r[3],s=(i||o).toLowerCase(),a=t.schema.marks[s],l=VJ(n);if(null===a||void 0===a?void 0:a.spec.attrs.htmlInline)if(i){var c=YJ(l);t.openMark(a.create({htmlAttrs:c}))}else t.closeMark(a);else{var h=$3[s];h&&h(t,e,i)}},htmlBlock:function(t,e){var n=e.literal,r=document.createElement("div"),i=an.test(n);if(i)t.openNode(t.schema.nodes.htmlComment),t.addText(e.literal),t.closeNode();else{var o=n.match(on),s=o[1],a=o[3],l=(s||a).toLowerCase(),c=t.schema.nodes[l],h=VJ(n);if(null===c||void 0===c?void 0:c.spec.attrs.htmlBlock){var u=YJ(h),d=GJ(e,l);t.addNode(c,{htmlAttrs:u,childrenHTML:d})}else r.innerHTML=h,G3(r),t.convertByDOMParser(r)}},customInline:function(t,e,n){var r=n.entering,i=n.skipChildren,o=e,s=o.info,a=o.firstChild,l=t.schema;if(-1!==s.indexOf("widget")&&r){var c=Re(e);i(),t.addNode(l.nodes.widget,{info:s},[l.text(Me(s,c))])}else{var h="$$";r&&(h+=a?s+" ":s),t.addText(h)}}};function K3(t){var e=Object.keys(t),n=f({},Y3),r=new $Z({gfm:!0,nodeId:!0,convertors:t}),i=r.getConvertors();return e.forEach((function(e){var r=Y3[e];r&&!At(["htmlBlock","htmlInline"],e)&&(n[e]=function(n,o,s){s.origin=function(){return i[e](o,s,i)};var a,l=t[e](o,s);if(l){var c=Array.isArray(l)?l[0]:l,h=c.attributes,u=c.classNames;a={htmlAttrs:h,classNames:u}}r(n,o,s,a)})})),n}function X3(t,e){return!!(t.isText&&e.isText&&r["d"].sameSet(t.marks,e.marks))&&t.withText(t.text+e.text)}var Z3=function(){function t(t,e){this.schema=t,this.convertors=e,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=r["d"].none}return t.prototype.top=function(){return qt(this.stack)},t.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},t.prototype.addText=function(t){if(t){var e=this.top().content,n=qt(e),r=this.schema.text(t,this.marks),i=n&&X3(n,r);i?e[e.length-1]=i:e.push(r)}},t.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},t.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},t.prototype.addNode=function(t,e,n){var r=t.createAndFill(e,n,this.marks);return r?(this.push(r),r):null},t.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},t.prototype.closeNode=function(){this.marks.length&&(this.marks=r["d"].none);var t=this.stack.pop(),e=t.type,n=t.attrs,i=t.content;return this.addNode(e,n,i)},t.prototype.convertByDOMParser=function(t){var e=this,n=r["a"].fromSchema(this.schema).parse(t);n.content.forEach((function(t){return e.push(t)}))},t.prototype.closeUnmatchedHTMLInline=function(t,e){var n;if(!e&&"htmlInline"!==t.type)for(var r=this.stack.length-1,i=r;i>=0;i-=1){var o=this.stack[i];if(!(null===(n=o.attrs)||void 0===n?void 0:n.rawHTML))break;o.content.length?this.closeNode():this.stack.pop()}},t.prototype.convert=function(t,e){var n=t.walker(),r=n.next(),i=function(){var t=r.node,i=r.entering,s=o.convertors[t.type],a=!1;if(s){var l={entering:i,leaf:!Ce(t),getChildrenText:Ee,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:"\n"},skipChildren:function(){a=!0}};if(o.closeUnmatchedHTMLInline(t,i),s(o,t,l),(null===e||void 0===e?void 0:e.node)===t){var c=o.stack.reduce((function(t,e){return t+e.content.reduce((function(t,e){return t+e.nodeSize}),0)}),0)+1;e.setMappedPos(c)}}a&&(n.resumeAt(t,!1),n.next()),r=n.next()},o=this;while(r)i()},t.prototype.convertNode=function(t,e){return this.convert(t,e),this.stack.length?this.closeNode():null},t}();function J3(t,e,n){var r=n[0],i=n[1];t.write(r),t.convertInline(e),t.write(i)}function Q3(t,e,n){var r=e.node,i=e.parent,o=n[0],s=n[1];t.stopNewline=!0,t.write(o),t.convertNode(r),t.write(s),"doc"===(null===i||void 0===i?void 0:i.type.name)&&(t.closeBlock(r),t.stopNewline=!1)}function t2(t,e){var n=t.length,r="",i="";return"left"===e?(r=":",n-=1):"right"===e?(i=":",n-=1):"center"===e&&(r=":",i=":",n-=2),""+r+Pt("-",Math.max(n,3))+i}var e2={text:function(t,e){var n,r=e.node,i=null!==(n=r.text)&&void 0!==n?n:"";(r.marks||[]).some((function(t){return"link"===t.type.name}))?t.text(jt(i),!1):t.text(i)},paragraph:function(t,e){var n=e.node,r=e.parent,i=e.index,o=void 0===i?0:i;if(t.stopNewline)t.convertInline(n);else{var s=0===o,a=!s&&r.child(o-1),l=a&&0===a.childCount,c=o<r.childCount-1&&r.child(o+1),h=c&&"paragraph"===c.type.name,u=0===n.childCount;if(u&&l)t.write("<br>\n");else if(!u||l||s)t.convertInline(n),h?t.write("\n"):t.closeBlock(n);else{if("listItem"===(null===r||void 0===r?void 0:r.type.name)){var d=t.getDelim();t.setDelim(""),t.write("<br>"),t.setDelim(d)}t.write("\n")}}},heading:function(t,e,n){var r=e.node,i=n.delim,o=r.attrs.headingType;"atx"===o?(t.write(i+" "),t.convertInline(r),t.closeBlock(r)):(t.convertInline(r),t.ensureNewLine(),t.write(i),t.closeBlock(r))},codeBlock:function(t,e,n){var r=e.node,i=n.delim,o=n.text,s=i,a=s[0],l=s[1];t.write(a),t.ensureNewLine(),t.text(o,!1),t.ensureNewLine(),t.write(l),t.closeBlock(r)},blockQuote:function(t,e,n){var r=e.node,i=e.parent,o=n.delim;(null===i||void 0===i?void 0:i.type.name)===r.type.name&&t.flushClose(1),t.wrapBlock(o,null,r,(function(){return t.convertNode(r)}))},bulletList:function(t,e,n){var r=e.node,i=n.delim;t.convertList(r,Pt(" ",4),(function(){return i+" "}))},orderedList:function(t,e){var n=e.node,r=n.attrs.order||1;t.convertList(n,Pt(" ",4),(function(t){var e=String(r+t);return e+". "}))},listItem:function(t,e){var n=e.node,r=n.attrs,i=r.task,o=r.checked;i&&t.write("["+(o?"x":" ")+"] "),t.convertNode(n)},image:function(t,e,n){var r=n.attrs;t.write("!["+(null===r||void 0===r?void 0:r.altText)+"]("+(null===r||void 0===r?void 0:r.imageUrl)+")")},thematicBreak:function(t,e,n){var r=e.node,i=n.delim;t.write(i),t.closeBlock(r)},table:function(t,e){var n=e.node;t.convertNode(n),t.closeBlock(n)},tableHead:function(t,e,n){var r=e.node,i=n.delim,o=r.firstChild;t.convertNode(r);var s=null!==i&&void 0!==i?i:"";!i&&o&&o.forEach((function(t){var e=t.textContent,n=t.attrs,r=t2(e,n.align);s+="| "+r+" "})),t.write(s+"|"),t.ensureNewLine()},tableBody:function(t,e){var n=e.node;t.convertNode(n)},tableRow:function(t,e){var n=e.node;t.convertNode(n),t.write("|"),t.ensureNewLine()},tableHeadCell:function(t,e,n){var r=e.node,i=n.delim,o=void 0===i?"| ":i;t.write(o),t.convertTableCell(r),t.write(" ")},tableBodyCell:function(t,e,n){var r=e.node,i=n.delim,o=void 0===i?"| ":i;t.write(o),t.convertTableCell(r),t.write(" ")},customBlock:function(t,e,n){var r=e.node,i=n.delim,o=n.text,s=i,a=s[0],l=s[1];t.write(a),t.ensureNewLine(),t.text(o,!1),t.ensureNewLine(),t.write(l),t.closeBlock(r)},frontMatter:function(t,e,n){var r=e.node,i=n.text;t.text(i,!1),t.closeBlock(r)},widget:function(t,e,n){var r=n.text;t.write(r)},html:function(t,e,n){var r=e.node,i=n.text;t.write(i),r.attrs.htmlBlock&&t.closeBlock(r)},htmlComment:function(t,e,n){var r=e.node,i=n.text;t.write(i),t.closeBlock(r)}};function n2(t,e){var n=e.state,r=e.nodeInfo,i=e.params,o=i.rawHTML;o?j(t,["heading","codeBlock"])>-1?J3(n,r.node,o):j(t,["image","thematicBreak"])>-1?n.write(o):Q3(n,r,o):e2[t](n,r,i)}function r2(t,e){var n=t.text,r=/`+/g,i=0;if(t.isText&&n){var o=r.exec(n);while(o)i=Math.max(i,o[0].length),o=r.exec(n)}for(var s=i>0&&e>0?" `":"`",a=0;a<i;a+=1)s+="`";return i>0&&e<0&&(s+=" "),s}function i2(t){return t?["<"+t+">","</"+t+">"]:null}function o2(t){return t?"<"+t+">":null}function s2(t){return t?"</"+t+">":null}var a2={heading:function(t){var e=t.node,n=e.attrs,r=n.level,i=Pt("#",r);return"setext"===n.headingType&&(i=1===r?"===":"---"),{delim:i,rawHTML:i2(n.rawHTML)}},codeBlock:function(t){var e=t.node,n=e,r=n.attrs,i=n.textContent;return{delim:["```"+(r.language||""),"```"],rawHTML:i2(r.rawHTML),text:i}},blockQuote:function(t){var e=t.node;return{delim:"> ",rawHTML:i2(e.attrs.rawHTML)}},bulletList:function(t,e){var n=t.node,r=e.inTable,i=n.attrs.rawHTML;return r&&(i=i||"ul"),{delim:"*",rawHTML:i2(i)}},orderedList:function(t,e){var n=t.node,r=e.inTable,i=n.attrs.rawHTML;return r&&(i=i||"ol"),{rawHTML:i2(i)}},listItem:function(t,e){var n=t.node,r=e.inTable,i=n.attrs,o=i.task,s=i.checked,a=n.attrs.rawHTML;r&&(a=a||"li");var l=o?' class="task-list-item'+(s?" checked":"")+'"':"",c=o?" data-task"+(s?" data-task-checked":""):"";return{rawHTML:a?["<"+a+l+c+">","</"+a+">"]:null}},table:function(t){var e=t.node;return{rawHTML:i2(e.attrs.rawHTML)}},tableHead:function(t){var e=t.node;return{rawHTML:i2(e.attrs.rawHTML)}},tableBody:function(t){var e=t.node;return{rawHTML:i2(e.attrs.rawHTML)}},tableRow:function(t){var e=t.node;return{rawHTML:i2(e.attrs.rawHTML)}},tableHeadCell:function(t){var e=t.node;return{rawHTML:i2(e.attrs.rawHTML)}},tableBodyCell:function(t){var e=t.node;return{rawHTML:i2(e.attrs.rawHTML)}},image:function(t){var e=t.node,n=e.attrs,r=n.rawHTML,i=n.altText,o=n.imageUrl.replace(/&amp;/g,"&"),s=i?' alt="'+St(i)+'"':"";return{rawHTML:r?"<"+r+' src="'+St(o)+'"'+s+">":null,attrs:{altText:jt(i||""),imageUrl:o}}},thematicBreak:function(t){var e=t.node;return{delim:"***",rawHTML:o2(e.attrs.rawHTML)}},customBlock:function(t){var e=t.node,n=e,r=n.attrs,i=n.textContent;return{delim:["$$"+r.info,"$$"],text:i}},frontMatter:function(t){var e=t.node;return{text:e.textContent}},widget:function(t){var e=t.node;return{text:e.textContent}},strong:function(t,e){var n=t.node,r=e.entering,i=n.attrs.rawHTML;return{delim:"**",rawHTML:r?o2(i):s2(i)}},emph:function(t,e){var n=t.node,r=e.entering,i=n.attrs.rawHTML;return{delim:"*",rawHTML:r?o2(i):s2(i)}},strike:function(t,e){var n=t.node,r=e.entering,i=n.attrs.rawHTML;return{delim:"~~",rawHTML:r?o2(i):s2(i)}},link:function(t,e){var n=t.node,r=e.entering,i=n.attrs,o=i.title,s=i.rawHTML,a=i.linkUrl.replace(/&amp;/g,"&"),l=o?' title="'+St(o)+'"':"";return r?{delim:"[",rawHTML:s?"<"+s+' href="'+St(a)+'"'+l+">":null}:{delim:"]("+a+(o?" "+Bt(jt(o)):"")+")",rawHTML:s2(s)}},code:function(t,e){var n=t.node,r=t.parent,i=t.index,o=void 0===i?0:i,s=e.entering,a=s?r2(r.child(o),-1):r2(r.child(o-1),1),l=s?o2(n.attrs.rawHTML):s2(n.attrs.rawHTML);return{delim:a,rawHTML:l}},htmlComment:function(t){var e=t.node;return{text:e.textContent}},html:function(t,e){var n=t.node,r=e.entering,i=n.type.name,o=n.attrs.htmlAttrs,s="<"+i,a="</"+i+">";return Object.keys(o).forEach((function(t){s+=" "+t+'="'+o[t].replace(/"/g,"'")+'"'})),s+=">",n.attrs.htmlInline?{rawHTML:r?s:a}:{text:""+s+n.attrs.childrenHTML+a}}},l2={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function c2(t){var e={},n=Object.keys(e2);return n.forEach((function(n){e[n]=function(e,r){var i=e2[n];if(i){var o=t[n],s=o?o(r,{inTable:e.inTable}):{};n2(n,{state:e,nodeInfo:r,params:s})}}})),e}function h2(t){var e={},n=Object.keys(l2);return n.forEach((function(n){e[n]=function(e,r){var i=l2[n],o=t[n],s=o&&e&&!B(r),a=s?o(e,{entering:r}):{};return f(f({},a),i)}})),e}function u2(t){var e=Object.keys(t);e.forEach((function(e){var n=a2[e],r=t[e];a2[e]=n?function(t,e){return e.origin=function(){return n(t,e)},r(t,e)}:r,delete t[e]}));var n=c2(a2),r=h2(a2);return{nodeTypeConvertors:n,markTypeConvertors:r}}var d2=function(){function t(t){var e=t.nodeTypeConvertors,n=t.markTypeConvertors;this.nodeTypeConvertors=e,this.markTypeConvertors=n,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return t.prototype.getMarkConvertor=function(t){var e=t.attrs.htmlInline?"html":t.type.name;return this.markTypeConvertors[e]},t.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},t.prototype.markText=function(t,e,n,r){var i=this.getMarkConvertor(t);if(i){var o=i({node:t,parent:n,index:r},e),s=o.delim,a=o.rawHTML;return a||s}return""},t.prototype.setDelim=function(t){this.delim=t},t.prototype.getDelim=function(){return this.delim},t.prototype.flushClose=function(t){if(!this.stopNewline&&this.closed){if(this.isInBlank()||(this.result+="\n"),t||(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var r=1;r<t;r+=1)this.result+=e+"\n"}this.closed=!1}},t.prototype.wrapBlock=function(t,e,n,r){var i=this.getDelim();this.write(e||t),this.setDelim(this.getDelim()+t),r(),this.setDelim(i),this.closeBlock(n)},t.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+="\n")},t.prototype.write=function(t){void 0===t&&(t=""),this.flushClose(),this.delim&&this.isInBlank()&&(this.result+=this.delim),t&&(this.result+=t)},t.prototype.closeBlock=function(t){this.closed=t},t.prototype.text=function(t,e){void 0===e&&(e=!0);for(var n=t.split("\n"),r=0;r<n.length;r+=1)this.write(),this.result+=e?zt(n[r]):n[r],r!==n.length-1&&(this.result+="\n")},t.prototype.convertBlock=function(t,e,n){var r=t.type.name,i=this.nodeTypeConvertors[r],o={node:t,parent:e,index:n};t.attrs.htmlBlock?this.nodeTypeConvertors.html(this,o):i&&i(this,o)},t.prototype.convertInline=function(t){var e=this,n=[],r="",i=function(i,o,s){var a=i?i.marks:[],l=r;r="";var c=i&&i.isText&&a.some((function(t){var n=e.getMarkConvertor(t),r=n&&n();return r&&r.removedEnclosingWhitespace}));if(c&&i&&i.text){var h=/^(\s*)(.*?)(\s*)$/m.exec(i.text),u=h[1],d=h[2],f=h[3];l+=u,r=f,(u||f)&&(i=d?i.withText(d):null,i||(a=n))}for(var p=a.length&&qt(a),m=p&&e.getMarkConvertor(p),g=m&&m(),v=g&&!1===g.escape,y=a.length-(v?1:0),b=0;b<y;b+=1){d=a[b];if(g&&!g.mixable)break;for(var w=0;w<n.length;w+=1){var x=n[w];if(g&&!g.mixable)break;if(d.eq(x)){b>w?a=a.slice(0,w).concat(d).concat(a.slice(w,b)).concat(a.slice(b+1,y)):w>b&&(a=a.slice(0,b).concat(a.slice(b+1,w)).concat(d).concat(a.slice(w,y)));break}}}var C=0;while(C<Math.min(n.length,y)&&a[C].eq(n[C]))C+=1;while(C<n.length){var E=n.pop();E&&e.text(e.markText(E,!1,t,s),!1)}if(l&&e.text(l),i){while(n.length<y){d=a[n.length];n.push(d),e.text(e.markText(d,!0,t,s),!1)}v&&i.isText?e.text(e.markText(p,!0,t,s)+i.text+e.markText(p,!1,t,s+1),!1):e.convertBlock(i,t,s)}};t.forEach(i),i(null,null,t.childCount)},t.prototype.convertList=function(t,e,n){var r,i=this;this.closed&&this.closed.type===t.type?this.flushClose(3):this.tightList&&this.flushClose(1);var o=null===(r=t.attrs.tight)||void 0===r||r,s=this.tightList;this.tightList=o,t.forEach((function(r,s,a){a&&o&&i.flushClose(1),i.wrapBlock(e,n(a),t,(function(){return i.convertBlock(r,t,a)}))})),this.tightList=s},t.prototype.convertTableCell=function(t){var e=this;this.stopNewline=!0,this.inTable=!0,t.forEach((function(n,r,i){if(At(["bulletList","orderedList"],n.type.name))e.convertBlock(n,t,i),e.closed=!1;else if(e.convertInline(n),i<t.childCount-1){var o=t.child(i+1);"paragraph"===o.type.name&&e.write("<br>")}})),this.stopNewline=!1,this.inTable=!1},t.prototype.convertNode=function(t,e){var n=this;return t.forEach((function(r,i,o){if(n.convertBlock(r,t,o),(null===e||void 0===e?void 0:e.node)===r){var s=n.result.split("\n");e.setMappedPos([s.length,qt(s).length+1])}})),this.result},t}(),f2=function(){function t(t,e,n,r){var i=this;this.setMappedPos=function(t){i.mappedPosWhenConverting=t},this.schema=t,this.eventEmitter=r,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=K3(n),this.toMdConvertors=u2(e||{}),this.eventEmitter.listen("setFocusedNode",(function(t){return i.focusedNode=t}))}return t.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},t.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},t.prototype.toWysiwygModel=function(t){var e=new Z3(this.schema,this.toWwConvertors);return e.convertNode(t,this.getInfoForPosSync())},t.prototype.toMarkdownText=function(t){var e=new d2(this.toMdConvertors),n=e.convertNode(t,this.getInfoForPosSync());return n=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",n),n},t}();function p2(t){var e=t.plugin,n=t.eventEmitter,o=t.usageStatistics,l=t.instance,h={Plugin:s["d"],PluginKey:s["e"],Selection:s["f"],TextSelection:s["h"]},u={Decoration:i["a"],DecorationSet:i["b"]},d={Fragment:r["c"]},f={InputRule:c["a"],inputRules:c["b"],undoInputRule:c["c"]},p={keymap:a["a"]},m={eventEmitter:n,usageStatistics:o,instance:l,pmState:h,pmView:u,pmModel:d,pmRules:f,pmKeymap:p,i18n:C1};if(E(e)){var g=e[0],v=e[1],y=void 0===v?{}:v;return g(m,y)}return e(m)}function m2(t){var e=t.plugins,n=t.eventEmitter,r=t.usageStatistics,i=t.instance;return n.listen("mixinTableOffsetMapPrototype",t1),(null!==e&&void 0!==e?e:[]).reduce((function(t,e){var o=p2({plugin:e,eventEmitter:n,usageStatistics:r,instance:i});if(!o)throw new Error("The return value of the executed plugin is empty.");var s=o.markdownParsers,a=o.toHTMLRenderers,l=o.toMarkdownRenderers,c=o.markdownPlugins,h=o.wysiwygPlugins,u=o.wysiwygNodeViews,d=o.markdownCommands,p=o.wysiwygCommands,m=o.toolbarItems;return a&&(t.toHTMLRenderers=$t(t.toHTMLRenderers,a)),l&&(t.toMarkdownRenderers=$t(t.toMarkdownRenderers,l)),c&&(t.mdPlugins=t.mdPlugins.concat(c)),h&&(t.wwPlugins=t.wwPlugins.concat(h)),u&&(t.wwNodeViews=f(f({},t.wwNodeViews),u)),d&&(t.mdCommands=f(f({},t.mdCommands),d)),p&&(t.wwCommands=f(f({},t.wwCommands),p)),m&&(t.toolbarItems=t.toolbarItems.concat(m)),s&&(t.markdownParsers=f(f({},t.markdownParsers),s)),t}),{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var g2="data-task",v2="data-task-disabled",y2="checked";function b2(t){["htmlBlock","htmlInline"].forEach((function(e){t[e]&&Object.keys(t[e]).forEach((function(t){return $J(t)}))}))}var w2=function(){function t(t){var e=this;this.options=b({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},t),this.eventEmitter=new R3;var n=Rt(this.options.linkAttributes),r=m2({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},i=r.toHTMLRenderers,o=r.markdownParsers,s=this.options,a=s.customHTMLRenderer,l=s.extendedAutolinks,c=s.referenceDefinition,h=s.frontMatter,u=s.customHTMLSanitizer,d={linkAttributes:n,customHTMLRenderer:f(f({},i),a),extendedAutolinks:l,referenceDefinition:c,frontMatter:h,sanitizer:u||VJ};b2(d.customHTMLRenderer),this.options.events&&v(this.options.events,(function(t,n){e.on(n,t)}));var p=this.options,m=p.el,g=p.initialValue,y=p.theme,w=m.innerHTML;"light"!==y&&m.classList.add(un(y)),m.innerHTML="",this.toastMark=new jZ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:l,referenceDefinition:c,disallowDeepHeading:!0,frontMatter:h,customParser:o}),this.preview=new EQ(this.eventEmitter,f(f({},d),{isViewer:!0})),So(this.preview.previewContent,"mousedown",this.toggleTask.bind(this)),g?this.setMarkdown(g):w&&this.preview.setHTML(w),m.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return t.prototype.toggleTask=function(t){var e=t.target,n=getComputedStyle(e,":before");!e.hasAttribute(v2)&&e.hasAttribute(g2)&&cn(n,t.offsetX,t.offsetY)&&(wn(e,y2),this.eventEmitter.emit("change",{source:"viewer",date:t}))},t.prototype.setMarkdown=function(t){var e=this.toastMark.getLineTexts(),n=e.length,r=qt(e),i=[n,r.length+1],o=this.toastMark.editMarkdown([1,1],i,t||"");this.eventEmitter.emit("updatePreview",o)},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.destroy=function(){Co(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},t.prototype.isViewer=function(){return!0},t.prototype.isMarkdownMode=function(){return!1},t.prototype.isWysiwygMode=function(){return!1},t}();function x2(t){return t instanceof r["f"]}function C2(t){var e=["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"];return At(e,t)}function E2(t){var e=t.attrs,n=t.type,r=n.name,i={type:r,wysiwygNode:!0,literal:!C2(r)&&x2(t)?t.textContent:null},o={heading:{level:e.level},link:{destination:e.linkUrl,title:e.title},image:{destination:e.imageUrl},codeBlock:{info:e.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:e.order}},listItem:{type:"item",listData:{task:e.task,checked:e.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:e.align},tableBodyCell:{type:"tableCell",cellType:"body",align:e.align},customBlock:{info:e.info}},s=o[r],a=f(f({},i),s),l=t.attrs,c=l.htmlAttrs,h=l.childrenHTML;return c?f(f({},a),{attrs:c,childrenHTML:h}):a}var k2={openTag:function(t,e){var n=t,r=n.tagName,i=n.classNames,o=n.attributes,s=document.createElement(r),a={};i&&(s.className=i.join(" ")),o&&(a=f(f({},a),o)),Nn(a,s),e.push(s)},closeTag:function(t,e){if(e.length>1){var n=e.pop();qt(e).appendChild(n)}},html:function(t,e){qt(e).insertAdjacentHTML("beforeend",t.content)},text:function(t,e){var n=document.createTextNode(t.content);qt(e).appendChild(n)}},N2=function(){function t(t,e){var n=eQ(t,e),r=f(f({},e.htmlBlock),e.htmlInline);this.customConvertorKeys=Object.keys(e).concat(Object.keys(r)),this.renderer=new $Z({gfm:!0,convertors:f(f({},n),r)}),this.convertors=this.renderer.getConvertors()}return t.prototype.generateTokens=function(t){var e=E2(t),n={entering:!0,leaf:!!x2(t)&&t.isLeaf,options:this.renderer.getOptions(),getChildrenText:function(){return x2(t)?t.textContent:""},skipChildren:function(){return!1}},r=this.convertors[t.type.name],i=r(e,n,this.convertors),o=E(i)?i:[i];return(C2(t.type.name)||t.attrs.htmlInline)&&(n.entering=!1,o.push({type:"text",content:x2(t)?t.textContent:""}),o=o.concat(r(e,n,this.convertors))),o},t.prototype.toDOMNode=function(t){var e=this.generateTokens(t),n=[];return e.forEach((function(t){return k2[t.type](t,n)})),n[0]},t.prototype.getToDOMNode=function(t){return At(this.customConvertorKeys,t)?this.toDOMNode.bind(this):null},t}(),O2=100,T2=15,M2=null,S2=null;function L2(t,e){var n=e.syncScrollTop,r=e.releaseEventBlock;S2&&clearTimeout(S2),n(t),S2=setTimeout((function(){r()}),T2)}function A2(t,e,n){var r=e-t,i=Date.now(),o=function(){var s,a=Date.now(),l=(a-i)/O2;M2&&clearTimeout(M2),l<1?(s=t+r*Math.cos((1-l)*Math.PI/2),L2(Math.ceil(s),n),M2=setTimeout(o,1)):(L2(e,n),M2=null)};o()}var D2=18,_2=function(){function t(t,e,n){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0,this.timer=null;var r=e.previewContent,i=e.el;this.previewRoot=r,this.previewEl=i,this.mdEditor=t,this.editorView=t.view,this.toastMark=t.getToastMark(),this.eventEmitter=n,this.addScrollSyncEvent()}return t.prototype.addScrollSyncEvent=function(){var t=this;this.eventEmitter.listen("afterPreviewRender",(function(){t.clearTimer(),t.timer=setTimeout((function(){t.syncPreviewScrollTop(!0)}),200)})),this.eventEmitter.listen("scroll",(function(e,n){t.active&&("editor"===e&&"editor"!==t.blockedScroll?t.syncPreviewScrollTop():"preview"===e&&"preview"!==t.blockedScroll&&t.syncEditorScrollTop(n))})),this.eventEmitter.listen("toggleScrollSync",(function(e){t.active=e}))},t.prototype.getMdNodeAtPos=function(t,e){var n=t.content.findIndex(e.pos),r=n.index;return this.toastMark.findFirstNodeAtLine(r+1)},t.prototype.getScrollTopByCaretPos=function(){var t=this.mdEditor.getSelection(),e=this.toastMark.findFirstNodeAtLine(t[0][0]),n=this.previewEl.clientHeight,r=dQ(this.previewRoot,e).el,i=lQ(r,this.previewRoot)||r.offsetTop,o=r.clientHeight,s=i+o-.5*n;this.latestEditorScrollTop=null;var a=r.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top;return a<n?null:s},t.prototype.syncPreviewScrollTop=function(t){void 0===t&&(t=!1);var e=this,n=e.editorView,r=e.previewEl,i=e.previewRoot,o=n.dom.getBoundingClientRect(),s=o.left,a=o.top,l=n.posAtCoords({left:s,top:a}),c=n.state.doc,h=this.getMdNodeAtPos(c,l);if(h&&!ce(h)){var u=r.scrollTop,d=n.dom,f=d.scrollTop,p=d.scrollHeight,m=d.clientHeight,g=d.children,v=p-f<=m+D2,y=v?r.scrollHeight:0;if(f&&!v){if(t){var b=this.getScrollTopByCaretPos();if(!b)return;y=b}else{var w=dQ(this.previewRoot,h),x=w.el,C=w.mdNode,E=oQ(c,C,g),k=E.height,N=E.rect,O=lQ(x,i)||x.offsetTop,T=x.clientHeight,M=a>N.top?Math.min((a-N.top)/k,1):0;y=O+T*M}y=this.getResolvedScrollTop("editor",f,y,u),this.latestEditorScrollTop=f}y!==u&&this.run("editor",y,u)}},t.prototype.syncEditorScrollTop=function(t){var e=this,n=e.toastMark,r=e.editorView,i=e.previewRoot,o=e.previewEl,s=r.dom,a=r.state,l=o.scrollTop,c=o.clientHeight,h=o.scrollHeight,u=h-l<=c,d=s.scrollTop,f=u?s.scrollHeight:0;if(l&&t&&!u){if(t=aQ(t,i),!t.getAttribute("data-nodeid"))return;var p=s.children,m=Number(t.getAttribute("data-nodeid")),g=dQ(this.previewRoot,n.findNodeById(m)),v=g.mdNode,y=g.el,b=oe(v);f=p[b-1].offsetTop;var w=oQ(a.doc,v,p).height,x=wQ(y,i,m),C=x.nodeHeight,E=x.offsetTop;f+=uQ(l,E,C,w),f=this.getResolvedScrollTop("preview",l,f,d),this.latestPreviewScrollTop=l}f!==d&&this.run("preview",f,d)},t.prototype.getResolvedScrollTop=function(t,e,n,r){var i="editor"===t?this.latestEditorScrollTop:this.latestPreviewScrollTop;return null===i?n:i<e?Math.max(n,r):Math.min(n,r)},t.prototype.run=function(t,e,n){var r,i=this;"editor"===t?(r=this.previewEl,this.blockedScroll="preview"):(r=this.editorView.dom,this.blockedScroll="editor");var o={syncScrollTop:function(t){return r.scrollTop=t},releaseEventBlock:function(){return i.blockedScroll=null}};A2(n,e,o)},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.destroy=function(){this.clearTimer(),this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},t}(),R2={getPopupInitialValues:function(t,e){var n=e.popupName;return"link"===n?{linkText:t.getSelectedText()}:{}}};function P2(t){t.eventEmitter.listen("query",(function(e,n){return R2[e](t,n)}))}var I2=function(){function t(t){var e=this;this.initialHTML=t.el.innerHTML,t.el.innerHTML="",this.options=b({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},t);var n=this.options,r=n.customHTMLRenderer,i=n.extendedAutolinks,o=n.referenceDefinition,s=n.frontMatter,a=n.customMarkdownRenderer,l=n.useCommandShortcut,c=n.initialEditType,h=n.widgetRules,u=n.customHTMLSanitizer;this.mode=c||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.i18n=C1,this.i18n.setCode(this.options.language),this.eventEmitter=new R3,Ae(h);var d=Rt(this.options.linkAttributes);this.pluginInfo=m2({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var p=this.pluginInfo,m=p.toHTMLRenderers,g=p.toMarkdownRenderers,y=p.mdPlugins,w=p.wwPlugins,x=p.wwNodeViews,C=p.mdCommands,E=p.wwCommands,k=p.markdownParsers,N={linkAttributes:d,customHTMLRenderer:$t(m,r),extendedAutolinks:i,referenceDefinition:o,frontMatter:s,sanitizer:u||VJ},O=new N2(d,N.customHTMLRenderer),T=JJ(N.customHTMLRenderer,N.sanitizer,O);this.toastMark=new jZ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:i,referenceDefinition:o,disallowDeepHeading:!0,frontMatter:s,customParser:k}),this.mdEditor=new uo(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:l,mdPlugins:y}),this.preview=new EQ(this.eventEmitter,f(f({},N),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new C3(this.eventEmitter,{toDOMAdaptor:O,useCommandShortcut:l,htmlSchemaMap:T,linkAttributes:d,wwPlugins:w,wwNodeViews:x}),this.convertor=new f2(this.wwEditor.getSchema(),f(f({},g),a),eQ(d,N.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHTML(this.initialHTML,!1),this.commandManager=new P3(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,(function(){return e.mode})),this.options.usageStatistics&&Lt(),this.scrollSync=new _2(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(C,E),P2(this),this.options.hooks&&v(this.options.hooks,(function(t,n){return e.addHook(n,t)})),this.options.events&&v(this.options.events,(function(t,n){return e.on(n,t)})),this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return t.prototype.addInitEvent=function(){var t=this;this.on("needChangeMode",this.changeMode.bind(this)),this.on("loadUI",(function(){if("auto"!==t.height){var e=Math.min(parseInt(t.minHeight,10),parseInt(t.height,10)-75)+"px";t.setMinHeight(e)}})),Dn(this.eventEmitter)},t.prototype.addInitCommand=function(t,e){var n=this,r=function(t,e){Object.keys(e).forEach((function(r){n.addCommand(t,r,e[r])}))};this.addCommand("markdown","toggleScrollSync",(function(t){return n.eventEmitter.emit("toggleScrollSync",t.active),!0})),r("markdown",t),r("wysiwyg",e)},t.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},t.factory=function(e){return e.viewer?new w2(e):new t(e)},t.setLanguage=function(t,e){C1.setLanguage(t,e)},t.prototype.changePreviewStyle=function(t){this.mdPreviewStyle!==t&&(this.mdPreviewStyle=t,this.eventEmitter.emit("changePreviewStyle",t))},t.prototype.exec=function(t,e){this.commandManager.exec(t,e)},t.prototype.addCommand=function(t,e,n){var r=this,i=function(e){void 0===e&&(e={});var i=("markdown"===t?r.mdEditor:r.wwEditor).view;n(e,i.state,i.dispatch,i)};this.commandManager.addCommand(t,e,i)},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.removeHook=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.focus=function(){this.getCurrentModeEditor().focus()},t.prototype.blur=function(){this.getCurrentModeEditor().blur()},t.prototype.moveCursorToEnd=function(t){void 0===t&&(t=!0),this.getCurrentModeEditor().moveCursorToEnd(t)},t.prototype.moveCursorToStart=function(t){void 0===t&&(t=!0),this.getCurrentModeEditor().moveCursorToStart(t)},t.prototype.setMarkdown=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e=!0),this.mdEditor.setMarkdown(t,e),this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r,e)}},t.prototype.setHTML=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var n=document.createElement("div");n.innerHTML=On(t);var i=r["a"].fromSchema(this.wwEditor.schema).parse(n);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(i),e):this.wwEditor.setModel(i,e)},t.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())},t.prototype.getHTML=function(){var t=this;this.eventEmitter.holdEventInvoke((function(){if(t.isMarkdownMode()){var e=t.toastMark.getRootNode(),n=t.convertor.toWysiwygModel(e);t.wwEditor.setModel(n)}}));var e=Tn(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var n=new RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return e.replace(n,"")}return e},t.prototype.insertText=function(t){this.getCurrentModeEditor().replaceSelection(t)},t.prototype.setSelection=function(t,e){this.getCurrentModeEditor().setSelection(t,e)},t.prototype.replaceSelection=function(t,e,n){this.getCurrentModeEditor().replaceSelection(t,e,n)},t.prototype.deleteSelection=function(t,e){this.getCurrentModeEditor().deleteSelection(t,e)},t.prototype.getSelectedText=function(t,e){return this.getCurrentModeEditor().getSelectedText(t,e)},t.prototype.getRangeInfoOfNode=function(t){return this.getCurrentModeEditor().getRangeInfoOfNode(t)},t.prototype.addWidget=function(t,e,n){this.getCurrentModeEditor().addWidget(t,e,n)},t.prototype.replaceWithWidget=function(t,e,n){this.getCurrentModeEditor().replaceWithWidget(t,e,n)},t.prototype.setHeight=function(t){var e=this.options.el;x(t)&&("auto"===t?J(e,"auto-height"):it(e,"auto-height"),this.setMinHeight(this.getMinHeight())),R(e,{height:t}),this.height=t},t.prototype.getHeight=function(){return this.height},t.prototype.setMinHeight=function(t){if(t!==this.minHeight){var e=this.height||this.options.height;"auto"!==e&&this.options.el.querySelector("."+un("main"))&&(t=Math.min(parseInt(t,10),parseInt(e,10)-75)+"px");var n=parseInt(t,10);this.minHeight=t,this.wwEditor.setMinHeight(n),this.mdEditor.setMinHeight(n),this.preview.setMinHeight(n)}},t.prototype.getMinHeight=function(){return this.minHeight},t.prototype.isMarkdownMode=function(){return"markdown"===this.mode},t.prototype.isWysiwygMode=function(){return"wysiwyg"===this.mode},t.prototype.isViewer=function(){return!1},t.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},t.prototype.changeMode=function(t,e){if(this.mode!==t){if(this.mode=t,this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r)}else{r=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(r),!e)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",t),!e){var i=this.convertor.getMappedPos();this.focus(),this.isWysiwygMode()&&st(i)?this.wwEditor.setSelection(i):Array.isArray(i)&&this.mdEditor.setSelection(i)}}},t.prototype.destroy=function(){var t=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach((function(e,n){return t.off(n)}))},t.prototype.hide=function(){this.eventEmitter.emit("hide")},t.prototype.show=function(){this.eventEmitter.emit("show")},t.prototype.setScrollTop=function(t){this.getCurrentModeEditor().setScrollTop(t)},t.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},t.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},t.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},t.prototype.setPlaceholder=function(t){this.placeholder=t,this.mdEditor.setPlaceholder(t),this.wwEditor.setPlaceholder(t)},t.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},t.prototype.convertPosToMatchEditorMode=function(t,e,n){var r,i;void 0===e&&(e=t),void 0===n&&(n=this.mode);var o=this.mdEditor.view.state.doc,s=Array.isArray(t),a=Array.isArray(e),l=t,c=e;if(s!==a)throw new Error("Types of arguments must be same");return"markdown"!==n||s||a?"wysiwyg"===n&&s&&a&&(i=Zn(o,t,e),l=i[0],c=i[1]):(r=Kn(o,t,e),l=r[0],c=r[1]),[l,c]},t}();function j2(t){for(var e,n,r=arguments,i=1,o="",s="",a=[0],l=function(t){1===i&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(t?r[t]:o):3===i&&(t||o)?(a[1]=t?r[t]:o,i=2):2===i&&"..."===o&&t?a[2]=Yt(a[2]||{},r[t]):2===i&&o&&!t?(a[2]=a[2]||{})[o]=!0:i>=5&&(5===i?((a[2]=a[2]||{})[n]=t?o?o+r[t]:r[t]:o,i=6):(t||o)&&(a[2][n]+=t?o+r[t]:o)),o=""},c=0;c<t.length;c++){c&&(1===i&&l(),l(c));for(let r=0;r<t[c].length;r++)e=t[c][r],1===i?"<"===e?(l(),a=[a,"",null],i=3):o+=e:4===i?"--"===o&&">"===e?(i=1,o=""):o=e+o[0]:s?e===s?s="":o+=e:'"'===e||"'"===e?s=e:">"===e?(l(),i=1):i&&("="===e?(i=5,n=o,o=""):"/"===e&&(i<5||">"===t[c][r+1])?(l(),3===i&&(a=a[0]),i=a,(a=a[0]).push(this.apply(null,i.slice(1))),i=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(l(),i=2):o+=e),3===i&&"!--"===o&&(i=4,a=a[0])}return l(),a.length>2?a.slice(1):a[1]}function z2(t){return"boolean"===typeof t||t instanceof Boolean}var B2=z2,F2=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.walk=function(){var t=this,e=t.entering,n=t.current;return n?(e?n.firstChild?(this.current=n.firstChild,this.entering=!0):this.entering=!1:n===this.root?this.current=null:n.next?(this.current=n.next,this.entering=!0):(this.current=n.parent,this.entering=!1),{vnode:n,entering:e}):null},t}(),H2=function(){function t(t,e,n){this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=t,this.props=e,this.children=n,this.props.children=n,e.ref&&(this.ref=e.ref,delete e.ref),e.key&&(this.key=e.key,delete e.key)}return t.prototype.walker=function(){return new F2(this)},t.removalNodes=[],t}();function q2(t){return new H2("TEXT_NODE",{nodeValue:t},[])}function W2(t,e){var n=t;B2(t)||null==t?n=null:(x(t)||st(t))&&(n=q2(String(t))),n&&e.push(n)}function U2(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=[];return n.forEach((function(t){Array.isArray(t)?t.forEach((function(t){W2(t,i)})):W2(t,i)})),new H2(t,e||{},i)}var $2=j2.bind(U2);function V2(t){return t===Object(t)}var G2=V2;function Y2(t){var e;return"TEXT_NODE"===t.type?e=document.createTextNode(t.props.nodeValue):(e=document.createElement(t.type),J2(e,{},t.props)),e}function K2(t,e){t.node?e.removeChild(t.node):K2(t.firstChild,e)}function X2(t,e,n){Object.keys(e).forEach((function(r){if(/^on/.test(r)){if(!n[r]||e[r]!==n[r]){var i=r.slice(2).toLowerCase();t.removeEventListener(i,e[r])}}else"children"===r||n[r]||fn(t)||t.removeAttribute(r)})),J2(t,e,n,(function(t){return!Ht(e[t],n[t])}))}var Z2=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function J2(t,e,n,r){Object.keys(n).forEach((function(i){if(!r||r(i))if(/^on/.test(i)){var o=i.slice(2).toLowerCase();t.addEventListener(o,n[i])}else"nodeValue"===i?t[i]=n[i]:"style"===i&&G2(n[i])?Q2(t,e[i],n[i]):"children"!==i&&(!1===n[i]?t.removeAttribute(i):t.setAttribute(i,n[i]))}))}function Q2(t,e,n){e&&Object.keys(e).forEach((function(e){t.style[e]=""})),Object.keys(n).forEach((function(e){var r=n[e];t.style[e]=st(r)&&!Z2.test(e)?r+"px":r}))}function t6(t){if(H2.removalNodes.forEach((function(t){return n6(t)})),t){var e=void 0,n=t.walker();while(e=n.walk())if(t=e.vnode,e.entering)n6(t);else if(qn(t.type)){var r=t.component;if(!t.old&&r.mounted&&r.mounted(),t.old&&r.updated){var i=r.prevProps||{};r.updated(i)}}}}function e6(t){var e=t.parent;while(!e.node)e=e.parent;return e.node}function n6(t){if(t&&t.parent){if(t.node){var e=e6(t);"A"===t.effect?e.appendChild(t.node):"U"===t.effect&&X2(t.node,t.old.props,t.props)}if("D"===t.effect){var n=void 0,r=t.walker();while(n=r.walk())if(t=n.vnode,!n.entering)if(qn(t.type)){var i=t.component;i.beforeDestroy&&i.beforeDestroy()}else{e=e6(t);K2(t,e)}}t.ref&&(t.component?t.ref(t.component):t.node&&t.ref(t.node))}}function r6(t,e){var n=e.props,r=e.component;return r?(r.prevProps=r.props,r.props=e.props,r):new t(n)}function i6(t){var e=t;while(t&&!t.skip){if(qn(t.type)){var n=r6(t.type,t);n.vnode=t,t.component=n,t.props.children=t.children=[n.render()],s6(t)}else t.node||(t.node=Y2(t)),s6(t);if(t.firstChild)t=t.firstChild;else{while(t&&t.parent&&!t.next)if(t=t.parent,t===e)break;t=t.next}}}function o6(t,e){return t&&e&&e.type===t.type&&(!e.key||e.key===t.key)}function s6(t){var e=t.children,n=t.old?t.old.firstChild:null,r=null;e.forEach((function(e,i){var o=o6(n,e);o&&(e.old=n,e.parent=t,e.node=n.node,e.component=n.component,e.effect="U"),e&&!o&&(e.old=null,e.parent=t,e.node=null,e.effect="A"),n&&!o&&(H2.removalNodes.push(n),n.effect="D"),n&&(n=n.next),0===i?t.firstChild=e:e&&(r.next=e),r=e}));var i=qt(e);if(!e.length)while(n)H2.removalNodes.push(n),n.effect="D",n=n.next;while(n&&i)n&&i.old!==n&&(H2.removalNodes.push(n),n.effect="D",n=n.next)}function a6(t){t.effect="D",H2.removalNodes=[t],t6(),H2.removalNodes=[]}function l6(t){var e=t.vnode;e.effect="U",e.old=e,e.next&&(e.next.skip=!0),H2.removalNodes=[],i6(e),t6(e),e.next&&(e.next.skip=!1)}function c6(t,e){var n=new H2(t.tagName.toLowerCase(),{},[e]);return n.node=t,H2.removalNodes=[],i6(n),t6(n),function(){return a6(n.firstChild)}}var h6,u6=function(){function t(t){this.props=t,this.state={},this.refs={}}return t.prototype.setState=function(t){var e=f(f({},this.state),t);Ht(this.state,e)||(this.state=e,l6(this))},t}(),d6=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hide:!1},n}return d(e,t),e.prototype.show=function(){this.setState({hide:!1})},e.prototype.hide=function(){this.setState({hide:!0})},e.prototype.render=function(){var t=this.props,e=t.editorType,n=t.eventEmitter;return $2(h6||(h6=m(['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "])),un("mode-switch"),this.state.hide?"none":"block","markdown"===e?" active":"",(function(){n.emit("needChangeMode","markdown")}),C1.get("Markdown"),"wysiwyg"===e?" active":"",(function(){n.emit("needChangeMode","wysiwyg")}),C1.get("WYSIWYG"))},e}(u6);function f6(t,e){var n,r;function i(){r=Array.prototype.slice.call(arguments),window.clearTimeout(n),n=window.setTimeout((function(){t.apply(null,r)}),e)}return e=e||0,i}var p6=f6,m6=p6;function g6(t,e){var n,r,i,o,s=!0,a=function(e){t.apply(null,e),n=null};function l(){if(o=Array.prototype.slice.call(arguments),s)return a(o),void(s=!1);i=Number(new Date),n=n||i,r(o),i-n>=e&&a(o)}function c(){s=!0,n=null}return e=e||0,r=m6(a,e),l.reset=c,l}var v6=g6,y6=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),b6="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,w6=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),x6=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(w6):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)}}(),C6=2;function E6(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&a()}function s(){x6(o)}function a(){var t=Date.now();if(n){if(t-i<C6)return;r=!0}else n=!0,r=!1,setTimeout(s,e);i=t}return a}var k6=20,N6=["top","right","bottom","left","width","height","size","weight"],O6="undefined"!==typeof MutationObserver,T6=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=E6(this.refresh.bind(this),k6)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){b6&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),O6?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){b6&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,r=N6.some((function(t){return!!~n.indexOf(t)}));r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),M6=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},S6=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||w6},L6=F6(0,0,0,0);function A6(t){return parseFloat(t)||0}function D6(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){var r=t["border-"+n+"-width"];return e+A6(r)}),0)}function _6(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],s=t["padding-"+o];n[o]=A6(s)}return n}function R6(t){var e=t.getBBox();return F6(0,0,e.width,e.height)}function P6(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return L6;var r=S6(t).getComputedStyle(t),i=_6(r),o=i.left+i.right,s=i.top+i.bottom,a=A6(r.width),l=A6(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==e&&(a-=D6(r,"left","right")+o),Math.round(l+s)!==n&&(l-=D6(r,"top","bottom")+s)),!j6(t)){var c=Math.round(a+o)-e,h=Math.round(l+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(h)&&(l-=h)}return F6(i.left,i.top,a,l)}var I6=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof S6(t).SVGGraphicsElement}:function(t){return t instanceof S6(t).SVGElement&&"function"===typeof t.getBBox}}();function j6(t){return t===S6(t).document.documentElement}function z6(t){return b6?I6(t)?R6(t):P6(t):L6}function B6(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return M6(s,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),s}function F6(t,e,n,r){return{x:t,y:e,width:n,height:r}}var H6=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=F6(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=z6(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),q6=function(){function t(t,e){var n=B6(e);M6(this,{target:t,contentRect:n})}return t}(),W6=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new y6,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof S6(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new H6(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof S6(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new q6(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),U6="undefined"!==typeof WeakMap?new WeakMap:new y6,$6=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=T6.getInstance(),r=new W6(e,n,this);U6.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach((function(t){$6.prototype[t]=function(){var e;return(e=U6.get(this))[t].apply(e,arguments)}}));var V6,G6,Y6,K6,X6,Z6,J6,Q6,t4,e4,n4,r4,i4,o4,s4,a4,l4=function(){return"undefined"!==typeof w6.ResizeObserver?w6.ResizeObserver:$6}(),c4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.execCommand=function(t){var e=En(t.target,"li");this.props.execCommand("heading",{level:Number(e.getAttribute("data-level"))})},e.prototype.render=function(){var t=this;return $2(G6||(G6=m(["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "],["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "])),(function(e){return t.execCommand(e)}),C1.get("Headings"),[1,2,3,4,5,6].map((function(t){return $2(V6||(V6=m(['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "],['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "])),t,"h"+t,C1.get("Heading"),t)})),C1.get("Paragraph"))},e}(u6),h4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.toggleTab=function(t,e){this.props.onClick(t,e)},e.prototype.render=function(){var t=this;return $2(K6||(K6=m(['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "],['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "])),un("tabs"),this.props.tabs.map((function(e){var n=e.name,r=e.text,i=t.props.activeTab===n;return $2(Y6||(Y6=m(['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "],['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "])),i?" active":"",(function(e){return t.toggleTab(e,n)}),C1.get(r),i?"true":"false",i?"0":"-1",C1.get(r))})))},e}(u6),u4="ui",d4=function(t){function e(e){var n=t.call(this,e)||this;return n.initialize=function(t){void 0===t&&(t="file");var e=n.refs.url;e.value="",n.refs.altText.value="",n.refs.file.value="",it(e,"wrong"),n.setState({activeTab:t,file:null,fileNameElClassName:""})},n.execCommand=function(){"file"===n.state.activeTab?n.emitAddImageBlob():n.emitAddImage()},n.toggleTab=function(t,e){e!==n.state.activeTab&&n.initialize(e)},n.showFileSelectBox=function(){n.refs.file.click()},n.changeFile=function(t){var e=t.target.files;(null===e||void 0===e?void 0:e.length)&&n.setState({file:e[0]})},n.state={activeTab:"file",file:null,fileNameElClassName:""},n.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],n}return d(e,t),e.prototype.emitAddImageBlob=function(){var t=this,e=this.refs.file.files,n=this.refs.altText,r=" wrong";if(null===e||void 0===e?void 0:e.length){r="";var i=e.item(0),o=function(e,r){return t.props.execCommand("addImage",{imageUrl:e,altText:r||n.value})};this.props.eventEmitter.emit("addImageBlobHook",i,o,u4)}this.setState({fileNameElClassName:r})},e.prototype.emitAddImage=function(){var t=this.refs.url,e=this.refs.altText,n=t.value,r=e.value||"image";it(t,"wrong"),n.length?n&&this.props.execCommand("addImage",{imageUrl:n,altText:r}):J(t,"wrong")},e.prototype.preventSelectStart=function(t){t.preventDefault()},e.prototype.updated=function(){this.props.show||this.initialize()},e.prototype.render=function(){var t=this,e=this.state,n=e.activeTab,r=e.file,i=e.fileNameElClassName;return $2(X6||(X6=m(['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),C1.get("Insert image"),h4,this.tabs,n,this.toggleTab,"url"===n?"block":"none",C1.get("Image URL"),(function(e){return t.refs.url=e}),"file"===n?"block":"none",C1.get("Select image file"),un("file-name"),r?" has-file":i,this.showFileSelectBox,this.preventSelectStart,r?r.name:C1.get("No file"),un("file-select-button"),this.showFileSelectBox,C1.get("Choose a file"),this.changeFile,(function(e){return t.refs.file=e}),C1.get("Description"),(function(e){return t.refs.altText=e}),un("button-container"),un("close-button"),this.props.hidePopup,C1.get("Cancel"),un("ok-button"),this.execCommand,C1.get("OK"))},e}(u6),f4=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.execCommand=function(){var t=e.refs.url,n=e.refs.text;if(it(t,"wrong"),it(n,"wrong"),t.value.length<1)J(t,"wrong");else{var r=B(e.props.initialValues.linkUrl);r&&n.value.length<1?J(n,"wrong"):e.props.execCommand("addLink",{linkUrl:t.value,linkText:n.value})}},e}return d(e,t),e.prototype.initialize=function(){var t=this.props.initialValues,e=t.linkUrl,n=t.linkText,r=this.refs.url,i=this.refs.text;it(r,"wrong"),it(i,"wrong","disabled"),i.removeAttribute("disabled"),e&&(J(i,"disabled"),i.setAttribute("disabled","disabled")),r.value=e||"",i.value=n||""},e.prototype.mounted=function(){this.initialize()},e.prototype.updated=function(t){!t.show&&this.props.show&&this.initialize()},e.prototype.render=function(){var t=this;return $2(Z6||(Z6=m(['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),C1.get("Insert link"),C1.get("URL"),(function(e){return t.refs.url=e}),C1.get("Link text"),(function(e){return t.refs.text=e}),un("button-container"),un("close-button"),this.props.hidePopup,C1.get("Cancel"),un("ok-button"),this.execCommand,C1.get("OK"))},e}(u6),p4=20,m4=20,g4=5,v4=14,y4=5,b4=9,w4=1,x4=1,C4=1,E4=function(t){function e(e){var n=t.call(this,e)||this;return n.extendSelectionRange=function(t){var e=t.pageX,r=t.pageY,i=e-n.offsetRect.left,o=r-n.offsetRect.top,s=n.getSelectionRangeByOffset(i,o);n.setState(f({},s))},n.execCommand=function(){n.props.execCommand("addTable",{rowCount:n.state.rowIdx+1,columnCount:n.state.colIdx+1})},n.state={rowIdx:-1,colIdx:-1},n}return d(e,t),e.prototype.getDescription=function(){return-1===this.state.colIdx?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},e.prototype.getBoundByRange=function(t,e){return{width:(t+1)*p4,height:(e+1)*m4}},e.prototype.getRangeByOffset=function(t,e){return{colIdx:Math.floor(t/p4),rowIdx:Math.floor(e/m4)}},e.prototype.getTableRange=function(){var t=this.state,e=t.colIdx,n=t.rowIdx,r=Math.max(e,y4),i=Math.max(n,g4);return e>=y4&&r<b4&&(r+=1),n>=g4&&i<v4&&(i+=1),{colIdx:r+1,rowIdx:i+1}},e.prototype.getSelectionAreaBound=function(){var t=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),e=t.width,n=t.height;return e||n?{width:e-C4,height:n-C4,display:"block"}:{display:"none"}},e.prototype.getSelectionRangeByOffset=function(t,e){var n=this.getRangeByOffset(t,e);return n.rowIdx=Math.min(Math.max(n.rowIdx,w4),v4),n.colIdx=Math.min(Math.max(n.colIdx,x4),b4),n},e.prototype.updated=function(){if(this.props.show){if(-1===this.state.colIdx&&-1===this.state.rowIdx){var t=this.refs.tableEl.getBoundingClientRect(),e=t.left,n=t.top;this.offsetRect={left:window.pageXOffset+e,top:window.pageYOffset+n}}}else this.setState({colIdx:-1,rowIdx:-1})},e.prototype.createTableArea=function(t){for(var e=t.colIdx,n=t.rowIdx,r=[],i=0;i<n;i+=1){for(var o=[],s=0;s<e;s+=1){var a=un("table-cell")+(i>0?"":" header");o.push($2(J6||(J6=m(['<div class="','"></div>'],['<div class="','"></div>'])),a))}r.push($2(Q6||(Q6=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),un("table-row"),o))}return $2(t4||(t4=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),un("table"),r)},e.prototype.render=function(){var t=this,e=this.getTableRange(),n=this.getSelectionAreaBound();return $2(e4||(e4=m(['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "],['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "])),C1.get("Insert table"),un("table-selection"),(function(e){return t.refs.tableEl=e}),this.extendSelectionRange,this.execCommand,this.createTableArea(e),un("table-selection-layer"),n,un("table-description"),this.getDescription())},e}(u6),k4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},e.prototype.updated=function(t){this.refs.el.replaceChild(this.props.body,t.body)},e.prototype.render=function(){var t=this;return $2(n4||(n4=m(["<div ref=","></div>"],["<div ref=","></div>"])),(function(e){return t.refs.el=e}))},e}(u6);function N4(t){return x(t)?T4(t):t}function O4(){var t=document.createElement("label"),e=document.createElement("input"),n=document.createElement("span");t.className="scroll-sync active",e.type="checkbox",e.checked=!0,n.className="switch";var r=function(n){return e.addEventListener("change",(function(e){var r=e.target.checked;r?J(t,"active"):it(t,"active"),n("toggleScrollSync",{active:r})}))};return t.appendChild(e),t.appendChild(n),{name:"scrollSync",el:t,onMounted:r}}function T4(t){var e;switch(t){case"heading":e={name:"heading",className:"heading",tooltip:C1.get("Headings"),state:"heading"};break;case"bold":e={name:"bold",className:"bold",command:"bold",tooltip:C1.get("Bold"),state:"strong"};break;case"italic":e={name:"italic",className:"italic",command:"italic",tooltip:C1.get("Italic"),state:"emph"};break;case"strike":e={name:"strike",className:"strike",command:"strike",tooltip:C1.get("Strike"),state:"strike"};break;case"hr":e={name:"hr",className:"hrline",command:"hr",tooltip:C1.get("Line"),state:"thematicBreak"};break;case"quote":e={name:"quote",className:"quote",command:"blockQuote",tooltip:C1.get("Blockquote"),state:"blockQuote"};break;case"ul":e={name:"ul",className:"bullet-list",command:"bulletList",tooltip:C1.get("Unordered list"),state:"bulletList"};break;case"ol":e={name:"ol",className:"ordered-list",command:"orderedList",tooltip:C1.get("Ordered list"),state:"orderedList"};break;case"task":e={name:"task",className:"task-list",command:"taskList",tooltip:C1.get("Task"),state:"taskList"};break;case"table":e={name:"table",className:"table",tooltip:C1.get("Insert table"),state:"table"};break;case"image":e={name:"image",className:"image",tooltip:C1.get("Insert image")};break;case"link":e={name:"link",className:"link",tooltip:C1.get("Insert link")};break;case"code":e={name:"code",className:"code",command:"code",tooltip:C1.get("Code"),state:"code"};break;case"codeblock":e={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:C1.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":e={name:"indent",className:"indent",command:"indent",tooltip:C1.get("Indent"),state:"indent"};break;case"outdent":e={name:"outdent",className:"outdent",command:"outdent",tooltip:C1.get("Outdent"),state:"outdent"};break;case"scrollSync":e=O4();break;case"more":e={name:"more",className:"more",tooltip:C1.get("More")};break}return"scrollSync"!==e.name&&(e.className+=" "+un("toolbar-icons")),e}function M4(t,e){var n=e.el,r=e.pos,i=e.popup,o=e.initialValues;switch(t){case"heading":return{render:function(t){return $2(r4||(r4=m(["<"," ..."," />"],["<"," ..."," />"])),c4,t)},className:un("popup-add-heading"),fromEl:n,pos:r};case"link":return{render:function(t){return $2(i4||(i4=m(["<"," ..."," />"],["<"," ..."," />"])),f4,t)},className:un("popup-add-link"),fromEl:n,pos:r,initialValues:o};case"image":return{render:function(t){return $2(o4||(o4=m(["<"," ..."," />"],["<"," ..."," />"])),d4,t)},className:un("popup-add-image"),fromEl:n,pos:r};case"table":return{render:function(t){return $2(s4||(s4=m(["<"," ..."," />"],["<"," ..."," />"])),E4,t)},className:un("popup-add-table"),fromEl:n,pos:r};case"customPopupBody":return i?f({render:function(t){return $2(a4||(a4=m(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),k4,t,i.body)},fromEl:n,pos:r},i):null;default:return null}}function S4(t){t.hidden=t.length===t.filter((function(t){return t.hidden})).length}function L4(t,e){var n=function(t){return t.hidden="scrollSync"===t.name&&e,t};return t.reduce((function(t,e){t.push(e.map((function(t){return n(N4(t))})));var r=t[(t.length||1)-1];return r&&S4(r),t}),[])}function A4(t,e){t.forEach((function(t){t.forEach((function(t){return t.hidden="scrollSync"===t.name&&e})),S4(t)}))}var D4,_4,R4=20,P4=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleMousedown=function(t){En(t.target,"."+un("popup"))||En(t.target,e.props.info.fromEl)||e.props.hidePopup()},e}return d(e,t),e.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown),this.props.eventEmitter.listen("closePopup",this.props.hidePopup)},e.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},e.prototype.updated=function(t){var e=this.props,n=e.show,r=e.info;if(n&&r.pos&&t.show!==n){var i=f({},r.pos),o=this.refs.el.offsetWidth,s=En(this.refs.el,"."+un("toolbar")),a=s.offsetWidth;i.left+o>=a&&(i.left=a-o-R4),Ht(this.state.popupPos,i)||this.setState({popupPos:i})}},e.prototype.render=function(){var t=this,e=this.props,n=e.info,r=e.show,i=e.hidePopup,o=e.eventEmitter,s=e.execCommand,a=n||{},l=a.className,c=void 0===l?"":l,h=a.style,u=a.render,d=a.initialValues,p=void 0===d?{}:d,g=f(f({display:r?"block":"none"},h),this.state.popupPos);return $2(D4||(D4=m(['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "])),un("popup"),c,g,(function(e){return t.refs.el=e}),un("popup-body"),u&&u({eventEmitter:o,show:r,hidePopup:i,execCommand:s,initialValues:p}))},e}(u6),I4=6;function j4(t){return function(e){function n(t){var n=e.call(this,t)||this;return n.showTooltip=function(t){var e=n.props.item.tooltip;if(!n.props.disabled&&e){var r=n.getBound(t),i=r.left+I4+"px",o=r.top+I4+"px";R(n.props.tooltipRef.current,{display:"block",left:i,top:o}),n.props.tooltipRef.current.querySelector(".text").textContent=e}},n.hideTooltip=function(){R(n.props.tooltipRef.current,"display","none")},n.state={active:!1,disabled:t.disabled},n.addEvent(),n}return d(n,e),n.prototype.addEvent=function(){var t=this,e=this.props,n=e.item,r=e.eventEmitter;n.state&&r.listen("changeToolbarState",(function(e){var r,i=e.toolbarState,o=null!==(r=i[n.state])&&void 0!==r?r:{},s=o.active,a=o.disabled;t.setState({active:!!s,disabled:null!==a&&void 0!==a?a:t.props.disabled})}))},n.prototype.getBound=function(t){var e=kn(t,En(t,"."+un("toolbar"))),n=e.offsetLeft,r=e.offsetTop;return{left:n,top:t.offsetHeight+r}},n.prototype.render=function(){return $2(_4||(_4=m(["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "],["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "])),t,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)},n}(u6)}var z4,B4,F4,H4,q4,W4,U4,$4,V4,G4,Y4,K4,X4,Z4,J4=80,Q4=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.execCommand=function(){var t=e.props,n=t.item,r=t.execCommand,i=t.setPopupInfo,o=t.getBound,s=t.eventEmitter,a=n.command,l=n.name,c=n.popup;if(a)r(a);else{var h=c?"customPopupBody":l,u=s.emit("query","getPopupInitialValues",{popupName:h})[0],d=M4(h,{el:e.refs.el,pos:o(e.refs.el),popup:c,initialValues:u});d&&i(d)}},e}return d(e,t),e.prototype.mounted=function(){this.setItemWidth()},e.prototype.updated=function(t){t.item.name!==this.props.item.name&&this.setItemWidth()},e.prototype.setItemWidth=function(){var t=this.props,e=t.setItemWidth,n=t.item;e&&e(n.name,Cn(this.refs.el)+(n.hidden?J4:0))},e.prototype.render=function(){var t=this,e=this.props,n=e.hideTooltip,r=e.disabled,i=e.item,o=e.active,s=f({display:i.hidden?"none":null},i.style),a=(i.className||"")+(o?" active":"");return $2(z4||(z4=m(["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "],["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "])),(function(e){return t.refs.el=e}),s,a,this.execCommand,this.showTooltip,n,!!r,i.text||i.tooltip||"",i.text||"")},e}(u6),t5=j4(Q4),e5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.showPopup=function(){var t=M4("customPopupBody",{el:e.refs.el,pos:e.props.getBound(e.refs.el),popup:e.props.item.popup});t&&e.props.setPopupInfo(t)},e}return d(e,t),e.prototype.mounted=function(){var t=this.props,e=t.setItemWidth,n=t.item;this.refs.el.appendChild(n.el),e&&e(n.name,Cn(this.refs.el)),n.onMounted&&n.onMounted(this.props.execCommand)},e.prototype.updated=function(t){var e,n=this.props,r=n.item,i=n.active,o=n.disabled;t.active===i&&t.disabled===o||null===(e=r.onUpdated)||void 0===e||e.call(r,{active:i,disabled:o})},e.prototype.render=function(){var t=this,e=this.props,n=e.disabled,r=e.item,i={display:r.hidden?"none":"inline-block"},o=function(t){return n?null:t};return $2(B4||(B4=m(["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "],["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "])),(function(e){return t.refs.el=e}),i,un("toolbar-item-wrapper"),o(this.showPopup),o(this.showTooltip),o(this.props.hideTooltip))},e}(u6),n5=j4(e5),r5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.group,r=e.hiddenDivider,i=n.hidden?{display:"none"}:null,o=r?{display:"none"}:null;return $2(H4||(H4=m(['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "])),un("toolbar-group"),i,n.map((function(e){var n=e.el?n5:t5;return $2(F4||(F4=m(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),n,e.name,t.props,e)})),un("toolbar-divider"),o)},e}(u6),i5=4,o5=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){var e=t.target;En(e,"."+un("dropdown-toolbar"))||En(e,".more")||n.setState({showDropdown:!1,dropdownPos:null})},n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.state={showDropdown:!1,dropdownPos:null},n}return d(e,t),e.prototype.getBound=function(){var t=this.props.getBound(this.refs.el);return t.top+=i5,f(f({},t),{left:null,right:10})},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.render=function(){var t=this,e=this.state,n=e.showDropdown,r=e.dropdownPos,i=this.props,o=i.disabled,s=i.item,a=i.items,l=i.hideTooltip,c=a.filter((function(t){return!t.hidden})),h=c.length?null:{display:"none"},u=n?null:{display:"none"};return $2(W4||(W4=m(['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "])),un("toolbar-group"),h,(function(e){return t.refs.el=e}),s.className,(function(){return t.setState({showDropdown:!0})}),this.showTooltip,l,o,un("dropdown-toolbar"),f(f({},u),r),(function(e){return t.refs.dropdownEl=e}),c.length?c.map((function(e,n){var r;return $2(q4||(q4=m(["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "],["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "])),r5,e,n===c.length-1||(null===(r=c[n+1])||void 0===r?void 0:r.hidden),t.props)})):null)},e}(u6),s5=j4(o5),a5=50,l5=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleTab=function(t,e){var r=n.props.eventEmitter;if(n.state.activeTab!==e){var i="write"===e?"changePreviewTabWrite":"changePreviewTabPreview";r.emit(i),n.setState({activeTab:e})}},n.setItemWidth=function(t,e){n.itemWidthMap[t]=e},n.setPopupInfo=function(t){n.setState({showPopup:!0,popupInfo:t})},n.openPopup=function(t,e){void 0===e&&(e={});var r=n.refs.el.querySelector("."+un("toolbar-group")+" ."+t);if(r){var i=kn(r,En(r,"."+un("toolbar"))),o=i.offsetLeft,s=i.offsetTop,a=M4(t,{el:r,pos:{left:o,top:r.offsetHeight+s},initialValues:e});a&&n.setPopupInfo(a)}},n.hidePopup=function(){n.state.showPopup&&n.setState({showPopup:!1})},n.execCommand=function(t,e){var r=n.props.eventEmitter;r.emit("command",t,e),n.hidePopup()},n.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],n.itemWidthMap={},n.initialItems=L4(e.toolbarItems||[],n.hiddenScrollSync()),n.state={items:n.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},n.tooltipRef={current:null},n.resizeObserver=new l4((function(){return n.handleResize()})),n.addEvent(),n}return d(e,t),e.prototype.insertToolbarItem=function(t,e){var n=t.groupIndex,r=t.itemIndex,i=this.initialItems[n];e=N4(e),i?i.splice(r,0,e):this.initialItems.push([e]),this.setState(this.classifyToolbarItems())},e.prototype.removeToolbarItem=function(t){var e=this;N(this.initialItems,(function(n){var r=!1;return N(n,(function(i,o){return i.name!==t||(r=!0,n.splice(o,1),e.setState(e.classifyToolbarItems()),!1)})),!r}))},e.prototype.addEvent=function(){var t=this,e=this.props.eventEmitter;this.handleResize=v6((function(){t.setState({items:t.initialItems,dropdownItems:[]}),t.setState(t.classifyToolbarItems())}),200),e.listen("openPopup",this.openPopup)},e.prototype.appendTooltipToRoot=function(){var t='<div class="'+un("tooltip")+'" style="display:none">\n        <div class="arrow"></div>\n        <span class="text"></span>\n      </div>';this.tooltipRef.current=xn(t,this.refs.el)},e.prototype.hiddenScrollSync=function(){return"wysiwyg"===this.props.editorType||"tab"===this.props.previewStyle},e.prototype.movePrevItemToDropdownToolbar=function(t,e,n,r){var i=function(t){var e=t.pop();e&&r.push(e)};if(t>1)i(n);else{var o=qt(e);o&&i(o)}},e.prototype.classifyToolbarItems=function(){var t=this,e=0,n=this.refs.el.clientWidth,r=this.refs.el.querySelector("."+un("toolbar-divider")),i=r?Cn(r):0,o=[],s=[],a=!1;return this.initialItems.forEach((function(r,l){var c=[],h=[];r.forEach((function(r,i){r.hidden||(e+=t.itemWidthMap[r.name],e>n-a5?(a||(t.movePrevItemToDropdownToolbar(i,o,c,h),a=!0),h.push(r)):c.push(r))})),c.length&&(S4(c),o.push(c)),h.length&&(S4(h),s.push(h)),l<t.state.items.length-1&&(e+=i)})),{items:o,dropdownItems:s}},e.prototype.mounted=function(){"tab"===this.props.previewStyle&&this.props.eventEmitter.emit("changePreviewTabWrite",!0),this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},e.prototype.updated=function(t){var e=this.props,n=e.editorType,r=e.previewStyle,i=e.eventEmitter,o=r!==t.previewStyle,s=n!==t.editorType;if(o||s){A4(this.initialItems,this.hiddenScrollSync());var a=this.classifyToolbarItems();(o||"tab"===r&&"markdown"===n)&&(i.emit("changePreviewTabWrite"),a.activeTab="write"),this.setState(a)}},e.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),yn(this.tooltipRef.current)},e.prototype.render=function(){var t=this,e=this.props,n=e.previewStyle,r=e.eventEmitter,i=e.editorType,o=this.state,s=o.popupInfo,a=o.showPopup,l=o.activeTab,c=o.items,h=o.dropdownItems,u={eventEmitter:r,tooltipRef:this.tooltipRef,disabled:"markdown"===i&&"tab"===n&&"preview"===l,execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},d="tab"===n?{borderTopLeftRadius:0}:null;return $2($4||($4=m(['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "],['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "])),un("toolbar"),un("md-tab-container"),"wysiwyg"===i||"vertical"===n?"none":"block",h4,this.tabs,l,this.toggleTab,un("defaultUI-toolbar"),(function(e){return t.refs.el=e}),d,c.map((function(e,n){var r;return $2(U4||(U4=m(["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "],["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "])),r5,e,n===c.length-1||(null===(r=c[n+1])||void 0===r?void 0:r.hidden),t.setItemWidth,u)})),s5,N4("more"),h,u,P4,s,a,r,this.hidePopup,this.execCommand)},e}(u6),c5=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){En(t.target,"."+un("context-menu"))||n.setState({pos:null})},n.state={pos:null,menuGroups:[]},n.addEvent(),n}return d(e,t),e.prototype.addEvent=function(){var t=this;this.props.eventEmitter.listen("contextmenu",(function(e){var n=e.pos,r=e.menuGroups;t.setState({pos:n,menuGroups:r})}))},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.getMenuGroupElements=function(){var t=this,e=this.state,n=e.pos,r=e.menuGroups;return n?r.reduce((function(e,n){var r=[];return n.forEach((function(e){var n=e.label,i=e.className,o=void 0!==i&&i,s=e.disabled,a=e.onClick,l=function(){s||(a(),t.setState({pos:null}))};r.push($2(V4||(V4=m(["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "],["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "])),l,s?" disabled":"",o,n))})),e.push($2(G4||(G4=m(['<ul class="menu-group">\n              ',"\n            </ul>"],['<ul class="menu-group">\n              ',"\n            </ul>"])),r)),e}),[]):[]},e.prototype.render=function(){var t=f({display:this.state.pos?"block":"none"},this.state.pos);return $2(Y4||(Y4=m(['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"],['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"])),un("context-menu"),t,this.getMenuGroupElements())},e}(u6),h5=function(t){function e(e){var n=t.call(this,e)||this;n.changeMode=function(t){t!==n.state.editorType&&n.setState({editorType:t})},n.changePreviewStyle=function(t){t!==n.state.previewStyle&&n.setState({previewStyle:t})},n.hide=function(){n.setState({hide:!0})},n.show=function(){n.setState({hide:!1})};var r=e.editorType,i=e.previewStyle;return n.state={editorType:r,previewStyle:i,hide:!1},n.addEvent(),n}return d(e,t),e.prototype.mounted=function(){var t=this.props.slots,e=t.wwEditor,n=t.mdEditor,r=t.mdPreview;this.refs.wwContainer.appendChild(e),this.refs.mdContainer.insertAdjacentElement("afterbegin",n),this.refs.mdContainer.appendChild(r)},e.prototype.insertToolbarItem=function(t,e){this.toolbar.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.toolbar.removeToolbarItem(t)},e.prototype.render=function(){var t=this,e=this.props,n=e.eventEmitter,r=e.hideModeSwitch,i=e.toolbarItems,o=e.theme,s=this.state,a=s.hide,l=s.previewStyle,c=s.editorType,h=a?" hidden":"",u=un("markdown"===c?"md-mode":"ww-mode"),d=un("md")+"-"+l+"-style",f=un(["light"!==o,o+" "]);return $2(X4||(X4=m(['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "],['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "])),f,un("defaultUI"),h,(function(e){return t.refs.el=e}),l5,(function(e){return t.toolbar=e}),n,l,i,c,un("main"),u,(function(e){return t.refs.editorSection=e}),un("main-container"),un("md-container"),d,(function(e){return t.refs.mdContainer=e}),un("md-splitter"),un("ww-container"),(function(e){return t.refs.wwContainer=e}),!r&&$2(K4||(K4=m(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),d6,n,c),c5,n)},e.prototype.addEvent=function(){var t=this.props.eventEmitter;t.listen("hide",this.hide),t.listen("show",this.show),t.listen("changeMode",this.changeMode),t.listen("changePreviewStyle",this.changePreviewStyle)},e}(u6),u5=function(t){function e(e){var n,r,i=t.call(this,e)||this,o=c6(i.options.el,$2(Z4||(Z4=m(["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "],["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "])),h5,(function(t){return r=t}),i.eventEmitter,i.getEditorElements(),i.options.hideModeSwitch,i.options.toolbarItems,i.options.previewStyle,i.options.initialEditType,i.options.theme));return i.setMinHeight(i.options.minHeight),i.setHeight(i.options.height),i.defaultUI={insertToolbarItem:r.insertToolbarItem.bind(r),removeToolbarItem:r.removeToolbarItem.bind(r),destroy:o},null===(n=i.pluginInfo.toolbarItems)||void 0===n||n.forEach((function(t){var e=t.groupIndex,n=t.itemIndex,r=t.item;i.defaultUI.insertToolbarItem({groupIndex:e,itemIndex:n},r)})),i.eventEmitter.emit("loadUI",i),i}return d(e,t),e.factory=function(t){return t.viewer?new w2(t):new e(t)},e.prototype.insertToolbarItem=function(t,e){this.defaultUI.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.defaultUI.removeToolbarItem(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.defaultUI.destroy()},e}(I2);I2.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"})}).call(this,n("24aa"))},"58e0":function(t,e,n){"use strict";(function(t){var r=n("26ee"),i=n("2f74"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o,l=a?r["a"].Buffer:void 0,c=l?l.isBuffer:void 0,h=c||i["a"];e["a"]=h}).call(this,n("faff")(t))},"5d5f":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("d056");const i=t=>t.richText?Object(r["Z"])(t.text):t.text,o=t=>new Array(t).fill("   ").join(""),s=t=>{let e="";return Object(r["qb"])(t,null,(t,n,r,s)=>{e+=o(s),e+=" "+i(t.data);const a=t.data.generalization;Array.isArray(a)?e+=a.map(t=>` [${i(t)}]`):a&&a.text&&(e+=` [${i(a)}]`),e+="\n\n"},()=>{},!0),e}},"5da1":function(t,e,n){(function(t,n){var r=200,i="__lodash_hash_undefined__",o=1,s=2,a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",m="[object GeneratorFunction]",g="[object Map]",v="[object Number]",y="[object Null]",b="[object Object]",w="[object Promise]",x="[object Proxy]",C="[object RegExp]",E="[object Set]",k="[object String]",N="[object Symbol]",O="[object Undefined]",T="[object WeakMap]",M="[object ArrayBuffer]",S="[object DataView]",L="[object Float32Array]",A="[object Float64Array]",D="[object Int8Array]",_="[object Int16Array]",R="[object Int32Array]",P="[object Uint8Array]",I="[object Uint8ClampedArray]",j="[object Uint16Array]",z="[object Uint32Array]",B=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,q={};q[L]=q[A]=q[D]=q[_]=q[R]=q[P]=q[I]=q[j]=q[z]=!0,q[l]=q[c]=q[M]=q[u]=q[S]=q[d]=q[f]=q[p]=q[g]=q[v]=q[b]=q[C]=q[E]=q[k]=q[T]=!1;var W="object"==typeof t&&t&&t.Object===Object&&t,U="object"==typeof self&&self&&self.Object===Object&&self,$=W||U||Function("return this")(),V=e&&!e.nodeType&&e,G=V&&"object"==typeof n&&n&&!n.nodeType&&n,Y=G&&G.exports===V,K=Y&&W.process,X=function(){try{return K&&K.binding&&K.binding("util")}catch(t){}}(),Z=X&&X.isTypedArray;function J(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Q(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function tt(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}function et(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function nt(t){return function(e){return t(e)}}function rt(t,e){return t.has(e)}function it(t,e){return null==t?void 0:t[e]}function ot(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function st(t,e){return function(n){return t(e(n))}}function at(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var lt=Array.prototype,ct=Function.prototype,ht=Object.prototype,ut=$["__core-js_shared__"],dt=ct.toString,ft=ht.hasOwnProperty,pt=function(){var t=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),mt=ht.toString,gt=RegExp("^"+dt.call(ft).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=Y?$.Buffer:void 0,yt=$.Symbol,bt=$.Uint8Array,wt=ht.propertyIsEnumerable,xt=lt.splice,Ct=yt?yt.toStringTag:void 0,Et=Object.getOwnPropertySymbols,kt=vt?vt.isBuffer:void 0,Nt=st(Object.keys,Object),Ot=Te($,"DataView"),Tt=Te($,"Map"),Mt=Te($,"Promise"),St=Te($,"Set"),Lt=Te($,"WeakMap"),At=Te(Object,"create"),Dt=Ie(Ot),_t=Ie(Tt),Rt=Ie(Mt),Pt=Ie(St),It=Ie(Lt),jt=yt?yt.prototype:void 0,zt=jt?jt.valueOf:void 0;function Bt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Ft(){this.__data__=At?At(null):{},this.size=0}function Ht(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function qt(t){var e=this.__data__;if(At){var n=e[t];return n===i?void 0:n}return ft.call(e,t)?e[t]:void 0}function Wt(t){var e=this.__data__;return At?void 0!==e[t]:ft.call(e,t)}function Ut(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=At&&void 0===e?i:e,this}function $t(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Vt(){this.__data__=[],this.size=0}function Gt(t){var e=this.__data__,n=fe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():xt.call(e,n,1),--this.size,!0}function Yt(t){var e=this.__data__,n=fe(e,t);return n<0?void 0:e[n][1]}function Kt(t){return fe(this.__data__,t)>-1}function Xt(t,e){var n=this.__data__,r=fe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Zt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Jt(){this.size=0,this.__data__={hash:new Bt,map:new(Tt||$t),string:new Bt}}function Qt(t){var e=Oe(this,t)["delete"](t);return this.size-=e?1:0,e}function te(t){return Oe(this,t).get(t)}function ee(t){return Oe(this,t).has(t)}function ne(t,e){var n=Oe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function re(t){var e=-1,n=null==t?0:t.length;this.__data__=new Zt;while(++e<n)this.add(t[e])}function ie(t){return this.__data__.set(t,i),this}function oe(t){return this.__data__.has(t)}function se(t){var e=this.__data__=new $t(t);this.size=e.size}function ae(){this.__data__=new $t,this.size=0}function le(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function ce(t){return this.__data__.get(t)}function he(t){return this.__data__.has(t)}function ue(t,e){var n=this.__data__;if(n instanceof $t){var i=n.__data__;if(!Tt||i.length<r-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Zt(i)}return n.set(t,e),this.size=n.size,this}function de(t,e){var n=Be(t),r=!n&&ze(t),i=!n&&!r&&He(t),o=!n&&!r&&!i&&Ge(t),s=n||r||i||o,a=s?et(t.length,String):[],l=a.length;for(var c in t)!e&&!ft.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ae(c,l))||a.push(c);return a}function fe(t,e){var n=t.length;while(n--)if(je(t[n][0],e))return n;return-1}function pe(t,e,n){var r=e(t);return Be(t)?r:Q(r,n(t))}function me(t){return null==t?void 0===t?O:y:Ct&&Ct in Object(t)?Me(t):Pe(t)}function ge(t){return Ve(t)&&me(t)==l}function ve(t,e,n,r,i){return t===e||(null==t||null==e||!Ve(t)&&!Ve(e)?t!==t&&e!==e:ye(t,e,n,r,ve,i))}function ye(t,e,n,r,i,s){var a=Be(t),h=Be(e),u=a?c:Le(t),d=h?c:Le(e);u=u==l?b:u,d=d==l?b:d;var f=u==b,p=d==b,m=u==d;if(m&&He(t)){if(!He(e))return!1;a=!0,f=!1}if(m&&!f)return s||(s=new se),a||Ge(t)?Ce(t,e,n,r,i,s):Ee(t,e,u,n,r,i,s);if(!(n&o)){var g=f&&ft.call(t,"__wrapped__"),v=p&&ft.call(e,"__wrapped__");if(g||v){var y=g?t.value():t,w=v?e.value():e;return s||(s=new se),i(y,w,n,r,s)}}return!!m&&(s||(s=new se),ke(t,e,n,r,i,s))}function be(t){if(!$e(t)||_e(t))return!1;var e=We(t)?gt:F;return e.test(Ie(t))}function we(t){return Ve(t)&&Ue(t.length)&&!!q[me(t)]}function xe(t){if(!Re(t))return Nt(t);var e=[];for(var n in Object(t))ft.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ce(t,e,n,r,i,a){var l=n&o,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var d=-1,f=!0,p=n&s?new re:void 0;a.set(t,e),a.set(e,t);while(++d<c){var m=t[d],g=e[d];if(r)var v=l?r(g,m,d,e,t,a):r(m,g,d,t,e,a);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!tt(e,(function(t,e){if(!rt(p,e)&&(m===t||i(m,t,n,r,a)))return p.push(e)}))){f=!1;break}}else if(m!==g&&!i(m,g,n,r,a)){f=!1;break}}return a["delete"](t),a["delete"](e),f}function Ee(t,e,n,r,i,a,l){switch(n){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!a(new bt(t),new bt(e)));case u:case d:case v:return je(+t,+e);case f:return t.name==e.name&&t.message==e.message;case C:case k:return t==e+"";case g:var c=ot;case E:var h=r&o;if(c||(c=at),t.size!=e.size&&!h)return!1;var p=l.get(t);if(p)return p==e;r|=s,l.set(t,e);var m=Ce(c(t),c(e),r,i,a,l);return l["delete"](t),m;case N:if(zt)return zt.call(t)==zt.call(e)}return!1}function ke(t,e,n,r,i,s){var a=n&o,l=Ne(t),c=l.length,h=Ne(e),u=h.length;if(c!=u&&!a)return!1;var d=c;while(d--){var f=l[d];if(!(a?f in e:ft.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var m=!0;s.set(t,e),s.set(e,t);var g=a;while(++d<c){f=l[d];var v=t[f],y=e[f];if(r)var b=a?r(y,v,f,e,t,s):r(v,y,f,t,e,s);if(!(void 0===b?v===y||i(v,y,n,r,s):b)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var w=t.constructor,x=e.constructor;w==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return s["delete"](t),s["delete"](e),m}function Ne(t){return pe(t,Ye,Se)}function Oe(t,e){var n=t.__data__;return De(e)?n["string"==typeof e?"string":"hash"]:n.map}function Te(t,e){var n=it(t,e);return be(n)?n:void 0}function Me(t){var e=ft.call(t,Ct),n=t[Ct];try{t[Ct]=void 0;var r=!0}catch(o){}var i=mt.call(t);return r&&(e?t[Ct]=n:delete t[Ct]),i}Bt.prototype.clear=Ft,Bt.prototype["delete"]=Ht,Bt.prototype.get=qt,Bt.prototype.has=Wt,Bt.prototype.set=Ut,$t.prototype.clear=Vt,$t.prototype["delete"]=Gt,$t.prototype.get=Yt,$t.prototype.has=Kt,$t.prototype.set=Xt,Zt.prototype.clear=Jt,Zt.prototype["delete"]=Qt,Zt.prototype.get=te,Zt.prototype.has=ee,Zt.prototype.set=ne,re.prototype.add=re.prototype.push=ie,re.prototype.has=oe,se.prototype.clear=ae,se.prototype["delete"]=le,se.prototype.get=ce,se.prototype.has=he,se.prototype.set=ue;var Se=Et?function(t){return null==t?[]:(t=Object(t),J(Et(t),(function(e){return wt.call(t,e)})))}:Ke,Le=me;function Ae(t,e){return e=null==e?a:e,!!e&&("number"==typeof t||H.test(t))&&t>-1&&t%1==0&&t<e}function De(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function _e(t){return!!pt&&pt in t}function Re(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ht;return t===n}function Pe(t){return mt.call(t)}function Ie(t){if(null!=t){try{return dt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function je(t,e){return t===e||t!==t&&e!==e}(Ot&&Le(new Ot(new ArrayBuffer(1)))!=S||Tt&&Le(new Tt)!=g||Mt&&Le(Mt.resolve())!=w||St&&Le(new St)!=E||Lt&&Le(new Lt)!=T)&&(Le=function(t){var e=me(t),n=e==b?t.constructor:void 0,r=n?Ie(n):"";if(r)switch(r){case Dt:return S;case _t:return g;case Rt:return w;case Pt:return E;case It:return T}return e});var ze=ge(function(){return arguments}())?ge:function(t){return Ve(t)&&ft.call(t,"callee")&&!wt.call(t,"callee")},Be=Array.isArray;function Fe(t){return null!=t&&Ue(t.length)&&!We(t)}var He=kt||Xe;function qe(t,e){return ve(t,e)}function We(t){if(!$e(t))return!1;var e=me(t);return e==p||e==m||e==h||e==x}function Ue(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function $e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ve(t){return null!=t&&"object"==typeof t}var Ge=Z?nt(Z):we;function Ye(t){return Fe(t)?de(t):xe(t)}function Ke(){return[]}function Xe(){return!1}n.exports=qe}).call(this,n("24aa"),n("7ebd")(t))},"5ea3":function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e["a"]=n}).call(this,n("24aa"))},"6f27":function(t,e,n){"use strict";function r(t){this.content=t}r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var i=r;function o(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let t=0;i.text[t]==s.text[t];t++)n++;return n}if(i.content.size||s.content.size){let t=o(i.content,s.content,n+1);if(null!=t)return t}n+=i.nodeSize}else n+=i.nodeSize}}function s(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=t.child(--i),l=e.child(--o),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let t=0,e=Math.min(a.text.length,l.text.length);while(t<e&&a.text[a.text.length-t-1]==l.text[l.text.length-t-1])t++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let t=s(a.content,l.content,n-1,r-1);if(t)return t}n-=c,r-=c}else n-=c,r-=c}}n.d(e,"a",(function(){return at})),n.d(e,"b",(function(){return xt})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return nt})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return L})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return rt})),n.d(e,"j",(function(){return f}));class a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,r=0,i){for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,t-i),Math.min(a.content.size,e-i),n,r+i)}s=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let i="",o=!0;return this.nodesBetween(t,e,(s,a)=>{let l=s.isText?s.text.slice(Math.max(t,a)-a,e-a):s.isLeaf?r?"function"===typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new a(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let i=0,o=0;o<e;i++){let s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new a(n,r)}cutByIndex(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,i)}addToStart(t){return new a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return o(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?c(n+1,o):c(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return a.empty;let e,n=0;for(let r=0;r<t.length;r++){let i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new a(e||t,n)}static from(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(t,e){return l.index=t,l.offset=e,l}function h(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!h(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!h(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class u{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&h(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);let r=n.create(e.attrs);return n.checkAttrs(r.attrs),r}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return u.none;if(t instanceof u)return[t];let e=t.slice();return e.sort((t,e)=>t.type.rank-e.type.rank),e}}u.none=[];class d extends Error{}class f{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=m(this.content,t+this.openStart,e);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(t,e){return new f(p(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return f.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new f(t,n,r)}}function p(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(p(o.content,e-i-1,n-i-1)))}function m(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=m(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function g(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return v(t,e,n,0)}function v(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=v(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:i,end:s}=N(n,t);return C(o,E(t,i,s,e,r))}{let r=t.parent,i=r.content;return C(r,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}}return C(o,k(t,e,r))}function y(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function b(t,e,n){let r=t.node(n);return y(r,e.node(n)),r}function w(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function x(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(w(t.nodeAfter,r),o++));for(let a=o;a<s;a++)w(i.child(a),r);e&&e.depth==n&&e.textOffset&&w(e.nodeBefore,r)}function C(t,e){return t.type.checkContent(e),t.copy(e)}function E(t,e,n,r,i){let o=t.depth>i&&b(t,e,i+1),s=r.depth>i&&b(n,r,i+1),l=[];return x(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(y(o,s),w(C(o,E(t,e,n,r,i+1)),l)):(o&&w(C(o,k(t,e,i+1)),l),x(e,n,i,l),s&&w(C(s,k(n,r,i+1)),l)),x(r,null,i,l),new a(l)}function k(t,e,n){let r=[];if(x(null,t,n,r),t.depth>n){let i=b(t,e,n+1);w(C(i,k(t,e,n+1)),r)}return x(e,null,n,r),new a(r)}function N(t,e){let n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(a.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}f.empty=new f(a.empty,0,0);class O{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let i=0;i<t;i++)r+=n.child(i).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return u.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new L(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,i=e;for(let o=t;;){let{index:t,offset:e}=o.content.findIndex(i),s=i-e;if(n.push(o,t,r+e),!s)break;if(o=o.child(t),o.isText)break;i=s-1,r+=e+1}return new O(e,n,i)}static resolveCached(t,e){let n=S.get(t);if(n)for(let i=0;i<n.elts.length;i++){let t=n.elts[i];if(t.pos==e)return t}else S.set(t,n=new T);let r=n.elts[n.i]=O.resolve(t,e);return n.i=(n.i+1)%M,r}}class T{constructor(){this.elts=[],this.i=0}}const M=12,S=new WeakMap;class L{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const A=Object.create(null);class D{constructor(t,e,n,r=u.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&h(this.attrs,e||t.defaultAttrs||A)&&u.sameSet(this.marks,n||u.none)}copy(t=null){return t==this.content?this:new D(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new D(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return f.empty;let r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),l=a.content.cut(r.pos-s,i.pos-s);return new f(l,r.depth-o,i.depth-o)}replace(t,e,n){return g(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return O.resolveCached(this,t)}resolveNoCache(t){return O.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,t=>(n.isInSet(t.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),R(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=a.empty,r=0,i=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=u.none;for(let e=0;e<this.marks.length;e++){let n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!u.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(t=>t.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n=void 0;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=a.fromJSON(t,e.content),i=t.nodeType(e.type).create(e.attrs,r,n);return i.type.checkAttrs(i.attrs),i}}D.prototype.text=void 0;class _ extends D{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):R(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new _(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new _(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function R(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class P{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new I(t,e);if(null==n.next)return P.empty;let r=j(n);n.next&&n.err("Unexpected trailing text");let i=G(U(r));return Y(i,n),i}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];function i(o,s){let l=o.matchFragment(t,n);if(l&&(!e||l.validEnd))return a.from(s.map(t=>t.createAndFill()));for(let t=0;t<o.next.length;t++){let{type:e,next:n}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=i(n,s.concat(e));if(t)return t}}return null}return i(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){let r=n.shift(),i=r.match;if(i.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<i.next.length;t++){let{type:o,next:s}=i.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}return e(this),t.map((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r}).join("\n")}}P.empty=new P(!0);class I{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function j(t){let e=[];do{e.push(z(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function z(t){let e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){let e=W(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=H(t,e)}return e}function F(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function H(t,e){let n=F(t),r=n;return t.eat(",")&&(r="}"!=t.next?F(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function q(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let t=n[o];t.isInGroup(e)&&i.push(t)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function W(t){if(t.eat("(")){let e=j(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=q(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}function U(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach(t=>t.to=e)}function o(t,e){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(o(n,e)),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return i(o(t.expr,e),s),i(o(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=n();i(o(t.expr,s),e),s=e}if(-1==t.max)i(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=n();r(s,e),i(o(t.expr,s),e),s=e}return[r(s)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(t.exprs[r],e);if(r==t.exprs.length-1)return s;i(s,e=n())}}}function $(t,e){return e-t}function V(t,e){let n=[];return r(e),n.sort($);function r(e){let i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(let t=0;t<i.length;t++){let{term:e,to:o}=i[t];e||-1!=n.indexOf(o)||r(o)}}}function G(t){let e=Object.create(null);return n(V(t,0));function n(r){let i=[];r.forEach(e=>{t[e].forEach(({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);V(t,n).forEach(t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)})})});let o=e[r.join(",")]=new P(r.indexOf(t.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort($);o.next.push({type:i[t][0],next:e[r.join(",")]||n(r)})}return o}}function Y(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],i=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function K(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function X(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(void 0===i){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=e.default}n[r]=i}return n}function Z(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let n=t[i];n.validate&&n.validate(e[i])}}function J(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new et(t,r,e[r]);return n}class Q{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=J(t,n.attrs),this.defaultAttrs=K(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==P.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:X(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new D(this,this.computeAttrs(t),a.from(e),u.setFrom(n))}createChecked(t=null,e,n){return e=a.from(e),this.checkContent(e),new D(this,this.computeAttrs(t),e,u.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),e=a.from(e),e.size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),i=r&&r.fillBefore(a.empty,!0);return i?new D(this,t,e.append(i),u.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Z(this.attrs,t,"node",this.name)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:u.none:t}static compile(t,e){let n=Object.create(null);t.forEach((t,r)=>n[t]=new Q(t,e,r));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}function tt(t,e,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class et{constructor(t,e,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?tt(t,e,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class nt{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=J(t,r.attrs),this.excluded=null;let i=K(this.attrs);this.instance=i?new u(this,i):null}create(t=null){return!t&&this.instance?this.instance:new u(this,X(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach((t,i)=>n[t]=new nt(t,r++,e,i)),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){Z(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class rt{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=i.from(t.nodes),e.marks=i.from(t.marks||{}),this.nodes=Q.compile(this.spec.nodes,this),this.marks=nt.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let t=this.nodes[r],e=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[e]||(n[e]=P.parse(e,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?it(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let r in this.marks){let t=this.marks[r],e=t.spec.excludes;t.excluded=null==e?[t]:""==e?[]:it(this,e.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Q))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new _(n,n.defaultAttrs,t,u.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return D.fromJSON(this,t)}markFromJSON(t){return u.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function it(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let e in t.marks){let r=t.marks[e];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function ot(t){return null!=t.tag}function st(t){return null!=t.style}class at{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let n=this.matchedStyles=[];e.forEach(t=>{if(ot(t))this.tags.push(t);else if(st(t)){let e=/[^=]*/.exec(t.style)[0];n.indexOf(e)<0&&n.push(e),this.styles.push(t)}}),this.normalizeLists=!this.tags.some(e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)})}parse(t,e={}){let n=new gt(this,e,!1);return n.addAll(t,u.none,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new gt(this,e,!0);return n.addAll(t,u.none,e.from,e.to),f.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(yt(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(t)||r.context&&!n.matchesContext(r.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r],i=null==t.priority?50:t.priority;if(i<n)break}e.splice(r,0,t)}for(let r in t.marks){let e=t.marks[r].spec.parseDOM;e&&e.forEach(t=>{n(t=bt(t)),t.mark||t.ignore||t.clearMark||(t.mark=r)})}for(let r in t.nodes){let e=t.nodes[r].spec.parseDOM;e&&e.forEach(t=>{n(t=bt(t)),t.node||t.ignore||t.mark||(t.node=r)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new at(t,at.schemaRules(t)))}}const lt={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ct={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ht={ol:!0,ul:!0},ut=1,dt=2,ft=4;function pt(t,e,n){return null!=e?(e?ut:0)|("full"===e?dt:0):t&&"pre"==t.whitespace?ut|dt:n&~ft}class mt{constructor(t,e,n,r,i,o){this.type=t,this.attrs=e,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=u.none,this.match=i||(o&ft?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ut)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!lt.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class gt{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,i=e.topNode,o=pt(null,e.preserveWhitespace,0)|(n?ft:0);r=i?new mt(i.type,i.attrs,u.none,!0,e.topMatch||i.type.contentMatch,o):new mt(n?null:t.schema.topNodeType,null,u.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){3==t.nodeType?this.addTextNode(t,e):1==t.nodeType&&this.addElement(t,e)}addTextNode(t,e){let n=t.nodeValue,r=this.top;if(r.options&dt||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&ut)n=r.options&dt?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let e=r.content[r.content.length-1],i=t.previousSibling;(!e||i&&"BR"==i.nodeName||e.isText&&/[ \t\r\n\u000c]$/.test(e.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,n){let r,i=t.nodeName.toLowerCase();ht.hasOwnProperty(i)&&this.parser.normalizeLists&&vt(t);let o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,n));if(o?o.ignore:ct.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);let n,r=this.top,s=this.needsBlock;if(lt.hasOwnProperty(i))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t,e);let a=o&&o.skip?e:this.readStyles(t,e);a&&this.addAll(t,a),n&&this.sync(r),this.needsBlock=s}else{let n=this.readStyles(t,e);n&&this.addElementByRule(t,o,n,!1===o.consuming?r:void 0)}}leafFallback(t,e){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"),e)}ignoreFallback(t,e){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let n=t.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let t=this.parser.matchedStyles[r],i=n.getPropertyValue(t);if(i)for(let n=void 0;;){let r=this.parser.matchStyle(t,i,this,n);if(!r)break;if(r.ignore)return null;if(e=r.clearMark?e.filter(t=>!r.clearMark(t)):e.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return e}addElementByRule(t,e,n,r){let i,o;if(e.node)if(o=this.parser.schema.nodes[e.node],o.isLeaf)this.insertNode(o.create(e.attrs),n)||this.leafFallback(t,n);else{let t=this.enter(o,e.attrs||null,n,e.preserveWhitespace);t&&(i=!0,n=t)}else{let t=this.parser.schema.marks[e.mark];n=n.concat(t.create(e.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(t);else if(r)this.addElement(t,n,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(t=>this.insertNode(t,n));else{let r=t;"string"==typeof e.contentElement?r=t.querySelector(e.contentElement):"function"==typeof e.contentElement?r=e.contentElement(t):e.contentElement&&(r=e.contentElement),this.findAround(t,r,!0),this.addAll(r,n),this.findAround(t,r,!1)}i&&this.sync(s)&&this.open--}addAll(t,e,n,r){let i=n||0;for(let o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o,e);this.findAtPoint(t,i)}findPlace(t,e){let n,r;for(let i=this.open;i>=0;i--){let e=this.nodes[i],o=e.findWrapping(t);if(o&&(!n||n.length>o.length)&&(n=o,r=e,!o.length))break;if(e.solid)break}if(!n)return null;this.sync(r);for(let i=0;i<n.length;i++)e=this.enterInner(n[i],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&(e=this.enterInner(t,null,e))}let n=this.findPlace(t,e);if(n){this.closeExtra();let e=this.top;e.match&&(e.match=e.match.matchType(t.type));let r=u.none;for(let i of n.concat(t.marks))(e.type?e.type.allowsMarkType(i.type):wt(i.type,t.type))&&(r=i.addToSet(r));return e.content.push(t.mark(r)),!0}return!1}enter(t,e,n,r){let i=this.findPlace(t.create(e),n);return i&&(i=this.enterInner(t,e,n,!0,r)),i}enterInner(t,e,n,r=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let s=pt(t,i,o.options);o.options&ft&&0==o.content.length&&(s|=ft);let a=u.none;return n=n.filter(e=>!(o.type?o.type.allowsMarkType(e.type):wt(e.type,t))||(a=e.addToSet(a),!1)),this.nodes.push(new mt(t,e,a,r,null,s)),this.open++,n}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){let t=e.compareDocumentPosition(this.find[r].node);t&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=i;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!t||t.name!=a&&!t.isInGroup(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function vt(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&ht.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}function yt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function bt(t){let e={};for(let n in t)e[n]=t[n];return e}function wt(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:i}=t.edge(n);if(r==e)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}class xt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=Et(e).createDocumentFragment());let r=n,i=[];return t.forEach(t=>{if(i.length||t.marks.length){let n=0,o=0;while(n<i.length&&o<t.marks.length){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(i[n][0])||!1===e.type.spec.spanning)break;n++,o++}else o++}while(n<i.length)r=i.pop()[1];while(o<t.marks.length){let n=t.marks[o++],s=this.serializeMark(n,t.isInline,e);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))}),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=Tt(Et(e),this.nodes[t.type.name](t),null,t.attrs);if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&Tt(Et(n),r(t,e),null,t.attrs)}static renderSpec(t,e,n=null,r){return Tt(t,e,n,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new xt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=Ct(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return Ct(t.marks)}}function Ct(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Et(t){return t.document||window.document}const kt=new WeakMap;function Nt(t){let e=kt.get(t);return void 0===e&&kt.set(t,e=Ot(t)),e}function Ot(t){let e=null;function n(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])e||(e=[]),e.push(t);else for(let e=0;e<t.length;e++)n(t[e]);else for(let e in t)n(t[e])}return n(t),e}function Tt(t,e,n,r){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let i,o=e[0];if("string"!=typeof o)throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=Nt(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=o.indexOf(" ");a>0&&(n=o.slice(0,a),o=o.slice(a+1));let l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],h=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){h=2;for(let t in c)if(null!=c[t]){let e=t.indexOf(" ");e>0?l.setAttributeNS(t.slice(0,e),t.slice(e+1),c[t]):l.setAttribute(t,c[t])}}for(let u=h;u<e.length;u++){let i=e[u];if(0===i){if(u<e.length-1||u>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:e,contentDOM:o}=Tt(t,i,n,r);if(l.appendChild(e),o){if(s)throw new RangeError("Multiple content holes");s=o}}}return{dom:l,contentDOM:s}}},"6ffb":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return A})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return h}));var r=n("6f27"),i=n("b923");const o=Object.create(null);class s{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new a(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=r["j"].empty){let n=e.content.lastChild,i=null;for(let r=0;r<e.openEnd;r++)i=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],h=t.mapping.slice(o);t.replaceRange(h.map(l.pos),h.map(c.pos),a?r["j"].empty:e),0==a&&v(t,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=t.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),v(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new h(t):g(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let i=t.depth-1;i>=0;i--){let r=e<0?g(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):g(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new p(t.node(0))}static atStart(t){return g(t,t,0,0,1)||new p(t)}static atEnd(t){return g(t,t,t.content.size,t.childCount,-1)||new p(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=o[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e}getBookmark(){return h.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(t,e){this.$from=t,this.$to=e}}let l=!1;function c(t){l||t.parent.inlineContent||(l=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class h extends s{constructor(t,e=t){c(t),c(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=t.resolve(e.map(this.anchor));return new h(r.parent.inlineContent?r:n,n)}replace(t,e=r["j"].empty){if(super.replace(t,e),e==r["j"].empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof h&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new u(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new h(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=s.findFrom(e,n,!0)||s.findFrom(e,-n,!0);if(!t)return s.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r?t=e:(t=(s.findFrom(t,-n,!0)||s.findFrom(t,n,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new h(t,e)}}s.jsonID("text",h);class u{constructor(t,e){this.anchor=t,this.head=e}map(t){return new u(t.map(this.anchor),t.map(this.head))}resolve(t){return h.between(t.resolve(this.anchor),t.resolve(this.head))}}class d extends s{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),i=t.resolve(r);return n?s.near(i):new d(i)}content(){return new r["j"](r["c"].from(this.node),0,0)}eq(t){return t instanceof d&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new d(t.resolve(e.anchor))}static create(t,e){return new d(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}d.prototype.visible=!1,s.jsonID("node",d);class f{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new u(n,n):new f(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):s.near(e)}}class p extends s{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=r["j"].empty){if(e==r["j"].empty){t.delete(0,t.doc.content.size);let e=s.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new p(t)}map(t){return new p(t)}eq(t){return t instanceof p}getBookmark(){return m}}s.jsonID("all",p);const m={map(){return this},resolve(t){return new p(t)}};function g(t,e,n,r,i,o=!1){if(e.inlineContent)return h.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let r=e.child(s);if(r.isAtom){if(!o&&d.isSelectable(r))return d.create(t,n-(i<0?r.nodeSize:0))}else{let e=g(t,r,n+i,i<0?r.childCount:0,i,o);if(e)return e}n+=r.nodeSize*i}return null}function v(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof i["c"]||o instanceof i["b"]))return;let a,l=t.mapping.maps[r];l.forEach((t,e,n,r)=>{null==a&&(a=r)}),t.setSelection(s.near(t.doc.resolve(a),n))}const y=1,b=2,w=4;class x extends i["e"]{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|y)&~b,this.storedMarks=null,this}get selectionSet(){return(this.updated&y)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=b,this}ensureMarks(t){return r["d"].sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&b)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~b,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r["d"].none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let i=this.storedMarks;if(!i){let t=this.doc.resolve(e);i=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=w,this}get scrolledIntoView(){return(this.updated&w)>0}}function C(t,e){return e&&t?t.bind(e):t}class E{constructor(t,e,n){this.name=t,this.init=C(e.init,n),this.apply=C(e.apply,n)}}const k=[new E("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new E("selection",{init(t,e){return t.selection||s.atStart(e.doc)},apply(t){return t.selection}}),new E("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new E("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class N{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=k.slice(),e&&e.forEach(t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new E(t.key,t.spec.state,t))})}}class O{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<o?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new O(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}return e}get tr(){return new x(this)}static create(t){let e=new N(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new O(e);for(let r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n}reconfigure(t){let e=new N(this.schema,t.plugins),n=e.fields,r=new O(e);for(let i=0;i<n.length;i++){let e=n[i].name;r[e]=this.hasOwnProperty(e)?this[e]:n[i].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(t=>t.toJSON())),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new N(t.schema,t.plugins),o=new O(i);return i.fields.forEach(i=>{if("doc"==i.name)o.doc=r["f"].fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(o[i.name]=a.fromJSON.call(s,t,e[r],o))}o[i.name]=i.init(t,o)}}),o}}function T(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=T(i,e,{})),n[r]=i}return n}class M{constructor(t){this.spec=t,this.props={},t.props&&T(t.props,this,this.props),this.key=t.key?t.key.key:L("plugin")}getState(t){return t[this.key]}}const S=Object.create(null);function L(t){return t in S?t+"$"+ ++S[t]:(S[t]=0,t+"$")}class A{constructor(t="key"){this.key=L(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},"703f":function(t,e,n){"use strict";n.d(e,"a",(function(){return In})),n.d(e,"b",(function(){return Bn})),n.d(e,"c",(function(){return yr}));var r=n("6ffb"),i=n("6f27"),o=n("b923");const s=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},a=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let l=null;const c=function(t,e,n){let r=l||(l=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},h=function(){l=null},u=function(t,e,n,r){return n&&(f(t,e,n,r,-1)||f(t,e,n,r,1))},d=/^(img|br|input|textarea|hr)$/i;function f(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:p(t))){let n=t.parentNode;if(!n||1!=n.nodeType||y(t)||d.test(t.nodeName)||"false"==t.contentEditable)return!1;e=s(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(i<0?-1:0)],"false"==t.contentEditable)return!1;e=i<0?p(t):0}}}function p(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function m(t,e){for(;;){if(3==t.nodeType&&e)return t;if(1==t.nodeType&&e>0){if("false"==t.contentEditable)return null;t=t.childNodes[e-1],e=p(t)}else{if(!t.parentNode||y(t))return null;e=s(t),t=t.parentNode}}}function g(t,e){for(;;){if(3==t.nodeType&&e<t.nodeValue.length)return t;if(1==t.nodeType&&e<t.childNodes.length){if("false"==t.contentEditable)return null;t=t.childNodes[e],e=0}else{if(!t.parentNode||y(t))return null;e=s(t)+1,t=t.parentNode}}}function v(t,e,n){for(let r=0==e,i=e==p(t);r||i;){if(t==n)return!0;let e=s(t);if(t=t.parentNode,!t)return!1;r=r&&0==e,i=i&&e==p(t)}}function y(t){let e;for(let n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const b=function(t){return t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function w(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function x(t){let e=t.activeElement;while(e&&e.shadowRoot)e=e.shadowRoot.activeElement;return e}function C(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(p(r.offsetNode),r.offset)}}catch(r){}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(p(r.startContainer),r.startOffset)}}}const E="undefined"!=typeof navigator?navigator:null,k="undefined"!=typeof document?document:null,N=E&&E.userAgent||"",O=/Edge\/(\d+)/.exec(N),T=/MSIE \d/.exec(N),M=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(N),S=!!(T||M||O),L=T?document.documentMode:M?+M[1]:O?+O[1]:0,A=!S&&/gecko\/(\d+)/i.test(N);A&&(/Firefox\/(\d+)/.exec(N)||[0,0])[1];const D=!S&&/Chrome\/(\d+)/.exec(N),_=!!D,R=D?+D[1]:0,P=!S&&!!E&&/Apple Computer/.test(E.vendor),I=P&&(/Mobile\/\w+/.test(N)||!!E&&E.maxTouchPoints>2),j=I||!!E&&/Mac/.test(E.platform),z=!!E&&/Win/.test(E.platform),B=/Android \d/.test(N),F=!!k&&"webkitFontSmoothing"in k.documentElement.style,H=F?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function q(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function W(t,e){return"number"==typeof t?t:t[e]}function U(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function $(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;;s=a(s)){if(!s)break;if(1!=s.nodeType)continue;let t=s,n=t==o.body,a=n?q(o):U(t),l=0,c=0;if(e.top<a.top+W(r,"top")?c=-(a.top-e.top+W(i,"top")):e.bottom>a.bottom-W(r,"bottom")&&(c=e.bottom-e.top>a.bottom-a.top?e.top+W(i,"top")-a.top:e.bottom-a.bottom+W(i,"bottom")),e.left<a.left+W(r,"left")?l=-(a.left-e.left+W(i,"left")):e.right>a.right-W(r,"right")&&(l=e.right-a.right+W(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=t.scrollLeft,r=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let i=t.scrollLeft-n,o=t.scrollTop-r;e={left:e.left-i,top:e.top-o,right:e.right-i,bottom:e.bottom-o}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function V(t){let e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=t.root.elementFromPoint(o,s);if(!r||r==t.dom||!t.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){e=r,n=a.top;break}}return{refDOM:e,refTop:n,stack:G(t.dom)}}function G(t){let e=[],n=t.ownerDocument;for(let r=t;r;r=a(r))if(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t==n)break;return e}function Y({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;K(n,0==r?0:r-e)}function K(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let X=null;function Z(t){if(t.setActive)return t.setActive();if(X)return t.focus(X);let e=G(t);t.focus(null==X?{get preventScroll(){return X={preventScroll:!0},!0}}:void 0),X||(X=!1,K(e,0))}function J(t,e){let n,r,i,o,s=2e8,a=0,l=e.top,h=e.top;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let t;if(1==u.nodeType)t=u.getClientRects();else{if(3!=u.nodeType)continue;t=c(u).getClientRects()}for(let c=0;c<t.length;c++){let f=t[c];if(f.top<=l&&f.bottom>=h){l=Math.max(f.bottom,l),h=Math.min(f.top,h);let t=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(t<s){n=u,s=t,r=t&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==u.nodeType&&t&&(a=d+(e.left>=(f.left+f.right)/2?1:0));continue}}else f.top>e.top&&!i&&f.left<=e.left&&f.right>=e.left&&(i=u,o={left:Math.max(f.left,Math.min(f.right,e.left)),top:f.top});!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(a=d+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?Q(n,r):!n||s&&1==n.nodeType?{node:t,offset:a}:J(n,r)}function Q(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let n=at(r,1);if(n.top!=n.bottom&&tt(e,n))return{node:t,offset:i+(e.left>=(n.left+n.right)/2?1:0)}}return{node:t,offset:0}}function tt(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function et(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function nt(t,e,n){let{node:r,offset:i}=J(e,n),o=-1;if(1==r.nodeType&&!r.firstChild){let t=r.getBoundingClientRect();o=t.left!=t.right&&n.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function rt(t,e,n,r){let i=-1;for(let o=e,s=!1;;){if(o==t.dom)break;let e=t.docView.nearestDesc(o,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent||!e.contentDOM)){let t=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&(!s&&t.left>r.left||t.top>r.top?i=e.posBefore:(!s&&t.right<r.left||t.bottom<r.top)&&(i=e.posAfter),s=!0),!e.contentDOM&&i<0&&!e.node.isText){let n=e.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2;return n?e.posBefore:e.posAfter}}o=e.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function it(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=t.childNodes[o];if(1==n.nodeType){let t=n.getClientRects();for(let r=0;r<t.length;r++){let i=t[r];if(tt(e,i))return it(n,e,i)}}if((o=(o+1)%r)==i)break}return t}function ot(t,e){let n,r=t.dom.ownerDocument,i=0,o=C(r,e.left,e.top);o&&({node:n,offset:i}=o);let s,l=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!l||!t.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=t.dom.getBoundingClientRect();if(!tt(e,n))return null;if(l=it(t.dom,e,n),!l)return null}if(P)for(let h=l;n&&h;h=a(h))h.draggable&&(n=void 0);if(l=et(l,e),n){if(A&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let t,r=n.childNodes[i];"IMG"==r.nodeName&&(t=r.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&i++}let r;F&&i&&1==n.nodeType&&1==(r=n.childNodes[i-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=rt(t,n,i,e))}null==s&&(s=nt(t,l,e));let c=t.docView.nearestDesc(l,!0);return{pos:s,inside:c?c.posAtStart-c.border:-1}}function st(t){return t.top<t.bottom||t.left<t.right}function at(t,e){let n=t.getClientRects();if(n.length){let t=n[e<0?0:n.length-1];if(st(t))return t}return Array.prototype.find.call(n,st)||t.getBoundingClientRect()}const lt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ct(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=F||A;if(3==r.nodeType){if(!s||!lt.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let t=i,e=i,o=n<0?1:-1;return n<0&&!i?(e++,o=-1):n>=0&&i==r.nodeValue.length?(t--,o=1):n<0?t--:e++,ht(at(c(r,t,e),o),o<0)}{let t=at(c(r,i,i),n);if(A&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let e=at(c(r,i-1,i-1),-1);if(e.top==t.top){let n=at(c(r,i,i+1),-1);if(n.top!=t.top)return ht(n,n.left<e.left)}}return t}}let a=t.state.doc.resolve(e-(o||0));if(!a.parent.inlineContent){if(null==o&&i&&(n<0||i==p(r))){let t=r.childNodes[i-1];if(1==t.nodeType)return ut(t.getBoundingClientRect(),!1)}if(null==o&&i<p(r)){let t=r.childNodes[i];if(1==t.nodeType)return ut(t.getBoundingClientRect(),!0)}return ut(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==p(r))){let t=r.childNodes[i-1],e=3==t.nodeType?c(t,p(t)-(s?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return ht(at(e,1),!1)}if(null==o&&i<p(r)){let t=r.childNodes[i];while(t.pmViewDesc&&t.pmViewDesc.ignoreForCoords)t=t.nextSibling;let e=t?3==t.nodeType?c(t,0,s?0:1):1==t.nodeType?t:null:null;if(e)return ht(at(e,-1),!0)}return ht(at(3==r.nodeType?c(r):r,-n),n>=0)}function ht(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ut(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function dt(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ft(t,e,n){let r=e.selection,i="up"==n?r.$from:r.$to;return dt(t,e,()=>{let{node:e}=t.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.contentDOM||n.dom;break}e=n.dom.parentNode}let r=ct(t,i.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=c(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let i=e[t];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0})}const pt=/[\u0590-\u08ac]/;function mt(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return a?pt.test(r.parent.textContent)&&a.modify?dt(t,e,()=>{let{focusNode:e,focusOffset:i,anchorNode:o,anchorOffset:s}=t.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:u}=t.domSelectionRange(),d=h&&!c.contains(1==h.nodeType?h:h.parentNode)||e==h&&i==u;try{a.collapse(o,s),e&&(e!=o||i!=s)&&a.extend&&a.extend(e,i)}catch(f){}return null!=l&&(a.caretBidiLevel=l),d}):"left"==n||"backward"==n?o:s:r.pos==r.start()||r.pos==r.end()}let gt=null,vt=null,yt=!1;function bt(t,e,n){return gt==e&&vt==n?yt:(gt=e,vt=n,yt="up"==n||"down"==n?ft(t,e,n):mt(t,e,n))}const wt=0,xt=1,Ct=2,Et=3;class kt{constructor(t,e,n,r){this.parent=t,this.children=e,this.dom=n,this.contentDOM=r,this.dirty=wt,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let r=this.children[e];if(r==t)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let n,r;if(t==this.contentDOM)n=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.previousSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(t==this.contentDOM)n=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.nextSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(t==this.dom&&this.contentDOM)r=e>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!1;break}if(e.previousSibling)break}if(null==r&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!0;break}if(e.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,r=t;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==t.nodeType?t:t.parentNode):i==t))return o;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let n=e;n;n=n.parent)if(n==this)return e}posFromDOM(t,e,n){for(let r=t;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let r=this.children[e],i=n+r.size;if(n==t&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n,r=0,i=0;for(let o=0;r<this.children.length;r++){let e=this.children[r],n=o+e.size;if(n>t||e instanceof At){i=t-o;break}o=n}if(i)return this.children[r].domFromPos(i-this.children[r].border,e);for(;r&&!(n=this.children[r-1]).size&&n instanceof Nt&&n.side>=0;r--);if(e<=0){let t,n=!0;for(;;r--,n=!1)if(t=r?this.children[r-1]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&e&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?s(t.dom)+1:0}}{let t,n=!0;for(;;r++,n=!1)if(t=r<this.children.length?this.children[r]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?s(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],l=o+n.size;if(-1==r&&t<=l){let i=o+n.border;if(t>=i&&e<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(t,e,i);t=o;for(let e=a;e>0;e--){let n=this.children[e-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=s(n.dom)+1;break}t-=n.size}-1==r&&(r=0)}if(r>-1&&(l>e||a==this.children.length-1)){e=l;for(let t=a+1;t<this.children.length;t++){let n=this.children[t];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=s(n.dom);break}e+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,r=!1){let i=Math.min(t,e),o=Math.max(t,e);for(let s=0,u=0;s<this.children.length;s++){let a=this.children[s],l=u+a.size;if(i>u&&o<l)return a.setSelection(t-u-a.border,e-u-a.border,n,r);u=l}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),c=n.root.getSelection(),h=n.domSelectionRange(),d=!1;if((A||P)&&t==e){let{node:t,offset:e}=a;if(3==t.nodeType){if(d=!(!e||"\n"!=t.nodeValue[e-1]),d&&e==t.nodeValue.length)for(let n,r=t;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=l={node:n.parentNode,offset:s(n)+1});break}let t=r.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let n=t.childNodes[e-1];d=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(A&&h.focusNode&&h.focusNode!=l.node&&1==h.focusNode.nodeType){let t=h.focusNode.childNodes[h.focusOffset];t&&"false"==t.contentEditable&&(r=!0)}if(!(r||d&&P)&&u(a.node,a.offset,h.anchorNode,h.anchorOffset)&&u(l.node,l.offset,h.focusNode,h.focusOffset))return;let f=!1;if((c.extend||t==e)&&!d){c.collapse(a.node,a.offset);try{t!=e&&c.extend(l.node,l.offset),f=!0}catch(p){}}if(!f){if(t>e){let t=a;a=l,l=t}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){let r=n+i.border,s=o-i.border;if(t>=r&&e<=s)return this.dirty=t==n||e==o?Ct:xt,void(t!=r||e!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-r,e-r):i.dirty=Et);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?Et:Ct}n=o}this.dirty=Ct}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?Ct:xt;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class Nt extends kt{constructor(t,e,n,r){let i,o=e.type.toDOM;if("function"==typeof o&&(o=o(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!e.type.spec.raw){if(1!=o.nodeType){let t=document.createElement("span");t.appendChild(o),o=t}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,i=this}matchesWidget(t){return this.dirty==wt&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ot extends kt{constructor(t,e,n,r){super(t,[],e,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class Tt extends kt{constructor(t,e,n,r,i){super(t,[],n,r),this.mark=e,this.spec=i}static create(t,e,n,r){let o=r.nodeViews[e.type.name],s=o&&o(e,r,n);return s&&s.dom||(s=i["b"].renderSpec(document,e.type.spec.toDOM(e,n),null,e.attrs)),new Tt(t,e,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Et||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Et&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=wt){let t=this.parent;while(!t.node)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=wt}}slice(t,e,n){let r=Tt.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;e<o&&(i=Yt(i,e,o,n)),t>0&&(i=Yt(i,0,t,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Mt extends kt{constructor(t,e,n,r,i,o,s,a,l){super(t,[],i,o),this.node=e,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(t,e,n,r,o,s){let a,l=o.nodeViews[e.type.name],c=l&&l(e,o,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s,n,r),h=c&&c.dom,u=c&&c.contentDOM;if(e.isText)if(h){if(3!=h.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(e.text);else if(!h){let t=i["b"].renderSpec(document,e.type.spec.toDOM(e),null,e.attrs);({dom:h,contentDOM:u}=t)}u||e.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable="false"),e.type.spec.draggable&&(h.draggable=!0));let d=h;return h=Bt(h,n,e),c?a=new Dt(t,e,n,r,h,u||null,d,c,o,s+1):e.isText?new Lt(t,e,n,r,h,d,o):new Mt(t,e,n,r,h,u||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>i["c"].empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return this.dirty==wt&&t.eq(this.node)&&Ft(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,r=e,o=t.composing?this.localCompositionInfo(t,e):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new qt(this,s&&s.node,t);$t(this.node,this.innerDeco,(e,o,s)=>{e.spec.marks?l.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!s&&l.syncToMarks(o==this.node.childCount?i["d"].none:this.node.child(o).marks,n,t),l.placeWidget(e,t,r)},(e,i,s,c)=>{let h;l.syncToMarks(e.marks,n,t),l.findNodeMatch(e,i,s,c)||a&&t.state.selection.from>r&&t.state.selection.to<r+e.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(e,i,s,h,t)||l.updateNextNode(e,i,s,t,c,r)||l.addNode(e,i,s,t,r),r+=e.nodeSize}),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ct)&&(s&&this.protectLocalComposition(t,s),_t(this.contentDOM,this.children,t),I&&Vt(this.dom))}localCompositionInfo(t,e){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof r["h"])||n<e||i>e+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let t=o.nodeValue,r=Gt(this.node.content,t,n-e,i-e);return r<0?null:{node:o,pos:r,text:t}}return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:r}){if(this.getDesc(e))return;let i=e;for(;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new Ot(this,i,e,r);t.input.compositionNodes.push(o),this.children=Yt(this.children,n,n+r.length,t,o)}update(t,e,n,r){return!(this.dirty==Et||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)}updateInner(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=wt}updateOuterDeco(t){if(Ft(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=jt(this.dom,this.nodeDOM,It(this.outerDeco,this.node,e),It(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function St(t,e,n,r,i){Bt(r,e,t);let o=new Mt(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Lt extends Mt{constructor(t,e,n,r,i,o,s){super(t,e,n,r,i,null,o,s,0)}parseRule(){let t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}}update(t,e,n,r){return!(this.dirty==Et||this.dirty!=wt&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==wt&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=wt,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let r=this.node.cut(t,e),i=document.createTextNode(r.text);return new Lt(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=Et)}get domAtom(){return!1}isText(t){return this.node.text==t}}class At extends kt{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==wt&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Dt extends Mt{constructor(t,e,n,r,i,o,s,a,l,c){super(t,e,n,r,i,o,s,l,c),this.spec=a}update(t,e,n,r){if(this.dirty==Et)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let i=this.spec.update(t,e,n);return i&&this.updateInner(t,e,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,r){this.spec.setSelection?this.spec.setSelection(t,e,n.root):super.setSelection(t,e,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function _t(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){while(a!=r)r=Ht(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof Tt){let e=r?r.previousSibling:t.lastChild;_t(s.contentDOM,s.children,n),r=e?e.nextSibling:t.firstChild}}while(r)r=Ht(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Rt=function(t){t&&(this.nodeName=t)};Rt.prototype=Object.create(null);const Pt=[new Rt];function It(t,e,n){if(0==t.length)return Pt;let r=n?Pt[0]:new Rt,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Rt(s.nodeName));for(let t in s){let o=s[t];null!=o&&(n&&1==i.length&&i.push(r=new Rt(e.isInline?"span":"div")),"class"==t?r.class=(r.class?r.class+" ":"")+o:"style"==t?r.style=(r.style?r.style+";":"")+o:"nodeName"!=t&&(r[t]=o))}}}return i}function jt(t,e,n,r){if(n==Pt&&r==Pt)return e;let i=e;for(let o=0;o<r.length;o++){let e=r[o],s=n[o];if(o){let n;s&&s.nodeName==e.nodeName&&i!=t&&(n=i.parentNode)&&n.nodeName.toLowerCase()==e.nodeName||(n=document.createElement(e.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=Pt[0]),i=n}zt(i,s||Pt[0],e)}return i}function zt(t,e,n){for(let r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let e=0;e<r.length;e++)-1==i.indexOf(r[e])&&t.classList.remove(r[e]);for(let e=0;e<i.length;e++)-1==r.indexOf(i[e])&&t.classList.add(i[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(n=r.exec(e.style))t.style.removeProperty(n[1])}n.style&&(t.style.cssText+=n.style)}}function Bt(t,e,n){return jt(t,t,Pt,It(e,n,1!=t.nodeType))}function Ft(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ht(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class qt{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Wt(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let r=0,i=this.stack.length>>1,o=Math.min(i,t.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=wt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<t.length){this.stack.push(this.top,this.index+1);let r=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let n=this.top.children[e];if(n.matchesMark(t[i])&&!this.isLocked(n.dom)){r=e;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Tt.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(t,e,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(t,e,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,n,r,i){let o=this.top.children[r];return o.dirty==Et&&o.dom==o.contentDOM&&(o.dirty=Ct),!!o.update(t,e,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof Mt){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,h=a.dom,u=this.isLocked(h)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=Et&&Ft(e,a.outerDeco));if(!u&&a.update(t,e,n,r))return this.destroyBetween(this.index,s),a.dom!=h&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(a,t,e,n,r,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=Ct,c.updateChildren(r,o+1),c.dirty=wt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,n,r,i,o){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!Ft(n,t.outerDeco)||!r.eq(t.innerDeco))return null;let s=Mt.create(this.top,e,n,r,i,o);if(s.contentDOM){s.children=t.children,t.children=[];for(let t of s.children)t.parent=s}return t.destroy(),s}addNode(t,e,n,r,i){let o=Mt.create(this.top,t,e,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,e,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){let r=new Nt(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;while(t instanceof Tt)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Lt)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((P||_)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let r=new At(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function Wt(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];t:while(i>0){let a;for(;;)if(r){let t=n.children[r-1];if(!(t instanceof Tt)){a=t,r--;break}n=t,r=t.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function Ut(t,e){return t.type.side-e.type.side}function $t(t,e,n,r){let i=e.locals(t),o=0;if(0==i.length){for(let n=0;n<t.childCount;n++){let s=t.child(n);r(s,i,e.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let h,u,d,f;while(s<i.length&&i[s].to==o){let t=i[s++];t.widget&&(h?(u||(u=[h])).push(t):h=t)}if(h)if(u){u.sort(Ut);for(let t=0;t<u.length;t++)n(u[t],c,!!l)}else n(h,c,!!l);if(l)f=-1,d=l,l=null;else{if(!(c<t.childCount))break;f=c,d=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=o&&a.splice(t--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);let p=o+d.nodeSize;if(d.isText){let t=p;s<i.length&&i[s].from<t&&(t=i[s].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<p&&(l=d.cut(t-o),d=d.cut(0,t-o),p=t,f=-1)}else while(s<i.length&&i[s].to<p)s++;let m=d.isInline&&!d.isLeaf?a.filter(t=>!t.inline):a.slice();r(d,m,e.forChild(o,d),f),o=p}}function Vt(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Gt(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;while(i<t.childCount){let e=t.child(i++);if(o+=e.nodeSize,!e.isText)break;l+=e.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let t=a<r?l.lastIndexOf(e,r-a-1):-1;if(t>=0&&t+e.length+a>=n)return a+t;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Yt(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,h=a+=l.size;c>=n||h<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),h>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Kt(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let l,c,h=i.resolve(a);if(b(n)){l=a;while(o&&!o.node)o=o.parent;let t=o.node;if(o&&t.isAtom&&r["c"].isSelectable(t)&&o.parent&&(!t.isInline||!v(n.focusNode,n.focusOffset,o.dom))){let t=o.posBefore;c=new r["c"](a==t?h:i.resolve(t))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let e=a,r=a;for(let i=0;i<n.rangeCount;i++){let o=n.getRangeAt(i);e=Math.min(e,t.docView.posFromDOM(o.startContainer,o.startOffset,1)),r=Math.max(r,t.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(e<0)return null;[l,a]=r==t.state.selection.anchor?[r,e]:[e,r],h=i.resolve(a)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=i.resolve(l);if(!c){let n="pointer"==e||t.state.selection.head<h.pos&&!s?1:-1;c=se(t,u,h,n)}return c}function Xt(t){return t.editable?t.hasFocus():le(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Zt(t,e=!1){let n=t.state.selection;if(ie(t,n),Xt(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&_){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&u(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)re(t);else{let i,o,{anchor:s,head:a}=n;!Jt||n instanceof r["h"]||(n.$from.parent.inlineContent||(i=Qt(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=Qt(t,n.to))),t.docView.setSelection(s,a,t,e),Jt&&(i&&ee(i),o&&ee(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ne(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Jt=P||_&&R<63;function Qt(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(P&&i&&"false"==i.contentEditable)return te(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return te(i);if(o)return te(o)}}function te(t){return t.contentEditable="true",P&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ee(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ne(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{Xt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")},20))})}function re(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,s(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&S&&L<=11&&(r.disabled=!0,r.disabled=!1)}function ie(t,e){if(e instanceof r["c"]){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(oe(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else oe(t)}function oe(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function se(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||r["h"].between(e,n,i)}function ae(t){return!(t.editable&&!t.hasFocus())&&le(t)}function le(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function ce(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return u(e.node,e.offset,n.anchorNode,n.anchorOffset)}function he(t,e){let{$anchor:n,$head:i}=t.selection,o=e>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&r["f"].findFrom(s,e)}function ue(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function de(t,e,n){let i=t.state.selection;if(!(i instanceof r["h"])){if(i instanceof r["c"]&&i.node.isInline)return ue(t,new r["h"](e>0?i.$to:i.$from));{let n=he(t.state,e);return!!n&&ue(t,n)}}if(n.indexOf("s")>-1){let{$head:n}=i,o=n.textOffset?null:e<0?n.nodeBefore:n.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(n.pos+o.nodeSize*(e<0?-1:1));return ue(t,new r["h"](i.$anchor,s))}if(!i.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let n=he(t.state,e);return!!(n&&n instanceof r["c"])&&ue(t,n)}if(!(j&&n.indexOf("m")>-1)){let n,o=i.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(n=t.docView.descAt(a))&&!n.contentDOM)&&(r["c"].isSelectable(s)?ue(t,new r["c"](e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):!!F&&ue(t,new r["h"](t.state.doc.resolve(e<0?a:a+s.nodeSize))))}}function fe(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function pe(t,e){let n=t.pmViewDesc;return n&&0==n.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function me(t,e){return e<0?ge(t):ve(t)}function ge(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=!1;for(A&&1==n.nodeType&&r<fe(n)&&pe(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;{let t=n.childNodes[r-1];if(pe(t,-1))i=n,o=--r;else{if(3!=t.nodeType)break;n=t,r=n.nodeValue.length}}}else{if(ye(n))break;{let e=n.previousSibling;while(e&&pe(e,-1))i=n.parentNode,o=s(e),e=e.previousSibling;if(e)n=e,r=fe(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?xe(t,n,r):i&&xe(t,i,o)}function ve(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=fe(n);for(;;)if(r<a){if(1!=n.nodeType)break;let t=n.childNodes[r];if(!pe(t,1))break;i=n,o=++r}else{if(ye(n))break;{let e=n.nextSibling;while(e&&pe(e,1))i=e.parentNode,o=s(e)+1,e=e.nextSibling;if(e)n=e,r=0,a=fe(n);else{if(n=n.parentNode,n==t.dom)break;r=a=0}}}i&&xe(t,i,o)}function ye(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function be(t,e){while(t&&e==t.childNodes.length&&!y(t))e=s(t)+1,t=t.parentNode;while(t&&e<t.childNodes.length){let n=t.childNodes[e];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=0}}function we(t,e){while(t&&!e&&!y(t))e=s(t),t=t.parentNode;while(t&&e){let n=t.childNodes[e-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=t.childNodes.length}}function xe(t,e,n){if(3!=e.nodeType){let t,r;(r=be(e,n))?(e=r,n=0):(t=we(e,n))&&(e=t,n=t.nodeValue.length)}let r=t.domSelection();if(!r)return;if(b(r)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),r.removeAllRanges(),r.addRange(t)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Zt(t)},50)}function Ce(t,e){let n=t.state.doc.resolve(e);if(!_&&!z&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let n=t.coordsAtPos(e-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(e<n.end()){let n=t.coordsAtPos(e+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}let r=getComputedStyle(t.dom).direction;return"rtl"==r?"rtl":"ltr"}function Ee(t,e,n){let i=t.state.selection;if(i instanceof r["h"]&&!i.empty||n.indexOf("s")>-1)return!1;if(j&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=he(t.state,e);if(n&&n instanceof r["c"])return ue(t,n)}if(!o.parent.inlineContent){let n=e<0?o:s,a=i instanceof r["a"]?r["f"].near(n,e):r["f"].findFrom(n,e);return!!a&&ue(t,a)}return!1}function ke(t,e){if(!(t.state.selection instanceof r["h"]))return!0;let{$head:n,$anchor:i,empty:o}=t.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=t.state.tr;return e<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),t.dispatch(r),!0}return!1}function Ne(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Oe(t){if(!P||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;Ne(t,n,"true"),setTimeout(()=>Ne(t,n,"false"),20)}return!1}function Te(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Me(t,e){let n=e.keyCode,r=Te(e);if(8==n||j&&72==n&&"c"==r)return ke(t,-1)||me(t,-1);if(46==n&&!e.shiftKey||j&&68==n&&"c"==r)return ke(t,1)||me(t,1);if(13==n||27==n)return!0;if(37==n||j&&66==n&&"c"==r){let e=37==n?"ltr"==Ce(t,t.state.selection.from)?-1:1:-1;return de(t,e,r)||me(t,e)}if(39==n||j&&70==n&&"c"==r){let e=39==n?"ltr"==Ce(t,t.state.selection.from)?1:-1:1;return de(t,e,r)||me(t,e)}return 38==n||j&&80==n&&"c"==r?Ee(t,-1,r)||me(t,-1):40==n||j&&78==n&&"c"==r?Oe(t)||Ee(t,1,r)||me(t,1):r==(j?"m":"c")&&(66==n||73==n||89==n||90==n)}function Se(t,e){t.someProp("transformCopied",n=>{e=n(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;let t=r.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),r=t.content}let a=t.someProp("clipboardSerializer")||i["b"].fromSchema(t.state.schema),l=Fe(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));let h,u=c.firstChild,d=0;while(u&&1==u.nodeType&&(h=ze[u.nodeName.toLowerCase()])){for(let t=h.length-1;t>=0;t--){let e=l.createElement(h[t]);while(c.firstChild)e.appendChild(c.firstChild);c.appendChild(e),d++}u=c.firstChild}u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${o} ${s}${d?" -"+d:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",n=>n(e,t))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:c,text:f,slice:e}}function Le(t,e,n,r,o){let s,a,l=o.parent.type.spec.code;if(!n&&!e)return null;let c=e&&(r||l||!n);if(c){if(t.someProp("transformPastedText",n=>{e=n(e,l||r,t)}),l)return e?new i["j"](i["c"].from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):i["j"].empty;let n=t.someProp("clipboardTextParser",n=>n(e,o,r,t));if(n)a=n;else{let n=o.marks(),{schema:r}=t.state,a=i["b"].fromSchema(r);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(t=>{let e=s.appendChild(document.createElement("p"));t&&e.appendChild(a.serializeNode(r.text(t,n)))})}}else t.someProp("transformPastedHTML",e=>{n=e(n,t)}),s=We(n),F&&Ue(s);let h=s&&s.querySelector("[data-pm-slice]"),u=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let i=+u[3];i>0;i--){let t=s.firstChild;while(t&&1!=t.nodeType)t=t.nextSibling;if(!t)break;s=t}if(!a){let e=t.someProp("clipboardParser")||t.someProp("domParser")||i["a"].fromSchema(t.state.schema);a=e.parseSlice(s,{preserveWhitespace:!(!c&&!u),context:o,ruleFromNode(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Ae.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(u)a=$e(je(a,+u[1],+u[2]),u[4]);else if(a=i["j"].maxOpen(De(a.content,o),!0),a.openStart||a.openEnd){let t=0,e=0;for(let n=a.content.firstChild;t<a.openStart&&!n.type.spec.isolating;t++,n=n.firstChild);for(let n=a.content.lastChild;e<a.openEnd&&!n.type.spec.isolating;e++,n=n.lastChild);a=je(a,t,e)}return t.someProp("transformPasted",e=>{a=e(a,t)}),a}const Ae=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function De(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r,o=e.node(n),s=o.contentMatchAt(e.index(n)),a=[];if(t.forEach(t=>{if(!a)return;let e,n=s.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&r.length&&Re(n,r,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=Pe(a[a.length-1],r.length));let e=_e(t,n);a.push(e),s=s.matchType(e.type),r=n}}),a)return i["c"].from(a)}return t}function _e(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,i["c"].from(t));return t}function Re(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=Re(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));let a=r.contentMatchAt(r.childCount);if(a.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(i["c"].from(_e(n,t,o+1))))}}function Pe(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Pe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(i["c"].empty,!0);return t.copy(n.append(r))}function Ie(t,e,n,r,o,s){let a=e<0?t.firstChild:t.lastChild,l=a.content;return t.childCount>1&&(s=0),o<r-1&&(l=Ie(l,e,n,r,o+1,s)),o>=n&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(i["c"].empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}function je(t,e,n){return e<t.openStart&&(t=new i["j"](Ie(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new i["j"](Ie(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const ze={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Be=null;function Fe(){return Be||(Be=document.implementation.createHTMLDocument("title"))}let He=null;function qe(t){let e=window.trustedTypes;return e?(He||(He=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),He.createHTML(t)):t}function We(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,r=Fe().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((n=i&&ze[i[1].toLowerCase()])&&(t=n.map(t=>"<"+t+">").join("")+t+n.map(t=>"</"+t+">").reverse().join("")),r.innerHTML=qe(t),n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function Ue(t){let e=t.querySelectorAll(_?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function $e(t,e){if(!t.size)return t;let n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(l){return t}let{content:o,openStart:s,openEnd:a}=t;for(let c=n.length-2;c>=0;c-=2){let t=r.nodes[n[c]];if(!t||t.hasRequiredAttrs())break;o=i["c"].from(t.create(n[c+1],o)),s++,a++}return new i["j"](o,s,a)}const Ve={},Ge={},Ye={touchstart:!0,touchmove:!0};class Ke{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Xe(t){for(let e in Ve){let n=Ve[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!en(t,e)||tn(t,e)||!t.editable&&e.type in Ge||n(t,e)},Ye[e]?{passive:!0}:void 0)}P&&t.dom.addEventListener("input",()=>null),Qe(t)}function Ze(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Je(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Qe(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=e=>tn(t,e))})}function tn(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)})}function en(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function nn(t,e){tn(t,e)||!Ve[e.type]||!t.editable&&e.type in Ge||Ve[e.type](t,e)}function rn(t){return{left:t.clientX,top:t.clientY}}function on(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function sn(t,e,n,r,i){if(-1==r)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,e=>s>o.depth?e(t,n,o.nodeAfter,o.before(s),i,!0):e(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function an(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function ln(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&r["c"].isSelectable(i))&&(an(t,new r["c"](n),"pointer"),!0)}function cn(t,e){if(-1==e)return!1;let n,i,o=t.state.selection;o instanceof r["c"]&&(n=o.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let t=a>s.depth?s.nodeAfter:s.node(a);if(r["c"].isSelectable(t)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(an(t,r["c"].create(t.state.doc,i),"pointer"),!0)}function hn(t,e,n,r,i){return sn(t,"handleClickOn",e,n,r)||t.someProp("handleClick",n=>n(t,e,r))||(i?cn(t,n):ln(t,n))}function un(t,e,n,r){return sn(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",n=>n(t,e,r))}function dn(t,e,n,r){return sn(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",n=>n(t,e,r))||fn(t,n,r)}function fn(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(an(t,r["h"].create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(e);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s),n=o.before(s);if(e.inlineContent)an(t,r["h"].create(i,n+1,n+1+e.content.size),"pointer");else{if(!r["c"].isSelectable(e))continue;an(t,r["c"].create(i,n),"pointer")}return!0}}function pn(t){return En(t)}Ge.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!vn(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!B||!_||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!I||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",e=>e(t,n))||Me(t,n)?n.preventDefault():Ze(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",e=>e(t,w(13,"Enter"))),t.input.lastIOSEnter=0)},200)}},Ge.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Ge.keypress=(t,e)=>{let n=e;if(vn(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||j&&n.metaKey)return;if(t.someProp("handleKeyPress",e=>e(t,n)))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof r["h"])||!i.$from.sameParent(i.$to)){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",n=>n(t,i.$from.pos,i.$to.pos,e))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const mn=j?"metaKey":"ctrlKey";Ve.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=pn(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&on(n,t.input.lastClick)&&!n[mn]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(rn(n));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new gn(t,s,n,!!r)):("doubleClick"==o?un:dn)(t,s.pos,s.inside,n)?n.preventDefault():Ze(t,"pointer"))};class gn{constructor(t,e,n,i){let o,s;if(this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[mn],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),s=e.inside;else{let n=t.state.doc.resolve(e.pos);o=n.parent,s=n.depth?n.before():0}const a=i?null:n.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;let{selection:c}=t.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof r["c"]&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!A||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ze(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Zt(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(rn(t))),this.updateAllowDefault(t),this.allowDefault||!e?Ze(this.view,"pointer"):hn(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||P&&this.mightDrag&&!this.mightDrag.node.isAtom||_&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(an(this.view,r["f"].near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Ze(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ze(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function vn(t,e){return!!t.composing||!!(P&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Ve.touchstart=t=>{t.input.lastTouch=Date.now(),pn(t),Ze(t,"pointer")},Ve.touchmove=t=>{t.input.lastTouch=Date.now(),Ze(t,"pointer")},Ve.contextmenu=t=>pn(t);const yn=B?5e3:-1;function bn(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>En(t),e))}function wn(t){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Cn());while(t.input.compositionNodes.length>0)t.input.compositionNodes.pop().markParentsDirty()}function xn(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=m(e.focusNode,e.focusOffset),r=g(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let e=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!e||!e.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let t=n.pmViewDesc;if(t&&t.isText(n.nodeValue))return r}}return n||r}function Cn(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function En(t,e=!1){if(!(B&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),wn(t),e||t.docView&&t.docView.dirty){let n=Kt(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):!t.markCursor&&!e||t.state.selection.empty?t.updateState(t.state):t.dispatch(t.state.tr.deleteSelection()),!0}return!1}}function kn(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}Ge.compositionstart=Ge.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof r["h"]&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(t=>!1===t.type.spec.inclusive)))t.markCursor=t.state.storedMarks||n.marks(),En(t,!0),t.markCursor=null;else if(En(t,!e.selection.empty),A&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,r=e.focusOffset;n&&1==n.nodeType&&0!=r;){let e=r<0?n.lastChild:n.childNodes[r-1];if(!e)break;if(3==e.nodeType){let n=t.domSelection();n&&n.collapse(e,e.nodeValue.length);break}n=e,r=-1}}t.input.composing=!0}bn(t,yn)},Ge.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,bn(t,20))};const Nn=S&&L<15||I&&H<604;function On(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function Tn(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Mn(t,r.value,null,i,e):Mn(t,r.textContent,r.innerHTML,i,e)},50)}function Mn(t,e,n,r,o){let s=Le(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",e=>e(t,o,s||i["j"].empty)))return!0;if(!s)return!1;let a=On(s),l=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Sn(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ve.copy=Ge.cut=(t,e)=>{let n=e,r=t.state.selection,i="cut"==n.type;if(r.empty)return;let o=Nn?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Se(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):kn(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Ge.paste=(t,e)=>{let n=e;if(t.composing&&!B)return;let r=Nn?null:n.clipboardData,i=t.input.shiftKey&&45!=t.input.lastKeyCode;r&&Mn(t,Sn(r),r.getData("text/html"),i,n)?n.preventDefault():Tn(t,n)};class Ln{constructor(t,e,n){this.slice=t,this.move=e,this.node=n}}const An=j?"altKey":"ctrlKey";Ve.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let o,s=t.state.selection,a=s.empty?null:t.posAtCoords(rn(n));if(a&&a.pos>=s.from&&a.pos<=(s instanceof r["c"]?s.to-1:s.to));else if(i&&i.mightDrag)o=r["c"].create(t.state.doc,i.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&(o=r["c"].create(t.state.doc,e.posBefore))}let l=(o||t.state.selection).content(),{dom:c,text:h,slice:u}=Se(t,l);(!n.dataTransfer.files.length||!_||R>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Nn?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Nn||n.dataTransfer.setData("text/plain",h),t.dragging=new Ln(u,!n[An],o)},Ve.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)},Ge.dragover=Ge.dragenter=(t,e)=>e.preventDefault(),Ge.drop=(t,e)=>{let n=e,s=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let a=t.posAtCoords(rn(n));if(!a)return;let l=t.state.doc.resolve(a.pos),c=s&&s.slice;c?t.someProp("transformPasted",e=>{c=e(c,t)}):c=Le(t,Sn(n.dataTransfer),Nn?null:n.dataTransfer.getData("text/html"),!1,l);let h=!(!s||n[An]);if(t.someProp("handleDrop",e=>e(t,n,c||i["j"].empty,h)))return void n.preventDefault();if(!c)return;n.preventDefault();let u=c?Object(o["h"])(t.state.doc,l.pos,c):l.pos;null==u&&(u=l.pos);let d=t.state.tr;if(h){let{node:t}=s;t?t.replace(d):d.deleteSelection()}let f=d.mapping.map(u),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=d.doc;if(p?d.replaceRangeWith(f,f,c.content.firstChild):d.replaceRange(f,f,c),d.doc.eq(m))return;let g=d.doc.resolve(f);if(p&&r["c"].isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r["c"](g));else{let e=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((t,n,r,i)=>e=i),d.setSelection(se(t,g,d.doc.resolve(e)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))},Ve.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Zt(t)},20))},Ve.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Ve.beforeinput=(t,e)=>{let n=e;if(_&&B&&"deleteContentBackward"==n.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",e=>e(t,w(8,"Backspace"))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let Or in Ge)Ve[Or]=Ge[Or];function Dn(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class _n{constructor(t,e){this.toDOM=t,this.spec=e||zn,this.side=this.spec.side||0}map(t,e,n,r){let{pos:i,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new In(i-n,i-n,this)}valid(){return!0}eq(t){return this==t||t instanceof _n&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Dn(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Rn{constructor(t,e){this.attrs=t,this.spec=e||zn}map(t,e,n,r){let i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new In(i,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof Rn&&Dn(this.attrs,t.attrs)&&Dn(this.spec,t.spec)}static is(t){return t.type instanceof Rn}destroy(){}}class Pn{constructor(t,e){this.attrs=t,this.spec=e||zn}map(t,e,n,r){let i=t.mapResult(e.from+r,1);if(i.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new In(i.pos-n,o.pos-n,this)}valid(t,e){let n,{index:r,offset:i}=t.content.findIndex(e.from);return i==e.from&&!(n=t.child(r)).isText&&i+n.nodeSize==e.to}eq(t){return this==t||t instanceof Pn&&Dn(this.attrs,t.attrs)&&Dn(this.spec,t.spec)}destroy(){}}class In{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new In(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new In(t,t,new _n(e,n))}static inline(t,e,n,r){return new In(t,e,new Rn(n,r))}static node(t,e,n,r){return new In(t,e,new Pn(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Rn}get widget(){return this.type instanceof _n}}const jn=[],zn={};class Bn{constructor(t,e){this.local=t.length?t:jn,this.children=e.length?e:jn}static create(t,e){return e.length?Gn(e,t,0,zn):Fn}find(t,e,n){let r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}findInner(t,e,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let s=this.children[o]+1;this.children[o+2].findInner(t-s,e-s,n,r+s,i)}}map(t,e,n){return this==Fn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||zn)}mapInner(t,e,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?qn(this.children,o||[],t,e,n,r,i):o?new Bn(o.sort(Yn),jn):Fn}add(t,e){return e.length?this==Fn?Bn.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let r,i=0;t.forEach((t,o)=>{let s,a=o+n;if(s=$n(e,t,a)){r||(r=this.children.slice());while(i<r.length&&r[i]<o)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(t,s,a+1):r.splice(i,0,o,o+t.nodeSize,Gn(s,t,a+1,zn)),i+=3}});let o=Wn(i?Vn(e):e,-n);for(let s=0;s<o.length;s++)o[s].type.valid(t,o[s])||o.splice(s--,1);return new Bn(o.length?this.local.concat(o).sort(Yn):this.local,r||this.children)}remove(t){return 0==t.length||this==Fn?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+e,s=n[i+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>o&&e.to<s&&(t[n]=null,(r||(r=[])).push(e));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=Fn?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<t.length;o++)if(i=t[o])for(let t=0;t<r.length;t++)r[t].eq(i,e)&&(r==this.local&&(r=this.local.slice()),r.splice(t--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Bn(r,n):Fn}forChild(t,e){if(this==Fn)return this;if(e.isLeaf)return Bn.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(n=this.children[s+2]);break}let i=t+1,o=i+e.content.size;for(let s=0;s<this.local.length;s++){let t=this.local[s];if(t.from<o&&t.to>i&&t.type instanceof Rn){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let t=new Bn(r.sort(Yn),jn);return n?new Hn([t,n]):t}return n||Fn}eq(t){if(this==t)return!0;if(!(t instanceof Bn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Kn(this.localsInner(t))}localsInner(t){if(this==Fn)return jn;if(t.inlineContent||!this.local.some(Rn.is))return this.local;let e=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Rn||e.push(this.local[n]);return e}forEachSet(t){t(this)}}Bn.empty=new Bn([],[]),Bn.removeOverlap=Kn;const Fn=Bn.empty;class Hn{constructor(t){this.members=t}map(t,e){const n=this.members.map(n=>n.map(t,e,zn));return Hn.from(n)}forChild(t,e){if(e.isLeaf)return Bn.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(t,e);i!=Fn&&(i instanceof Hn?n=n.concat(i.members):n.push(i))}return Hn.from(n)}eq(t){if(!(t instanceof Hn)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<i.length;t++)e.push(i[t])}else e=i}return e?Kn(n?e:e.sort(Yn)):jn}static from(t){switch(t.length){case 0:return Fn;case 1:return t[0];default:return new Hn(t.every(t=>t instanceof Bn)?t:t.reduce((t,e)=>t.concat(e instanceof Bn?e:e.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}}function qn(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,h=o;c<n.maps.length;c++){let t=0;n.maps[c].forEach((e,n,r,i)=>{let o=i-r-(n-e);for(let s=0;s<a.length;s+=3){let r=a[s+1];if(r<0||e>r+h-t)continue;let i=a[s]+h-t;n>=i?a[s+1]=e<=i?-2:-1:e>=h&&o&&(a[s]+=o,a[s+1]+=o)}t+=o}),h=n.maps[c].map(h,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let e=n.map(t[c]+o),h=e-i;if(h<0||h>=r.content.size){l=!0;continue}let u=n.map(t[c+1]+o,-1),d=u-i,{index:f,offset:p}=r.content.findIndex(h),m=r.maybeChild(f);if(m&&p==h&&p+m.nodeSize==d){let r=a[c+2].mapInner(n,m,e+1,t[c]+o+1,s);r!=Fn?(a[c]=h,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=Un(a,t,e,n,i,o,s),c=Gn(l,r,0,s);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let n=c.children[t];while(e<a.length&&a[e]<n)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new Bn(e.sort(Yn),a)}function Wn(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new In(i.from+e,i.to+e,i.type))}return n}function Un(t,e,n,r,i,o,s){function a(t,e){for(let o=0;o<t.local.length;o++){let a=t.local[o].map(r,i,e);a?n.push(a):s.onRemove&&s.onRemove(t.local[o].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+o+1);return n}function $n(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o,s=0;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Vn(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Gn(t,e,n,r){let i=[],o=!1;e.forEach((e,s)=>{let a=$n(t,e,s+n);if(a){o=!0;let t=Gn(a,e,n+s+1,r);t!=Fn&&i.push(s,s+e.nodeSize,t)}});let s=Wn(o?Vn(t):t,-n).sort(Yn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Bn(s,i):Fn}function Yn(t,e){return t.from-e.from||t.to-e.to}function Kn(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Xn(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Xn(e,i+1,o.copy(r.to,o.to)))}}return e}function Xn(t,e,n){while(e<t.length&&Yn(n,t[e])>0)e++;t.splice(e,0,n)}function Zn(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Fn&&e.push(r)}),t.cursorWrapper&&e.push(Bn.create(t.state.doc,[t.cursorWrapper.deco])),Hn.from(e)}const Jn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Qn=S&&L<=11;class tr{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class er{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tr,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);S&&L<=11&&t.some(t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length)?this.flushSoon():this.flush()}),Qn&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Jn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ae(this.view)){if(this.suppressingSelectionUpdates)return Zt(this.view);if(S&&L<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,n=new Set;for(let i=t.focusNode;i;i=a(i))n.add(i);for(let i=t.anchorNode;i;i=a(i))if(n.has(i)){e=i;break}let r=e&&this.view.docView.nearestDesc(e);return r&&r.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ae(t)&&!this.ignoreSelectionChange(n),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let r=0;r<e.length;r++){let t=this.registerMutation(e[r],l);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(A&&l.length){let e=l.filter(t=>"BR"==t.nodeName);if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of e){let e=r.parentNode;!e||"LI"!=e.nodeName||n&&ar(t,n)==e||r.remove()}}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&b(n)&&(c=Kt(t))&&c.eq(r["f"].near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Zt(t),this.currentSelection.set(n),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),ir(t)),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Zt(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let n=0;n<t.addedNodes.length;n++){let r=t.addedNodes[n];e.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let r=t.previousSibling,i=t.nextSibling;if(S&&L<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:n,nextSibling:o}=t.addedNodes[e];(!n||Array.prototype.indexOf.call(t.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(t.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==t.target?s(r)+1:0,a=n.localPosFromDOM(t.target,o,-1),l=i&&i.parentNode==t.target?s(i):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:a,to:c}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let nr=new WeakMap,rr=!1;function ir(t){if(!nr.has(t)&&(nr.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=A,rr)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),rr=!0}}function or(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return u(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function sr(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return or(t,n)}let n;function r(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?or(t,n):null}function ar(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let e=t.docView.nearestDesc(n,!0);if(e&&e.node.isBlock)return n}return null}function lr(t,e,n){let r,{node:o,fromOffset:s,toOffset:a,from:l,to:c}=t.docView.parseRange(e,n),h=t.domSelectionRange(),u=h.anchorNode;if(u&&t.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:h.anchorOffset}],b(h)||r.push({node:h.focusNode,offset:h.focusOffset})),_&&8===t.input.lastKeyCode)for(let i=a;i>s;i--){let t=o.childNodes[i-1],e=t.pmViewDesc;if("BR"==t.nodeName&&!e){a=i;break}if(!e||e.size)break}let d=t.state.doc,f=t.someProp("domParser")||i["a"].fromSchema(t.state.schema),p=d.resolve(l),m=null,g=f.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:cr,context:p});if(r&&null!=r[0].pos){let t=r[0].pos,e=r[1]&&r[1].pos;null==e&&(e=t),m={anchor:t+l,head:e+l}}return{doc:g,sel:m,from:l,to:c}}function cr(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(P&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||P&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hr=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ur(t,e,n,i,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,n=Kt(t,e);if(n&&!t.state.selection.eq(n)){if(_&&B&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",e=>e(t,w(13,"Enter"))))return;let r=t.state.tr.setSelection(n);"pointer"==e?r.setMeta("pointer",!0):"key"==e&&r.scrollIntoView(),s&&r.setMeta("composition",s),t.dispatch(r)}return}let a=t.state.doc.resolve(e),l=a.sharedDepth(n);e=a.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c,h,u=t.state.selection,d=lr(t,e,n),f=t.state.doc,p=f.slice(d.from,d.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(c=t.state.selection.to,h="end"):(c=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=gr(p.content,d.doc.content,d.from,c,h);if(m&&t.input.domChangeCount++,(I&&t.input.lastIOSEnter>Date.now()-225||B)&&o.some(t=>1==t.nodeType&&!hr.test(t.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",e=>e(t,w(13,"Enter"))))return void(t.input.lastIOSEnter=0);if(!m){if(!(i&&u instanceof r["h"]&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let e=dr(t,t.state.doc,d.sel);if(e&&!e.eq(t.state.selection)){let n=t.state.tr.setSelection(e);s&&n.setMeta("composition",s),t.dispatch(n)}}return}m={start:u.from,endA:u.to,endB:u.to}}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof r["h"]&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),S&&L<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&"  "==d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)&&(m.start--,m.endA--,m.endB--);let g,v=d.doc.resolveNoCache(m.start-d.from),y=d.doc.resolveNoCache(m.endB-d.from),b=f.resolve(m.start),x=v.sameParent(y)&&v.parent.inlineContent&&b.end()>=m.endA;if((I&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(t=>"DIV"==t.nodeName||"P"==t.nodeName))||!x&&v.pos<d.doc.content.size&&!v.sameParent(y)&&(g=r["f"].findFrom(d.doc.resolve(v.pos+1),1,!0))&&g.head==y.pos)&&t.someProp("handleKeyDown",e=>e(t,w(13,"Enter"))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>m.start&&pr(f,m.start,m.endA,v,y)&&t.someProp("handleKeyDown",e=>e(t,w(8,"Backspace"))))return void(B&&_&&t.domObserver.suppressSelectionUpdates());_&&B&&m.endB==m.start&&(t.input.lastAndroidDelete=Date.now()),B&&!x&&v.start()!=y.start()&&0==y.parentOffset&&v.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,y=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",(function(e){return e(t,w(13,"Enter"))}))},20));let C,E,k,N=m.start,O=m.endA;if(x)if(v.pos==y.pos)S&&L<=11&&0==v.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Zt(t),20)),C=t.state.tr.delete(N,O),E=f.resolve(m.start).marksAcross(f.resolve(m.endA));else if(m.endA==m.endB&&(k=fr(v.parent.content.cut(v.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,m.endA-b.start()))))C=t.state.tr,"add"==k.type?C.addMark(N,O,k.mark):C.removeMark(N,O,k.mark);else if(v.parent.child(v.index()).isText&&v.index()==y.index()-(y.textOffset?0:1)){let e=v.parent.textBetween(v.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",n=>n(t,N,O,e)))return;C=t.state.tr.insertText(e,N,O)}if(C||(C=t.state.tr.replace(N,O,d.doc.slice(m.start-d.from,m.endB-d.from))),d.sel){let e=dr(t,C.doc,d.sel);e&&!(_&&B&&t.composing&&e.empty&&(m.start!=m.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==N||e.head==C.mapping.map(O)-1)||S&&e.empty&&e.head==N)&&C.setSelection(e)}E&&C.ensureMarks(E),s&&C.setMeta("composition",s),t.dispatch(C.scrollIntoView())}function dr(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:se(t,e.resolve(n.anchor),e.resolve(n.head))}function fr(t,e){let n,r,o,s=t.firstChild.marks,a=e.firstChild.marks,l=s,c=a;for(let i=0;i<a.length;i++)l=a[i].removeFromSet(l);for(let i=0;i<s.length;i++)c=s[i].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",o=t=>t.mark(r.addToSet(t.marks));else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",o=t=>t.mark(r.removeFromSet(t.marks))}let h=[];for(let i=0;i<e.childCount;i++)h.push(o(e.child(i)));if(i["c"].from(h).eq(t))return{mark:r,type:n}}function pr(t,e,n,r,i){if(n-e<=i.pos-r.pos||mr(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let t=o.nodeAfter;return null!=t&&n==e+t.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(mr(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||mr(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function mr(t,e,n){let r=t.depth,i=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,i++,e=!1;if(n){let e=t.node(r).maybeChild(t.indexAfter(r));while(e&&!e.isLeaf)e=e.firstChild,i++}return i}function gr(t,e,n,r,i){let o=t.findDiffStart(e,n);if(null==o)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if("end"==i){let t=Math.max(0,o-Math.min(s,a));r-=s+t-o}if(s<o&&t.size<e.size){let t=r<=o&&r>=s?o-r:0;o-=t,o&&o<e.size&&vr(e.textBetween(o-1,o+1))&&(o+=t?1:-1),a=o+(a-s),s=o}else if(a<o){let e=r<=o&&r>=a?o-r:0;o-=e,o&&o<t.size&&vr(t.textBetween(o-1,o+1))&&(o+=e?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function vr(t){if(2!=t.length)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class yr{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ke,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Nr),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=xr(this),wr(this),this.nodeViews=Er(this),this.docView=St(this.state.doc,br(this),Zn(this),this.dom,this),this.domObserver=new er(this,(t,e,n,r)=>ur(this,t,e,n,r)),this.domObserver.start(),Xe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Qe(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Nr),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var n;let r=this.state,i=!1,o=!1;t.storedMarks&&this.composing&&(wn(this),o=!0),this.state=t;let s=r.plugins!=t.plugins||this._props.plugins!=e.plugins;if(s||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=Er(this);kr(t,this.nodeViews)&&(this.nodeViews=t,i=!0)}(s||e.handleDOMEvents!=this._props.handleDOMEvents)&&Qe(this),this.editable=xr(this),wr(this);let a=Zn(this),l=br(this),c=r.plugins==t.plugins||r.doc.eq(t.doc)?t.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",h=i||!this.docView.matchesNode(t.doc,l,a);!h&&t.selection.eq(r.selection)||(o=!0);let u="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&V(this);if(o){this.domObserver.stop();let e=h&&(S||_)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&Cr(r.selection,t.selection);if(h){let n=_?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=xn(this)),!i&&this.docView.update(t.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=St(t.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ce(this))?Zt(this,e):(ie(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():u&&Y(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",t=>t(this)));else if(this.state.selection instanceof r["c"]){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&$(this,e.getBoundingClientRect(),t)}else $(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}updateDraggedNode(t,e){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let t=n.from+(this.state.doc.content.size-e.doc.content.size),r=t>0&&this.state.doc.nodeAt(t);r==n.node&&(i=t)}this.dragging=new Ln(t.slice,t.move,i<0?void 0:r["c"].create(this.state.doc,i))}someProp(t,e){let n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[t];if(null!=r&&(n=e?e(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[t];if(null!=r&&(n=e?e(r):r))return n}}hasFocus(){if(S){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;while(t&&this.dom!=t&&this.dom.contains(t)){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Z(this.dom),Zt(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return t||document}updateRoot(){this._root=null}posAtCoords(t){return ot(this,t)}coordsAtPos(t,e=1){return ct(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return bt(this,e||this.state,t)}pasteHTML(t,e){return Mn(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return Mn(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(Je(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Zn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,h())}get isDestroyed(){return null==this.docView}dispatchEvent(t){return nn(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?P&&11===this.root.nodeType&&x(this.dom.ownerDocument)==this.dom&&sr(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function br(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let t in n)"class"==t?e.class+=" "+n[t]:"style"==t?e.style=(e.style?e.style+";":"")+n[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(n[t]))}),e.translate||(e.translate="no"),[In.node(0,t.state.doc.content.size,e)]}function wr(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:In.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function xr(t){return!t.someProp("editable",e=>!1===e(t.state))}function Cr(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Er(t){let e=Object.create(null);function n(t){for(let n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function kr(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Nr(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},"72a8":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c}));var r=n("6ffb");n("b923");class i{constructor(t,e,n={}){this.match=t,this.match=t,this.handler="string"==typeof e?o(e):e,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1}}function o(t){return function(e,n,r,i){let o=t;if(n[1]){let t=n[0].lastIndexOf(n[1]);o+=n[0].slice(t+n[1].length),r+=t;let e=r-i;e>0&&(o=n[0].slice(t-e,t)+o,r=i)}return e.tr.insertText(o,r,i)}}const s=500;function a({rules:t}){let e=new r["d"]({state:{init(){return null},apply(t,e){let n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput(n,r,i,o){return l(n,r,i,o,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&l(n,r.pos,r.pos,"",t,e)})}}},isInputRules:!0});return e}function l(t,e,n,r,i,o){if(t.composing)return!1;let a=t.state,l=a.doc.resolve(e),c=l.parent.textBetween(Math.max(0,l.parentOffset-s),l.parentOffset,null,"￼")+r;for(let s=0;s<i.length;s++){let h=i[s];if(l.parent.type.spec.code){if(!h.inCode)continue}else if("only"===h.inCode)continue;let u=h.match.exec(c),d=u&&h.handler(a,u,e-(u[0].length-r.length),n);if(d)return h.undoable&&d.setMeta(o,{transform:d,from:e,to:n,text:r}),t.dispatch(d),!0}return!1}const c=(t,e)=>{let n=t.plugins;for(let r=0;r<n.length;r++){let i,o=n[r];if(o.spec.isInputRules&&(i=o.getState(t))){if(e){let n=t.tr,r=i.transform;for(let t=r.steps.length-1;t>=0;t--)n.step(r.steps[t].invert(r.docs[t]));if(i.text){let e=n.doc.resolve(i.from).marks();n.replaceWith(i.from,i.to,t.schema.text(i.text,e))}else n.delete(i.from,i.to);e(n)}return!0}}return!1};new i(/--$/,"—"),new i(/\.\.\.$/,"…"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new i(/"$/,"”"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new i(/'$/,"’")},"7ab4":function(t,e,n){"use strict";var r={};function i(){this.__data__=[],this.size=0}n.r(r),n.d(r,"Attributor",(function(){return ri})),n.d(r,"AttributorStore",(function(){return pi})),n.d(r,"BlockBlot",(function(){return Ai})),n.d(r,"ClassAttributor",(function(){return ci})),n.d(r,"ContainerBlot",(function(){return Ri})),n.d(r,"EmbedBlot",(function(){return Ii})),n.d(r,"InlineBlot",(function(){return Mi})),n.d(r,"LeafBlot",(function(){return bi})),n.d(r,"ParentBlot",(function(){return ki})),n.d(r,"Registry",(function(){return si})),n.d(r,"Scope",(function(){return ni})),n.d(r,"ScrollBlot",(function(){return Hi})),n.d(r,"StyleAttributor",(function(){return di})),n.d(r,"TextBlot",(function(){return Ui}));var o=i;function s(t,e){return t===e||t!==t&&e!==e}var a=s;function l(t,e){var n=t.length;while(n--)if(a(t[n][0],e))return n;return-1}var c=l,h=Array.prototype,u=h.splice;function d(t){var e=this.__data__,n=c(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():u.call(e,n,1),--this.size,!0}var f=d;function p(t){var e=this.__data__,n=c(e,t);return n<0?void 0:e[n][1]}var m=p;function g(t){return c(this.__data__,t)>-1}var v=g;function y(t,e){var n=this.__data__,r=c(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var b=y;function w(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}w.prototype.clear=o,w.prototype["delete"]=f,w.prototype.get=m,w.prototype.has=v,w.prototype.set=b;var x=w;function C(){this.__data__=new x,this.size=0}var E=C;function k(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}var N=k;function O(t){return this.__data__.get(t)}var T=O;function M(t){return this.__data__.has(t)}var S=M,L=n("26ee"),A=L["a"].Symbol,D=A,_=Object.prototype,R=_.hasOwnProperty,P=_.toString,I=D?D.toStringTag:void 0;function j(t){var e=R.call(t,I),n=t[I];try{t[I]=void 0;var r=!0}catch(o){}var i=P.call(t);return r&&(e?t[I]=n:delete t[I]),i}var z=j,B=Object.prototype,F=B.toString;function H(t){return F.call(t)}var q=H,W="[object Null]",U="[object Undefined]",$=D?D.toStringTag:void 0;function V(t){return null==t?void 0===t?U:W:$&&$ in Object(t)?z(t):q(t)}var G=V;function Y(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var K=Y,X="[object AsyncFunction]",Z="[object Function]",J="[object GeneratorFunction]",Q="[object Proxy]";function tt(t){if(!K(t))return!1;var e=G(t);return e==Z||e==J||e==X||e==Q}var et=tt,nt=L["a"]["__core-js_shared__"],rt=nt,it=function(){var t=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ot(t){return!!it&&it in t}var st=ot,at=Function.prototype,lt=at.toString;function ct(t){if(null!=t){try{return lt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var ht=ct,ut=/[\\^$.*+?()[\]{}|]/g,dt=/^\[object .+?Constructor\]$/,ft=Function.prototype,pt=Object.prototype,mt=ft.toString,gt=pt.hasOwnProperty,vt=RegExp("^"+mt.call(gt).replace(ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yt(t){if(!K(t)||st(t))return!1;var e=et(t)?vt:dt;return e.test(ht(t))}var bt=yt;function wt(t,e){return null==t?void 0:t[e]}var xt=wt;function Ct(t,e){var n=xt(t,e);return bt(n)?n:void 0}var Et=Ct,kt=Et(L["a"],"Map"),Nt=kt,Ot=Et(Object,"create"),Tt=Ot;function Mt(){this.__data__=Tt?Tt(null):{},this.size=0}var St=Mt;function Lt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var At=Lt,Dt="__lodash_hash_undefined__",_t=Object.prototype,Rt=_t.hasOwnProperty;function Pt(t){var e=this.__data__;if(Tt){var n=e[t];return n===Dt?void 0:n}return Rt.call(e,t)?e[t]:void 0}var It=Pt,jt=Object.prototype,zt=jt.hasOwnProperty;function Bt(t){var e=this.__data__;return Tt?void 0!==e[t]:zt.call(e,t)}var Ft=Bt,Ht="__lodash_hash_undefined__";function qt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tt&&void 0===e?Ht:e,this}var Wt=qt;function Ut(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}Ut.prototype.clear=St,Ut.prototype["delete"]=At,Ut.prototype.get=It,Ut.prototype.has=Ft,Ut.prototype.set=Wt;var $t=Ut;function Vt(){this.size=0,this.__data__={hash:new $t,map:new(Nt||x),string:new $t}}var Gt=Vt;function Yt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var Kt=Yt;function Xt(t,e){var n=t.__data__;return Kt(e)?n["string"==typeof e?"string":"hash"]:n.map}var Zt=Xt;function Jt(t){var e=Zt(this,t)["delete"](t);return this.size-=e?1:0,e}var Qt=Jt;function te(t){return Zt(this,t).get(t)}var ee=te;function ne(t){return Zt(this,t).has(t)}var re=ne;function ie(t,e){var n=Zt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var oe=ie;function se(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}se.prototype.clear=Gt,se.prototype["delete"]=Qt,se.prototype.get=ee,se.prototype.has=re,se.prototype.set=oe;var ae=se,le=200;function ce(t,e){var n=this.__data__;if(n instanceof x){var r=n.__data__;if(!Nt||r.length<le-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ae(r)}return n.set(t,e),this.size=n.size,this}var he=ce;function ue(t){var e=this.__data__=new x(t);this.size=e.size}ue.prototype.clear=E,ue.prototype["delete"]=N,ue.prototype.get=T,ue.prototype.has=S,ue.prototype.set=he;var de=ue,fe=function(){try{var t=Et(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),pe=fe;function me(t,e,n){"__proto__"==e&&pe?pe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var ge=me;function ve(t,e,n){(void 0!==n&&!a(t[e],n)||void 0===n&&!(e in t))&&ge(t,e,n)}var ye=ve;function be(t){return function(e,n,r){var i=-1,o=Object(e),s=r(e),a=s.length;while(a--){var l=s[t?a:++i];if(!1===n(o[l],l,o))break}return e}}var we=be,xe=we(),Ce=xe,Ee=n("dff1"),ke=L["a"].Uint8Array,Ne=ke;function Oe(t){var e=new t.constructor(t.byteLength);return new Ne(e).set(new Ne(t)),e}var Te=Oe;function Me(t,e){var n=e?Te(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Se=Me;function Le(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}var Ae=Le,De=Object.create,_e=function(){function t(){}return function(e){if(!K(e))return{};if(De)return De(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Re=_e;function Pe(t,e){return function(n){return t(e(n))}}var Ie=Pe,je=Ie(Object.getPrototypeOf,Object),ze=je,Be=Object.prototype;function Fe(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Be;return t===n}var He=Fe;function qe(t){return"function"!=typeof t.constructor||He(t)?{}:Re(ze(t))}var We=qe;function Ue(t){return null!=t&&"object"==typeof t}var $e=Ue,Ve="[object Arguments]";function Ge(t){return $e(t)&&G(t)==Ve}var Ye=Ge,Ke=Object.prototype,Xe=Ke.hasOwnProperty,Ze=Ke.propertyIsEnumerable,Je=Ye(function(){return arguments}())?Ye:function(t){return $e(t)&&Xe.call(t,"callee")&&!Ze.call(t,"callee")},Qe=Je,tn=Array.isArray,en=tn,nn=9007199254740991;function rn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=nn}var on=rn;function sn(t){return null!=t&&on(t.length)&&!et(t)}var an=sn;function ln(t){return $e(t)&&an(t)}var cn=ln,hn=n("58e0"),un="[object Object]",dn=Function.prototype,fn=Object.prototype,pn=dn.toString,mn=fn.hasOwnProperty,gn=pn.call(Object);function vn(t){if(!$e(t)||G(t)!=un)return!1;var e=ze(t);if(null===e)return!0;var n=mn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&pn.call(n)==gn}var yn=vn,bn="[object Arguments]",wn="[object Array]",xn="[object Boolean]",Cn="[object Date]",En="[object Error]",kn="[object Function]",Nn="[object Map]",On="[object Number]",Tn="[object Object]",Mn="[object RegExp]",Sn="[object Set]",Ln="[object String]",An="[object WeakMap]",Dn="[object ArrayBuffer]",_n="[object DataView]",Rn="[object Float32Array]",Pn="[object Float64Array]",In="[object Int8Array]",jn="[object Int16Array]",zn="[object Int32Array]",Bn="[object Uint8Array]",Fn="[object Uint8ClampedArray]",Hn="[object Uint16Array]",qn="[object Uint32Array]",Wn={};function Un(t){return $e(t)&&on(t.length)&&!!Wn[G(t)]}Wn[Rn]=Wn[Pn]=Wn[In]=Wn[jn]=Wn[zn]=Wn[Bn]=Wn[Fn]=Wn[Hn]=Wn[qn]=!0,Wn[bn]=Wn[wn]=Wn[Dn]=Wn[xn]=Wn[_n]=Wn[Cn]=Wn[En]=Wn[kn]=Wn[Nn]=Wn[On]=Wn[Tn]=Wn[Mn]=Wn[Sn]=Wn[Ln]=Wn[An]=!1;var $n=Un;function Vn(t){return function(e){return t(e)}}var Gn=Vn,Yn=n("c6eb"),Kn=Yn["a"]&&Yn["a"].isTypedArray,Xn=Kn?Gn(Kn):$n,Zn=Xn;function Jn(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Qn=Jn,tr=Object.prototype,er=tr.hasOwnProperty;function nr(t,e,n){var r=t[e];er.call(t,e)&&a(r,n)&&(void 0!==n||e in t)||ge(t,e,n)}var rr=nr;function ir(t,e,n,r){var i=!n;n||(n={});var o=-1,s=e.length;while(++o<s){var a=e[o],l=r?r(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),i?ge(n,a,l):rr(n,a,l)}return n}var or=ir;function sr(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}var ar=sr,lr=9007199254740991,cr=/^(?:0|[1-9]\d*)$/;function hr(t,e){var n=typeof t;return e=null==e?lr:e,!!e&&("number"==n||"symbol"!=n&&cr.test(t))&&t>-1&&t%1==0&&t<e}var ur=hr,dr=Object.prototype,fr=dr.hasOwnProperty;function pr(t,e){var n=en(t),r=!n&&Qe(t),i=!n&&!r&&Object(hn["a"])(t),o=!n&&!r&&!i&&Zn(t),s=n||r||i||o,a=s?ar(t.length,String):[],l=a.length;for(var c in t)!e&&!fr.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ur(c,l))||a.push(c);return a}var mr=pr;function gr(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}var vr=gr,yr=Object.prototype,br=yr.hasOwnProperty;function wr(t){if(!K(t))return vr(t);var e=He(t),n=[];for(var r in t)("constructor"!=r||!e&&br.call(t,r))&&n.push(r);return n}var xr=wr;function Cr(t){return an(t)?mr(t,!0):xr(t)}var Er=Cr;function kr(t){return or(t,Er(t))}var Nr=kr;function Or(t,e,n,r,i,o,s){var a=Qn(t,n),l=Qn(e,n),c=s.get(l);if(c)ye(t,n,c);else{var h=o?o(a,l,n+"",t,e,s):void 0,u=void 0===h;if(u){var d=en(l),f=!d&&Object(hn["a"])(l),p=!d&&!f&&Zn(l);h=l,d||f||p?en(a)?h=a:cn(a)?h=Ae(a):f?(u=!1,h=Object(Ee["a"])(l,!0)):p?(u=!1,h=Se(l,!0)):h=[]:yn(l)||Qe(l)?(h=a,Qe(a)?h=Nr(a):K(a)&&!et(a)||(h=We(l))):u=!1}u&&(s.set(l,h),i(h,l,r,o,s),s["delete"](l)),ye(t,n,h)}}var Tr=Or;function Mr(t,e,n,r,i){t!==e&&Ce(e,(function(o,s){if(i||(i=new de),K(o))Tr(t,e,s,n,Mr,r,i);else{var a=r?r(Qn(t,s),o,s+"",t,e,i):void 0;void 0===a&&(a=o),ye(t,s,a)}}),Er)}var Sr=Mr;function Lr(t){return t}var Ar=Lr;function Dr(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var _r=Dr,Rr=Math.max;function Pr(t,e,n){return e=Rr(void 0===e?t.length-1:e,0),function(){var r=arguments,i=-1,o=Rr(r.length-e,0),s=Array(o);while(++i<o)s[i]=r[e+i];i=-1;var a=Array(e+1);while(++i<e)a[i]=r[i];return a[e]=n(s),_r(t,this,a)}}var Ir=Pr;function jr(t){return function(){return t}}var zr=jr,Br=pe?function(t,e){return pe(t,"toString",{configurable:!0,enumerable:!1,value:zr(e),writable:!0})}:Ar,Fr=Br,Hr=800,qr=16,Wr=Date.now;function Ur(t){var e=0,n=0;return function(){var r=Wr(),i=qr-(r-n);if(n=r,i>0){if(++e>=Hr)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var $r=Ur,Vr=$r(Fr),Gr=Vr;function Yr(t,e){return Gr(Ir(t,e,Ar),t+"")}var Kr=Yr;function Xr(t,e,n){if(!K(n))return!1;var r=typeof e;return!!("number"==r?an(n)&&ur(e,n.length):"string"==r&&e in n)&&a(n[e],t)}var Zr=Xr;function Jr(t){return Kr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&Zr(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);while(++r<i){var a=n[r];a&&t(e,a,r,o)}return e}))}var Qr=Jr,ti=Qr((function(t,e,n){Sr(t,e,n)})),ei=ti,ni=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(ni||{});class ri{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const r=ni.TYPE&ni.ATTRIBUTE;this.scope=null!=n.scope?n.scope&ni.LEVEL|r:ni.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(t=>t.name)}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class ii extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const oi=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(e,n,r){const i=this.query(n);if(null==i)throw new ii(`Unable to create ${n} blot`);const o=i,s=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(r),a=new o(e,s,r);return t.blots.set(a.domNode,a),a}find(e,n=!1){return t.find(e,n)}query(t,e=ni.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&ni.LEVEL&ni.BLOCK?n=this.types.block:t&ni.LEVEL&ni.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(t=>(n=this.classes[t],!!n)),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&ni.LEVEL&n.scope&&e&ni.TYPE&n.scope?n:null}register(...t){return t.map(t=>{const e="blotName"in t,n="attrName"in t;if(!e&&!n)throw new ii("Invalid definition");if(e&&"abstract"===t.blotName)throw new ii("Cannot register abstract class");const r=e?t.blotName:n?t.attrName:void 0;return this.types[r]=t,n?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(t=>t.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)}))),t})}};oi.blots=new WeakMap;let si=oi;function ai(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(t=>0===t.indexOf(e+"-"))}class li extends ri{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){ai(t,this.keyName).forEach(e=>{t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(ai(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const ci=li;function hi(t){const e=t.split("-"),n=e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("");return e[0]+n}class ui extends ri{static keys(t){return(t.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(t,e){return!!this.canAdd(t,e)&&(t.style[hi(this.keyName)]=e,!0)}remove(t){t.style[hi(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[hi(this.keyName)];return this.canAdd(t,e)?e:""}}const di=ui;class fi{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=si.find(this.domNode);if(null==t)return;const e=ri.keys(this.domNode),n=ci.keys(this.domNode),r=di.keys(this.domNode);e.concat(n).concat(r).forEach(e=>{const n=t.scroll.query(e,ni.ATTRIBUTE);n instanceof ri&&(this.attributes[n.attrName]=n)})}copy(t){Object.keys(this.attributes).forEach(e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const pi=fi,mi=class{constructor(t,e){this.scroll=t,this.domNode=e,si.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new ii("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),si.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,r){const i=this.isolate(t,e);if(null!=this.scroll.query(n,ni.BLOT)&&r)i.wrap(n,r);else if(null!=this.scroll.query(n,ni.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);i.wrap(t),t.format(n,r)}}insertAt(t,e,n){const r=null==n?this.scroll.create("text",e):this.scroll.create(e,n),i=this.split(t);this.parent.insertBefore(r,i||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new ii("Cannot wrap "+t);return n.appendChild(this),n}};mi.blotName="abstract";let gi=mi;const vi=class extends gi{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};vi.scope=ni.INLINE_BLOT;let yi=vi;const bi=yi;class wi{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),r=0;for(;n;){if(n===t)return r;r+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let r=n();for(;r;){const i=r.length();if(t<i||e&&t===i&&(null==r.next||0!==r.next.length()))return[r,t];t-=i,r=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[r,i]=this.find(t);let o=t-i;const s=this.iterator(r);let a=s();for(;a&&o<t+e;){const r=a.length();t>o?n(a,t-o,Math.min(e,o+r-t)):n(a,0,Math.min(r,t+e-o)),o+=r,a=s()}}map(t){return this.reduce((e,n)=>(e.push(t(n)),e),[])}reduce(t,e){const n=this.iterator();let r=n();for(;r;)e=t(e,r),r=n();return e}}function xi(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const n=e.create(ni.INLINE);return Array.from(t.childNodes).forEach(t=>{n.domNode.appendChild(t)}),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach(),n}}const Ci=class t extends gi{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new wi,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=xi(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof ii)return;throw e}})}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(t,e,n)=>{t.deleteAt(e,n)})}descendant(e,n=0){const[r,i]=this.children.find(n);return null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e?[r,i]:r instanceof t?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],o=r;return this.children.forEachAt(n,r,(n,r,s)=>{(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&i.push(n),n instanceof t&&(i=i.concat(n.descendants(e,r,o))),o-=s}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(t=>n instanceof t)||(n.statics.scope===ni.BLOCK_BLOT?(null!=n.next&&this.splitAfter(n),null!=n.prev&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof t?n.unwrap():n.remove())})}formatAt(t,e,n,r){this.children.forEachAt(t,e,(t,e,i)=>{t.formatAt(e,i,n,r)})}insertAt(t,e,n){const[r,i]=this.children.find(t);if(r)r.insertAt(i,e,n);else{const t=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(n=>{t.insertBefore(n,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),o=[[this,e]];return r instanceof t?o.concat(r.path(i,n)):(null!=r&&o.push([r,i]),o)}removeChild(t){this.children.remove(t)}replaceWith(e,n){const r="string"==typeof e?this.scroll.create(e,n):e;return r instanceof t&&this.moveChildren(r),super.replaceWith(r)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(t,r,i)=>{const o=t.split(r,e);null!=o&&n.appendChild(o)}),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],r=[];t.forEach(t=>{t.target===this.domNode&&"childList"===t.type&&(n.push(...t.addedNodes),r.push(...t.removedNodes))}),r.forEach(t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()}),n.filter(t=>t.parentNode===this.domNode&&t!==this.uiNode).sort((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const n=xi(t,this.scroll);(n.next!==e||null==n.next)&&(null!=n.parent&&n.parent.removeChild(this),this.insertBefore(n,e||void 0))}),this.enforceAllowedChildren()}};Ci.uiClass="";let Ei=Ci;const ki=Ei;function Ni(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Oi=class t extends ki{static create(t){return super.create(t)}static formats(e,n){const r=n.query(t.blotName);if(null==r||e.tagName!==r.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new pi(this.domNode)}format(e,n){if(e!==this.statics.blotName||n){const t=this.scroll.query(e,ni.INLINE);if(null==t)return;t instanceof ri?this.attributes.attribute(t,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}else this.children.forEach(e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)}),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,r){null!=this.formats()[n]||this.scroll.query(n,ni.ATTRIBUTE)?this.isolate(t,e).format(n,r):super.formatAt(t,e,n,r)}optimize(e){super.optimize(e);const n=this.formats();if(0===Object.keys(n).length)return this.unwrap();const r=this.next;r instanceof t&&r.prev===this&&Ni(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&"attributes"===t.type)&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof t&&this.attributes.move(r),r}};Oi.allowedChildren=[Oi,bi],Oi.blotName="inline",Oi.scope=ni.INLINE_BLOT,Oi.tagName="SPAN";let Ti=Oi;const Mi=Ti,Si=class t extends ki{static create(t){return super.create(t)}static formats(e,n){const r=n.query(t.blotName);if(null==r||e.tagName!==r.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new pi(this.domNode)}format(e,n){const r=this.scroll.query(e,ni.BLOCK);null!=r&&(r instanceof ri?this.attributes.attribute(r,n):e!==this.statics.blotName||n?n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n):this.replaceWith(t.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,r){null!=this.scroll.query(n,ni.BLOCK)?this.format(n,r):super.formatAt(t,e,n,r)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,ni.INLINE))super.insertAt(t,e,n);else{const r=this.split(t);if(null==r)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,n);r.parent.insertBefore(t,r)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&"attributes"===t.type)&&this.attributes.build()}};Si.blotName="block",Si.scope=ni.BLOCK_BLOT,Si.tagName="P",Si.allowedChildren=[Mi,Si,bi];let Li=Si;const Ai=Li,Di=class extends ki{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,r){super.formatAt(t,e,n,r),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Di.blotName="container",Di.scope=ni.BLOCK_BLOT;let _i=Di;const Ri=_i;class Pi extends bi{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,r){0===t&&e===this.length()?this.format(n,r):super.formatAt(t,e,n,r)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ii=Pi,ji={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},zi=100,Bi=class extends ki{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(t=>{this.update(t)}),this.observer.observe(this.domNode,ji),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=ni.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(t=>{t.remove()}):super.deleteAt(t,e)}formatAt(t,e,n,r){this.update(),super.formatAt(t,e,n,r)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let r=Array.from(this.observer.takeRecords());for(;r.length>0;)t.push(r.pop());const i=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(n.has(t.domNode)||n.set(t.domNode,[]),e&&i(t.parent))},o=t=>{n.has(t.domNode)&&(t instanceof ki&&t.children.forEach(o),n.delete(t.domNode),t.optimize(e))};let s=t;for(let a=0;s.length>0;a+=1){if(a>=zi)throw new Error("[Parchment] Maximum optimize iterations reached");for(s.forEach(t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(i(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach(t=>{const e=this.find(t,!1);i(e,!1),e instanceof ki&&e.children.forEach(t=>{i(t,!1)})})):"attributes"===t.type&&i(e.prev)),i(e))}),this.children.forEach(o),s=Array.from(this.observer.takeRecords()),r=s.slice();r.length>0;)t.push(r.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map(t=>{const e=this.find(t.target,!0);return null==e?null:n.has(e.domNode)?(n.get(e.domNode).push(t),null):(n.set(e.domNode,[t]),e)}).forEach(t=>{null!=t&&t!==this&&n.has(t.domNode)&&t.update(n.get(t.domNode)||[],e)}),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};Bi.blotName="scroll",Bi.defaultChild=Ai,Bi.allowedChildren=[Ai,Ri],Bi.scope=ni.BLOCK_BLOT,Bi.tagName="DIV";let Fi=Bi;const Hi=Fi,qi=class t extends bi{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some(t=>"characterData"===t.type&&t.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};qi.blotName="text",qi.scope=ni.INLINE_BLOT;let Wi=qi;const Ui=Wi;var $i=n("48d1"),Vi=n.n($i);function Gi(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}var Yi=Gi,Ki=Ie(Object.keys,Object),Xi=Ki,Zi=Object.prototype,Ji=Zi.hasOwnProperty;function Qi(t){if(!He(t))return Xi(t);var e=[];for(var n in Object(t))Ji.call(t,n)&&"constructor"!=n&&e.push(n);return e}var to=Qi;function eo(t){return an(t)?mr(t):to(t)}var no=eo;function ro(t,e){return t&&or(e,no(e),t)}var io=ro;function oo(t,e){return t&&or(e,Er(e),t)}var so=oo;function ao(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var lo=ao;function co(){return[]}var ho=co,uo=Object.prototype,fo=uo.propertyIsEnumerable,po=Object.getOwnPropertySymbols,mo=po?function(t){return null==t?[]:(t=Object(t),lo(po(t),(function(e){return fo.call(t,e)})))}:ho,go=mo;function vo(t,e){return or(t,go(t),e)}var yo=vo;function bo(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}var wo=bo,xo=Object.getOwnPropertySymbols,Co=xo?function(t){var e=[];while(t)wo(e,go(t)),t=ze(t);return e}:ho,Eo=Co;function ko(t,e){return or(t,Eo(t),e)}var No=ko;function Oo(t,e,n){var r=e(t);return en(t)?r:wo(r,n(t))}var To=Oo;function Mo(t){return To(t,no,go)}var So=Mo;function Lo(t){return To(t,Er,Eo)}var Ao=Lo,Do=Et(L["a"],"DataView"),_o=Do,Ro=Et(L["a"],"Promise"),Po=Ro,Io=Et(L["a"],"Set"),jo=Io,zo=Et(L["a"],"WeakMap"),Bo=zo,Fo="[object Map]",Ho="[object Object]",qo="[object Promise]",Wo="[object Set]",Uo="[object WeakMap]",$o="[object DataView]",Vo=ht(_o),Go=ht(Nt),Yo=ht(Po),Ko=ht(jo),Xo=ht(Bo),Zo=G;(_o&&Zo(new _o(new ArrayBuffer(1)))!=$o||Nt&&Zo(new Nt)!=Fo||Po&&Zo(Po.resolve())!=qo||jo&&Zo(new jo)!=Wo||Bo&&Zo(new Bo)!=Uo)&&(Zo=function(t){var e=G(t),n=e==Ho?t.constructor:void 0,r=n?ht(n):"";if(r)switch(r){case Vo:return $o;case Go:return Fo;case Yo:return qo;case Ko:return Wo;case Xo:return Uo}return e});var Jo=Zo,Qo=Object.prototype,ts=Qo.hasOwnProperty;function es(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ts.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var ns=es;function rs(t,e){var n=e?Te(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var is=rs,os=/\w*$/;function ss(t){var e=new t.constructor(t.source,os.exec(t));return e.lastIndex=t.lastIndex,e}var as=ss,ls=D?D.prototype:void 0,cs=ls?ls.valueOf:void 0;function hs(t){return cs?Object(cs.call(t)):{}}var us=hs,ds="[object Boolean]",fs="[object Date]",ps="[object Map]",ms="[object Number]",gs="[object RegExp]",vs="[object Set]",ys="[object String]",bs="[object Symbol]",ws="[object ArrayBuffer]",xs="[object DataView]",Cs="[object Float32Array]",Es="[object Float64Array]",ks="[object Int8Array]",Ns="[object Int16Array]",Os="[object Int32Array]",Ts="[object Uint8Array]",Ms="[object Uint8ClampedArray]",Ss="[object Uint16Array]",Ls="[object Uint32Array]";function As(t,e,n){var r=t.constructor;switch(e){case ws:return Te(t);case ds:case fs:return new r(+t);case xs:return is(t,n);case Cs:case Es:case ks:case Ns:case Os:case Ts:case Ms:case Ss:case Ls:return Se(t,n);case ps:return new r;case ms:case ys:return new r(t);case gs:return as(t);case vs:return new r;case bs:return us(t)}}var Ds=As,_s="[object Map]";function Rs(t){return $e(t)&&Jo(t)==_s}var Ps=Rs,Is=Yn["a"]&&Yn["a"].isMap,js=Is?Gn(Is):Ps,zs=js,Bs="[object Set]";function Fs(t){return $e(t)&&Jo(t)==Bs}var Hs=Fs,qs=Yn["a"]&&Yn["a"].isSet,Ws=qs?Gn(qs):Hs,Us=Ws,$s=1,Vs=2,Gs=4,Ys="[object Arguments]",Ks="[object Array]",Xs="[object Boolean]",Zs="[object Date]",Js="[object Error]",Qs="[object Function]",ta="[object GeneratorFunction]",ea="[object Map]",na="[object Number]",ra="[object Object]",ia="[object RegExp]",oa="[object Set]",sa="[object String]",aa="[object Symbol]",la="[object WeakMap]",ca="[object ArrayBuffer]",ha="[object DataView]",ua="[object Float32Array]",da="[object Float64Array]",fa="[object Int8Array]",pa="[object Int16Array]",ma="[object Int32Array]",ga="[object Uint8Array]",va="[object Uint8ClampedArray]",ya="[object Uint16Array]",ba="[object Uint32Array]",wa={};function xa(t,e,n,r,i,o){var s,a=e&$s,l=e&Vs,c=e&Gs;if(n&&(s=i?n(t,r,i,o):n(t)),void 0!==s)return s;if(!K(t))return t;var h=en(t);if(h){if(s=ns(t),!a)return Ae(t,s)}else{var u=Jo(t),d=u==Qs||u==ta;if(Object(hn["a"])(t))return Object(Ee["a"])(t,a);if(u==ra||u==Ys||d&&!i){if(s=l||d?{}:We(t),!a)return l?No(t,so(s,t)):yo(t,io(s,t))}else{if(!wa[u])return i?t:{};s=Ds(t,u,a)}}o||(o=new de);var f=o.get(t);if(f)return f;o.set(t,s),Us(t)?t.forEach((function(r){s.add(xa(r,e,n,r,t,o))})):zs(t)&&t.forEach((function(r,i){s.set(i,xa(r,e,n,i,t,o))}));var p=c?l?Ao:So:l?Er:no,m=h?void 0:p(t);return Yi(m||t,(function(r,i){m&&(i=r,r=t[i]),rr(s,i,xa(r,e,n,i,t,o))})),s}wa[Ys]=wa[Ks]=wa[ca]=wa[ha]=wa[Xs]=wa[Zs]=wa[ua]=wa[da]=wa[fa]=wa[pa]=wa[ma]=wa[ea]=wa[na]=wa[ra]=wa[ia]=wa[oa]=wa[sa]=wa[aa]=wa[ga]=wa[va]=wa[ya]=wa[ba]=!0,wa[Js]=wa[Qs]=wa[la]=!1;var Ca=xa,Ea=1,ka=4;function Na(t){return Ca(t,Ea|ka)}var Oa=Na,Ta="__lodash_hash_undefined__";function Ma(t){return this.__data__.set(t,Ta),this}var Sa=Ma;function La(t){return this.__data__.has(t)}var Aa=La;function Da(t){var e=-1,n=null==t?0:t.length;this.__data__=new ae;while(++e<n)this.add(t[e])}Da.prototype.add=Da.prototype.push=Sa,Da.prototype.has=Aa;var _a=Da;function Ra(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}var Pa=Ra;function Ia(t,e){return t.has(e)}var ja=Ia,za=1,Ba=2;function Fa(t,e,n,r,i,o){var s=n&za,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),h=o.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,f=n&Ba?new _a:void 0;o.set(t,e),o.set(e,t);while(++u<a){var p=t[u],m=e[u];if(r)var g=s?r(m,p,u,e,t,o):r(p,m,u,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Pa(e,(function(t,e){if(!ja(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o["delete"](t),o["delete"](e),d}var Ha=Fa;function qa(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}var Wa=qa;function Ua(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var $a=Ua,Va=1,Ga=2,Ya="[object Boolean]",Ka="[object Date]",Xa="[object Error]",Za="[object Map]",Ja="[object Number]",Qa="[object RegExp]",tl="[object Set]",el="[object String]",nl="[object Symbol]",rl="[object ArrayBuffer]",il="[object DataView]",ol=D?D.prototype:void 0,sl=ol?ol.valueOf:void 0;function al(t,e,n,r,i,o,s){switch(n){case il:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rl:return!(t.byteLength!=e.byteLength||!o(new Ne(t),new Ne(e)));case Ya:case Ka:case Ja:return a(+t,+e);case Xa:return t.name==e.name&&t.message==e.message;case Qa:case el:return t==e+"";case Za:var l=Wa;case tl:var c=r&Va;if(l||(l=$a),t.size!=e.size&&!c)return!1;var h=s.get(t);if(h)return h==e;r|=Ga,s.set(t,e);var u=Ha(l(t),l(e),r,i,o,s);return s["delete"](t),u;case nl:if(sl)return sl.call(t)==sl.call(e)}return!1}var ll=al,cl=1,hl=Object.prototype,ul=hl.hasOwnProperty;function dl(t,e,n,r,i,o){var s=n&cl,a=So(t),l=a.length,c=So(e),h=c.length;if(l!=h&&!s)return!1;var u=l;while(u--){var d=a[u];if(!(s?d in e:ul.call(e,d)))return!1}var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var m=!0;o.set(t,e),o.set(e,t);var g=s;while(++u<l){d=a[u];var v=t[d],y=e[d];if(r)var b=s?r(y,v,d,e,t,o):r(v,y,d,t,e,o);if(!(void 0===b?v===y||i(v,y,n,r,o):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var w=t.constructor,x=e.constructor;w==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return o["delete"](t),o["delete"](e),m}var fl=dl,pl=1,ml="[object Arguments]",gl="[object Array]",vl="[object Object]",yl=Object.prototype,bl=yl.hasOwnProperty;function wl(t,e,n,r,i,o){var s=en(t),a=en(e),l=s?gl:Jo(t),c=a?gl:Jo(e);l=l==ml?vl:l,c=c==ml?vl:c;var h=l==vl,u=c==vl,d=l==c;if(d&&Object(hn["a"])(t)){if(!Object(hn["a"])(e))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new de),s||Zn(t)?Ha(t,e,n,r,i,o):ll(t,e,l,n,r,i,o);if(!(n&pl)){var f=h&&bl.call(t,"__wrapped__"),p=u&&bl.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return o||(o=new de),i(m,g,n,r,o)}}return!!d&&(o||(o=new de),fl(t,e,n,r,i,o))}var xl=wl;function Cl(t,e,n,r,i){return t===e||(null==t||null==e||!$e(t)&&!$e(e)?t!==t&&e!==e:xl(t,e,n,r,Cl,i))}var El=Cl;function kl(t,e){return El(t,e)}var Nl=kl;function Ol(t){return Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(t)}function Tl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ml(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ll(r.key),r)}}function Sl(t,e,n){return e&&Ml(t.prototype,e),n&&Ml(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ll(t){var e=Al(t,"string");return"symbol"==Ol(e)?e:e+""}function Al(t,e){if("object"!=Ol(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ol(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Dl(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_l(t,e)}function _l(t,e){return _l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_l(t,e)}function Rl(t){var e=jl();return function(){var n,r=zl(t);if(e){var i=zl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pl(this,n)}}function Pl(t,e){if(e&&("object"===Ol(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Il(t)}function Il(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jl=function(){return!!t})()}function zl(t){return zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zl(t)}var Bl=function(t){Dl(n,t);var e=Rl(n);function n(){return Tl(this,n),e.apply(this,arguments)}return Sl(n,[{key:"optimize",value:function(){(this.prev||this.next)&&this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),n}(Ii);Bl.blotName="break",Bl.tagName="BR";var Fl=Bl;function Hl(t){return Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(t)}function ql(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ul(r.key),r)}}function Wl(t,e,n){return e&&ql(t.prototype,e),n&&ql(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ul(t){var e=$l(t,"string");return"symbol"==Hl(e)?e:e+""}function $l(t,e){if("object"!=Hl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Vl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gl(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yl(t,e)}function Yl(t,e){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yl(t,e)}function Kl(t){var e=Jl();return function(){var n,r=Ql(t);if(e){var i=Ql(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xl(this,n)}}function Xl(t,e){if(e&&("object"===Hl(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zl(t)}function Zl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jl=function(){return!!t})()}function Ql(t){return Ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ql(t)}var tc=function(t){Gl(n,t);var e=Kl(n);function n(){return Vl(this,n),e.apply(this,arguments)}return Wl(n)}(Ui);function ec(t){return t.replace(/[&<>"']/g,(function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e[t]}))}function nc(t){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(t)}function rc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ic(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gc(r.key),r)}}function oc(t,e,n){return e&&ic(t.prototype,e),n&&ic(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sc(){return sc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=ac(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},sc.apply(this,arguments)}function ac(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=pc(t),null===t)break;return t}function lc(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cc(t,e)}function cc(t,e){return cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cc(t,e)}function hc(t){var e=fc();return function(){var n,r=pc(t);if(e){var i=pc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uc(this,n)}}function uc(t,e){if(e&&("object"===nc(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dc(t)}function dc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fc=function(){return!!t})()}function pc(t){return pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pc(t)}function mc(t,e,n){return e=gc(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gc(t){var e=vc(t,"string");return"symbol"==nc(e)?e:e+""}function vc(t,e){if("object"!=nc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var yc=function(t){lc(n,t);var e=hc(n);function n(){return rc(this,n),e.apply(this,arguments)}return oc(n,[{key:"formatAt",value:function(t,e,r,i){if(n.compare(this.statics.blotName,r)<0&&this.scroll.query(r,ni.BLOT)){var o=this.isolate(t,e);i&&o.wrap(r,i)}else sc(pc(n.prototype),"formatAt",this).call(this,t,e,r,i)}},{key:"optimize",value:function(t){if(sc(pc(n.prototype),"optimize",this).call(this,t),this.parent instanceof n&&n.compare(this.statics.blotName,this.parent.statics.blotName)>0){var e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}],[{key:"compare",value:function(t,e){var r=n.order.indexOf(t),i=n.order.indexOf(e);return r>=0||i>=0?r-i:t===e?0:t<e?-1:1}}]),n}(Mi);mc(yc,"allowedChildren",[yc,Fl,Ii,tc]),mc(yc,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);var bc=yc;function wc(t){return wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(t)}function xc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xc(Object(n),!0).forEach((function(e){Pc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ec(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ic(r.key),r)}}function Nc(t,e,n){return e&&kc(t.prototype,e),n&&kc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oc(){return Oc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Tc(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Oc.apply(this,arguments)}function Tc(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Rc(t),null===t)break;return t}function Mc(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sc(t,e)}function Sc(t,e){return Sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sc(t,e)}function Lc(t){var e=_c();return function(){var n,r=Rc(t);if(e){var i=Rc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ac(this,n)}}function Ac(t,e){if(e&&("object"===wc(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dc(t)}function Dc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_c=function(){return!!t})()}function Rc(t){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rc(t)}function Pc(t,e,n){return e=Ic(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ic(t){var e=jc(t,"string");return"symbol"==wc(e)?e:e+""}function jc(t,e){if("object"!=wc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var zc=1,Bc=function(t){Mc(n,t);var e=Lc(n);function n(){var t;Ec(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Pc(Dc(t),"cache",{}),t}return Nc(n,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=Hc(this)),this.cache.delta}},{key:"deleteAt",value:function(t,e){Oc(Rc(n.prototype),"deleteAt",this).call(this,t,e),this.cache={}}},{key:"formatAt",value:function(t,e,r,i){e<=0||(this.scroll.query(r,ni.BLOCK)?t+e===this.length()&&this.format(r,i):Oc(Rc(n.prototype),"formatAt",this).call(this,t,Math.min(e,this.length()-t-1),r,i),this.cache={})}},{key:"insertAt",value:function(t,e,r){if(null!=r)return Oc(Rc(n.prototype),"insertAt",this).call(this,t,e,r),void(this.cache={});if(0!==e.length){var i=e.split("\n"),o=i.shift();o.length>0&&(t<this.length()-1||null==this.children.tail?Oc(Rc(n.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var s=this;i.reduce((function(t,e){return s=s.split(t,!0),s.insertAt(0,e),e.length}),t+o.length)}}},{key:"insertBefore",value:function(t,e){var r=this.children.head;Oc(Rc(n.prototype),"insertBefore",this).call(this,t,e),r instanceof Fl&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=Oc(Rc(n.prototype),"length",this).call(this)+zc),this.cache.length}},{key:"moveChildren",value:function(t,e){Oc(Rc(n.prototype),"moveChildren",this).call(this,t,e),this.cache={}}},{key:"optimize",value:function(t){Oc(Rc(n.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return Oc(Rc(n.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){Oc(Rc(n.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-zc)){var r=this.clone();return 0===t?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var i=Oc(Rc(n.prototype),"split",this).call(this,t,e);return this.cache={},i}}]),n}(Ai);Bc.blotName="block",Bc.tagName="P",Bc.defaultChild=Fl,Bc.allowedChildren=[Fl,bc,Ii,tc];var Fc=function(t){Mc(n,t);var e=Lc(n);function n(){return Ec(this,n),e.apply(this,arguments)}return Nc(n,[{key:"attach",value:function(){Oc(Rc(n.prototype),"attach",this).call(this),this.attributes=new pi(this.domNode)}},{key:"delta",value:function(){return(new Vi.a).insert(this.value(),Cc(Cc({},this.formats()),this.attributes.values()))}},{key:"format",value:function(t,e){var n=this.scroll.query(t,ni.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,r){this.format(n,r)}},{key:"insertAt",value:function(t,e,r){var i=this;if(null==r){var o=e.split("\n"),s=o.pop(),a=o.map((function(t){var e=i.scroll.create(Bc.blotName);return e.insertAt(0,t),e})),l=this.split(t);a.forEach((function(t){i.parent.insertBefore(t,l)})),s&&this.parent.insertBefore(this.scroll.create("text",s),l)}else Oc(Rc(n.prototype),"insertAt",this).call(this,t,e,r)}}]),n}(Ii);function Hc(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(bi).reduce((function(t,n){return 0===n.length()?t:t.insert(n.value(),qc(n,{},e))}),new Vi.a).insert("\n",qc(t))}function qc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"===typeof t.formats&&(e=Cc(Cc({},e),t.formats()),n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:qc(t.parent,e,n))}function Wc(t){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(t)}function Uc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rh(r.key),r)}}function Vc(t,e,n){return e&&$c(t.prototype,e),n&&$c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gc(){return Gc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Yc(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Gc.apply(this,arguments)}function Yc(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=eh(t),null===t)break;return t}function Kc(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xc(t,e)}function Xc(t,e){return Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xc(t,e)}function Zc(t){var e=th();return function(){var n,r=eh(t);if(e){var i=eh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jc(this,n)}}function Jc(t,e){if(e&&("object"===Wc(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qc(t)}function Qc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function th(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(th=function(){return!!t})()}function eh(t){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eh(t)}function nh(t,e,n){return e=rh(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rh(t){var e=ih(t,"string");return"symbol"==Wc(e)?e:e+""}function ih(t,e){if("object"!=Wc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Fc.scope=ni.BLOCK_BLOT;var oh=function(t){Kc(n,t);var e=Zc(n);function n(t,r,i){var o;return Uc(this,n),o=e.call(this,t,r),o.selection=i,o.textNode=document.createTextNode(n.CONTENTS),o.domNode.appendChild(o.textNode),o.savedLength=0,o}return Vc(n,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,e){if(0===this.savedLength){var r=this,i=0;while(null!=r&&r.statics.scope!==ni.BLOCK_BLOT)i+=r.offset(r.parent),r=r.parent;null!=r&&(this.savedLength=n.CONTENTS.length,r.optimize(),r.formatAt(i,n.CONTENTS.length,t,e),this.savedLength=0)}else Gc(eh(n.prototype),"format",this).call(this,t,e)}},{key:"index",value:function(t,e){return t===this.textNode?0:Gc(eh(n.prototype),"index",this).call(this,t,e)}},{key:"length",value:function(){return this.savedLength}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){Gc(eh(n.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(this.selection.composing||null==this.parent)return null;var t=this.selection.getNativeRange();while(null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);var e,r=this.prev instanceof tc?this.prev:null,i=r?r.length():0,o=this.next instanceof tc?this.next:null,s=o?o.text:"",a=this.textNode,l=a.data.split(n.CONTENTS).join("");if(a.data=n.CONTENTS,r)e=r,(l||o)&&(r.insertAt(r.length(),l+s),o&&o.remove());else if(o)e=o,o.insertAt(0,l);else{var c=document.createTextNode(l);e=this.scroll.create(c),this.parent.insertBefore(e,this)}if(this.remove(),t){var h=function(t,e){return r&&t===r.domNode?e:t===a?i+e-1:o&&t===o.domNode?i+l.length+e:null},u=h(t.start.node,t.start.offset),d=h(t.end.node,t.end.offset);if(null!==u&&null!==d)return{startNode:e.domNode,startOffset:u,endNode:e.domNode,endOffset:d}}return null}},{key:"update",value:function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var r=this.restore();r&&(e.range=r)}}},{key:"optimize",value:function(t){Gc(eh(n.prototype),"optimize",this).call(this,t);var e=this.parent;while(e){if("A"===e.domNode.tagName){this.savedLength=n.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),n}(Ii);nh(oh,"blotName","cursor"),nh(oh,"className","ql-cursor"),nh(oh,"tagName","span"),nh(oh,"CONTENTS","\ufeff");var sh=oh,ah=n("9d4bc"),lh=new WeakMap,ch=["error","warn","log","info"],hh="warn";function uh(t){if(hh&&ch.indexOf(t)<=ch.indexOf(hh)){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console)[t].apply(e,r)}}function dh(t){return ch.reduce((function(e,n){return e[n]=uh.bind(console,n,t),e}),{})}dh.level=function(t){hh=t},uh.level=dh.level;var fh=dh;function ph(t){return ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(t)}function mh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mh(r.key),r)}}function vh(t,e,n){return e&&gh(t.prototype,e),n&&gh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yh(){return yh="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=bh(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},yh.apply(this,arguments)}function bh(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Oh(t),null===t)break;return t}function wh(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xh(t,e)}function xh(t,e){return xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xh(t,e)}function Ch(t){var e=Nh();return function(){var n,r=Oh(t);if(e){var i=Oh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Eh(this,n)}}function Eh(t,e){if(e&&("object"===ph(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kh(t)}function kh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nh=function(){return!!t})()}function Oh(t){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oh(t)}function Th(t,e,n){return e=Mh(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mh(t){var e=Sh(t,"string");return"symbol"==ph(e)?e:e+""}function Sh(t,e){if("object"!=ph(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ph(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Lh=fh("quill:events"),Ah=["selectionchange","mousedown","mouseup","click"];Ah.forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((function(t){var n,r=lh.get(t);r&&r.emitter&&(n=r.emitter).handleDOM.apply(n,e)}))}))}));var Dh=function(t){wh(n,t);var e=Ch(n);function n(){var t;return mh(this,n),t=e.call(this),t.domListeners={},t.on("error",Lh.error),t}return vh(n,[{key:"emit",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=Lh.log).call.apply(t,[Lh].concat(i)),(e=yh(Oh(n.prototype),"emit",this)).call.apply(e,[this].concat(i))}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(this.domListeners[t.type]||[]).forEach((function(e){var r=e.node,i=e.handler;(t.target===r||r.contains(t.target))&&i.apply(void 0,[t].concat(n))}))}},{key:"listenDOM",value:function(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}}]),n}(ah["EventEmitter"]);Th(Dh,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),Th(Dh,"sources",{API:"api",SILENT:"silent",USER:"user"});var _h=Dh;function Rh(t){return Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(t)}function Ph(t){return zh(t)||jh(t)||Hh(t)||Ih()}function Ih(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jh(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function zh(t){if(Array.isArray(t))return qh(t)}function Bh(t,e){return Uh(t)||Wh(t,e)||Hh(t,e)||Fh()}function Fh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hh(t,e){if(t){if("string"===typeof t)return qh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qh(t,e):void 0}}function qh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wh(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Uh(t){if(Array.isArray(t))return t}function $h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gh(r.key),r)}}function Vh(t,e,n){return e&&$h(t.prototype,e),n&&$h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gh(t){var e=Yh(t,"string");return"symbol"==Rh(e)?e:e+""}function Yh(t,e){if("object"!=Rh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Kh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Xh=fh("quill:selection"),Zh=Vh((function t(e){Kh(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=e,this.length=n})),Jh=function(){function t(e,n){var r=this;Kh(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Zh(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||r.composing||setTimeout(r.update.bind(r,_h.sources.USER),1)})),this.emitter.on(_h.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var t=r.getNativeRange();null!=t&&t.start.node!==r.cursor.textNode&&r.emitter.once(_h.events.SCROLL_UPDATE,(function(e,n){try{r.root.contains(t.start.node)&&r.root.contains(t.end.node)&&r.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);var i=n.some((function(t){return"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===r.root}));r.update(i?_h.sources.SILENT:e)}catch(o){}}))}})),this.emitter.on(_h.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var n=e.range,i=n.startNode,o=n.startOffset,s=n.endNode,a=n.endOffset;r.setNativeRange(i,o,s,a),r.update(_h.sources.SILENT)}})),this.update(_h.sources.SILENT)}return Vh(t,[{key:"handleComposition",value:function(){var t=this;this.emitter.on(_h.events.COMPOSITION_BEFORE_START,(function(){t.composing=!0})),this.emitter.on(_h.events.COMPOSITION_END,(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(_h.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,ni.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=this.scroll.find(n.start.node,!1);if(null==r)return;if(r instanceof bi){var i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},{key:"getBounds",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();t=Math.min(t,r-1),n=Math.min(t+n,r-1)-t;var i=this.scroll.leaf(t),o=Bh(i,2),s=o[0],a=o[1];if(null==s)return null;if(n>0&&a===s.length()){var l=this.scroll.leaf(t+1),c=Bh(l,1),h=c[0];if(h){var u=this.scroll.line(t),d=Bh(u,1),f=d[0],p=this.scroll.line(t+1),m=Bh(p,1),g=m[0];f===g&&(s=h,a=0)}}var v=s.position(a,!0),y=Bh(v,2);e=y[0],a=y[1];var b=document.createRange();if(n>0){b.setStart(e,a);var w=this.scroll.leaf(t+n),x=Bh(w,2);if(s=x[0],a=x[1],null==s)return null;var C=s.position(a,!0),E=Bh(C,2);return e=E[0],a=E[1],b.setEnd(e,a),b.getBoundingClientRect()}var k,N="left";if(e instanceof Text){if(!e.data.length)return null;a<e.data.length?(b.setStart(e,a),b.setEnd(e,a+1)):(b.setStart(e,a-1),b.setEnd(e,a),N="right"),k=b.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;k=s.domNode.getBoundingClientRect(),a>0&&(N="right")}return{bottom:k.top+k.height,height:k.height,left:k[N],right:k[N],top:k.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return Xh.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];var e=this.getNativeRange();if(null==e)return[null,null];var n=this.normalizedToRange(e);return[n,e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root||null!=document.activeElement&&Qh(this.root,document.activeElement)}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var r=n.map((function(t){var n=Bh(t,2),r=n[0],i=n[1],o=e.scroll.find(r,!0),s=o.offset(e.scroll);return 0===i?s:o instanceof bi?s+o.index(r,i):s+o.length()})),i=Math.min(Math.max.apply(Math,Ph(r)),this.scroll.length()-1),o=Math.min.apply(Math,[i].concat(Ph(r)));return new Zh(o,i-o)}},{key:"normalizeNative",value:function(t){if(!Qh(this.root,t.startContainer)||!t.collapsed&&!Qh(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){var e=t.node,n=t.offset;while(!(e instanceof Text)&&e.childNodes.length>0)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;e=e.lastChild,n=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}},{key:"rangeToNative",value:function(t){var e=this,n=this.scroll.length(),r=function(t,r){t=Math.min(n-1,t);var i=e.scroll.leaf(t),o=Bh(i,2),s=o[0],a=o[1];return s?s.position(a,r):[null,-1]};return[].concat(Ph(r(t.index,!1)),Ph(r(t.index+t.length,!0)))}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Xh.info("setNativeRange",t,e,n,r),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});var s=this.getNativeRange()||{},a=s.native;if(null==a||i||t!==a.startContainer||e!==a.startOffset||n!==a.endContainer||r!==a.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(r=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);var l=document.createRange();l.setStart(t,e),l.setEnd(n,r),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_h.sources.API;if("string"===typeof e&&(n=e,e=!1),Xh.info("setRange",t),null!=t){var r=this.rangeToNative(t);this.setNativeRange.apply(this,Ph(r).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_h.sources.USER,e=this.lastRange,n=this.getRange(),r=Bh(n,2),i=r[0],o=r[1];if(this.lastRange=i,this.lastNative=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!Nl(e,this.lastRange)){var s;if(!this.composing&&null!=o&&o.native.collapsed&&o.start.node!==this.cursor.textNode){var a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}var l,c=[_h.events.SELECTION_CHANGE,Oa(this.lastRange),Oa(e),t];if((s=this.emitter).emit.apply(s,[_h.events.EDITOR_CHANGE].concat(c)),t!==_h.sources.SILENT)(l=this.emitter).emit.apply(l,c)}}}]),t}();function Qh(t,e){try{e.parentNode}catch(n){return!1}return t.contains(e)}var tu=Jh;function eu(t){return du(t)||nu(t)||cu(t)||lu()}function nu(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ru(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ru(Object(n),!0).forEach((function(e){ou(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ou(t,e,n){return e=gu(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function su(t){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(t)}function au(t,e){return du(t)||uu(t,e)||cu(t,e)||lu()}function lu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cu(t,e){if(t){if("string"===typeof t)return hu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hu(t,e):void 0}}function hu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uu(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function du(t){if(Array.isArray(t))return t}function fu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gu(r.key),r)}}function mu(t,e,n){return e&&pu(t.prototype,e),n&&pu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gu(t){var e=vu(t,"string");return"symbol"==su(e)?e:e+""}function vu(t,e){if("object"!=su(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var yu=/^[ -~]*$/,bu=function(){function t(e){fu(this,t),this.scroll=e,this.delta=this.getDelta()}return mu(t,[{key:"applyDelta",value:function(t){var e=this;this.scroll.update();var n=this.scroll.length();this.scroll.batchStart();var r=ku(t),i=new Vi.a,o=Ou(r.ops.slice());return o.reduce((function(t,r){var o=$i["Op"].length(r),s=r.attributes||{},a=!1,l=!1;if(null!=r.insert){if(i.retain(o),"string"===typeof r.insert){var c=r.insert;l=!c.endsWith("\n")&&(n<=t||!!e.scroll.descendant(Fc,t)[0]),e.scroll.insertAt(t,c);var h=e.scroll.line(t),u=au(h,2),d=u[0],f=u[1],p=ei({},qc(d));if(d instanceof Bc){var m=d.descendant(bi,f),g=au(m,1),v=g[0];v&&(p=ei(p,qc(v)))}s=$i["AttributeMap"].diff(p,s)||{}}else if("object"===su(r.insert)){var y=Object.keys(r.insert)[0];if(null==y)return t;var b=null!=e.scroll.query(y,ni.INLINE);if(b)(n<=t||e.scroll.descendant(Fc,t)[0])&&(l=!0);else if(t>0){var w=e.scroll.descendant(bi,t-1),x=au(w,2),C=x[0],E=x[1];if(C instanceof tc){var k=C.value();"\n"!==k[E]&&(a=!0)}else C instanceof Ii&&C.statics.scope===ni.INLINE_BLOT&&(a=!0)}if(e.scroll.insertAt(t,y,r.insert[y]),b){var N=e.scroll.descendant(bi,t),O=au(N,1),T=O[0];if(T){var M=ei({},qc(T));s=$i["AttributeMap"].diff(M,s)||{}}}}n+=o}else if(i.push(r),null!==r.retain&&"object"===su(r.retain)){var S=Object.keys(r.retain)[0];if(null==S)return t;e.scroll.updateEmbedAt(t,S,r.retain[S])}Object.keys(s).forEach((function(n){e.scroll.formatAt(t,o,n,s[n])}));var L=a?1:0,A=l?1:0;return n+=L+A,i.retain(L),i.delete(A),t+o+L+A}),0),i.reduce((function(t,n){return"number"===typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+$i["Op"].length(n)}),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new Vi.a).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach((function(i){n.scroll.lines(t,Math.max(e,1)).forEach((function(t){t.format(i,r[i])}))})),this.scroll.optimize();var i=(new Vi.a).retain(t).retain(e,Oa(r));return this.update(i)}},{key:"formatText",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(r).forEach((function(i){n.scroll.formatAt(t,e,i,r[i])}));var i=(new Vi.a).retain(t).retain(e,Oa(r));return this.update(i)}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new Vi.a)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===e?this.scroll.path(t).forEach((function(t){var e=au(t,1),i=e[0];i instanceof Bc?n.push(i):i instanceof bi&&r.push(i)})):(n=this.scroll.lines(t,e),r=this.scroll.descendants(bi,t,e));var i=[n,r].map((function(t){var e=t.shift();if(null==e)return{};var n=qc(e);while(Object.keys(n).length>0){var r=t.shift();if(null==r)return n;n=Cu(qc(r),n)}return n})),o=au(i,2),s=o[0],a=o[1];return iu(iu({},s),a)}},{key:"getHTML",value:function(t,e){var n=this.scroll.line(t),r=au(n,2),i=r[0],o=r[1];if(i){var s=i.length(),a=i.length()>=o+e;return!a||0===o&&e===s?xu(this.scroll,t,e,!0):xu(i,o,e,!0)}return""}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"===typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertContents",value:function(t,e){var n=ku(e),r=(new Vi.a).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(r)}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new Vi.a).retain(t).insert(ou({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(r).forEach((function(i){n.scroll.formatAt(t,e.length,i,r[i])})),this.update((new Vi.a).retain(t).insert(e,Oa(r)))}},{key:"isBlank",value:function(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;if((null===t||void 0===t?void 0:t.statics.blotName)!==Bc.blotName)return!1;var e=t;return!(e.children.length>1)&&e.children.head instanceof Fl}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),r=this.scroll.line(t+e),i=au(r,2),o=i[0],s=i[1],a=0,l=new Vi.a;null!=o&&(a=o.length()-s,l=o.delta().slice(s,s+a-1).insert("\n"));var c=this.getContents(t,e+a),h=c.diff((new Vi.a).insert(n).concat(l)),u=(new Vi.a).retain(t).concat(h);return this.applyDelta(u)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(yu)&&this.scroll.find(e[0].target)){var i=this.scroll.find(e[0].target),o=qc(i),s=i.offset(this.scroll),a=e[0].oldValue.replace(sh.CONTENTS,""),l=(new Vi.a).insert(a),c=(new Vi.a).insert(i.value()),h=n&&{oldRange:Nu(n.oldRange,-s),newRange:Nu(n.newRange,-s)},u=(new Vi.a).retain(s).concat(l.diff(c,h));t=u.reduce((function(t,e){return e.insert?t.insert(e.insert,o):t.push(e)}),new Vi.a),this.delta=r.compose(t)}else this.delta=this.getDelta(),t&&Nl(r.compose(t),this.delta)||(t=r.diff(this.delta,n));return t}}]),t}();function wu(t,e,n){if(0===t.length){var r=Eu(n.pop()),i=au(r,1),o=i[0];return e<=0?"</li></".concat(o,">"):"</li></".concat(o,">").concat(wu([],e-1,n))}var s=eu(t),a=s[0],l=a.child,c=a.offset,h=a.length,u=a.indent,d=a.type,f=s.slice(1),p=Eu(d),m=au(p,2),g=m[0],v=m[1];if(u>e)return n.push(d),u===e+1?"<".concat(g,"><li").concat(v,">").concat(xu(l,c,h)).concat(wu(f,u,n)):"<".concat(g,"><li>").concat(wu(t,e+1,n));var y=n[n.length-1];if(u===e&&d===y)return"</li><li".concat(v,">").concat(xu(l,c,h)).concat(wu(f,u,n));var b=Eu(n.pop()),w=au(b,1),x=w[0];return"</li></".concat(x,">").concat(wu(t,e-1,n))}function xu(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"===typeof t.html)return t.html(e,n);if(t instanceof tc)return ec(t.value().slice(e,e+n));if(t instanceof ki){if("list-container"===t.statics.blotName){var i=[];return t.children.forEachAt(e,n,(function(t,e,n){var r="formats"in t&&"function"===typeof t.formats?t.formats():{};i.push({child:t,offset:e,length:n,indent:r.indent||0,type:r.list})})),wu(i,-1,[])}var o=[];if(t.children.forEachAt(e,n,(function(t,e,n){o.push(xu(t,e,n))})),r||"list"===t.statics.blotName)return o.join("");var s=t.domNode,a=s.outerHTML,l=s.innerHTML,c=a.split(">".concat(l,"<")),h=au(c,2),u=h[0],d=h[1];return"<table"===u?'<table style="border: 1px solid #000;">'.concat(o.join(""),"<").concat(d):"".concat(u,">").concat(o.join(""),"<").concat(d)}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Cu(t,e){return Object.keys(e).reduce((function(n,r){if(null==t[r])return n;var i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n}),{})}function Eu(t){var e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function ku(t){return t.reduce((function(t,e){if("string"===typeof e.insert){var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new Vi.a)}function Nu(t,e){var n=t.index,r=t.length;return new Zh(n+e,r)}function Ou(t){var e=[];return t.forEach((function(t){if("string"===typeof t.insert){var n=t.insert.split("\n");n.forEach((function(n,r){r&&e.push({insert:"\n",attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})}))}else e.push(t)})),e}var Tu=bu;function Mu(t){return Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(t)}function Su(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_u(r.key),r)}}function Lu(t,e,n){return e&&Su(t.prototype,e),n&&Su(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Au(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Du(t,e,n){return e=_u(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _u(t){var e=Ru(t,"string");return"symbol"==Mu(e)?e:e+""}function Ru(t,e){if("object"!=Mu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Pu=Lu((function t(e){Au(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=e,this.options=n}));Du(Pu,"DEFAULTS",{});var Iu=Pu;function ju(t){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(t)}function zu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hu(r.key),r)}}function Fu(t,e,n){return e&&Bu(t.prototype,e),n&&Bu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hu(t){var e=qu(t,"string");return"symbol"==ju(e)?e:e+""}function qu(t,e){if("object"!=ju(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Wu(){return Wu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Uu(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Wu.apply(this,arguments)}function Uu(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Zu(t),null===t)break;return t}function $u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vu(t,e)}function Vu(t,e){return Vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vu(t,e)}function Gu(t){var e=Xu();return function(){var n,r=Zu(t);if(e){var i=Zu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yu(this,n)}}function Yu(t,e){if(e&&("object"===ju(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ku(t)}function Ku(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xu=function(){return!!t})()}function Zu(t){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zu(t)}var Ju="\ufeff",Qu=function(t){$u(n,t);var e=Gu(n);function n(t,r){var i;return zu(this,n),i=e.call(this,t,r),i.contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable","false"),Array.from(i.domNode.childNodes).forEach((function(t){i.contentNode.appendChild(t)})),i.leftGuard=document.createTextNode(Ju),i.rightGuard=document.createTextNode(Ju),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return Fu(n,[{key:"index",value:function(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:Wu(Zu(n.prototype),"index",this).call(this,t,e)}},{key:"restore",value:function(t){var e,n=null,r=t.data.split(Ju).join("");if(t===this.leftGuard)if(this.prev instanceof tc){var i=this.prev.length();this.prev.insertAt(i,r),n={startNode:this.prev.domNode,startOffset:i+r.length}}else e=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:r.length};else t===this.rightGuard&&(this.next instanceof tc?(this.next.insertAt(0,r),n={startNode:this.next.domNode,startOffset:r.length}):(e=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:r.length}));return t.data=Ju,n}},{key:"update",value:function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var r=n.restore(t.target);r&&(e.range=r)}}))}}]),n}(Ii),td=Qu;function ed(t){return ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(t)}function nd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sd(r.key),r)}}function id(t,e,n){return e&&rd(t.prototype,e),n&&rd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function od(t,e,n){return e=sd(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sd(t){var e=ad(t,"string");return"symbol"==ed(e)?e:e+""}function ad(t,e){if("object"!=ed(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ed(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ld=function(){function t(e,n){nd(this,t),od(this,"isComposing",!1),this.scroll=e,this.emitter=n,this.setupListeners()}return id(t,[{key:"setupListeners",value:function(){var t=this;this.scroll.domNode.addEventListener("compositionstart",(function(e){t.isComposing||t.handleCompositionStart(e)})),this.scroll.domNode.addEventListener("compositionend",(function(e){t.isComposing&&queueMicrotask((function(){t.handleCompositionEnd(e)}))}))}},{key:"handleCompositionStart",value:function(t){var e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof td||(this.emitter.emit(_h.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(_h.events.COMPOSITION_START,t),this.isComposing=!0)}},{key:"handleCompositionEnd",value:function(t){this.emitter.emit(_h.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(_h.events.COMPOSITION_END,t),this.isComposing=!1}}]),t}(),cd=ld;function hd(t){return hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(t)}function ud(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,md(r.key),r)}}function fd(t,e,n){return e&&dd(t.prototype,e),n&&dd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pd(t,e,n){return e=md(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function md(t){var e=gd(t,"string");return"symbol"==hd(e)?e:e+""}function gd(t,e){if("object"!=hd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var vd=function(){function t(e,n){ud(this,t),pd(this,"modules",{}),this.quill=e,this.options=n}return fd(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/".concat(t));return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();pd(vd,"DEFAULTS",{modules:{}}),pd(vd,"themes",{default:vd});var yd=vd,bd=function(t){return t.parentElement||t.getRootNode().host||null},wd=function(t){var e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},xd=function(t){var e=parseInt(t,10);return Number.isNaN(e)?0:e},Cd=function(t,e,n,r,i,o){return t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+o:0},Ed=function(t,e){var n=t.ownerDocument,r=e,i=t;while(i){var o,s,a,l,c=i===n.body,h=c?{top:0,right:null!==(o=null===(s=window.visualViewport)||void 0===s?void 0:s.width)&&void 0!==o?o:n.documentElement.clientWidth,bottom:null!==(a=null===(l=window.visualViewport)||void 0===l?void 0:l.height)&&void 0!==a?a:n.documentElement.clientHeight,left:0}:wd(i),u=getComputedStyle(i),d=Cd(r.left,r.right,h.left,h.right,xd(u.scrollPaddingLeft),xd(u.scrollPaddingRight)),f=Cd(r.top,r.bottom,h.top,h.bottom,xd(u.scrollPaddingTop),xd(u.scrollPaddingBottom));if(d||f)if(c){var p;null===(p=n.defaultView)||void 0===p||p.scrollBy(d,f)}else{var m=i,g=m.scrollLeft,v=m.scrollTop;f&&(i.scrollTop+=f),d&&(i.scrollLeft+=d);var y=i.scrollLeft-g,b=i.scrollTop-v;r={left:r.left-y,top:r.top-b,right:r.right-y,bottom:r.bottom-b}}i=c||"fixed"===u.position?null:bd(i)}},kd=Ed,Nd=100,Od=["block","break","cursor","inline","scroll","text"],Td=function(t,e,n){var r=new si;return Od.forEach((function(t){var n=e.query(t);n&&r.register(n)})),t.forEach((function(t){var i=e.query(t);i||n.error('Cannot register "'.concat(t,'" specified in "formats" config. Are you sure it was registered?'));var o=0;while(i){var s;if(r.register(i),i="blotName"in i&&null!==(s=i.requiredContainer)&&void 0!==s?s:null,o+=1,o>Nd){n.error('Cycle detected in registering blot requiredContainer: "'.concat(t,'"'));break}}})),r},Md=Td,Sd=["modules"],Ld=["modules"];function Ad(t){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(t)}function Dd(t,e){if(null==t)return{};var n,r,i=_d(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _d(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Rd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rd(Object(n),!0).forEach((function(e){$d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Id(t,e){return Hd(t)||Fd(t,e)||zd(t,e)||jd()}function jd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zd(t,e){if(t){if("string"===typeof t)return Bd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bd(t,e):void 0}}function Bd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fd(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Hd(t){if(Array.isArray(t))return t}function qd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vd(r.key),r)}}function Ud(t,e,n){return e&&Wd(t.prototype,e),n&&Wd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $d(t,e,n){return e=Vd(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vd(t){var e=Gd(t,"string");return"symbol"==Ad(e)?e:e+""}function Gd(t,e){if("object"!=Ad(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Yd=fh("quill"),Kd=new si;ki.uiClass="ql-ui";var Xd=function(){function t(e){var n=this;qd(this,t);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=tf(e,r),this.container=this.options.container,null!=this.container){this.options.debug&&t.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",lh.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new _h;var o=Hi.blotName,s=this.options.registry.query(o);if(!s||!("blotName"in s))throw new Error('Cannot initialize Quill without "'.concat(o,'" blot'));if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Tu(this.scroll),this.selection=new tu(this.scroll,this.emitter),this.composition=new cd(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(_h.events.EDITOR_CHANGE,(function(t){t===_h.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(_h.events.SCROLL_UPDATE,(function(t,e){var r=n.selection.lastRange,i=n.selection.getRange(),o=Id(i,1),s=o[0],a=r&&s?{oldRange:r,newRange:s}:void 0;ef.call(n,(function(){return n.editor.update(null,e,a)}),t)})),this.emitter.on(_h.events.SCROLL_EMBED_UPDATE,(function(e,r){var i=n.selection.lastRange,o=n.selection.getRange(),s=Id(o,1),a=s[0],l=i&&a?{oldRange:i,newRange:a}:void 0;ef.call(n,(function(){var t=(new Vi.a).retain(e.offset(n)).retain($d({},e.statics.blotName,r));return n.editor.update(t,[],l)}),t.sources.USER)})),i){var a=this.clipboard.convert({html:"".concat(i,"<p><br></p>"),text:"\n"});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}else Yd.error("Invalid Quill container",e)}return Ud(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof t){var n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var r=this,i=nf(t,e,n),o=Id(i,4);return t=o[0],e=o[1],n=o[3],ef.call(this,(function(){return r.editor.deleteText(t,e)}),n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"editReadOnly",value:function(t){this.allowReadOnlyEdits=!0;var e=t();return this.allowReadOnlyEdits=!1,e}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}},{key:"format",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_h.sources.API;return ef.call(this,(function(){var r=n.getSelection(!0),i=new Vi.a;if(null==r)return i;if(n.scroll.query(t,ni.BLOCK))i=n.editor.formatLine(r.index,r.length,$d({},t,e));else{if(0===r.length)return n.selection.format(t,e),i;i=n.editor.formatText(r.index,r.length,$d({},t,e))}return n.setSelection(r,_h.sources.SILENT),i}),r)}},{key:"formatLine",value:function(t,e,n,r,i){var o,s=this,a=nf(t,e,n,r,i),l=Id(a,4);return t=l[0],e=l[1],o=l[2],i=l[3],ef.call(this,(function(){return s.editor.formatLine(t,e,o)}),i,t,0)}},{key:"formatText",value:function(t,e,n,r,i){var o,s=this,a=nf(t,e,n,r,i),l=Id(a,4);return t=l[0],e=l[1],o=l[2],i=l[3],ef.call(this,(function(){return s.editor.formatText(t,e,o)}),i,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;if(n="number"===typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!n)return null;var r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=nf(t,e),r=Id(n,2);return t=r[0],e=r[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getSemanticHTML",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;"number"===typeof e&&(n=null!==(t=n)&&void 0!==t?t:this.getLength()-e);var r=nf(e,n),i=Id(r,2);return e=i[0],n=i[1],this.editor.getHTML(e,n)}},{key:"getText",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;"number"===typeof e&&(n=null!==(t=n)&&void 0!==t?t:this.getLength()-e);var r=nf(e,n),i=Id(r,2);return e=i[0],n=i[1],this.editor.getText(e,n)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return ef.call(this,(function(){return i.editor.insertEmbed(e,n,r)}),o,e)}},{key:"insertText",value:function(t,e,n,r,i){var o,s=this,a=nf(t,0,n,r,i),l=Id(a,4);return t=l[0],o=l[2],i=l[3],ef.call(this,(function(){return s.editor.insertText(t,e,o)}),i,t,e.length)}},{key:"isEnabled",value:function(){return this.scroll.isEnabled()}},{key:"off",value:function(){var t;return(t=this.emitter).off.apply(t,arguments)}},{key:"on",value:function(){var t;return(t=this.emitter).on.apply(t,arguments)}},{key:"once",value:function(){var t;return(t=this.emitter).once.apply(t,arguments)}},{key:"removeFormat",value:function(t,e,n){var r=this,i=nf(t,e,n),o=Id(i,4);return t=o[0],e=o[1],n=o[3],ef.call(this,(function(){return r.editor.removeFormat(t,e)}),n,t)}},{key:"scrollRectIntoView",value:function(t){kd(this.root,t)}},{key:"scrollIntoView",value:function(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}},{key:"scrollSelectionIntoView",value:function(){var t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_h.sources.API;return ef.call(this,(function(){t=new Vi.a(t);var n=e.getLength(),r=e.editor.deleteText(0,n),i=e.editor.insertContents(0,t),o=e.editor.deleteText(e.getLength()-1,1);return r.compose(i).compose(o)}),n)}},{key:"setSelection",value:function(e,n,r){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var i=nf(e,n,r),o=Id(i,4);e=o[0],n=o[1],r=o[3],this.selection.setRange(new Zh(Math.max(0,e),n),r),r!==_h.sources.SILENT&&this.scrollSelectionIntoView()}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_h.sources.API,n=(new Vi.a).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_h.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_h.sources.API;return ef.call(this,(function(){return t=new Vi.a(t),e.editor.applyDelta(t)}),n,!0)}}],[{key:"debug",value:function(t){!0===t&&(t="log"),fh.level(t)}},{key:"find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return lh.get(t)||Kd.find(t,e)}},{key:"import",value:function(t){return null==this.imports[t]&&Yd.error("Cannot import ".concat(t,". Are you sure it was registered?")),this.imports[t]}},{key:"register",value:function(){var t=this;if("string"!==typeof(arguments.length<=0?void 0:arguments[0])){var e=arguments.length<=0?void 0:arguments[0],n=!!(arguments.length<=1?void 0:arguments[1]),r="attrName"in e?e.attrName:e.blotName;"string"===typeof r?this.register("formats/".concat(r),e,n):Object.keys(e).forEach((function(r){t.register(r,e[r],n)}))}else{var i=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],s=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[i]||s||Yd.warn("Overwriting ".concat(i," with"),o),this.imports[i]=o,(i.startsWith("blots/")||i.startsWith("formats/"))&&o&&"boolean"!==typeof o&&"abstract"!==o.blotName&&Kd.register(o),"function"===typeof o.register&&o.register(Kd)}}}]),t}();function Zd(t){return"string"===typeof t?document.querySelector(t):t}function Jd(t){return Object.entries(null!==t&&void 0!==t?t:{}).reduce((function(t,e){var n=Id(e,2),r=n[0],i=n[1];return Pd(Pd({},t),{},$d({},r,!0===i?{}:i))}),{})}function Qd(t){return Object.fromEntries(Object.entries(t).filter((function(t){return void 0!==t[1]})))}function tf(t,e){var n=Zd(t);if(!n)throw new Error("Invalid Quill container");var r=!e.theme||e.theme===Xd.DEFAULTS.theme,i=r?yd:Xd.import("themes/".concat(e.theme));if(!i)throw new Error("Invalid theme ".concat(e.theme,". Did you register it?"));var o=Xd.DEFAULTS,s=o.modules,a=Dd(o,Sd),l=i.DEFAULTS,c=l.modules,h=Dd(l,Ld),u=Jd(e.modules);null!=u&&u.toolbar&&u.toolbar.constructor!==Object&&(u=Pd(Pd({},u),{},{toolbar:{container:u.toolbar}}));var d=ei({},Jd(s),Jd(c),u),f=Pd(Pd(Pd({},a),Qd(h)),Qd(e)),p=e.registry;return p?e.formats&&Yd.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?Md(e.formats,f.registry,Yd):f.registry,Pd(Pd({},f),{},{registry:p,container:n,theme:i,modules:Object.entries(d).reduce((function(t,e){var n=Id(e,2),r=n[0],i=n[1];if(!i)return t;var o=Xd.import("modules/".concat(r));return null==o?(Yd.error("Cannot load ".concat(r," module. Are you sure you registered it?")),t):Pd(Pd({},t),{},$d({},r,ei({},o.DEFAULTS||{},i)))}),{}),bounds:Zd(f.bounds)})}function ef(t,e,n,r){if(!this.isEnabled()&&e===_h.sources.USER&&!this.allowReadOnlyEdits)return new Vi.a;var i=null==n?null:this.getSelection(),o=this.editor.delta,s=t();if(null!=i&&(!0===n&&(n=i.index),null==r?i=rf(i,s,e):0!==r&&(i=rf(i,n,r,e)),this.setSelection(i,_h.sources.SILENT)),s.length()>0){var a,l,c=[_h.events.TEXT_CHANGE,s,o,e];if((a=this.emitter).emit.apply(a,[_h.events.EDITOR_CHANGE].concat(c)),e!==_h.sources.SILENT)(l=this.emitter).emit.apply(l,c)}return s}function nf(t,e,n,r,i){var o={};return"number"===typeof t.index&&"number"===typeof t.length?"number"!==typeof e?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!==typeof e&&(i=r,r=n,n=e,e=0),"object"===Ad(n)?(o=n,i=r):"string"===typeof n&&(null!=r?o[n]=r:i=n),i=i||_h.sources.API,[t,e,o,i]}function rf(t,e,n,r){var i,o,s="number"===typeof n?n:0;if(null==t)return null;if(e&&"function"===typeof e.transformPosition){var a=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,r!==_h.sources.USER)})),l=Id(a,2);i=l[0],o=l[1]}else{var c=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&r===_h.sources.USER?t:s>=0?t+s:Math.max(e,t+s)})),h=Id(c,2);i=h[0],o=h[1]}return new Zh(i,o-i)}function of(t){return of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(t)}function sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lf(r.key),r)}}function af(t,e,n){return e&&sf(t.prototype,e),n&&sf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lf(t){var e=cf(t,"string");return"symbol"==of(e)?e:e+""}function cf(t,e){if("object"!=of(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=of(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function hf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uf(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&df(t,e)}function df(t,e){return df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},df(t,e)}function ff(t){var e=gf();return function(){var n,r=vf(t);if(e){var i=vf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pf(this,n)}}function pf(t,e){if(e&&("object"===of(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mf(t)}function mf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gf=function(){return!!t})()}function vf(t){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vf(t)}$d(Xd,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Kd,theme:"default"}),$d(Xd,"events",_h.events),$d(Xd,"sources",_h.sources),$d(Xd,"version","2.0.2"),$d(Xd,"imports",{delta:Vi.a,parchment:r,"core/module":Iu,"core/theme":yd});var yf=function(t){uf(n,t);var e=ff(n);function n(){return hf(this,n),e.apply(this,arguments)}return af(n)}(Ri),bf=yf;function wf(t){return wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(t)}function xf(t,e){return Of(t)||Nf(t,e)||Ef(t,e)||Cf()}function Cf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ef(t,e){if(t){if("string"===typeof t)return kf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kf(t,e):void 0}}function kf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nf(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Of(t){if(Array.isArray(t))return t}function Tf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ff(r.key),r)}}function Sf(t,e,n){return e&&Mf(t.prototype,e),n&&Mf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lf(){return Lf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Af(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Lf.apply(this,arguments)}function Af(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=zf(t),null===t)break;return t}function Df(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_f(t,e)}function _f(t,e){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_f(t,e)}function Rf(t){var e=jf();return function(){var n,r=zf(t);if(e){var i=zf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pf(this,n)}}function Pf(t,e){if(e&&("object"===wf(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return If(t)}function If(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jf=function(){return!!t})()}function zf(t){return zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zf(t)}function Bf(t,e,n){return e=Ff(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ff(t){var e=Hf(t,"string");return"symbol"==wf(e)?e:e+""}function Hf(t,e){if("object"!=wf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function qf(t){return t instanceof Bc||t instanceof Fc}function Wf(t){return"function"===typeof t.updateContent}var Uf=function(t){Df(n,t);var e=Rf(n);function n(t,r,i){var o;Tf(this,n);var s=i.emitter;return o=e.call(this,t,r),o.emitter=s,o.batch=!1,o.optimize(),o.enable(),o.domNode.addEventListener("dragstart",(function(t){return o.handleDragStart(t)})),o}return Sf(n,[{key:"batchStart",value:function(){Array.isArray(this.batch)||(this.batch=[])}},{key:"batchEnd",value:function(){if(this.batch){var t=this.batch;this.batch=!1,this.update(t)}}},{key:"emitMount",value:function(t){this.emitter.emit(_h.events.SCROLL_BLOT_MOUNT,t)}},{key:"emitUnmount",value:function(t){this.emitter.emit(_h.events.SCROLL_BLOT_UNMOUNT,t)}},{key:"emitEmbedUpdate",value:function(t,e){this.emitter.emit(_h.events.SCROLL_EMBED_UPDATE,t,e)}},{key:"deleteAt",value:function(t,e){var r=this.line(t),i=xf(r,2),o=i[0],s=i[1],a=this.line(t+e),l=xf(a,1),c=l[0];if(Lf(zf(n.prototype),"deleteAt",this).call(this,t,e),null!=c&&o!==c&&s>0){if(o instanceof Fc||c instanceof Fc)return void this.optimize();var h=c.children.head instanceof Fl?null:c.children.head;o.moveChildren(c,h),o.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}},{key:"formatAt",value:function(t,e,r,i){Lf(zf(n.prototype),"formatAt",this).call(this,t,e,r,i),this.optimize()}},{key:"insertAt",value:function(t,e,r){if(t>=this.length())if(null==r||null==this.scroll.query(e,ni.BLOCK)){var i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),null==r&&e.endsWith("\n")?i.insertAt(0,e.slice(0,-1),r):i.insertAt(0,e,r)}else{var o=this.scroll.create(e,r);this.appendChild(o)}else Lf(zf(n.prototype),"insertAt",this).call(this,t,e,r);this.optimize()}},{key:"insertBefore",value:function(t,e){if(t.statics.scope===ni.INLINE_BLOT){var r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(t),Lf(zf(n.prototype),"insertBefore",this).call(this,r,e)}else Lf(zf(n.prototype),"insertBefore",this).call(this,t,e)}},{key:"insertContents",value:function(t,e){var n=this,r=this.deltaToRenderBlocks(e.concat((new Vi.a).insert("\n"))),i=r.pop();if(null!=i){this.batchStart();var o=r.shift();if(o){var s="block"===o.type&&(0===o.delta.length()||!this.descendant(Fc,t)[0]&&t<this.length()),a="block"===o.type?o.delta:(new Vi.a).insert(Bf({},o.key,o.value));$f(this,t,a);var l="block"===o.type?1:0,c=t+a.length()+l;s&&this.insertAt(c-1,"\n");var h=qc(this.line(t)[0]),u=$i["AttributeMap"].diff(h,o.attributes)||{};Object.keys(u).forEach((function(t){n.formatAt(c-1,1,t,u[t])})),t=c}var d=this.children.find(t),f=xf(d,2),p=f[0],m=f[1];if(r.length&&(p&&(p=p.split(m),m=0),r.forEach((function(t){if("block"===t.type){var e=n.createBlock(t.attributes,p||void 0);$f(e,0,t.delta)}else{var r=n.create(t.key,t.value);n.insertBefore(r,p||void 0),Object.keys(t.attributes).forEach((function(e){r.format(e,t.attributes[e])}))}}))),"block"===i.type&&i.delta.length()){var g=p?p.offset(p.scroll)+m:this.length();$f(this,g,i.delta)}this.batchEnd(),this.optimize()}}},{key:"isEnabled",value:function(){return"true"===this.domNode.getAttribute("contenteditable")}},{key:"leaf",value:function(t){var e=this.path(t).pop();if(!e)return[null,-1];var n=xf(e,2),r=n[0],i=n[1];return r instanceof bi?[r,i]:[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(qf,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function t(e,n,r){var i=[],o=r;return e.children.forEachAt(n,r,(function(e,n,r){qf(e)?i.push(e):e instanceof Ri&&(i=i.concat(t(e,n,o))),o-=r})),i};return n(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(Lf(zf(n.prototype),"optimize",this).call(this,t,e),t.length>0&&this.emitter.emit(_h.events.SCROLL_OPTIMIZE,t,e))}},{key:"path",value:function(t){return Lf(zf(n.prototype),"path",this).call(this,t).slice(1)}},{key:"remove",value:function(){}},{key:"update",value:function(t){var e=this;if(this.batch)Array.isArray(t)&&(this.batch=this.batch.concat(t));else{var r=_h.sources.USER;"string"===typeof t&&(r=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter((function(t){var n=t.target,r=e.find(n,!0);return r&&!Wf(r)})),t.length>0&&this.emitter.emit(_h.events.SCROLL_BEFORE_UPDATE,r,t),Lf(zf(n.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(_h.events.SCROLL_UPDATE,r,t)}}},{key:"updateEmbedAt",value:function(t,e,n){var r=this.descendant((function(t){return t instanceof Fc}),t),i=xf(r,1),o=i[0];o&&o.statics.blotName===e&&Wf(o)&&o.updateContent(n)}},{key:"handleDragStart",value:function(t){t.preventDefault()}},{key:"deltaToRenderBlocks",value:function(t){var e=this,n=[],r=new Vi.a;return t.forEach((function(t){var i=null===t||void 0===t?void 0:t.insert;if(i)if("string"===typeof i){var o=i.split("\n");o.slice(0,-1).forEach((function(e){var i;r.insert(e,t.attributes),n.push({type:"block",delta:r,attributes:null!==(i=t.attributes)&&void 0!==i?i:{}}),r=new Vi.a}));var s=o[o.length-1];s&&r.insert(s,t.attributes)}else{var a,l=Object.keys(i)[0];if(!l)return;if(e.query(l,ni.INLINE))r.push(t);else r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new Vi.a,n.push({type:"blockEmbed",key:l,value:i[l],attributes:null!==(a=t.attributes)&&void 0!==a?a:{}})}})),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}},{key:"createBlock",value:function(t,e){var n,r=this,i={};Object.entries(t).forEach((function(t){var e=xf(t,2),o=e[0],s=e[1],a=null!=r.query(o,ni.BLOCK&ni.BLOT);a?n=o:i[o]=s}));var o=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(o,e||void 0);var s=o.length();return Object.entries(i).forEach((function(t){var e=xf(t,2),n=e[0],r=e[1];o.formatAt(0,s,n,r)})),o}}]),n}(Hi);function $f(t,e,n){n.reduce((function(e,n){var r=$i["Op"].length(n),i=n.attributes||{};if(null!=n.insert)if("string"===typeof n.insert){var o=n.insert;t.insertAt(e,o);var s=t.descendant(bi,e),a=xf(s,1),l=a[0],c=qc(l);i=$i["AttributeMap"].diff(c,i)||{}}else if("object"===wf(n.insert)){var h=Object.keys(n.insert)[0];if(null==h)return e;t.insertAt(e,h,n.insert[h]);var u=null!=t.scroll.query(h,ni.INLINE);if(u){var d=t.descendant(bi,e),f=xf(d,1),p=f[0],m=qc(p);i=$i["AttributeMap"].diff(m,i)||{}}}return Object.keys(i).forEach((function(n){t.formatAt(e,r,n,i[n])})),e+r}),e)}Bf(Uf,"blotName","scroll"),Bf(Uf,"className","ql-editor"),Bf(Uf,"tagName","DIV"),Bf(Uf,"defaultChild",Bc),Bf(Uf,"allowedChildren",[Bc,Fc,bf]);var Vf=Uf,Gf={scope:ni.BLOCK,whitelist:["right","center","justify"]},Yf=new ri("align","align",Gf),Kf=new ci("align","ql-align",Gf),Xf=new di("align","text-align",Gf);function Zf(t){return Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(t)}function Jf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ep(r.key),r)}}function tp(t,e,n){return e&&Qf(t.prototype,e),n&&Qf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ep(t){var e=np(t,"string");return"symbol"==Zf(e)?e:e+""}function np(t,e){if("object"!=Zf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function rp(){return rp="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=ip(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},rp.apply(this,arguments)}function ip(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=up(t),null===t)break;return t}function op(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sp(t,e)}function sp(t,e){return sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sp(t,e)}function ap(t){var e=hp();return function(){var n,r=up(t);if(e){var i=up(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lp(this,n)}}function lp(t,e){if(e&&("object"===Zf(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cp(t)}function cp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hp=function(){return!!t})()}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},up(t)}var dp=function(t){op(n,t);var e=ap(n);function n(){return Jf(this,n),e.apply(this,arguments)}return tp(n,[{key:"value",value:function(t){var e=rp(up(n.prototype),"value",this).call(this,t);if(!e.startsWith("rgb("))return e;e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");var r=e.split(",").map((function(t){return"00".concat(parseInt(t,10).toString(16)).slice(-2)})).join("");return"#".concat(r)}}]),n}(di),fp=new ci("color","ql-color",{scope:ni.INLINE}),pp=new dp("color","color",{scope:ni.INLINE}),mp=new ci("background","ql-bg",{scope:ni.INLINE}),gp=new dp("background","background-color",{scope:ni.INLINE});function vp(t){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(t)}function yp(t,e,n){return e=Cp(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cp(r.key),r)}}function xp(t,e,n){return e&&wp(t.prototype,e),n&&wp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cp(t){var e=Ep(t,"string");return"symbol"==vp(e)?e:e+""}function Ep(t,e){if("object"!=vp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function kp(){return kp="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Np(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},kp.apply(this,arguments)}function Np(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Dp(t),null===t)break;return t}function Op(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tp(t,e)}function Tp(t,e){return Tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tp(t,e)}function Mp(t){var e=Ap();return function(){var n,r=Dp(t);if(e){var i=Dp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sp(this,n)}}function Sp(t,e){if(e&&("object"===vp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lp(t)}function Lp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ap(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ap=function(){return!!t})()}function Dp(t){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dp(t)}var _p=function(t){Op(n,t);var e=Mp(n);function n(){return bp(this,n),e.apply(this,arguments)}return xp(n,[{key:"code",value:function(t,e){return this.children.map((function(t){return t.length()<=1?"":t.domNode.innerText})).join("\n").slice(t,t+e)}},{key:"html",value:function(t,e){return"<pre>\n".concat(ec(this.code(t,e)),"\n</pre>")}}],[{key:"create",value:function(t){var e=kp(Dp(n),"create",this).call(this,t);return e.setAttribute("spellcheck","false"),e}}]),n}(bf),Rp=function(t){Op(n,t);var e=Mp(n);function n(){return bp(this,n),e.apply(this,arguments)}return xp(n,null,[{key:"register",value:function(){Xd.register(_p)}}]),n}(Bc);yp(Rp,"TAB","  ");var Pp=function(t){Op(n,t);var e=Mp(n);function n(){return bp(this,n),e.apply(this,arguments)}return xp(n)}(bc);Pp.blotName="code",Pp.tagName="CODE",Rp.blotName="code-block",Rp.className="ql-code-block",Rp.tagName="DIV",_p.blotName="code-block-container",_p.className="ql-code-block-container",_p.tagName="DIV",_p.allowedChildren=[Rp],Rp.allowedChildren=[tc,Fl,sh],Rp.requiredContainer=_p;var Ip={scope:ni.BLOCK,whitelist:["rtl"]},jp=new ri("direction","dir",Ip),zp=new ci("direction","ql-direction",Ip),Bp=new di("direction","direction",Ip);function Fp(t){return Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(t)}function Hp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Up(r.key),r)}}function Wp(t,e,n){return e&&qp(t.prototype,e),n&&qp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Up(t){var e=$p(t,"string");return"symbol"==Fp(e)?e:e+""}function $p(t,e){if("object"!=Fp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Vp(){return Vp="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Gp(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Vp.apply(this,arguments)}function Gp(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=tm(t),null===t)break;return t}function Yp(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kp(t,e)}function Kp(t,e){return Kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kp(t,e)}function Xp(t){var e=Qp();return function(){var n,r=tm(t);if(e){var i=tm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zp(this,n)}}function Zp(t,e){if(e&&("object"===Fp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jp(t)}function Jp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qp=function(){return!!t})()}function tm(t){return tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tm(t)}var em={scope:ni.INLINE,whitelist:["serif","monospace"]},nm=new ci("font","ql-font",em),rm=function(t){Yp(n,t);var e=Xp(n);function n(){return Hp(this,n),e.apply(this,arguments)}return Wp(n,[{key:"value",value:function(t){return Vp(tm(n.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),n}(di),im=new rm("font","font-family",em),om=new ci("size","ql-size",{scope:ni.INLINE,whitelist:["small","large","huge"]}),sm=new di("size","font-size",{scope:ni.INLINE,whitelist:["10px","18px","32px"]});function am(t){return am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(t)}function lm(t,e){return fm(t)||dm(t,e)||hm(t,e)||cm()}function cm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hm(t,e){if(t){if("string"===typeof t)return um(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?um(t,e):void 0}}function um(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dm(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function fm(t){if(Array.isArray(t))return t}function pm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pm(Object(n),!0).forEach((function(e){gm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gm(t,e,n){return e=wm(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ym(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wm(r.key),r)}}function bm(t,e,n){return e&&ym(t.prototype,e),n&&ym(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wm(t){var e=xm(t,"string");return"symbol"==am(e)?e:e+""}function xm(t,e){if("object"!=am(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=am(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Cm(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Em(t,e)}function Em(t,e){return Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Em(t,e)}function km(t){var e=Tm();return function(){var n,r=Mm(t);if(e){var i=Mm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nm(this,n)}}function Nm(t,e){if(e&&("object"===am(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Om(t)}function Om(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tm=function(){return!!t})()}function Mm(t){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mm(t)}var Sm=fh("quill:keyboard"),Lm=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Am=function(t){Cm(n,t);var e=km(n);function n(t,r){var i;return vm(this,n),i=e.call(this,t,r),i.bindings={},Object.keys(i.options.bindings).forEach((function(t){i.options.bindings[t]&&i.addBinding(i.options.bindings[t])})),i.addBinding({key:"Enter",shiftKey:null},i.handleEnter),i.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:"Backspace"},{collapsed:!0},i.handleBackspace),i.addBinding({key:"Delete"},{collapsed:!0},i.handleDelete)):(i.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},i.handleBackspace),i.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},i.handleDelete)),i.addBinding({key:"Backspace"},{collapsed:!1},i.handleDeleteRange),i.addBinding({key:"Delete"},{collapsed:!1},i.handleDeleteRange),i.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},i.handleBackspace),i.listen(),i}return bm(n,[{key:"addBinding",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=jm(t);if(null!=i){"function"===typeof n&&(n={handler:n}),"function"===typeof r&&(r={handler:r});var o=Array.isArray(i.key)?i.key:[i.key];o.forEach((function(t){var o=mm(mm(mm({},i),{},{key:t},n),r);e.bindings[o.key]=e.bindings[o.key]||[],e.bindings[o.key].push(o)}))}else Sm.warn("Attempted to add invalid keyboard binding",i)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){if(!e.defaultPrevented&&!e.isComposing){var r=229===e.keyCode&&("Enter"===e.key||"Backspace"===e.key);if(!r){var i=(t.bindings[e.key]||[]).concat(t.bindings[e.which]||[]),o=i.filter((function(t){return n.match(e,t)}));if(0!==o.length){var s=Xd.find(e.target,!0);if(!s||s.scroll===t.quill.scroll){var a=t.quill.getSelection();if(null!=a&&t.quill.hasFocus()){var l=t.quill.getLine(a.index),c=lm(l,2),h=c[0],u=c[1],d=t.quill.getLeaf(a.index),f=lm(d,2),p=f[0],m=f[1],g=0===a.length?[p,m]:t.quill.getLeaf(a.index+a.length),v=lm(g,2),y=v[0],b=v[1],w=p instanceof Ui?p.value().slice(0,m):"",x=y instanceof Ui?y.value().slice(b):"",C={collapsed:0===a.length,empty:0===a.length&&h.length()<=1,format:t.quill.getFormat(a),line:h,offset:u,prefix:w,suffix:x,event:e},E=o.some((function(e){if(null!=e.collapsed&&e.collapsed!==C.collapsed)return!1;if(null!=e.empty&&e.empty!==C.empty)return!1;if(null!=e.offset&&e.offset!==C.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==C.format[t]})))return!1}else if("object"===am(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=C.format[t]:!1===e.format[t]?null==C.format[t]:Nl(e.format[t],C.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(C.prefix))&&(!(null!=e.suffix&&!e.suffix.test(C.suffix))&&!0!==e.handler.call(t,a,C,e))}));E&&e.preventDefault()}}}}}}))}},{key:"handleBackspace",value:function(t,e){var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(!(0===t.index||this.quill.getLength()<=1)){var r={},i=this.quill.getLine(t.index),o=lm(i,1),s=o[0],a=(new Vi.a).retain(t.index-n).delete(n);if(0===e.offset){var l=this.quill.getLine(t.index-1),c=lm(l,1),h=c[0];if(h){var u="block"===h.statics.blotName&&h.length()<=1;if(!u){var d=s.formats(),f=this.quill.getFormat(t.index-1,1);if(r=$i["AttributeMap"].diff(d,f)||{},Object.keys(r).length>0){var p=(new Vi.a).retain(t.index+s.length()-2).retain(1,r);a=a.compose(p)}}}}this.quill.updateContents(a,Xd.sources.USER),this.quill.focus()}}},{key:"handleDelete",value:function(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var r={},i=this.quill.getLine(t.index),o=lm(i,1),s=o[0],a=(new Vi.a).retain(t.index).delete(n);if(e.offset>=s.length()-1){var l=this.quill.getLine(t.index+1),c=lm(l,1),h=c[0];if(h){var u=s.formats(),d=this.quill.getFormat(t.index,1);r=$i["AttributeMap"].diff(u,d)||{},Object.keys(r).length>0&&(a=a.retain(h.length()-1).retain(1,r))}}this.quill.updateContents(a,Xd.sources.USER),this.quill.focus()}}},{key:"handleDeleteRange",value:function(t){zm({range:t,quill:this.quill}),this.quill.focus()}},{key:"handleEnter",value:function(t,e){var n=this,r=Object.keys(e.format).reduce((function(t,r){return n.quill.scroll.query(r,ni.BLOCK)&&!Array.isArray(e.format[r])&&(t[r]=e.format[r]),t}),{}),i=(new Vi.a).retain(t.index).delete(t.length).insert("\n",r);this.quill.updateContents(i,Xd.sources.USER),this.quill.setSelection(t.index+1,Xd.sources.SILENT),this.quill.focus()}}],[{key:"match",value:function(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&(e.key===t.key||e.key===t.which)}}]),n}(Iu),Dm={bindings:{bold:Pm("bold"),italic:Pm("italic"),underline:Pm("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Xd.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Xd.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",Xd.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Xd.sources.USER)}},"indent code-block":_m(!0),"outdent code-block":_m(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,Xd.sources.USER)}},tab:{key:"Tab",handler:function(t,e){if(e.format.table)return!0;this.quill.history.cutoff();var n=(new Vi.a).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,Xd.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Xd.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler:function(){this.quill.format("blockquote",!1,Xd.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler:function(t,e){var n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Xd.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),n=lm(e,2),r=n[0],i=n[1],o=mm(mm({},r.formats()),{},{list:"checked"}),s=(new Vi.a).retain(t.index).insert("\n",o).retain(r.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,Xd.sources.USER),this.quill.setSelection(t.index+1,Xd.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=this.quill.getLine(t.index),r=lm(n,2),i=r[0],o=r[1],s=(new Vi.a).retain(t.index).insert("\n",e.format).retain(i.length()-o-1).retain(1,{header:null});this.quill.updateContents(s,Xd.sources.USER),this.quill.setSelection(t.index+1,Xd.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler:function(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler:function(t){var e=this.quill.getModule("table");if(e){var n=e.getTable(t),r=lm(n,4),i=r[0],o=r[1],s=r[2],a=r[3],l=Bm(i,o,s,a);if(null==l)return;var c=i.offset();if(l<0){var h=(new Vi.a).retain(c).insert("\n");this.quill.updateContents(h,Xd.sources.USER),this.quill.setSelection(t.index+1,t.length,Xd.sources.SILENT)}else if(l>0){c+=i.length();var u=(new Vi.a).retain(c).insert("\n");this.quill.updateContents(u,Xd.sources.USER),this.quill.setSelection(c,Xd.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler:function(t,e){var n=e.event,r=e.line,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,Xd.sources.USER):this.quill.setSelection(i+r.length(),Xd.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){if(null==this.quill.scroll.query("list"))return!0;var n,r=e.prefix.length,i=this.quill.getLine(t.index),o=lm(i,2),s=o[0],a=o[1];if(a>r)return!0;switch(e.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(t.index," ",Xd.sources.USER),this.quill.history.cutoff();var l=(new Vi.a).retain(t.index-a).delete(r+1).retain(s.length()-2-a).retain(1,{list:n});return this.quill.updateContents(l,Xd.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-r,Xd.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:function(t){var e=this.quill.getLine(t.index),n=lm(e,2),r=n[0],i=n[1],o=2,s=r;while(null!=s&&s.length()<=1&&s.formats()["code-block"])if(s=s.prev,o-=1,o<=0){var a=(new Vi.a).retain(t.index+r.length()-i-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,Xd.sources.USER),this.quill.setSelection(t.index-1,Xd.sources.SILENT),!1}return!0}},"embed left":Rm("ArrowLeft",!1),"embed left shift":Rm("ArrowLeft",!0),"embed right":Rm("ArrowRight",!1),"embed right shift":Rm("ArrowRight",!0),"table down":Im(!1),"table up":Im(!0)}};function _m(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler:function(e,n){var r=n.event,i=this.quill.scroll.query("code-block"),o=i.TAB;if(0===e.length&&!r.shiftKey)return this.quill.insertText(e.index,o,Xd.sources.USER),void this.quill.setSelection(e.index+o.length,Xd.sources.SILENT);var s=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e),a=e.index,l=e.length;s.forEach((function(e,n){t?(e.insertAt(0,o),0===n?a+=o.length:l+=o.length):e.domNode.textContent.startsWith(o)&&(e.deleteAt(0,o.length),0===n?a-=o.length:l-=o.length)})),this.quill.update(Xd.sources.USER),this.quill.setSelection(a,l,Xd.sources.SILENT)}}}function Rm(t,e){var n,r="ArrowLeft"===t?"prefix":"suffix";return n={key:t,shiftKey:e,altKey:null},gm(n,r,/^$/),gm(n,"handler",(function(n){var r=n.index;"ArrowRight"===t&&(r+=n.length+1);var i=this.quill.getLeaf(r),o=lm(i,1),s=o[0];return!(s instanceof Ii)||("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,Xd.sources.USER):this.quill.setSelection(n.index-1,Xd.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Xd.sources.USER):this.quill.setSelection(n.index+n.length+1,Xd.sources.USER),!1)})),n}function Pm(t){return{key:t[0],shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],Xd.sources.USER)}}}function Im(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler:function(e,n){var r=t?"prev":"next",i=n.line,o=i.parent[r];if(null!=o){if("table-row"===o.statics.blotName){var s=o.children.head,a=i;while(null!=a.prev)a=a.prev,s=s.next;var l=s.offset(this.quill.scroll)+Math.min(n.offset,s.length()-1);this.quill.setSelection(l,0,Xd.sources.USER)}}else{var c=i.table()[r];null!=c&&(t?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,Xd.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,Xd.sources.USER))}return!1}}}function jm(t){if("string"===typeof t||"number"===typeof t)t={key:t};else{if("object"!==am(t))return null;t=Oa(t)}return t.shortKey&&(t[Lm]=t.shortKey,delete t.shortKey),t}function zm(t){var e=t.quill,n=t.range,r=e.getLines(n),i={};if(r.length>1){var o=r[0].formats(),s=r[r.length-1].formats();i=$i["AttributeMap"].diff(s,o)||{}}e.deleteText(n,Xd.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,Xd.sources.USER),e.setSelection(n.index,Xd.sources.SILENT)}function Bm(t,e,n,r){return null==e.prev&&null==e.next?null==n.prev&&null==n.next?0===r?-1:1:null==n.prev?-1:1:null==e.prev?-1:null==e.next?1:null}function Fm(t){return Um(t)||Wm(t)||qm(t)||Hm()}function Hm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qm(t,e){if(t){if("string"===typeof t)return $m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$m(t,e):void 0}}function Wm(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Um(t){if(Array.isArray(t))return $m(t)}function $m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Am.DEFAULTS=Dm;var Vm=/font-weight:\s*normal/,Gm=["P","OL","UL"],Ym=function(t){return t&&Gm.includes(t.tagName)},Km=function(t){Array.from(t.querySelectorAll("br")).filter((function(t){return Ym(t.previousElementSibling)&&Ym(t.nextElementSibling)})).forEach((function(t){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}))},Xm=function(t){Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((function(t){var e;return null===(e=t.getAttribute("style"))||void 0===e?void 0:e.match(Vm)})).forEach((function(e){var n,r=t.createDocumentFragment();r.append.apply(r,Fm(e.childNodes)),null===(n=e.parentNode)||void 0===n||n.replaceChild(r,e)}))};function Zm(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Xm(t),Km(t))}var Jm=/\bmso-list:[^;]*ignore/i,Qm=/\bmso-list:[^;]*\bl(\d+)/i,tg=/\bmso-list:[^;]*\blevel(\d+)/i,eg=function(t,e){var n=t.getAttribute("style"),r=null===n||void 0===n?void 0:n.match(Qm);if(!r)return null;var i=Number(r[1]),o=null===n||void 0===n?void 0:n.match(tg),s=o?Number(o[1]):1,a=new RegExp("@list l".concat(i,":level").concat(s,"\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)"),"i"),l=e.match(a),c=l&&"bullet"===l[1]?"bullet":"ordered";return{id:i,indent:s,type:c,element:t}},ng=function(t){var e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach((function(t){var e=(t.getAttribute("style")||"").match(Jm);e?n.push(t):r.push(t)})),n.forEach((function(t){var e;return null===(e=t.parentNode)||void 0===e?void 0:e.removeChild(t)}));var i=t.documentElement.innerHTML,o=r.map((function(t){return eg(t,i)})).filter((function(t){return t})),s=function(){var t,e=[],n=o.shift();while(n){var r;e.push(n),n=o.length&&(null===(r=o[0])||void 0===r?void 0:r.element)===n.element.nextElementSibling&&o[0].id===n.id?o.shift():null}var i=document.createElement("ul");e.forEach((function(t){var e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-".concat(t.indent-1)),e.innerHTML=t.element.innerHTML,i.appendChild(e)}));var s=null===(t=e[0])||void 0===t?void 0:t.element,a=null!==s&&void 0!==s?s:{},l=a.parentNode;s&&(null===l||void 0===l||l.replaceChild(i,s)),e.slice(1).forEach((function(t){var e=t.element;null===l||void 0===l||l.removeChild(e)}))};while(o.length)s()};function rg(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&ng(t)}var ig=[rg,Zm],og=function(t){t.documentElement&&ig.forEach((function(e){e(t)}))},sg=og;function ag(t){return ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(t)}function lg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lg(Object(n),!0).forEach((function(e){Og(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hg(t,e){return mg(t)||pg(t,e)||dg(t,e)||ug()}function ug(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dg(t,e){if(t){if("string"===typeof t)return fg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fg(t,e):void 0}}function fg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pg(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function mg(t){if(Array.isArray(t))return t}function gg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tg(r.key),r)}}function yg(t,e,n){return e&&vg(t.prototype,e),n&&vg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bg(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wg(t,e)}function wg(t,e){return wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wg(t,e)}function xg(t){var e=kg();return function(){var n,r=Ng(t);if(e){var i=Ng(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cg(this,n)}}function Cg(t,e){if(e&&("object"===ag(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eg(t)}function Eg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kg=function(){return!!t})()}function Ng(t){return Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ng(t)}function Og(t,e,n){return e=Tg(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tg(t){var e=Mg(t,"string");return"symbol"==ag(e)?e:e+""}function Mg(t,e){if("object"!=ag(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ag(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Sg=fh("quill:clipboard"),Lg=[[Node.TEXT_NODE,Jg],[Node.TEXT_NODE,Kg],["br",Ug],[Node.ELEMENT_NODE,Kg],[Node.ELEMENT_NODE,Wg],[Node.ELEMENT_NODE,qg],[Node.ELEMENT_NODE,Xg],["li",Gg],["ol, ul",Yg],["pre",$g],["tr",Zg],["b",Hg("bold")],["i",Hg("italic")],["strike",Hg("strike")],["style",Vg]],Ag=[Yf,jp].reduce((function(t,e){return t[e.keyName]=e,t}),{}),Dg=[Xf,gp,pp,Bp,im,sm].reduce((function(t,e){return t[e.keyName]=e,t}),{}),_g=function(t){bg(n,t);var e=xg(n);function n(t,r){var i,o;return gg(this,n),o=e.call(this,t,r),o.quill.root.addEventListener("copy",(function(t){return o.onCaptureCopy(t,!1)})),o.quill.root.addEventListener("cut",(function(t){return o.onCaptureCopy(t,!0)})),o.quill.root.addEventListener("paste",o.onCapturePaste.bind(Eg(o))),o.matchers=[],Lg.concat(null!==(i=o.options.matchers)&&void 0!==i?i:[]).forEach((function(t){var e=hg(t,2),n=e[0],r=e[1];o.addMatcher(n,r)})),o}return yg(n,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){var e=t.html,n=t.text,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r[Rp.blotName])return(new Vi.a).insert(n||"",Og({},Rp.blotName,r[Rp.blotName]));if(!e)return(new Vi.a).insert(n||"",r);var i=this.convertHTML(e);return Pg(i,"\n")&&(null==i.ops[i.ops.length-1].attributes||r.table)?i.compose((new Vi.a).retain(i.length()-1).delete(1)):i}},{key:"normalizeHTML",value:function(t){sg(t)}},{key:"convertHTML",value:function(t){var e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);var n=e.body,r=new WeakMap,i=this.prepareMatching(n,r),o=hg(i,2),s=o[0],a=o[1];return Fg(this.quill.scroll,n,s,a,r)}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xd.sources.API;if("string"===typeof t){var r=this.convert({html:t,text:""});this.quill.setContents(r,e),this.quill.setSelection(0,Xd.sources.SILENT)}else{var i=this.convert({html:e,text:""});this.quill.updateContents((new Vi.a).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),Xd.sources.SILENT)}}},{key:"onCaptureCopy",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.defaultPrevented){t.preventDefault();var i=this.quill.selection.getRange(),o=hg(i,1),s=o[0];if(null!=s){var a=this.onCopy(s,r),l=a.html,c=a.text;null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",c),null===(n=t.clipboardData)||void 0===n||n.setData("text/html",l),r&&zm({range:s,quill:this.quill})}}}},{key:"normalizeURIList",value:function(t){return t.split(/\r?\n/).filter((function(t){return"#"!==t[0]})).join("\n")}},{key:"onCapturePaste",value:function(t){var e,n,r;if(!t.defaultPrevented&&this.quill.isEnabled()){t.preventDefault();var i=this.quill.getSelection(!0);if(null!=i){var o=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/html"),s=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!o&&!s){var a,l=null===(a=t.clipboardData)||void 0===a?void 0:a.getData("text/uri-list");l&&(s=this.normalizeURIList(l))}var c=Array.from((null===(r=t.clipboardData)||void 0===r?void 0:r.files)||[]);if(!o&&c.length>0)this.quill.uploader.upload(i,c);else{if(o&&c.length>0){var h,u=(new DOMParser).parseFromString(o,"text/html");if(1===u.body.childElementCount&&"IMG"===(null===(h=u.body.firstElementChild)||void 0===h?void 0:h.tagName))return void this.quill.uploader.upload(i,c)}this.onPaste(i,{html:o,text:s})}}}}},{key:"onCopy",value:function(t){var e=this.quill.getText(t),n=this.quill.getSemanticHTML(t);return{html:n,text:e}}},{key:"onPaste",value:function(t,e){var n=e.text,r=e.html,i=this.quill.getFormat(t.index),o=this.convert({text:n,html:r},i);Sg.log("onPaste",o,{text:n,html:r});var s=(new Vi.a).retain(t.index).delete(t.length).concat(o);this.quill.updateContents(s,Xd.sources.USER),this.quill.setSelection(s.length()-t.length,Xd.sources.SILENT),this.quill.scrollSelectionIntoView()}},{key:"prepareMatching",value:function(t,e){var n=[],r=[];return this.matchers.forEach((function(i){var o=hg(i,2),s=o[0],a=o[1];switch(s){case Node.TEXT_NODE:r.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(s)).forEach((function(t){if(e.has(t)){var n=e.get(t);null===n||void 0===n||n.push(a)}else e.set(t,[a])}));break}})),[n,r]}}]),n}(Iu);function Rg(t,e,n,r){return r.query(e)?t.reduce((function(t,r){if(!r.insert)return t;if(r.attributes&&r.attributes[e])return t.push(r);var i=n?Og({},e,n):{};return t.insert(r.insert,cg(cg({},i),r.attributes))}),new Vi.a):t}function Pg(t,e){for(var n="",r=t.ops.length-1;r>=0&&n.length<e.length;--r){var i=t.ops[r];if("string"!==typeof i.insert)break;n=i.insert+n}return n.slice(-1*e.length)===e}function Ig(t,e){if(!(t instanceof Element))return!1;var n=e.query(t);return!(n&&n.prototype instanceof Ii)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function jg(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Ig(t.previousElementSibling,e)&&!Ig(t.nextElementSibling,e)}Og(_g,"DEFAULTS",{matchers:[]});var zg=new WeakMap;function Bg(t){return null!=t&&(zg.has(t)||("PRE"===t.tagName?zg.set(t,!0):zg.set(t,Bg(t.parentNode))),zg.get(t))}function Fg(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((function(n,r){return r(e,n,t)}),new Vi.a):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((function(o,s){var a=Fg(t,s,n,r,i);return s.nodeType===e.ELEMENT_NODE&&(a=n.reduce((function(e,n){return n(s,e,t)}),a),a=(i.get(s)||[]).reduce((function(e,n){return n(s,e,t)}),a)),o.concat(a)}),new Vi.a):new Vi.a}function Hg(t){return function(e,n,r){return Rg(n,t,!0,r)}}function qg(t,e,n){var r=ri.keys(t),i=ci.keys(t),o=di.keys(t),s={};return r.concat(i).concat(o).forEach((function(e){var r=n.query(e,ni.ATTRIBUTE);null!=r&&(s[r.attrName]=r.value(t),s[r.attrName])||(r=Ag[e],null==r||r.attrName!==e&&r.keyName!==e||(s[r.attrName]=r.value(t)||void 0),r=Dg[e],null==r||r.attrName!==e&&r.keyName!==e||(r=Dg[e],s[r.attrName]=r.value(t)||void 0))})),Object.entries(s).reduce((function(t,e){var r=hg(e,2),i=r[0],o=r[1];return Rg(t,i,o,n)}),e)}function Wg(t,e,n){var r=n.query(t);if(null==r)return e;if(r.prototype instanceof Ii){var i={},o=r.value(t);if(null!=o)return i[r.blotName]=o,(new Vi.a).insert(i,r.formats(t,n))}else if(r.prototype instanceof Ai&&!Pg(e,"\n")&&e.insert("\n"),"blotName"in r&&"formats"in r&&"function"===typeof r.formats)return Rg(e,r.blotName,r.formats(t,n),n);return e}function Ug(t,e){return Pg(e,"\n")||e.insert("\n"),e}function $g(t,e,n){var r=n.query("code-block"),i=!r||!("formats"in r)||"function"!==typeof r.formats||r.formats(t,n);return Rg(e,"code-block",i,n)}function Vg(){return new Vi.a}function Gg(t,e,n){var r=n.query(t);if(null==r||"list"!==r.blotName||!Pg(e,"\n"))return e;var i=-1,o=t.parentNode;while(null!=o)["OL","UL"].includes(o.tagName)&&(i+=1),o=o.parentNode;return i<=0?e:e.reduce((function(t,e){return e.insert?e.attributes&&"number"===typeof e.attributes.indent?t.push(e):t.insert(e.insert,cg({indent:i},e.attributes||{})):t}),new Vi.a)}function Yg(t,e,n){var r=t,i="OL"===r.tagName?"ordered":"bullet",o=r.getAttribute("data-checked");return o&&(i="true"===o?"checked":"unchecked"),Rg(e,"list",i,n)}function Kg(t,e,n){if(!Pg(e,"\n")){if(Ig(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){var r=t.nextSibling;while(null!=r){if(Ig(r,n))return e.insert("\n");var i=n.query(r);if(i&&i.prototype instanceof Fc)return e.insert("\n");r=r.firstChild}}}return e}function Xg(t,e,n){var r,i={},o=t.style||{};return"italic"===o.fontStyle&&(i.italic=!0),"underline"===o.textDecoration&&(i.underline=!0),"line-through"===o.textDecoration&&(i.strike=!0),(null!==(r=o.fontWeight)&&void 0!==r&&r.startsWith("bold")||parseInt(o.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce((function(t,e){var r=hg(e,2),i=r[0],o=r[1];return Rg(t,i,o,n)}),e),parseFloat(o.textIndent||0)>0?(new Vi.a).insert("\t").concat(e):e}function Zg(t,e,n){var r,i,o="TABLE"===(null===(r=t.parentElement)||void 0===r?void 0:r.tagName)?t.parentElement:null===(i=t.parentElement)||void 0===i?void 0:i.parentElement;if(null!=o){var s=Array.from(o.querySelectorAll("tr")),a=s.indexOf(t)+1;return Rg(e,"table",a,n)}return e}function Jg(t,e,n){var r,i=t.data;if("O:P"===(null===(r=t.parentElement)||void 0===r?void 0:r.tagName))return e.insert(i.trim());if(!Bg(t)){if(0===i.trim().length&&i.includes("\n")&&!jg(t,n))return e;var o=function(t,e){var n=e.replace(/[^\u00a0]/g,"");return n.length<1&&t?" ":n};i=i.replace(/\r\n/g," ").replace(/\n/g," "),i=i.replace(/\s\s+/g,o.bind(o,!0)),(null==t.previousSibling&&null!=t.parentElement&&Ig(t.parentElement,n)||t.previousSibling instanceof Element&&Ig(t.previousSibling,n))&&(i=i.replace(/^\s+/,o.bind(o,!1))),(null==t.nextSibling&&null!=t.parentElement&&Ig(t.parentElement,n)||t.nextSibling instanceof Element&&Ig(t.nextSibling,n))&&(i=i.replace(/\s+$/,o.bind(o,!1)))}return e.insert(i)}function Qg(t){return Qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(t)}function tv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ev(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uv(r.key),r)}}function nv(t,e,n){return e&&ev(t.prototype,e),n&&ev(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iv(t,e)}function iv(t,e){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iv(t,e)}function ov(t){var e=lv();return function(){var n,r=cv(t);if(e){var i=cv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sv(this,n)}}function sv(t,e){if(e&&("object"===Qg(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return av(t)}function av(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lv=function(){return!!t})()}function cv(t){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cv(t)}function hv(t,e,n){return e=uv(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uv(t){var e=dv(t,"string");return"symbol"==Qg(e)?e:e+""}function dv(t,e){if("object"!=Qg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var fv=function(t){rv(n,t);var e=ov(n);function n(t,r){var i;return tv(this,n),i=e.call(this,t,r),hv(av(i),"lastRecorded",0),hv(av(i),"ignoreChange",!1),hv(av(i),"stack",{undo:[],redo:[]}),hv(av(i),"currentRange",null),i.quill.on(Xd.events.EDITOR_CHANGE,(function(t,e,n,r){t===Xd.events.SELECTION_CHANGE?e&&r!==Xd.sources.SILENT&&(i.currentRange=e):t===Xd.events.TEXT_CHANGE&&(i.ignoreChange||(i.options.userOnly&&r!==Xd.sources.USER?i.transform(e):i.record(e,n)),i.currentRange=vv(i.currentRange,e))})),i.quill.keyboard.addBinding({key:"z",shortKey:!0},i.undo.bind(av(i))),i.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},i.redo.bind(av(i))),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"y",shortKey:!0},i.redo.bind(av(i))),i.quill.root.addEventListener("beforeinput",(function(t){"historyUndo"===t.inputType?(i.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(i.redo(),t.preventDefault())})),i}return nv(n,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();if(n){var r=this.quill.getContents(),i=n.delta.invert(r);this.stack[e].push({delta:i,range:vv(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,Xd.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=t.invert(e),r=this.currentRange,i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var o=this.stack.undo.pop();o&&(n=n.compose(o.delta),r=o.range)}else this.lastRecorded=i;0!==n.length()&&(this.stack.undo.push({delta:n,range:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){pv(this.stack.undo,t),pv(this.stack.redo,t)}},{key:"undo",value:function(){this.change("undo","redo")}},{key:"restoreSelection",value:function(t){if(t.range)this.quill.setSelection(t.range,Xd.sources.USER);else{var e=gv(this.quill.scroll,t.delta);this.quill.setSelection(e,Xd.sources.USER)}}}]),n}(Iu);function pv(t,e){for(var n=e,r=t.length-1;r>=0;r-=1){var i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&vv(i.range,n)},n=i.delta.transform(n),0===t[r].delta.length()&&t.splice(r,1)}}function mv(t,e){var n=e.ops[e.ops.length-1];return null!=n&&(null!=n.insert?"string"===typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((function(e){return null!=t.query(e,ni.BLOCK)})))}function gv(t,e){var n=e.reduce((function(t,e){return t+(e.delete||0)}),0),r=e.length()-n;return mv(t,e)&&(r-=1),r}function vv(t,e){if(!t)return t;var n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}function yv(t){return yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(t)}function bv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cv(r.key),r)}}function xv(t,e,n){return e&&wv(t.prototype,e),n&&wv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cv(t){var e=Ev(t,"string");return"symbol"==yv(e)?e:e+""}function Ev(t,e){if("object"!=yv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function kv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nv(t,e)}function Nv(t,e){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nv(t,e)}function Ov(t){var e=Sv();return function(){var n,r=Lv(t);if(e){var i=Lv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tv(this,n)}}function Tv(t,e){if(e&&("object"===yv(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mv(t)}function Mv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sv=function(){return!!t})()}function Lv(t){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lv(t)}hv(fv,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});var Av=function(t){kv(n,t);var e=Ov(n);function n(t,r){var i;return bv(this,n),i=e.call(this,t,r),t.root.addEventListener("drop",(function(e){e.preventDefault();var n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(e.clientX,e.clientY);n=document.createRange(),n.setStart(r.offsetNode,r.offset),n.setEnd(r.offsetNode,r.offset)}var o=n&&t.selection.normalizeNative(n);if(o){var s,a=t.selection.normalizedToRange(o);null!==(s=e.dataTransfer)&&void 0!==s&&s.files&&i.upload(a,e.dataTransfer.files)}})),i}return xv(n,[{key:"upload",value:function(t,e){var n=this,r=[];Array.from(e).forEach((function(t){var e;t&&null!==(e=n.options.mimetypes)&&void 0!==e&&e.includes(t.type)&&r.push(t)})),r.length>0&&this.options.handler.call(this,t,r)}}]),n}(Iu);Av.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler:function(t,e){var n=this;if(this.quill.scroll.query("image")){var r=e.map((function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(){e(n.result)},n.readAsDataURL(t)}))}));Promise.all(r).then((function(e){var r=e.reduce((function(t,e){return t.insert({image:e})}),(new Vi.a).retain(t.index).delete(t.length));n.quill.updateContents(r,_h.sources.USER),n.quill.setSelection(t.index+e.length,_h.sources.SILENT)}))}}};var Dv=Av;function _v(t){return _v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(t)}function Rv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jv(r.key),r)}}function Iv(t,e,n){return e&&Pv(t.prototype,e),n&&Pv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jv(t){var e=zv(t,"string");return"symbol"==_v(e)?e:e+""}function zv(t,e){if("object"!=_v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Bv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fv(t,e)}function Fv(t,e){return Fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fv(t,e)}function Hv(t){var e=Uv();return function(){var n,r=$v(t);if(e){var i=$v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qv(this,n)}}function qv(t,e){if(e&&("object"===_v(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wv(t)}function Wv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Uv=function(){return!!t})()}function $v(t){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$v(t)}var Vv=["insertText","insertReplacementText"],Gv=function(t){Bv(n,t);var e=Hv(n);function n(t,r){var i;return Rv(this,n),i=e.call(this,t,r),t.root.addEventListener("beforeinput",(function(t){i.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(Xd.events.COMPOSITION_BEFORE_START,(function(){i.handleCompositionStart()})),i}return Iv(n,[{key:"deleteRange",value:function(t){zm({range:t,quill:this.quill})}},{key:"replaceText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){var n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new Vi.a).retain(t.index).insert(e,n),Xd.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Xd.sources.SILENT),!0}},{key:"handleBeforeInput",value:function(t){if(!this.quill.composition.isComposing&&!t.defaultPrevented&&Vv.includes(t.inputType)){var e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(e&&!0!==e.collapsed){var n=Yv(t);if(null!=n){var r=this.quill.selection.normalizeNative(e),i=r?this.quill.selection.normalizedToRange(r):null;i&&this.replaceText(i,n)&&t.preventDefault()}}}}},{key:"handleCompositionStart",value:function(){var t=this.quill.getSelection();t&&this.replaceText(t)}}]),n}(Iu);function Yv(t){var e;return"string"===typeof t.data?t.data:null!==(e=t.dataTransfer)&&void 0!==e&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}var Kv=Gv;function Xv(t){return Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(t)}function Zv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ly(r.key),r)}}function Qv(t,e,n){return e&&Jv(t.prototype,e),n&&Jv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ty(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ey(t,e)}function ey(t,e){return ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ey(t,e)}function ny(t){var e=oy();return function(){var n,r=sy(t);if(e){var i=sy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ry(this,n)}}function ry(t,e){if(e&&("object"===Xv(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iy(t)}function iy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oy=function(){return!!t})()}function sy(t){return sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sy(t)}function ay(t,e,n){return e=ly(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ly(t){var e=cy(t,"string");return"symbol"==Xv(e)?e:e+""}function cy(t,e){if("object"!=Xv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var hy=/Mac/i.test(navigator.platform),uy=100,dy=function(t){return"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!hy||"a"!==t.key||!0!==t.ctrlKey)},fy=function(t){ty(n,t);var e=ny(n);function n(t,r){var i;return Zv(this,n),i=e.call(this,t,r),ay(iy(i),"isListening",!1),ay(iy(i),"selectionChangeDeadline",0),i.handleArrowKeys(),i.handleNavigationShortcuts(),i}return Qv(n,[{key:"handleArrowKeys",value:function(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler:function(t,e){var n=e.line,r=e.event;if(!(n instanceof ki)||!n.uiNode)return!0;var i="rtl"===getComputedStyle(n.domNode)["direction"];return!!(i&&"ArrowRight"!==r.key||!i&&"ArrowLeft"!==r.key)||(this.quill.setSelection(t.index-1,t.length+(r.shiftKey?1:0),Xd.sources.USER),!1)}})}},{key:"handleNavigationShortcuts",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){!e.defaultPrevented&&dy(e)&&t.ensureListeningToSelectionChange()}))}},{key:"ensureListeningToSelectionChange",value:function(){var t=this;if(this.selectionChangeDeadline=Date.now()+uy,!this.isListening){this.isListening=!0;var e=function(){t.isListening=!1,Date.now()<=t.selectionChangeDeadline&&t.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}}},{key:"handleSelectionChange",value:function(){var t=document.getSelection();if(t){var e=t.getRangeAt(0);if(!0===e.collapsed&&0===e.startOffset){var n=this.quill.scroll.find(e.startContainer);if(n instanceof ki&&n.uiNode){var r=document.createRange();r.setStartAfter(n.uiNode),r.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(r)}}}}}]),n}(Iu),py=fy;Xd.register({"blots/block":Bc,"blots/block/embed":Fc,"blots/break":Fl,"blots/container":bf,"blots/cursor":sh,"blots/embed":td,"blots/inline":bc,"blots/scroll":Vf,"blots/text":tc,"modules/clipboard":_g,"modules/history":fv,"modules/keyboard":Am,"modules/uploader":Dv,"modules/input":Kv,"modules/uiNode":py});var my=Xd;function gy(t){return gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(t)}function vy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wy(r.key),r)}}function by(t,e,n){return e&&yy(t.prototype,e),n&&yy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wy(t){var e=xy(t,"string");return"symbol"==gy(e)?e:e+""}function xy(t,e){if("object"!=gy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Cy(){return Cy="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Ey(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Cy.apply(this,arguments)}function Ey(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Ly(t),null===t)break;return t}function ky(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ny(t,e)}function Ny(t,e){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ny(t,e)}function Oy(t){var e=Sy();return function(){var n,r=Ly(t);if(e){var i=Ly(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ty(this,n)}}function Ty(t,e){if(e&&("object"===gy(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return My(t)}function My(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sy=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ly(t)}var Ay=function(t){ky(n,t);var e=Oy(n);function n(){return vy(this,n),e.apply(this,arguments)}return by(n,[{key:"add",value:function(t,e){var r=0;if("+1"===e||"-1"===e){var i=this.value(t)||0;r="+1"===e?i+1:i-1}else"number"===typeof e&&(r=e);return 0===r?(this.remove(t),!0):Cy(Ly(n.prototype),"add",this).call(this,t,r.toString())}},{key:"canAdd",value:function(t,e){return Cy(Ly(n.prototype),"canAdd",this).call(this,t,e)||Cy(Ly(n.prototype),"canAdd",this).call(this,t,parseInt(e,10))}},{key:"value",value:function(t){return parseInt(Cy(Ly(n.prototype),"value",this).call(this,t),10)||void 0}}]),n}(ci),Dy=new Ay("indent","ql-indent",{scope:ni.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),_y=Dy;function Ry(t){return Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ry(t)}function Py(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vy(r.key),r)}}function Iy(t,e,n){return e&&Py(t.prototype,e),n&&Py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zy(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&By(t,e)}function By(t,e){return By=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},By(t,e)}function Fy(t){var e=Wy();return function(){var n,r=Uy(t);if(e){var i=Uy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hy(this,n)}}function Hy(t,e){if(e&&("object"===Ry(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qy(t)}function qy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wy=function(){return!!t})()}function Uy(t){return Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uy(t)}function $y(t,e,n){return e=Vy(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vy(t){var e=Gy(t,"string");return"symbol"==Ry(e)?e:e+""}function Gy(t,e){if("object"!=Ry(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ry(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Yy=function(t){zy(n,t);var e=Fy(n);function n(){return jy(this,n),e.apply(this,arguments)}return Iy(n)}(Bc);$y(Yy,"blotName","blockquote"),$y(Yy,"tagName","blockquote");var Ky=Yy;function Xy(t){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(t)}function Zy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lb(r.key),r)}}function Qy(t,e,n){return e&&Jy(t.prototype,e),n&&Jy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tb(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eb(t,e)}function eb(t,e){return eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eb(t,e)}function nb(t){var e=ob();return function(){var n,r=sb(t);if(e){var i=sb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rb(this,n)}}function rb(t,e){if(e&&("object"===Xy(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ib(t)}function ib(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ob(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ob=function(){return!!t})()}function sb(t){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sb(t)}function ab(t,e,n){return e=lb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lb(t){var e=cb(t,"string");return"symbol"==Xy(e)?e:e+""}function cb(t,e){if("object"!=Xy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var hb=function(t){tb(n,t);var e=nb(n);function n(){return Zy(this,n),e.apply(this,arguments)}return Qy(n,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),n}(Bc);ab(hb,"blotName","header"),ab(hb,"tagName",["H1","H2","H3","H4","H5","H6"]);var ub=hb;function db(t){return db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},db(t)}function fb(){return fb="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=pb(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},fb.apply(this,arguments)}function pb(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Ob(t),null===t)break;return t}function mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vb(r.key),r)}}function gb(t,e,n){return e&&mb(t.prototype,e),n&&mb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vb(t){var e=yb(t,"string");return"symbol"==db(e)?e:e+""}function yb(t,e){if("object"!=db(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=db(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function bb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wb(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xb(t,e)}function xb(t,e){return xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xb(t,e)}function Cb(t){var e=Nb();return function(){var n,r=Ob(t);if(e){var i=Ob(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Eb(this,n)}}function Eb(t,e){if(e&&("object"===db(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kb(t)}function kb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nb=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ob(t)}var Tb=function(t){wb(n,t);var e=Cb(n);function n(){return bb(this,n),e.apply(this,arguments)}return gb(n)}(bf);Tb.blotName="list-container",Tb.tagName="OL";var Mb=function(t){wb(n,t);var e=Cb(n);function n(t,r){var i;bb(this,n),i=e.call(this,t,r);var o=r.ownerDocument.createElement("span"),s=function(e){if(t.isEnabled()){var n=i.statics.formats(r,t);"checked"===n?(i.format("list","unchecked"),e.preventDefault()):"unchecked"===n&&(i.format("list","checked"),e.preventDefault())}};return o.addEventListener("mousedown",s),o.addEventListener("touchstart",s),i.attachUI(o),i}return gb(n,[{key:"format",value:function(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):fb(Ob(n.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=fb(Ob(n),"create",this).call(this);return e.setAttribute("data-list",t),e}},{key:"formats",value:function(t){return t.getAttribute("data-list")||void 0}},{key:"register",value:function(){Xd.register(Tb)}}]),n}(Bc);function Sb(t){return Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb(t)}function Lb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ab(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wb(r.key),r)}}function Db(t,e,n){return e&&Ab(t.prototype,e),n&&Ab(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _b(){return _b="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Rb(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},_b.apply(this,arguments)}function Rb(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Hb(t),null===t)break;return t}function Pb(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ib(t,e)}function Ib(t,e){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ib(t,e)}function jb(t){var e=Fb();return function(){var n,r=Hb(t);if(e){var i=Hb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zb(this,n)}}function zb(t,e){if(e&&("object"===Sb(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bb(t)}function Bb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fb=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hb(t)}function qb(t,e,n){return e=Wb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wb(t){var e=Ub(t,"string");return"symbol"==Sb(e)?e:e+""}function Ub(t,e){if("object"!=Sb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Sb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Mb.blotName="list",Mb.tagName="LI",Tb.allowedChildren=[Mb],Mb.requiredContainer=Tb;var $b=function(t){Pb(n,t);var e=jb(n);function n(){return Lb(this,n),e.apply(this,arguments)}return Db(n,[{key:"optimize",value:function(t){_b(Hb(n.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return _b(Hb(n),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),n}(bc);qb($b,"blotName","bold"),qb($b,"tagName",["STRONG","B"]);var Vb=$b;function Gb(t){return Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gb(t)}function Yb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ow(r.key),r)}}function Kb(t,e,n){return e&&Yb(t.prototype,e),n&&Yb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zb(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jb(t,e)}function Jb(t,e){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jb(t,e)}function Qb(t){var e=nw();return function(){var n,r=rw(t);if(e){var i=rw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tw(this,n)}}function tw(t,e){if(e&&("object"===Gb(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ew(t)}function ew(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nw=function(){return!!t})()}function rw(t){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rw(t)}function iw(t,e,n){return e=ow(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ow(t){var e=sw(t,"string");return"symbol"==Gb(e)?e:e+""}function sw(t,e){if("object"!=Gb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var aw=function(t){Zb(n,t);var e=Qb(n);function n(){return Xb(this,n),e.apply(this,arguments)}return Kb(n)}(Vb);iw(aw,"blotName","italic"),iw(aw,"tagName",["EM","I"]);var lw=aw;function cw(t){return cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cw(t)}function hw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ew(r.key),r)}}function dw(t,e,n){return e&&uw(t.prototype,e),n&&uw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fw(){return fw="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=pw(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},fw.apply(this,arguments)}function pw(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=xw(t),null===t)break;return t}function mw(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gw(t,e)}function gw(t,e){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gw(t,e)}function vw(t){var e=ww();return function(){var n,r=xw(t);if(e){var i=xw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yw(this,n)}}function yw(t,e){if(e&&("object"===cw(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bw(t)}function bw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ww(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ww=function(){return!!t})()}function xw(t){return xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xw(t)}function Cw(t,e,n){return e=Ew(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ew(t){var e=kw(t,"string");return"symbol"==cw(e)?e:e+""}function kw(t,e){if("object"!=cw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Nw=function(t){mw(n,t);var e=vw(n);function n(){return hw(this,n),e.apply(this,arguments)}return dw(n,[{key:"format",value:function(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):fw(xw(n.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=fw(xw(n),"create",this).call(this,t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return Ow(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),n}(bc);function Ow(t,e){var n=document.createElement("a");n.href=t;var r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}function Tw(t){return Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tw(t)}function Mw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hw(r.key),r)}}function Lw(t,e,n){return e&&Sw(t.prototype,e),n&&Sw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aw(){return Aw="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Dw(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Aw.apply(this,arguments)}function Dw(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Bw(t),null===t)break;return t}function _w(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rw(t,e)}function Rw(t,e){return Rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rw(t,e)}function Pw(t){var e=zw();return function(){var n,r=Bw(t);if(e){var i=Bw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Iw(this,n)}}function Iw(t,e){if(e&&("object"===Tw(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jw(t)}function jw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zw=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bw(t)}function Fw(t,e,n){return e=Hw(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hw(t){var e=qw(t,"string");return"symbol"==Tw(e)?e:e+""}function qw(t,e){if("object"!=Tw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Cw(Nw,"blotName","link"),Cw(Nw,"tagName","A"),Cw(Nw,"SANITIZED_URL","about:blank"),Cw(Nw,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);var Ww=function(t){_w(n,t);var e=Pw(n);function n(){return Mw(this,n),e.apply(this,arguments)}return Lw(n,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):Aw(Bw(n),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),n}(bc);Fw(Ww,"blotName","script"),Fw(Ww,"tagName",["SUB","SUP"]);var Uw=Ww;function $w(t){return $w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$w(t)}function Vw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rx(r.key),r)}}function Gw(t,e,n){return e&&Vw(t.prototype,e),n&&Vw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kw(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xw(t,e)}function Xw(t,e){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xw(t,e)}function Zw(t){var e=tx();return function(){var n,r=ex(t);if(e){var i=ex(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jw(this,n)}}function Jw(t,e){if(e&&("object"===$w(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qw(t)}function Qw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tx=function(){return!!t})()}function ex(t){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ex(t)}function nx(t,e,n){return e=rx(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rx(t){var e=ix(t,"string");return"symbol"==$w(e)?e:e+""}function ix(t,e){if("object"!=$w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ox=function(t){Kw(n,t);var e=Zw(n);function n(){return Yw(this,n),e.apply(this,arguments)}return Gw(n)}(Vb);nx(ox,"blotName","strike"),nx(ox,"tagName",["S","STRIKE"]);var sx=ox;function ax(t){return ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(t)}function lx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bx(r.key),r)}}function cx(t,e,n){return e&&lx(t.prototype,e),n&&lx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ux(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dx(t,e)}function dx(t,e){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dx(t,e)}function fx(t){var e=gx();return function(){var n,r=vx(t);if(e){var i=vx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return px(this,n)}}function px(t,e){if(e&&("object"===ax(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mx(t)}function mx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gx=function(){return!!t})()}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vx(t)}function yx(t,e,n){return e=bx(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bx(t){var e=wx(t,"string");return"symbol"==ax(e)?e:e+""}function wx(t,e){if("object"!=ax(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ax(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var xx=function(t){ux(n,t);var e=fx(n);function n(){return hx(this,n),e.apply(this,arguments)}return cx(n)}(bc);yx(xx,"blotName","underline"),yx(xx,"tagName","U");var Cx=xx;function Ex(t){return Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(t)}function kx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jx(r.key),r)}}function Ox(t,e,n){return e&&Nx(t.prototype,e),n&&Nx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tx(){return Tx="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Mx(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Tx.apply(this,arguments)}function Mx(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Px(t),null===t)break;return t}function Sx(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lx(t,e)}function Lx(t,e){return Lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lx(t,e)}function Ax(t){var e=Rx();return function(){var n,r=Px(t);if(e){var i=Px(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dx(this,n)}}function Dx(t,e){if(e&&("object"===Ex(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _x(t)}function _x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rx=function(){return!!t})()}function Px(t){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Px(t)}function Ix(t,e,n){return e=jx(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jx(t){var e=zx(t,"string");return"symbol"==Ex(e)?e:e+""}function zx(t,e){if("object"!=Ex(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ex(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Bx=function(t){Sx(n,t);var e=Ax(n);function n(){return kx(this,n),e.apply(this,arguments)}return Ox(n,[{key:"html",value:function(){var t=this.value(),e=t.formula;return"<span>".concat(e,"</span>")}}],[{key:"create",value:function(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");var e=Tx(Px(n),"create",this).call(this,t);return"string"===typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),n}(td);Ix(Bx,"blotName","formula"),Ix(Bx,"className","ql-formula"),Ix(Bx,"tagName","SPAN");var Fx=Bx;function Hx(t){return Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(t)}function qx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eC(r.key),r)}}function Ux(t,e,n){return e&&Wx(t.prototype,e),n&&Wx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $x(){return $x="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Vx(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},$x.apply(this,arguments)}function Vx(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Qx(t),null===t)break;return t}function Gx(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yx(t,e)}function Yx(t,e){return Yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yx(t,e)}function Kx(t){var e=Jx();return function(){var n,r=Qx(t);if(e){var i=Qx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xx(this,n)}}function Xx(t,e){if(e&&("object"===Hx(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zx(t)}function Zx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jx=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qx(t)}function tC(t,e,n){return e=eC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eC(t){var e=nC(t,"string");return"symbol"==Hx(e)?e:e+""}function nC(t,e){if("object"!=Hx(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var rC=["alt","height","width"],iC=function(t){Gx(n,t);var e=Kx(n);function n(){return qx(this,n),e.apply(this,arguments)}return Ux(n,[{key:"format",value:function(t,e){rC.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):$x(Qx(n.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=$x(Qx(n),"create",this).call(this,t);return"string"===typeof t&&e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(t){return rC.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return Ow(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),n}(Ii);tC(iC,"blotName","image"),tC(iC,"tagName","IMG");var oC=iC;function sC(t){return sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sC(t)}function aC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wC(r.key),r)}}function cC(t,e,n){return e&&lC(t.prototype,e),n&&lC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hC(){return hC="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=uC(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},hC.apply(this,arguments)}function uC(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=yC(t),null===t)break;return t}function dC(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fC(t,e)}function fC(t,e){return fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fC(t,e)}function pC(t){var e=vC();return function(){var n,r=yC(t);if(e){var i=yC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mC(this,n)}}function mC(t,e){if(e&&("object"===sC(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gC(t)}function gC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vC=function(){return!!t})()}function yC(t){return yC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yC(t)}function bC(t,e,n){return e=wC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wC(t){var e=xC(t,"string");return"symbol"==sC(e)?e:e+""}function xC(t,e){if("object"!=sC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var CC=["height","width"],EC=function(t){dC(n,t);var e=pC(n);function n(){return aC(this,n),e.apply(this,arguments)}return cC(n,[{key:"format",value:function(t,e){CC.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):hC(yC(n.prototype),"format",this).call(this,t,e)}},{key:"html",value:function(){var t=this.value(),e=t.video;return'<a href="'.concat(e,'">').concat(e,"</a>")}}],[{key:"create",value:function(t){var e=hC(yC(n),"create",this).call(this,t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(t){return CC.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"sanitize",value:function(t){return Nw.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),n}(Fc);bC(EC,"blotName","video"),bC(EC,"className","ql-video"),bC(EC,"tagName","IFRAME");var kC=EC;function NC(t){return NC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NC(t)}function OC(t,e,n){return e=IC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TC(t,e){return DC(t)||AC(t,e)||SC(t,e)||MC()}function MC(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SC(t,e){if(t){if("string"===typeof t)return LC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LC(t,e):void 0}}function LC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AC(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function DC(t){if(Array.isArray(t))return t}function _C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IC(r.key),r)}}function PC(t,e,n){return e&&RC(t.prototype,e),n&&RC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IC(t){var e=jC(t,"string");return"symbol"==NC(e)?e:e+""}function jC(t,e){if("object"!=NC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=NC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function zC(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BC(t,e)}function BC(t,e){return BC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},BC(t,e)}function FC(t){var e=WC();return function(){var n,r=VC(t);if(e){var i=VC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return HC(this,n)}}function HC(t,e){if(e&&("object"===NC(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qC(t)}function qC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WC=function(){return!!t})()}function UC(){return UC="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=$C(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},UC.apply(this,arguments)}function $C(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=VC(t),null===t)break;return t}function VC(t){return VC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VC(t)}var GC=new ci("code-token","hljs",{scope:ni.INLINE}),YC=function(t){zC(n,t);var e=FC(n);function n(t,r,i){var o;return _C(this,n),o=e.call(this,t,r,i),GC.add(o.domNode,i),o}return PC(n,[{key:"format",value:function(t,e){t!==n.blotName?UC(VC(n.prototype),"format",this).call(this,t,e):e?GC.add(this.domNode,e):(GC.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}},{key:"optimize",value:function(){UC(VC(n.prototype),"optimize",this).apply(this,arguments),GC.value(this.domNode)||this.unwrap()}}],[{key:"formats",value:function(t,e){while(null!=t&&t!==e.domNode){if(t.classList&&t.classList.contains(Rp.className))return UC(VC(n),"formats",this).call(this,t,e);t=t.parentNode}}}]),n}(bc);YC.blotName="code-token",YC.className="ql-token";var KC=function(t){zC(n,t);var e=FC(n);function n(){return _C(this,n),e.apply(this,arguments)}return PC(n,[{key:"format",value:function(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):UC(VC(n.prototype),"format",this).call(this,t,e)}},{key:"replaceWith",value:function(t,e){return this.formatAt(0,this.length(),YC.blotName,!1),UC(VC(n.prototype),"replaceWith",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=UC(VC(n),"create",this).call(this,t);return"string"===typeof t&&e.setAttribute("data-language",t),e}},{key:"formats",value:function(t){return t.getAttribute("data-language")||"plain"}},{key:"register",value:function(){}}]),n}(Rp),XC=function(t){zC(n,t);var e=FC(n);function n(){return _C(this,n),e.apply(this,arguments)}return PC(n,[{key:"attach",value:function(){UC(VC(n.prototype),"attach",this).call(this),this.forceNext=!1,this.scroll.emitMount(this)}},{key:"format",value:function(t,e){t===KC.blotName&&(this.forceNext=!0,this.children.forEach((function(n){n.format(t,e)})))}},{key:"formatAt",value:function(t,e,r,i){r===KC.blotName&&(this.forceNext=!0),UC(VC(n.prototype),"formatAt",this).call(this,t,e,r,i)}},{key:"highlight",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.children.head){var r=Array.from(this.domNode.childNodes).filter((function(t){return t!==e.uiNode})),i="".concat(r.map((function(t){return t.textContent})).join("\n"),"\n"),o=KC.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||null==this.cachedText){var s=this.children.reduce((function(t,e){return t.concat(Hc(e,!1))}),new Vi.a),a=t(i,o);s.diff(a).reduce((function(t,n){var r=n.retain,i=n.attributes;return r?(i&&Object.keys(i).forEach((function(n){[KC.blotName,YC.blotName].includes(n)&&e.formatAt(t,r,n,i[n])})),t+r):t}),0)}this.cachedText=i,this.forceNext=!1}}}},{key:"html",value:function(t,e){var n=this.children.find(t),r=TC(n,1),i=r[0],o=i?KC.formats(i.domNode):"plain";return'<pre data-language="'.concat(o,'">\n').concat(ec(this.code(t,e)),"\n</pre>")}},{key:"optimize",value:function(t){if(UC(VC(n.prototype),"optimize",this).call(this,t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){var e=KC.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}]),n}(_p);XC.allowedChildren=[KC],KC.requiredContainer=XC,KC.allowedChildren=[YC,sh,tc,Fl];var ZC=function(t,e,n){if("string"===typeof t.versionString){var r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value},JC=function(t){zC(n,t);var e=FC(n);function n(t,r){var i;if(_C(this,n),i=e.call(this,t,r),null==i.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");return i.languages=i.options.languages.reduce((function(t,e){var n=e.key;return t[n]=!0,t}),{}),i.highlightBlot=i.highlightBlot.bind(qC(i)),i.initListener(),i.initTimer(),i}return PC(n,[{key:"initListener",value:function(){var t=this;this.quill.on(Xd.events.SCROLL_BLOT_MOUNT,(function(e){if(e instanceof XC){var n=t.quill.root.ownerDocument.createElement("select");t.options.languages.forEach((function(t){var e=t.key,r=t.label,i=n.ownerDocument.createElement("option");i.textContent=r,i.setAttribute("value",e),n.appendChild(i)})),n.addEventListener("change",(function(){e.format(KC.blotName,n.value),t.quill.root.focus(),t.highlight(e,!0)})),null==e.uiNode&&(e.attachUI(n),e.children.head&&(n.value=KC.formats(e.children.head.domNode)))}}))}},{key:"initTimer",value:function(){var t=this,e=null;this.quill.on(Xd.events.SCROLL_OPTIMIZE,(function(){e&&clearTimeout(e),e=setTimeout((function(){t.highlight(),e=null}),t.options.interval)}))}},{key:"highlight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.quill.selection.composing){this.quill.update(Xd.sources.USER);var r=this.quill.getSelection(),i=null==e?this.quill.scroll.descendants(XC):[e];i.forEach((function(e){e.highlight(t.highlightBlot,n)})),this.quill.update(Xd.sources.SILENT),null!=r&&this.quill.setSelection(r,Xd.sources.SILENT)}}},{key:"highlightBlot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return ec(t).split("\n").reduce((function(t,n,r){return 0!==r&&t.insert("\n",OC({},Rp.blotName,e)),t.insert(n)}),new Vi.a);var n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Rp.className),n.innerHTML=ZC(this.options.hljs,e,t),Fg(this.quill.scroll,n,[function(t,e){var n=GC.value(t);return n?e.compose((new Vi.a).retain(e.length(),OC({},YC.blotName,n))):e}],[function(t,n){return t.data.split("\n").reduce((function(t,n,r){return 0!==r&&t.insert("\n",OC({},Rp.blotName,e)),t.insert(n)}),n)}],new WeakMap)}}],[{key:"register",value:function(){Xd.register(YC,!0),Xd.register(KC,!0),Xd.register(XC,!0)}}]),n}(Iu);function QC(t){return QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QC(t)}function tE(t,e){return oE(t)||iE(t,e)||nE(t,e)||eE()}function eE(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nE(t,e){if(t){if("string"===typeof t)return rE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rE(t,e):void 0}}function rE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iE(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function oE(t){if(Array.isArray(t))return t}function sE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bE(r.key),r)}}function lE(t,e,n){return e&&aE(t.prototype,e),n&&aE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cE(){return cE="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=hE(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},cE.apply(this,arguments)}function hE(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=vE(t),null===t)break;return t}function uE(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dE(t,e)}function dE(t,e){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dE(t,e)}function fE(t){var e=gE();return function(){var n,r=vE(t);if(e){var i=vE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pE(this,n)}}function pE(t,e){if(e&&("object"===QC(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mE(t)}function mE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gE=function(){return!!t})()}function vE(t){return vE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vE(t)}function yE(t,e,n){return e=bE(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bE(t){var e=wE(t,"string");return"symbol"==QC(e)?e:e+""}function wE(t,e){if("object"!=QC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=QC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}JC.DEFAULTS={hljs:function(){return window.hljs}(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var xE=function(t){uE(n,t);var e=fE(n);function n(){return sE(this,n),e.apply(this,arguments)}return lE(n,[{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"format",value:function(t,e){t===n.blotName&&e?this.domNode.setAttribute("data-row",e):cE(vE(n.prototype),"format",this).call(this,t,e)}},{key:"row",value:function(){return this.parent}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){return this.row()&&this.row().table()}}],[{key:"create",value:function(t){var e=cE(vE(n),"create",this).call(this);return t?e.setAttribute("data-row",t):e.setAttribute("data-row",NE()),e}},{key:"formats",value:function(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}}]),n}(Bc);yE(xE,"blotName","table"),yE(xE,"tagName","TD");var CE=function(t){uE(n,t);var e=fE(n);function n(){return sE(this,n),e.apply(this,arguments)}return lE(n,[{key:"checkMerge",value:function(){if(cE(vE(n.prototype),"checkMerge",this).call(this)&&null!=this.next.children.head){var t=this.children.head.formats(),e=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===r.table&&t.table===i.table}return!1}},{key:"optimize",value:function(t){var e=this;cE(vE(n.prototype),"optimize",this).call(this,t),this.children.forEach((function(t){if(null!=t.next){var n=t.formats(),r=t.next.formats();if(n.table!==r.table){var i=e.splitAfter(t);i&&i.optimize(),e.prev&&e.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){return this.parent&&this.parent.parent}}]),n}(bf);yE(CE,"blotName","table-row"),yE(CE,"tagName","TR");var EE=function(t){uE(n,t);var e=fE(n);function n(){return sE(this,n),e.apply(this,arguments)}return lE(n)}(bf);yE(EE,"blotName","table-body"),yE(EE,"tagName","TBODY");var kE=function(t){uE(n,t);var e=fE(n);function n(){return sE(this,n),e.apply(this,arguments)}return lE(n,[{key:"balanceCells",value:function(){var t=this,e=this.descendants(CE),n=e.reduce((function(t,e){return Math.max(e.children.length,t)}),0);e.forEach((function(e){new Array(n-e.children.length).fill(0).forEach((function(){var n;null!=e.children.head&&(n=xE.formats(e.children.head.domNode));var r=t.scroll.create(xE.blotName,n);e.appendChild(r),r.optimize()}))}))}},{key:"cells",value:function(t){return this.rows().map((function(e){return e.children.at(t)}))}},{key:"deleteColumn",value:function(t){var e=this.descendant(EE),n=tE(e,1),r=n[0];null!=r&&null!=r.children.head&&r.children.forEach((function(e){var n=e.children.at(t);null!=n&&n.remove()}))}},{key:"insertColumn",value:function(t){var e=this,n=this.descendant(EE),r=tE(n,1),i=r[0];null!=i&&null!=i.children.head&&i.children.forEach((function(n){var r=n.children.at(t),i=xE.formats(n.children.head.domNode),o=e.scroll.create(xE.blotName,i);n.insertBefore(o,r)}))}},{key:"insertRow",value:function(t){var e=this,n=this.descendant(EE),r=tE(n,1),i=r[0];if(null!=i&&null!=i.children.head){var o=NE(),s=this.scroll.create(CE.blotName);i.children.head.children.forEach((function(){var t=e.scroll.create(xE.blotName,o);s.appendChild(t)}));var a=i.children.at(t);i.insertBefore(s,a)}}},{key:"rows",value:function(){var t=this.children.head;return null==t?[]:t.children.map((function(t){return t}))}}]),n}(bf);function NE(){var t=Math.random().toString(36).slice(2,6);return"row-".concat(t)}function OE(t){return OE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OE(t)}function TE(t,e){return DE(t)||AE(t,e)||SE(t,e)||ME()}function ME(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SE(t,e){if(t){if("string"===typeof t)return LE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LE(t,e):void 0}}function LE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AE(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function DE(t){if(Array.isArray(t))return t}function _E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IE(r.key),r)}}function PE(t,e,n){return e&&RE(t.prototype,e),n&&RE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IE(t){var e=jE(t,"string");return"symbol"==OE(e)?e:e+""}function jE(t,e){if("object"!=OE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=OE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function zE(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BE(t,e)}function BE(t,e){return BE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},BE(t,e)}function FE(t){var e=WE();return function(){var n,r=UE(t);if(e){var i=UE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return HE(this,n)}}function HE(t,e){if(e&&("object"===OE(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qE(t)}function qE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WE=function(){return!!t})()}function UE(t){return UE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UE(t)}yE(kE,"blotName","table-container"),yE(kE,"tagName","TABLE"),kE.allowedChildren=[EE],EE.requiredContainer=kE,EE.allowedChildren=[CE],CE.requiredContainer=EE,CE.allowedChildren=[xE],xE.requiredContainer=CE;var $E=function(t){zE(n,t);var e=FE(n);function n(){var t;return _E(this,n),t=e.apply(this,arguments),t.listenBalanceCells(),t}return PE(n,[{key:"balanceTables",value:function(){this.quill.scroll.descendants(kE).forEach((function(t){t.balanceCells()}))}},{key:"deleteColumn",value:function(){var t=this.getTable(),e=TE(t,3),n=e[0],r=e[2];null!=r&&(n.deleteColumn(r.cellOffset()),this.quill.update(Xd.sources.USER))}},{key:"deleteRow",value:function(){var t=this.getTable(),e=TE(t,2),n=e[1];null!=n&&(n.remove(),this.quill.update(Xd.sources.USER))}},{key:"deleteTable",value:function(){var t=this.getTable(),e=TE(t,1),n=e[0];if(null!=n){var r=n.offset();n.remove(),this.quill.update(Xd.sources.USER),this.quill.setSelection(r,Xd.sources.SILENT)}}},{key:"getTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];var e=this.quill.getLine(t.index),n=TE(e,2),r=n[0],i=n[1];if(null==r||r.statics.blotName!==xE.blotName)return[null,null,null,-1];var o=r.parent,s=o.parent.parent;return[s,o,r,i]}},{key:"insertColumn",value:function(t){var e=this.quill.getSelection();if(e){var n=this.getTable(e),r=TE(n,3),i=r[0],o=r[1],s=r[2];if(null!=s){var a=s.cellOffset();i.insertColumn(a+t),this.quill.update(Xd.sources.USER);var l=o.rowOffset();0===t&&(l+=1),this.quill.setSelection(e.index+l,e.length,Xd.sources.SILENT)}}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(t){var e=this.quill.getSelection();if(e){var n=this.getTable(e),r=TE(n,3),i=r[0],o=r[1],s=r[2];if(null!=s){var a=o.rowOffset();i.insertRow(a+t),this.quill.update(Xd.sources.USER),t>0?this.quill.setSelection(e,Xd.sources.SILENT):this.quill.setSelection(e.index+o.children.length,e.length,Xd.sources.SILENT)}}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertTable",value:function(t,e){var n=this.quill.getSelection();if(null!=n){var r=new Array(t).fill(0).reduce((function(t){var n=new Array(e).fill("\n").join("");return t.insert(n,{table:NE()})}),(new Vi.a).retain(n.index));this.quill.updateContents(r,Xd.sources.USER),this.quill.setSelection(n.index,Xd.sources.SILENT),this.balanceTables()}}},{key:"listenBalanceCells",value:function(){var t=this;this.quill.on(Xd.events.SCROLL_OPTIMIZE,(function(e){e.some((function(e){return!!["TD","TR","TBODY","TABLE"].includes(e.target.tagName)&&(t.quill.once(Xd.events.TEXT_CHANGE,(function(e,n,r){r===Xd.sources.USER&&t.balanceTables()})),!0)}))}))}}],[{key:"register",value:function(){Xd.register(xE),Xd.register(CE),Xd.register(EE),Xd.register(kE)}}]),n}(Iu),VE=$E;function GE(t){return GE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GE(t)}function YE(t,e,n){return e=ik(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KE(t,e){return tk(t)||QE(t,e)||ZE(t,e)||XE()}function XE(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ZE(t,e){if(t){if("string"===typeof t)return JE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JE(t,e):void 0}}function JE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QE(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function tk(t){if(Array.isArray(t))return t}function ek(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ik(r.key),r)}}function rk(t,e,n){return e&&nk(t.prototype,e),n&&nk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ik(t){var e=ok(t,"string");return"symbol"==GE(e)?e:e+""}function ok(t,e){if("object"!=GE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=GE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function sk(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ak(t,e)}function ak(t,e){return ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ak(t,e)}function lk(t){var e=uk();return function(){var n,r=dk(t);if(e){var i=dk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ck(this,n)}}function ck(t,e){if(e&&("object"===GE(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hk(t)}function hk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uk=function(){return!!t})()}function dk(t){return dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dk(t)}var fk=fh("quill:toolbar"),pk=function(t){sk(n,t);var e=lk(n);function n(t,r){var i;if(ek(this,n),i=e.call(this,t,r),Array.isArray(i.options.container)){var o,s,a=document.createElement("div");a.setAttribute("role","toolbar"),gk(a,i.options.container),null===(o=t.container)||void 0===o||null===(s=o.parentNode)||void 0===s||s.insertBefore(a,t.container),i.container=a}else"string"===typeof i.options.container?i.container=document.querySelector(i.options.container):i.container=i.options.container;return i.container instanceof HTMLElement?(i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},i.options.handlers&&Object.keys(i.options.handlers).forEach((function(t){var e,n=null===(e=i.options.handlers)||void 0===e?void 0:e[t];n&&i.addHandler(t,n)})),Array.from(i.container.querySelectorAll("button, select")).forEach((function(t){i.attach(t)})),i.quill.on(Xd.events.EDITOR_CHANGE,(function(){var t=i.quill.selection.getRange(),e=KE(t,1),n=e[0];i.update(n)})),i):(fk.error("Container required for toolbar",i.options),ck(i))}return rk(n,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,n=Array.from(t.classList).find((function(t){return 0===t.indexOf("ql-")}));if(n)if(n=n.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null!=this.handlers[n]||null!=this.quill.scroll.query(n)){var r="SELECT"===t.tagName?"change":"click";t.addEventListener(r,(function(r){var i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var o=t.options[t.selectedIndex];i=!o.hasAttribute("selected")&&(o.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),r.preventDefault();e.quill.focus();var s=e.quill.selection.getRange(),a=KE(s,1),l=a[0];if(null!=e.handlers[n])e.handlers[n].call(e,i);else if(e.quill.scroll.query(n).prototype instanceof Ii){if(i=prompt("Enter ".concat(n)),!i)return;e.quill.updateContents((new Vi.a).retain(l.index).delete(l.length).insert(YE({},n,i)),Xd.sources.USER)}else e.quill.format(n,i,Xd.sources.USER);e.update(l)})),this.controls.push([n,t])}else fk.warn("ignoring attaching to nonexistent format",n,t)}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(n){var r=KE(n,2),i=r[0],o=r[1];if("SELECT"===o.tagName){var s=null;if(null==t)s=null;else if(null==e[i])s=o.querySelector("option[selected]");else if(!Array.isArray(e[i])){var a=e[i];"string"===typeof a&&(a=a.replace(/"/g,'\\"')),s=o.querySelector('option[value="'.concat(a,'"]'))}null==s?(o.value="",o.selectedIndex=-1):s.selected=!0}else if(null==t)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){var l=e[i],c=l===o.getAttribute("value")||null!=l&&l.toString()===o.getAttribute("value")||null==l&&!o.getAttribute("value");o.classList.toggle("ql-active",c),o.setAttribute("aria-pressed",c.toString())}else{var h=null!=e[i];o.classList.toggle("ql-active",h),o.setAttribute("aria-pressed",h.toString())}}))}}]),n}(Iu);function mk(t,e,n){var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-".concat(e)),r.setAttribute("aria-pressed","false"),null!=n?(r.value=n,r.setAttribute("aria-label","".concat(e,": ").concat(n))):r.setAttribute("aria-label",e),t.appendChild(r)}function gk(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((function(t){if("string"===typeof t)mk(n,t);else{var e=Object.keys(t)[0],r=t[e];Array.isArray(r)?vk(n,e,r):mk(n,e,r)}})),t.appendChild(n)}))}function vk(t,e,n){var r=document.createElement("select");r.classList.add("ql-".concat(e)),n.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),r.appendChild(e)})),t.appendChild(r)}pk.DEFAULTS={},pk.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0===e.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(e){null!=t.quill.scroll.query(e,ni.INLINE)&&t.quill.format(e,!1,Xd.sources.USER)}))}else this.quill.removeFormat(e.index,e.length,Xd.sources.USER)},direction:function(t){var e=this.quill.getFormat(),n=e.align;"rtl"===t&&null==n?this.quill.format("align","right",Xd.sources.USER):t||"right"!==n||this.quill.format("align",!1,Xd.sources.USER),this.quill.format("direction",t,Xd.sources.USER)},indent:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){var i="+1"===t?1:-1;"rtl"===n.direction&&(i*=-1),this.quill.format("indent",r+i,Xd.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Xd.sources.USER)},list:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,Xd.sources.USER):this.quill.format("list","unchecked",Xd.sources.USER):this.quill.format("list",t,Xd.sources.USER)}}};var yk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',bk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',wk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',xk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Ck='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Ek='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',kk='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Nk='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Ok='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Tk='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Mk='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',Sk='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Lk='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Ak='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Dk='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',_k='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Rk='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Pk='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Ik='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',jk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',zk='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Bk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Fk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Hk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',qk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Wk='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Uk='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',$k='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Vk='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Gk='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Yk='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Kk='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Xk='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Zk={align:{"":yk,center:bk,right:wk,justify:xk},background:Ck,blockquote:Ek,bold:kk,clean:Nk,code:Ok,"code-block":Ok,color:Tk,direction:{"":Mk,rtl:Sk},formula:Lk,header:{1:Ak,2:Dk,3:_k,4:Rk,5:Pk,6:Ik},italic:jk,image:zk,indent:{"+1":Bk,"-1":Fk},link:Hk,list:{bullet:qk,check:Wk,ordered:Uk},script:{sub:$k,super:Vk},strike:Gk,table:Yk,underline:Kk,video:Xk};function Jk(t){return Jk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jk(t)}function Qk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nN(r.key),r)}}function eN(t,e,n){return e&&tN(t.prototype,e),n&&tN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nN(t){var e=rN(t,"string");return"symbol"==Jk(e)?e:e+""}function rN(t,e){if("object"!=Jk(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var iN='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',oN=0;function sN(t,e){t.setAttribute(e,"".concat(!("true"===t.getAttribute(e))))}var aN=function(){function t(e){var n=this;Qk(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.key){case"Enter":n.togglePicker();break;case"Escape":n.escape(),t.preventDefault();break;default:}})),this.select.addEventListener("change",this.update.bind(this))}return eN(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),sN(this.label,"aria-expanded"),sN(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");var r=t.getAttribute("value");return r&&n.setAttribute("data-value",r),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",(function(){e.selectItem(n,!0)})),n.addEventListener("keydown",(function(t){switch(t.key){case"Enter":e.selectItem(n,!0),t.preventDefault();break;case"Escape":e.escape(),t.preventDefault();break;default:}})),n}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=iN,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-".concat(oN),oN+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach((function(n){var r=t.buildItem(n);e.appendChild(r),!0===n.selected&&t.selectItem(r)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;Array.from(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}},{key:"update",value:function(){var t;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var n=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),t}(),lN=aN;function cN(t){return cN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cN(t)}function hN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fN(r.key),r)}}function dN(t,e,n){return e&&uN(t.prototype,e),n&&uN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fN(t){var e=pN(t,"string");return"symbol"==cN(e)?e:e+""}function pN(t,e){if("object"!=cN(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function mN(){return mN="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=gN(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},mN.apply(this,arguments)}function gN(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=EN(t),null===t)break;return t}function vN(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yN(t,e)}function yN(t,e){return yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yN(t,e)}function bN(t){var e=CN();return function(){var n,r=EN(t);if(e){var i=EN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wN(this,n)}}function wN(t,e){if(e&&("object"===cN(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xN(t)}function xN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CN=function(){return!!t})()}function EN(t){return EN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EN(t)}var kN=function(t){vN(n,t);var e=bN(n);function n(t,r){var i;return hN(this,n),i=e.call(this,t),i.label.innerHTML=r,i.container.classList.add("ql-color-picker"),Array.from(i.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return dN(n,[{key:"buildItem",value:function(t){var e=mN(EN(n.prototype),"buildItem",this).call(this,t);return e.style.backgroundColor=t.getAttribute("value")||"",e}},{key:"selectItem",value:function(t,e){mN(EN(n.prototype),"selectItem",this).call(this,t,e);var r=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";r&&("line"===r.tagName?r.style.stroke=i:r.style.fill=i)}}]),n}(lN),NN=kN;function ON(t){return ON="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ON(t)}function TN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LN(r.key),r)}}function SN(t,e,n){return e&&MN(t.prototype,e),n&&MN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LN(t){var e=AN(t,"string");return"symbol"==ON(e)?e:e+""}function AN(t,e){if("object"!=ON(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ON(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function DN(){return DN="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=_N(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},DN.apply(this,arguments)}function _N(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=FN(t),null===t)break;return t}function RN(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PN(t,e)}function PN(t,e){return PN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PN(t,e)}function IN(t){var e=BN();return function(){var n,r=FN(t);if(e){var i=FN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jN(this,n)}}function jN(t,e){if(e&&("object"===ON(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zN(t)}function zN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BN=function(){return!!t})()}function FN(t){return FN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FN(t)}var HN=function(t){RN(n,t);var e=IN(n);function n(t,r){var i;return TN(this,n),i=e.call(this,t),i.container.classList.add("ql-icon-picker"),Array.from(i.container.querySelectorAll(".ql-picker-item")).forEach((function(t){t.innerHTML=r[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return SN(n,[{key:"selectItem",value:function(t,e){DN(FN(n.prototype),"selectItem",this).call(this,t,e);var r=t||this.defaultItem;if(null!=r){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}]),n}(lN),qN=HN;function WN(t){return WN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WN(t)}function UN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GN(r.key),r)}}function VN(t,e,n){return e&&$N(t.prototype,e),n&&$N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GN(t){var e=YN(t,"string");return"symbol"==WN(e)?e:e+""}function YN(t,e){if("object"!=WN(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=WN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var KN=function(t){var e=getComputedStyle(t,null),n=e.overflowY;return"visible"!==n&&"clip"!==n},XN=function(){function t(e,n){var r=this;UN(this,t),this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,KN(this.quill.root)&&this.quill.root.addEventListener("scroll",(function(){r.root.style.marginTop="".concat(-1*r.quill.root.scrollTop,"px")})),this.hide()}return VN(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left="".concat(e,"px"),this.root.style.top="".concat(n,"px"),this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),o=0;if(i.right>r.right&&(o=r.right-i.right,this.root.style.left="".concat(e+o,"px")),i.left<r.left&&(o=r.left-i.left,this.root.style.left="".concat(e+o,"px")),i.bottom>r.bottom){var s=i.bottom-i.top,a=t.bottom-t.top+s;this.root.style.top="".concat(n-a,"px"),this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}(),ZN=XN;function JN(t){return JN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JN(t)}function QN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nO(r.key),r)}}function eO(t,e,n){return e&&tO(t.prototype,e),n&&tO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nO(t){var e=rO(t,"string");return"symbol"==JN(e)?e:e+""}function rO(t,e){if("object"!=JN(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=JN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function iO(){return iO="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=oO(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},iO.apply(this,arguments)}function oO(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=dO(t),null===t)break;return t}function sO(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aO(t,e)}function aO(t,e){return aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aO(t,e)}function lO(t){var e=uO();return function(){var n,r=dO(t);if(e){var i=dO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cO(this,n)}}function cO(t,e){if(e&&("object"===JN(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hO(t)}function hO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uO=function(){return!!t})()}function dO(t){return dO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dO(t)}var fO=[!1,"center","right","justify"],pO=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],mO=[!1,"serif","monospace"],gO=["1","2","3",!1],vO=["small",!1,"large","huge"],yO=function(t){sO(n,t);var e=lO(n);function n(t,r){var i;QN(this,n),i=e.call(this,t,r);var o=function e(n){document.body.contains(t.root)?(null==i.tooltip||i.tooltip.root.contains(n.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(t){t.container.contains(n.target)||t.close()}))):document.body.removeEventListener("click",e)};return t.emitter.listenDOM("click",document.body,o),i}return eO(n,[{key:"addModule",value:function(t){var e=iO(dO(n.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(e),e}},{key:"buildButtons",value:function(t,e){Array.from(t).forEach((function(t){var n=t.getAttribute("class")||"";n.split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice("ql-".length),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"===typeof e[n])t.innerHTML=e[n];else{var r=t.value||"";null!=r&&e[n][r]&&(t.innerHTML=e[n][r])}}))}))}},{key:"buildPickers",value:function(t,e){var n=this;this.pickers=Array.from(t).map((function(t){if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&xO(t,fO),"object"===JN(e.align)))return new qN(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&xO(t,pO,"background"===n?"#ffffff":"#000000"),new NN(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?xO(t,mO):t.classList.contains("ql-header")?xO(t,gO):t.classList.contains("ql-size")&&xO(t,vO)),new lN(t)}));var r=function(){n.pickers.forEach((function(t){t.update()}))};this.quill.on(_h.events.EDITOR_CHANGE,r)}}]),n}(yd);yO.DEFAULTS=ei({},yd.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",(function(){var n=t.quill.getSelection(!0);t.quill.uploader.upload(n,e.files),e.value=""})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var bO=function(t){sO(n,t);var e=lO(n);function n(t,r){var i;return QN(this,n),i=e.call(this,t,r),i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return eO(n,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){"Enter"===e.key?(t.save(),e.preventDefault()):"Escape"===e.key&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide(),this.restoreFocus()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=this.textbox){null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");var n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-".concat(t))||""),this.root.setAttribute("data-mode",t)}}},{key:"restoreFocus",value:function(){this.quill.focus({preventScroll:!0})}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,_h.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,_h.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=wO(t);case"formula":if(!t)break;var n=this.quill.getSelection(!0);if(null!=n){var r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),t,_h.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",_h.sources.USER),this.quill.setSelection(r+2,_h.sources.USER)}break;default:}this.textbox.value="",this.hide()}}]),n}(ZN);function wO(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?"".concat(e[1]||"https","://www.youtube.com/embed/").concat(e[2],"?showinfo=0"):(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?"".concat(e[1]||"https","://player.vimeo.com/video/").concat(e[2],"/"):t}function xO(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var r=document.createElement("option");e===n?r.setAttribute("selected","selected"):r.setAttribute("value",String(e)),t.appendChild(r)}))}function CO(t){return CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CO(t)}function EO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IO(r.key),r)}}function NO(t,e,n){return e&&kO(t.prototype,e),n&&kO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function OO(){return OO="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=TO(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},OO.apply(this,arguments)}function TO(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=RO(t),null===t)break;return t}function MO(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SO(t,e)}function SO(t,e){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SO(t,e)}function LO(t){var e=_O();return function(){var n,r=RO(t);if(e){var i=RO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return AO(this,n)}}function AO(t,e){if(e&&("object"===CO(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return DO(t)}function DO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_O=function(){return!!t})()}function RO(t){return RO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},RO(t)}function PO(t,e,n){return e=IO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IO(t){var e=jO(t,"string");return"symbol"==CO(e)?e:e+""}function jO(t,e){if("object"!=CO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=CO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var zO=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],BO=function(t){MO(n,t);var e=LO(n);function n(t,r){var i;return EO(this,n),i=e.call(this,t,r),i.quill.on(_h.events.EDITOR_CHANGE,(function(t,e,n,r){if(t===_h.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&r===_h.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width="".concat(i.root.offsetWidth,"px");var o=i.quill.getLines(e.index,e.length);if(1===o.length){var s=i.quill.getBounds(e);null!=s&&i.position(s)}else{var a=o[o.length-1],l=i.quill.getIndex(a),c=Math.min(a.length()-1,e.index+e.length-l),h=i.quill.getBounds(new Zh(l,c));null!=h&&i.position(h)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return NO(n,[{key:"listen",value:function(){var t=this;OO(RO(n.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(_h.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();if(null!=e){var n=t.quill.getBounds(e);null!=n&&t.position(n)}}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var e=OO(RO(n.prototype),"position",this).call(this,t),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",0!==e&&(r.style.marginLeft="".concat(-1*e-r.offsetWidth/2,"px")),e}}]),n}(bO);PO(BO,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));var FO=function(t){MO(n,t);var e=LO(n);function n(t,r){var i;return EO(this,n),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=zO),i=e.call(this,t,r),i.quill.container.classList.add("ql-bubble"),i}return NO(n,[{key:"extendToolbar",value:function(t){this.tooltip=new BO(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Zk),this.buildPickers(t.container.querySelectorAll("select"),Zk))}}]),n}(yO);function HO(t){return HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HO(t)}function qO(t,e){return GO(t)||VO(t,e)||UO(t,e)||WO()}function WO(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function UO(t,e){if(t){if("string"===typeof t)return $O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$O(t,e):void 0}}function $O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VO(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function GO(t){if(Array.isArray(t))return t}function YO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aT(r.key),r)}}function XO(t,e,n){return e&&KO(t.prototype,e),n&&KO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZO(){return ZO="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=JO(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ZO.apply(this,arguments)}function JO(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=oT(t),null===t)break;return t}function QO(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tT(t,e)}function tT(t,e){return tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tT(t,e)}function eT(t){var e=iT();return function(){var n,r=oT(t);if(e){var i=oT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nT(this,n)}}function nT(t,e){if(e&&("object"===HO(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rT(t)}function rT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iT=function(){return!!t})()}function oT(t){return oT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oT(t)}function sT(t,e,n){return e=aT(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aT(t){var e=lT(t,"string");return"symbol"==HO(e)?e:e+""}function lT(t,e){if("object"!=HO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=HO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}FO.DEFAULTS=ei({},yO.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Xd.sources.USER)}}}}});var cT=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],hT=function(t){QO(n,t);var e=eT(n);function n(){var t;YO(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),sT(rT(t),"preview",t.root.querySelector("a.ql-preview")),t}return XO(n,[{key:"listen",value:function(){var t=this;ZO(oT(n.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var n=t.linkRange;t.restoreFocus(),t.quill.formatText(n,"link",!1,_h.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(_h.events.SELECTION_CHANGE,(function(e,n,r){if(null!=e){if(0===e.length&&r===_h.sources.USER){var i=t.quill.scroll.descendant(Nw,e.index),o=qO(i,2),s=o[0],a=o[1];if(null!=s){t.linkRange=new Zh(e.index-a,s.length());var l=Nw.formats(s.domNode);t.preview.textContent=l,t.preview.setAttribute("href",l),t.show();var c=t.quill.getBounds(t.linkRange);return void(null!=c&&t.position(c))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){ZO(oT(n.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),n}(bO);sT(hT,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));var uT=function(t){QO(n,t);var e=eT(n);function n(t,r){var i;return YO(this,n),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=cT),i=e.call(this,t,r),i.quill.container.classList.add("ql-snow"),i}return XO(n,[{key:"extendToolbar",value:function(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Zk),this.buildPickers(t.container.querySelectorAll("select"),Zk),this.tooltip=new hT(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(function(e,n){t.handlers.link.call(t,!n.format.link)})))}}]),n}(yO);uT.DEFAULTS=ei({},yO.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0===e.length)return;var n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:".concat(n));var r=this.quill.theme.tooltip;r.edit("link",n)}else this.quill.format("link",!1,Xd.sources.USER)}}}}});var dT=uT;my.register({"attributors/attribute/direction":jp,"attributors/class/align":Kf,"attributors/class/background":mp,"attributors/class/color":fp,"attributors/class/direction":zp,"attributors/class/font":nm,"attributors/class/size":om,"attributors/style/align":Xf,"attributors/style/background":gp,"attributors/style/color":pp,"attributors/style/direction":Bp,"attributors/style/font":im,"attributors/style/size":sm},!0),my.register({"formats/align":Kf,"formats/direction":zp,"formats/indent":_y,"formats/background":gp,"formats/color":pp,"formats/font":nm,"formats/size":om,"formats/blockquote":Ky,"formats/code-block":Rp,"formats/header":ub,"formats/list":Mb,"formats/bold":Vb,"formats/code":Pp,"formats/italic":lw,"formats/link":Nw,"formats/script":Uw,"formats/strike":sx,"formats/underline":Cx,"formats/formula":Fx,"formats/image":oC,"formats/video":kC,"modules/syntax":JC,"modules/table":VE,"modules/toolbar":pk,"themes/bubble":FO,"themes/snow":dT,"ui/icons":Zk,"ui/picker":lN,"ui/icon-picker":qN,"ui/color-picker":NN,"ui/tooltip":ZN},!0);var fT=my,pT=(n("8096"),n("d056")),mT=n("09a0"),gT=n("5381");let vT=!1,yT=["宋体, SimSun, Songti SC","微软雅黑, Microsoft YaHei","楷体, 楷体_GB2312, SimKai, STKaiti","黑体, SimHei, Heiti SC","隶书, SimLi","andale mono","arial, helvetica, sans-serif","arial black, avant garde","comic sans ms","impact, chicago","times new roman","sans-serif","serif"],bT=new Array(100).fill(0).map((t,e)=>e+"px");class wT{constructor({mindMap:t,pluginOpt:e}){this.mindMap=t,this.pluginOpt=e,this.textEditNode=null,this.showTextEdit=!1,this.quill=null,this.range=null,this.lastRange=null,this.pasteUseRange=null,this.node=null,this.isInserting=!1,this.styleEl=null,this.cacheEditingText="",this.lostStyle=!1,this.isCompositing=!1,this.textNodePaddingX=6,this.textNodePaddingY=4,this.initOpt(),this.extendQuill(),this.appendCss(),this.bindEvent(),this.mindMap.opt.data&&(this.mindMap.opt.data=this.handleSetData(this.mindMap.opt.data))}bindEvent(){this.onCompositionStart=this.onCompositionStart.bind(this),this.onCompositionUpdate=this.onCompositionUpdate.bind(this),this.onCompositionEnd=this.onCompositionEnd.bind(this),window.addEventListener("compositionstart",this.onCompositionStart),window.addEventListener("compositionupdate",this.onCompositionUpdate),window.addEventListener("compositionend",this.onCompositionEnd)}unbindEvent(){window.removeEventListener("compositionstart",this.onCompositionStart),window.removeEventListener("compositionupdate",this.onCompositionUpdate),window.removeEventListener("compositionend",this.onCompositionEnd)}appendCss(){this.mindMap.appendCss("richText","\n      .smm-richtext-node-wrap {\n        word-break: break-all;\n      }\n\n      .smm-richtext-node-wrap p {\n        font-family: auto;\n      }\n      ");let t="\n      .ql-editor {\n        overflow: hidden;\n        padding: 0;\n        height: auto;\n        line-height: normal;\n        -webkit-user-select: text;\n      }\n      \n      .ql-container {\n        height: auto;\n        font-size: inherit;\n      }\n\n      .ql-container.ql-snow {\n        border: none;\n      }\n\n      .smm-richtext-node-edit-wrap p {\n        font-family: auto;\n      }\n    ";this.styleEl=document.createElement("style"),this.styleEl.type="text/css",this.styleEl.innerHTML=t,document.head.appendChild(this.styleEl)}initOpt(){this.pluginOpt.fontFamilyList&&Array.isArray(this.pluginOpt.fontFamilyList)&&(yT=this.pluginOpt.fontFamilyList),this.pluginOpt.fontSizeList&&Array.isArray(this.pluginOpt.fontSizeList)&&(bT=this.pluginOpt.fontSizeList)}extendQuill(){if(vT)return;vT=!0,this.extendFont([]);const t=fT.import("attributors/class/size");t.whitelist=bT,fT.register(t,!0);const e=fT.import("attributors/style/size");e.whitelist=bT,fT.register(e,!0)}extendFont(t=[],e=!1){yT=e?[...t]:[...yT,...t];const n=fT.import("attributors/class/font");n.whitelist=yT,fT.register(n,!0);const r=fT.import("attributors/style/font");r.whitelist=yT,fT.register(r,!0)}showEditText({node:t,rect:e,isInserting:n,isFromKeyDown:r,isFromScale:i}){if(this.showTextEdit)return;let{richTextEditFakeInPlace:o,customInnerElsAppendTo:s,nodeTextEditZIndex:a,textAutoWrapWidth:l,selectTextOnEnterEditText:c,transformRichTextOnEnterEdit:h,openRealtimeRenderOnNodeTextEdit:u}=this.mindMap.opt;l=t.hasCustomWidth()?t.customTextWidth:l,this.node=t,this.isInserting=n,e||(e=t._textData.node.node.getBoundingClientRect()),i||this.mindMap.emit("before_show_text_edit"),this.mindMap.renderer.textEdit.registerTmpShortcut();let d=t._textData.node,f=d.attr("data-width"),p=d.attr("data-height"),m=e.width/f,g=e.height/p,v=this.textNodePaddingX,y=this.textNodePaddingY;if(o){let e=t.getPaddingVale();v=e.paddingX,y=e.paddingY}if(!this.textEditNode){this.textEditNode=document.createElement("div"),this.textEditNode.classList.add("smm-richtext-node-edit-wrap"),this.textEditNode.style.cssText=`\n        position:fixed; \n        box-sizing: border-box; \n        ${u?"":"box-shadow: 0 0 20px rgba(0,0,0,.5);"}\n        outline: none; \n        word-break: break-all;\n        padding: ${y}px ${v}px;\n      `,this.textEditNode.addEventListener("click",t=>{t.stopPropagation()}),this.textEditNode.addEventListener("mousedown",t=>{t.stopPropagation()}),this.textEditNode.addEventListener("keydown",t=>{this.mindMap.renderer.textEdit.checkIsAutoEnterTextEditKey(t)&&t.stopPropagation()});const t=s||document.body;t.appendChild(this.textEditNode)}this.textEditNode.style.marginLeft=`-${v*m}px`,this.textEditNode.style.marginTop=`-${y*g}px`,this.textEditNode.style.zIndex=a,u||(this.textEditNode.style.background=this.mindMap.renderer.textEdit.getBackground(t)),this.textEditNode.style.minWidth=f+2*v+"px",this.textEditNode.style.minHeight=p+"px",this.textEditNode.style.left=e.left+"px",this.textEditNode.style.top=e.top+"px",this.textEditNode.style.display="block",this.textEditNode.style.maxWidth=l+2*v+"px",this.textEditNode.style.transform=`scale(${m}, ${g})`,this.textEditNode.style.transformOrigin="left top",o&&(this.textEditNode.style.borderRadius=(t.style.merge("borderRadius")||5)+"px","roundedRectangle"==t.style.merge("shape")&&(this.textEditNode.style.borderRadius=(t.height||50)+"px"));let b=t.getData("text");"function"===typeof h&&(b=h(b));const w=Object(pT["T"])(b),x=!t.getData("richText")&&!w;if(w&&(this.lostStyle=!0),x){let t=String(b).split(/\n/gim).join("<br>"),e=`<p>${t}</p>`;this.textEditNode.innerHTML=this.cacheEditingText||e}else this.textEditNode.innerHTML=this.cacheEditingText||b;this.initQuillEditor(),document.querySelector(".ql-editor").style.minHeight=p+"px",this.showTextEdit=!0,this.focus(n||c&&!r?0:null),x&&this.setTextStyleIfNotRichText(t),this.cacheEditingText=""}onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t){this.textEditNode&&(this.textEditNode.style.background=t?"transparent":this.node?this.mindMap.renderer.textEdit.getBackground(this.node):"",this.textEditNode.style.boxShadow=t?"none":"0 0 20px rgba(0,0,0,.5)")}updateTextEditNode(){if(!this.node)return;const t=this.node._textData.node,e=t.node.getBoundingClientRect(),n=t.attr("data-width"),r=t.attr("data-height");this.textEditNode.style.minWidth=n+2*this.textNodePaddingX+"px",this.textEditNode.style.minHeight=r+"px",this.textEditNode.style.left=e.left+"px",this.textEditNode.style.top=e.top+"px"}removeTextEditEl(){if(!this.textEditNode)return;const t=this.mindMap.opt.customInnerElsAppendTo||document.body;t.removeChild(this.textEditNode)}setTextStyleIfNotRichText(t){let e={font:t.style.merge("fontFamily"),color:t.style.merge("color"),italic:"italic"===t.style.merge("fontStyle"),bold:"bold"===t.style.merge("fontWeight"),size:t.style.merge("fontSize")+"px",underline:"underline"===t.style.merge("textDecoration"),strike:"line-through"===t.style.merge("textDecoration")};this.pureFormatAllText(e)}getEditText(){let t=this.quill.container.firstChild.innerHTML;return t.replace(/<p><br><\/p>$/,"")}sortHtmlNodeStyles(t){return t.replace(/(<[^<>]+\s+style=")([^"]+)("\s*>)/g,(t,e,n,r)=>{let i=n.match(/[^:]+:[^:]+;/g)||[];return i=i.map(t=>t.trim()),i.sort(),e+i.join("")+r})}hideEditText(t){if(!this.showTextEdit)return;const{beforeHideRichTextEdit:e}=this.mindMap.opt;"function"===typeof e&&e(this);let n=this.getEditText();n=this.sortHtmlNodeStyles(n);const r=t&&t.length>0?t:[this.node],i=this.node;this.textEditNode.style.display="none",this.showTextEdit=!1,this.mindMap.emit("rich_text_selection_change",!1),this.node=null,this.isInserting=!1,r.forEach(t=>{this.mindMap.execCommand("SET_NODE_TEXT",t,n,!0),this.mindMap.render()}),this.mindMap.emit("hide_text_edit",this.textEditNode,r,i)}initQuillEditor(){this.quill=new fT(this.textEditNode,{modules:{toolbar:!1,keyboard:{bindings:{enter:{key:"Enter",handler:function(){}},shiftEnter:{key:"Enter",shiftKey:!0,handler:function(t,e){const n=Object.keys(e.format).reduce((t,n)=>(this.quill.scroll.query(n,ni.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t),{}),r=(new Vi.a).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(r,fT.sources.USER),this.quill.setSelection(t.index+1,fT.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach(t=>{null==n[t]&&(Array.isArray(e.format[t])||"code"!==t&&"link"!==t&&this.quill.format(t,e.format[t],fT.sources.USER))})}},tab:{key:9,handler:function(){}}}}},theme:"snow"}),this.quill.root.addEventListener("copy",t=>{t.preventDefault();const e=window.getSelection(),n=e.toString();try{const n=e.getRangeAt(0),r=document.createElement("div");r.appendChild(n.cloneContents());const i=Object(pT["Z"])(r.innerHTML);t.clipboardData.setData("text/plain",i)}catch(r){t.clipboardData.setData("text/plain",n)}}),this.quill.on("selection-change",t=>{if(!this.isInserting)if(this.lastRange=this.range,this.range=null,t){this.pasteUseRange=t;let e=this.quill.getBounds(t.index,t.length),n=this.textEditNode.getBoundingClientRect(),r={left:e.left+n.left,top:e.top+n.top,right:e.right+n.left,bottom:e.bottom+n.top,width:e.width},i=this.quill.getFormat(t.index,t.length),o=!1;0==t.length?o=!1:(this.range=t,o=!0),this.mindMap.emit("rich_text_selection_change",o,r,i)}else this.mindMap.emit("rich_text_selection_change",!1,null,null)}),this.quill.on("text-change",()=>{let t=this.quill.getContents(),e=t.ops.length;e<=0||1===e&&"\n"===t.ops[0].insert?(this.lostStyle=!0,this.syncFormatToNodeConfig(null,!0)):this.lostStyle&&!this.isCompositing&&(this.setTextStyleIfNotRichText(this.node),this.lostStyle=!1),this.mindMap.emit("node_text_edit_change",{node:this.node,text:this.getEditText(),richText:!0})}),this.quill.clipboard.addMatcher(Node.ELEMENT_NODE,(t,e)=>{let n=[],r=this.getPasteTextStyle();return e.ops.forEach(t=>{t.insert&&"string"===typeof t.insert&&n.push({attributes:{...r},insert:this.formatPasteText(t.insert)})}),e.ops=n,e}),this.quill.root.addEventListener("paste",t=>{t.clipboardData&&t.clipboardData.files&&t.clipboardData.files.length&&t.preventDefault()},!0)}getPasteTextStyle(){return this.pasteUseRange?this.quill.getFormat(this.pasteUseRange.index,this.pasteUseRange.length):{}}formatPasteText(t){const{isSmm:e,data:n}=Object(pT["j"])(t);return e&&n[0]&&n[0].data?Object(pT["I"])(n[0].data.text):t}onCompositionStart(){this.showTextEdit&&(this.isCompositing=!0)}onCompositionUpdate(){this.showTextEdit&&this.node&&this.mindMap.emit("node_text_edit_change",{node:this.node,text:this.getEditText(),richText:!0})}onCompositionEnd(){this.showTextEdit&&(this.isCompositing=!1,this.lostStyle&&this.setTextStyleIfNotRichText(this.node))}selectAll(){this.quill.setSelection(0,this.quill.getLength())}focus(t){let e=this.quill.getLength();this.quill.setSelection("number"===typeof t?t:e,e)}formatText(t={},e=!1,n=!1){if(!this.range&&!this.lastRange)return;n||this.syncFormatToNodeConfig(t,e);let r=!this.range,i=r?this.lastRange:this.range;e?this.quill.removeFormat(i.index,i.length):this.quill.formatText(i.index,i.length,t),r&&this.quill.setSelection(this.lastRange.index,this.lastRange.length)}removeFormat(){this.formatText({},!0);const t={};this.node&&["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","color"].forEach(e=>{t[e]=this.node.style.merge(e)});const e=this.normalStyleToRichTextStyle(t);this.formatText(e,!1,!0)}formatRangeText(t,e={}){t&&(this.syncFormatToNodeConfig(e),this.quill.formatText(t.index,t.length,e))}formatAllText(t={}){this.syncFormatToNodeConfig(t),this.pureFormatAllText(t)}pureFormatAllText(t={}){this.quill.formatText(0,this.quill.getLength(),t)}syncFormatToNodeConfig(t,e){if(this.node)if(e)["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","color"].forEach(t=>{delete this.node.nodeData.data[t]});else{let e=this.richTextStyleToNormalStyle(t);this.mindMap.execCommand("SET_NODE_DATA",this.node,e)}}normalStyleToRichTextStyle(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];switch(n){case"fontFamily":e.font=r;break;case"fontSize":e.size=r+"px";break;case"fontWeight":e.bold="bold"===r;break;case"fontStyle":e.italic="italic"===r;break;case"textDecoration":e.underline="underline"===r,e.strike="line-through"===r;break;case"color":e.color=r;break;default:break}}),e}richTextStyleToNormalStyle(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];switch(n){case"font":e.fontFamily=r;break;case"size":e.fontSize=parseFloat(r);break;case"bold":e.fontWeight=r?"bold":"normal";break;case"italic":e.fontStyle=r?"italic":"normal";break;case"underline":e.textDecoration=r?"underline":"none";break;case"strike":e.textDecoration=r?"line-through":"none";break;case"color":e.color=r;break;default:break}}),e}setNotActiveNodeStyle(t,e){const n=this.normalStyleToRichTextStyle(e);Object.keys(n).length>0&&(this.showEditText({node:t}),this.formatAllText(n),this.hideEditText([t]))}checkNodeHasCustomRichTextStyle(t){const e=["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","color"],n=t instanceof gT["a"]?t.getData():t;for(let r=0;r<e.length;r++)if(void 0!==n[e[r]])return!0;return!1}transformAllNodesToNormalNode(){this.mindMap.renderer.renderTree&&(Object(pT["qb"])(this.mindMap.renderer.renderTree,null,t=>{if(t.data.richText&&(t.data.richText=!1,t.data.text=Object(pT["I"])(t.data.text)),t.data){const e=Object(pT["v"])(t.data);e.forEach(t=>{t.richText=!1,t.text=Object(pT["I"])(t.text)})}},null,!0,0,0),this.mindMap.command.clearHistory(),this.mindMap.command.addHistory(),this.mindMap.render(null,mT["a"].TRANSFORM_TO_NORMAL_NODE))}handleSetData(t){let e=t=>{if(t.data&&!t.data.richText&&(t.data.richText=!0,t.data.resetRichText=!0),t.data){const e=Object(pT["v"])(t.data);e.forEach(t=>{t.richText=!0,t.resetRichText=!0})}t.children&&t.children.length>0&&Array.from(t.children).forEach(t=>{e(t)})};return e(t),t}beforePluginRemove(){this.transformAllNodesToNormalNode(),document.head.removeChild(this.styleEl),this.unbindEvent(),this.mindMap.removeAppendCss("richText")}beforePluginDestroy(){document.head.removeChild(this.styleEl),this.unbindEvent()}}wT.instanceName="richText";e["a"]=wT},"7b09":function(t,e,n){"use strict";var r=n("d056"),i=n("4378");const o=t=>{let e=String(t).split(/\s+/);return e.map(t=>{if(/^[\d.]+/.test(t)){let e=/^([\d.]+)(.*)$/.exec(t);return[Number(e[1]),e[2]]}return t})},s=(t,e)=>t*e,a=(t,e)=>e/t,l={left:0,top:0,center:50,bottom:100,right:100},c=({backgroundSize:t,drawOpt:e,imageRatio:n,canvasWidth:r,canvasHeight:i,canvasRatio:l})=>{if(t){let c=o(t);if("auto"===c[0]&&"auto"===c[1])return;if("cover"===c[0])return void(n>l?(e.height=i,e.width=s(n,i)):(e.width=r,e.height=a(n,r)));if("contain"===c[0])return void(n>l?(e.width=r,e.height=a(n,r)):(e.height=i,e.width=s(n,i)));let h=-1;c[0]&&(Array.isArray(c[0])?"%"===c[0][1]?(e.width=c[0][0]/100*r,h=e.width):(e.width=c[0][0],h=c[0][0]):"auto"===c[0]&&c[1]&&("%"===c[1][1]?e.width=s(n,c[1][0]/100*i):e.width=s(n,c[1][0]))),c[1]&&Array.isArray(c[1])?"%"===c[1][1]?e.height=c[1][0]/100*i:e.height=c[1][0]:-1!==h&&(e.height=a(n,h))}},h=({backgroundPosition:t,drawOpt:e,imgWidth:n,imgHeight:r,canvasWidth:i,canvasHeight:s})=>{if(t){let a=o(t);if(a=a.map(t=>"string"===typeof t&&void 0!==l[t]?[l[t],"%"]:t),Array.isArray(a[0])){if(1===a.length&&a.push([50,"%"]),"%"===a[0][1]){let t=a[0][0]/100*i,r=a[0][0]/100*n;e.x=t-r}else e.x=a[0][0];if("%"===a[1][1]){let t=a[1][0]/100*s,n=a[1][0]/100*r;e.y=t-n}else e.y=a[1][0]}}},u=({ctx:t,image:e,backgroundRepeat:n,drawOpt:r,imgWidth:i,imgHeight:s,canvasWidth:a,canvasHeight:l})=>{if(n){let c=r.x,h=r.y,u=Math.ceil(c/i),f=Math.ceil(h/s),p=c-u*i,m=h-f*s,g=o(n);if("no-repeat"===g[0]||i>=a&&s>=l)return;if("repeat-x"===g[0]&&a>i){let n=p;while(n<a)d(t,e,{...r,x:n}),n+=i;return!0}if("repeat-y"===g[0]&&l>s){let n=m;while(n<l)d(t,e,{...r,y:n}),n+=s;return!0}if("repeat"===g[0]){let n=p;while(n<a){if(l>s){let i=m;while(i<l)d(t,e,{...r,x:n,y:i}),i+=s}n+=i}return!0}}},d=(t,e,n)=>{t.drawImage(e,n.sx,n.sy,n.swidth,n.sheight,n.x,n.y,n.width,n.height)},f=(t,e,n,r,{backgroundSize:i,backgroundPosition:o,backgroundRepeat:s},a=(()=>{}))=>{let l=e/n,f=new Image;f.src=r,f.onload=()=>{let r=f.width,p=f.height,m=r/p,g={sx:0,sy:0,swidth:r,sheight:p,x:0,y:0,width:r,height:p};c({backgroundSize:i,drawOpt:g,imageRatio:m,canvasWidth:e,canvasHeight:n,canvasRatio:l}),h({backgroundPosition:o,drawOpt:g,imgWidth:g.width,imgHeight:g.height,imageRatio:m,canvasWidth:e,canvasHeight:n,canvasRatio:l});let v=u({ctx:t,image:f,backgroundRepeat:s,drawOpt:g,imgWidth:g.width,imgHeight:g.height,imageRatio:m,canvasWidth:e,canvasHeight:n,canvasRatio:l});v||d(t,f,g),a()},f.onerror=t=>{a(t)}};var p=f,m=n("e4d0"),g=n("09a0"),v=n("5d5f");class y{constructor(t){this.mindMap=t.mindMap}async export(t,e=!0,n="思维导图",...i){if(this[t]){const o=await this[t](n,...i);return e&&Object(r["r"])(o,n+"."+t),o}return null}createTransformImgTaskList(t,e,n,i){const o=t.find(e);return o.map(async t=>{const e=i(t);if(/^data:/.test(e)||"none"===e)return;const o=await Object(r["P"])(e);t.attr(n,o)})}async getSvgData(t){let{exportPaddingX:e,exportPaddingY:n,errorHandler:o,resetCss:s,addContentToHeader:a,addContentToFooter:l,handleBeingExportSvg:c}=this.mindMap.opt,{svg:h,svgHTML:u,clipData:d}=this.mindMap.getSvgData({paddingX:e,paddingY:n,addContentToHeader:a,addContentToFooter:l,node:t});d&&(d.paddingX=e,d.paddingY=n);let f=!1;const p=this.createTransformImgTaskList(h,"image","href",t=>t.attr("href")||t.attr("xlink:href")),m=this.createTransformImgTaskList(h,"img","src",t=>t.attr("src")),v=[...p,...m];try{await Promise.all(v)}catch(y){o(g["b"].EXPORT_LOAD_IMAGE_ERROR,y)}if(this.mindMap.richText){const t=h.find("foreignObject");if(t.length>0&&(t[0].add(Object(i["i"])(`<style>${s}</style>`)),f=!0),this.mindMap.formula){const e=h.find(".ql-formula");if(e.length>0){const e=this.mindMap.formula.getStyleText();if(e){const n=document.createElement("style");n.innerHTML=e,Object(r["c"])(n),t[0].add(n),f=!0}}}}return"function"===typeof c&&(f=!0,h=c(h)),(v.length>0||f)&&(u=h.svg()),{node:h,str:u,clipData:d}}svgToPng(t,e,n=null){const{maxCanvasSize:i,minExportImgCanvasScale:o}=this.mindMap.opt;return new Promise((s,a)=>{const l=new Image;l.setAttribute("crossOrigin","anonymous"),l.onload=async()=>{try{const t=document.createElement("canvas"),a=Math.max(window.devicePixelRatio,o);let c=l.width,h=l.height,u=0,d=0;n&&(u=n.paddingX,d=n.paddingY,c=n.width+2*u,h=n.height+2*d);let f=c*a,p=h*a;if(f>i||p>i){let t=null,e=null;f>i?t=i:p>i&&(e=i);const n=Object(r["ib"])(f,p,t,e);f=n[0],p=n[1]}t.width=f,t.height=p;const m=f/a,g=p/a;t.style.width=m+"px",t.style.height=g+"px";const v=t.getContext("2d");v.scale(a,a),e||await this.drawBackgroundToCanvas(v,m,g),n?v.drawImage(l,n.left,n.top,n.width,n.height,u,d,n.width,n.height):v.drawImage(l,0,0,m,g),s(t.toDataURL())}catch(t){a(t)}},l.onerror=t=>{a(t)},l.src=t})}drawBackgroundToCanvas(t,e,n){return new Promise((r,i)=>{const{backgroundColor:o="#fff",backgroundImage:s,backgroundRepeat:a="no-repeat",backgroundPosition:l="center center",backgroundSize:c="cover"}=this.mindMap.themeConfig;t.save(),t.rect(0,0,e,n),t.fillStyle=o,t.fill(),t.restore(),s&&"none"!==s?(t.save(),p(t,e,n,s,{backgroundRepeat:a,backgroundPosition:l,backgroundSize:c},e=>{e?i(e):r(),t.restore()})):r()})}drawBackgroundToSvg(t){return new Promise(async e=>{const{backgroundColor:n="#fff",backgroundImage:i,backgroundRepeat:o="repeat"}=this.mindMap.themeConfig;if(t.css("background-color",n),i&&"none"!==i){const n=await Object(r["P"])(i);t.css("background-image",`url(${n})`),t.css("background-repeat",o),e()}else e()})}async png(t,e=!1,n=null){this.handleNodeExport(n);const{str:r,clipData:i}=await this.getSvgData(n),o=await this.fixSvgStrAndToBlob(r),s=await this.svgToPng(o,e,i);return s}handleNodeExport(t){if(t&&t.getData("isActive")){t.deactivate();const{alwaysShowExpandBtn:e,notShowExpandBtn:n}=this.mindMap.opt;e||n||!t.getData("expand")||t.removeExpandBtn()}}async pdf(t,e=!1){if(!this.mindMap.doExportPDF)throw new Error("请注册ExportPDF插件");const n=await this.png(t,e),r=await this.mindMap.doExportPDF.pdf(n);return r}async xmind(t){if(!this.mindMap.doExportXMind)throw new Error("请注册ExportXMind插件");const e=this.mindMap.getData(),n=await this.mindMap.doExportXMind.xmind(e,t),i=await Object(r["cb"])(n);return i}async svg(t){const{node:e}=await this.getSvgData();e.first().before(Object(i["i"])(`<title>${t}</title>`)),await this.drawBackgroundToSvg(e);const n=e.svg(),r=await this.fixSvgStrAndToBlob(n);return r}async fixSvgStrAndToBlob(t){t=Object(r["eb"])(t),t=Object(r["N"])(t);const e=new Blob([t],{type:"image/svg+xml"}),n=await Object(r["cb"])(e);return n}async json(t,e=!0){const n=this.mindMap.getData(e),i=JSON.stringify(n),o=new Blob([i]),s=await Object(r["cb"])(o);return s}async smm(t,e){const n=await this.json(t,e);return n}async md(){const t=this.mindMap.getData(),e=Object(m["a"])(t),n=new Blob([e]),i=await Object(r["cb"])(n);return i}async txt(){const t=this.mindMap.getData(),e=Object(v["a"])(t),n=new Blob([e]),i=await Object(r["cb"])(n);return i}}y.instanceName="doExport";e["a"]=y},8096:function(t,e,n){},"8dc9":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n("4378"),i=n("09a0");class o{constructor(t){this.node=t,this.mindMap=t.mindMap}getShapePadding(t,e,n,r){const o=this.node.getShape(),s=15,a=5,l=t+2*n,c=e+2*r,h=Math.abs(l-c);switch(o){case i["a"].SHAPE.ROUNDED_RECTANGLE:return{paddingX:e>t?(e-t)/2:0,paddingY:0};case i["a"].SHAPE.DIAMOND:return{paddingX:t/2,paddingY:e/2};case i["a"].SHAPE.PARALLELOGRAM:return{paddingX:n<=0?s:0,paddingY:0};case i["a"].SHAPE.OUTER_TRIANGULAR_RECTANGLE:return{paddingX:n<=0?s:0,paddingY:0};case i["a"].SHAPE.INNER_TRIANGULAR_RECTANGLE:return{paddingX:n<=0?s:0,paddingY:0};case i["a"].SHAPE.ELLIPSE:return{paddingX:n<=0?s:0,paddingY:r<=0?a:0};case i["a"].SHAPE.CIRCLE:return{paddingX:c>l?h/2:0,paddingY:c<l?h/2:0};default:return{paddingX:0,paddingY:0}}}createShape(){const t=this.node.getShape();let e=null;return t===i["a"].SHAPE.RECTANGLE?e=this.createRect():t===i["a"].SHAPE.DIAMOND?e=this.createDiamond():t===i["a"].SHAPE.PARALLELOGRAM?e=this.createParallelogram():t===i["a"].SHAPE.ROUNDED_RECTANGLE?e=this.createRoundedRectangle():t===i["a"].SHAPE.OCTAGONAL_RECTANGLE?e=this.createOctagonalRectangle():t===i["a"].SHAPE.OUTER_TRIANGULAR_RECTANGLE?e=this.createOuterTriangularRectangle():t===i["a"].SHAPE.INNER_TRIANGULAR_RECTANGLE?e=this.createInnerTriangularRectangle():t===i["a"].SHAPE.ELLIPSE?e=this.createEllipse():t===i["a"].SHAPE.CIRCLE&&(e=this.createCircle()),e}getNodeSize(){const t=this.node.getBorderWidth();let{width:e,height:n}=this.node;return e-=t,n-=t,{width:e,height:n}}createPath(t){const{customCreateNodePath:e}=this.mindMap.opt;return e?Object(r["i"])(e(t)):(new r["f"]).plot(t)}createPolygon(t){const{customCreateNodePolygon:e}=this.mindMap.opt;return e?Object(r["i"])(e(t)):(new r["g"]).plot(t)}createRect(){let{width:t,height:e}=this.getNodeSize(),n=this.node.style.merge("borderRadius");const r=`\n      M${n},0\n      L${t-n},0\n      C${t-n},0 ${t},0 ${t},${n}\n      L${t},${e-n}\n      C${t},${e-n} ${t},${e} ${t-n},${e}\n      L${n},${e}\n      C${n},${e} 0,${e} 0,${e-n}\n      L0,${n}\n      C0,${n} 0,0 ${n},0\n      Z\n    `;return this.createPath(r)}createDiamond(){let{width:t,height:e}=this.getNodeSize(),n=t/2,r=e/2,i=n,o=0,s=t,a=r,l=n,c=e,h=0,u=r;const d=[[i,o],[s,a],[l,c],[h,u]];return this.createPolygon(d)}createParallelogram(){let{paddingX:t}=this.node.getPaddingVale();t=t||this.node.shapePadding.paddingX;let{width:e,height:n}=this.getNodeSize();const r=[[t,0],[e,0],[e-t,n],[0,n]];return this.createPolygon(r)}createRoundedRectangle(){let{width:t,height:e}=this.getNodeSize(),n=e/2;const r=`\n      M${n},0\n      L${t-n},0\n      A${e/2},${e/2} 0 0,1 ${t-n},${e} \n      L${n},${e}\n      A${e/2},${e/2} 0 0,1 ${n},0\n    `;return this.createPath(r)}createOctagonalRectangle(){let t=5,{width:e,height:n}=this.getNodeSize();const r=[[0,t],[t,0],[e-t,0],[e,t],[e,n-t],[e-t,n],[t,n],[0,n-t]];return this.createPolygon(r)}createOuterTriangularRectangle(){let{paddingX:t}=this.node.getPaddingVale();t=t||this.node.shapePadding.paddingX;let{width:e,height:n}=this.getNodeSize();const r=[[t,0],[e-t,0],[e,n/2],[e-t,n],[t,n],[0,n/2]];return this.createPolygon(r)}createInnerTriangularRectangle(){let{paddingX:t}=this.node.getPaddingVale();t=t||this.node.shapePadding.paddingX;let{width:e,height:n}=this.getNodeSize();const r=[[0,0],[e,0],[e-t/2,n/2],[e,n],[0,n],[t/2,n/2]];return this.createPolygon(r)}createEllipse(){let{width:t,height:e}=this.getNodeSize(),n=t/2,r=e/2;const i=`\n      M${n},0\n      A${n},${r} 0 0,1 ${n},${e} \n      M${n},${e} \n      A${n},${r} 0 0,1 ${n},0 \n    `;return this.createPath(i)}createCircle(){let{width:t,height:e}=this.getNodeSize(),n=t/2,r=e/2;const i=`\n      M${n},0\n      A${n},${r} 0 0,1 ${n},${e} \n      M${n},${e} \n      A${n},${r} 0 0,1 ${n},0 \n    `;return this.createPath(i)}}const s=[i["a"].SHAPE.RECTANGLE,i["a"].SHAPE.DIAMOND,i["a"].SHAPE.PARALLELOGRAM,i["a"].SHAPE.ROUNDED_RECTANGLE,i["a"].SHAPE.OCTAGONAL_RECTANGLE,i["a"].SHAPE.OUTER_TRIANGULAR_RECTANGLE,i["a"].SHAPE.INNER_TRIANGULAR_RECTANGLE,i["a"].SHAPE.ELLIPSE,i["a"].SHAPE.CIRCLE]},"9b90":function(t,e,n){"use strict";var r=n("d056"),i=n("5381"),o=n("09a0");class s{constructor({mindMap:t}){this.mindMap=t,this.isSearching=!1,this.searchText="",this.matchNodeList=[],this.currentIndex=-1,this.notResetSearchText=!1,this.isJumpNext=!1,this.bindEvent()}bindEvent(){this.onDataChange=this.onDataChange.bind(this),this.onModeChange=this.onModeChange.bind(this),this.mindMap.on("data_change",this.onDataChange),this.mindMap.on("mode_change",this.onModeChange)}unBindEvent(){this.mindMap.off("data_change",this.onDataChange),this.mindMap.off("mode_change",this.onModeChange)}onDataChange(){if(this.isJumpNext)return this.isJumpNext=!1,void this.search(this.searchText);this.notResetSearchText?this.notResetSearchText=!1:this.searchText=""}onModeChange(t){const e=t===o["a"].MODE.READONLY;!e&&this.isSearching&&this.matchNodeList[this.currentIndex]&&this.matchNodeList[this.currentIndex].closeHighlight()}search(t,e=(()=>{})){if(Object(r["T"])(t))return this.endSearch();t=String(t),this.isSearching=!0,this.searchText===t||(this.searchText=t,this.doSearch()),this.searchNext(e),this.emitEvent()}updateMatchNodeList(t){this.matchNodeList=t,this.mindMap.emit("search_match_node_list_change",t)}endSearch(){this.isSearching&&(this.mindMap.opt.readonly&&this.matchNodeList[this.currentIndex]&&this.matchNodeList[this.currentIndex].closeHighlight(),this.searchText="",this.updateMatchNodeList([]),this.currentIndex=-1,this.notResetSearchText=!1,this.isSearching=!1,this.emitEvent())}doSearch(){this.updateMatchNodeList([]),this.currentIndex=-1;const{isOnlySearchCurrentRenderNodes:t}=this.mindMap.opt,e=t?this.mindMap.renderer.root:this.mindMap.renderer.renderTree;if(!e)return;const n=[];Object(r["e"])(e,e=>{let{richText:i,text:o,generalization:s}=t?e.getData():e.data;i&&(o=Object(r["I"])(o)),o.includes(this.searchText)&&n.push(e);const a=Object(r["v"])({generalization:s});a.forEach(e=>{let{richText:i,text:o,uid:s}=e;t&&!this.mindMap.renderer.findNodeByUid(s)||(i&&(o=Object(r["I"])(o)),o.includes(this.searchText)&&n.push({data:e}))})}),this.updateMatchNodeList(n)}isNodeInstance(t){return t instanceof i["a"]}searchNext(t,e){if(!this.isSearching||this.matchNodeList.length<=0)return;void 0!==e&&Number.isInteger(e)&&e>=0&&e<this.matchNodeList.length?this.currentIndex=e:this.currentIndex<this.matchNodeList.length-1?this.currentIndex++:this.currentIndex=0;const{readonly:n}=this.mindMap.opt;n&&this.matchNodeList.forEach(t=>{this.isNodeInstance(t)&&t.closeHighlight()});const r=this.matchNodeList[this.currentIndex];this.notResetSearchText=!0;const i=this.isNodeInstance(r)?r.getData("uid"):r.data.uid,o=this.mindMap.renderer.findNodeByUid(i);this.mindMap.execCommand("GO_TARGET_NODE",i,e=>{this.isNodeInstance(r)||(this.matchNodeList[this.currentIndex]=e,this.updateMatchNodeList(this.matchNodeList)),t(),n&&e.highlight(),o&&(this.notResetSearchText=!1)})}jump(t,e=(()=>{})){this.searchNext(e,t)}replace(t,e=!1){if(null===t||void 0===t||!this.isSearching||this.matchNodeList.length<=0)return;this.isJumpNext=e,t=String(t);let n=this.matchNodeList[this.currentIndex];if(!n)return;const r=t.includes(this.searchText),i=this.getReplacedText(n,this.searchText,t);if(this.notResetSearchText=!0,n.setText(i,n.getData("richText"),!0),r)return void this.updateMatchNodeList(this.matchNodeList);const o=this.matchNodeList.filter(t=>n!==t);this.updateMatchNodeList(o),this.currentIndex>this.matchNodeList.length-1?this.currentIndex=-1:this.currentIndex--,this.emitEvent()}replaceAll(t){if(null===t||void 0===t||!this.isSearching||this.matchNodeList.length<=0)return;t=String(t);const e=t.includes(this.searchText),n=this.mindMap.renderer.hasRichTextPlugin();this.matchNodeList.forEach(e=>{const r=this.getReplacedText(e,this.searchText,t);if(this.isNodeInstance(e)){const t={text:r};n&&(t.resetRichText=!!e.getData("richText")),this.mindMap.renderer.setNodeDataRender(e,t,!0)}else e.data.text=r,n&&(e.data.resetRichText=!!e.data.richText)}),this.mindMap.render(),this.mindMap.command.addHistory(),e?this.updateMatchNodeList(this.matchNodeList):this.endSearch()}getReplacedText(t,e,n){let{richText:i,text:o}=this.isNodeInstance(t)?t.getData():t.data;return i?Object(r["hb"])(o,e,n):o.replaceAll(e,n)}emitEvent(){this.mindMap.emit("search_info_change",{currentIndex:this.currentIndex,total:this.matchNodeList.length})}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}s.instanceName="search",e["a"]=s},"9d4bc":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function l(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var l,c,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,o),!0;case 6:return h.fn.call(h.context,e,n,r,o,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var d,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,r);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h[c].fn.apply(h[c].context,l)}}return!0},c.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return l(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||l(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:l(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},a330:function(t,e,n){"use strict";var r=n("d056"),i=n("fcce");class o{constructor({mindMap:t}){this.mindMap=t,this.handleEl=null,this.isShowHandleEl=!1,this.node=null,this.img=null,this.rect=null,this.isMousedown=!1,this.mousedownDrawTransform=null,this.mousedownOffset={x:0,y:0},this.currentImgWidth=0,this.currentImgHeight=0,this.isAdjusted=!1,this.bindEvent()}bindEvent(){this.onNodeImgMouseleave=this.onNodeImgMouseleave.bind(this),this.onNodeImgMousemove=this.onNodeImgMousemove.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseup=this.onMouseup.bind(this),this.onRenderEnd=this.onRenderEnd.bind(this),this.mindMap.on("node_img_mouseleave",this.onNodeImgMouseleave),this.mindMap.on("node_img_mousemove",this.onNodeImgMousemove),this.mindMap.on("mousemove",this.onMousemove),this.mindMap.on("mouseup",this.onMouseup),this.mindMap.on("node_mouseup",this.onMouseup),this.mindMap.on("node_tree_render_end",this.onRenderEnd)}unBindEvent(){this.mindMap.off("node_img_mouseleave",this.onNodeImgMouseleave),this.mindMap.off("node_img_mousemove",this.onNodeImgMousemove),this.mindMap.off("mousemove",this.onMousemove),this.mindMap.off("mouseup",this.onMouseup),this.mindMap.off("node_mouseup",this.onMouseup),this.mindMap.off("node_tree_render_end",this.onRenderEnd)}onNodeImgMousemove(t,e){this.isMousedown||this.isAdjusted||this.mindMap.opt.readonly||this.node&&this.node.uid===t.uid&&this.isShowHandleEl||(this.node=t,this.img=e,this.rect=this.img.rbox(),this.showHandleEl())}onNodeImgMouseleave(){this.isMousedown||this.hideHandleEl()}hideNodeImage(){this.img&&this.img.hide()}showNodeImage(){this.img&&this.img.show()}showHandleEl(){this.isShowHandleEl||(this.handleEl||this.createResizeBtnEl(),this.setHandleElRect(),this.handleEl.style.display="block",this.isShowHandleEl=!0)}hideHandleEl(){this.isShowHandleEl&&(this.isShowHandleEl=!1,this.handleEl.style.display="none",this.handleEl.style.backgroundImage="",this.handleEl.style.width=0,this.handleEl.style.height=0,this.handleEl.style.left=0,this.handleEl.style.top=0)}setHandleElRect(){let{width:t,height:e,x:n,y:r}=this.rect;this.handleEl.style.left=n+"px",this.handleEl.style.top=r+"px",this.currentImgWidth=t,this.currentImgHeight=e,this.updateHandleElSize()}updateHandleElSize(){this.handleEl.style.width=this.currentImgWidth+"px",this.handleEl.style.height=this.currentImgHeight+"px"}createResizeBtnEl(){const{imgResizeBtnSize:t}=this.mindMap.opt;this.handleEl=document.createElement("div"),this.handleEl.style.cssText="\n      pointer-events: none;\n      position: fixed;\n\t    display:none;\n      background-size: cover;\n    ",this.handleEl.className="node-img-handle";const e=document.createElement("div");e.innerHTML=i["a"].imgAdjust,e.style.cssText=`\n      position: absolute;\n      right: 0;\n      bottom: 0;\n      pointer-events: auto;\n      background-color: rgba(0, 0, 0, 0.3);\n      width: ${t}px;\n      height: ${t}px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: nwse-resize;\n    `,e.className="node-image-resize",e.addEventListener("mouseenter",()=>{this.showHandleEl()}),e.addEventListener("mouseleave",()=>{this.isMousedown||this.hideHandleEl()}),e.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault(),this.onMousedown(t)}),e.addEventListener("mouseup",t=>{setTimeout(()=>{this.hideHandleEl(),this.isAdjusted=!1},0)}),e.addEventListener("click",t=>{t.stopPropagation()}),this.handleEl.appendChild(e);const n=document.createElement("div");this.handleEl.prepend(n),n.className="node-image-remove",n.innerHTML=i["a"].remove,n.style.cssText=`\n      position: absolute;\n      right: 0;top:0;color:#fff;\n      pointer-events: auto;\n      background-color: rgba(0, 0, 0, 0.3);\n      width: ${t}px;\n      height: ${t}px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n    `,n.addEventListener("mouseenter",t=>{this.showHandleEl()}),n.addEventListener("mouseleave",t=>{this.isMousedown||this.hideHandleEl()}),n.addEventListener("click",async t=>{let e=!1;"function"===typeof this.mindMap.opt.beforeDeleteNodeImg&&(e=await this.mindMap.opt.beforeDeleteNodeImg(this.node)),e||this.mindMap.execCommand("SET_NODE_IMAGE",this.node,{url:null})});const r=this.mindMap.opt.customInnerElsAppendTo||document.body;r.appendChild(this.handleEl)}onMousedown(t){this.isMousedown=!0,this.mousedownDrawTransform=this.mindMap.draw.transform(),this.hideNodeImage(),this.mousedownOffset.x=t.clientX-this.rect.x2,this.mousedownOffset.y=t.clientY-this.rect.y2,this.handleEl.style.backgroundImage=`url(${this.node.getData("image")})`}onMousemove(t){if(!this.isMousedown)return;t.preventDefault();const{scaleX:e,scaleY:n}=this.mousedownDrawTransform,{width:i,height:o}=this.node.getData("imageSize");let{minImgResizeWidth:s,minImgResizeHeight:a,maxImgResizeWidthInheritTheme:l,maxImgResizeWidth:c,maxImgResizeHeight:h}=this.mindMap.opt;const u=s/a,d=i/o;let f,p;u>d?a=s/d:s=a*d,l?(f=this.mindMap.getThemeConfig("imgMaxWidth"),p=this.mindMap.getThemeConfig("imgMaxHeight")):(f=c,p=h),f*=e,p*=n;let m=Math.abs(t.clientX-this.rect.x-this.mousedownOffset.x),g=Math.abs(t.clientY-this.rect.y-this.mousedownOffset.y);m<s&&(m=s),g<a&&(g=a),m>f&&(m=f),g>p&&(g=p);const[v,y]=Object(r["jb"])(i,o,m,g);this.currentImgWidth=v,this.currentImgHeight=y,this.updateHandleElSize()}onMouseup(){if(!this.isMousedown)return;this.showNodeImage(),this.hideHandleEl();const{image:t,imageTitle:e}=this.node.getData(),{scaleX:n,scaleY:r}=this.mousedownDrawTransform,i=this.currentImgWidth/n,o=this.currentImgHeight/r;(Math.abs(i-this.rect.width)>1||Math.abs(o-this.rect.height)>1)&&(this.mindMap.execCommand("SET_NODE_IMAGE",this.node,{url:t,title:e,width:i,height:o,custom:!0}),this.isAdjusted=!0),this.isMousedown=!1,this.mousedownDrawTransform=null,this.mousedownOffset.x=0,this.mousedownOffset.y=0}onRenderEnd(){this.isAdjusted?this.isAdjusted=!1:this.hideHandleEl()}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}o.instanceName="nodeImgAdjust",e["a"]=o},b923:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return N})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return gt})),n.d(e,"f",(function(){return $})),n.d(e,"g",(function(){return W})),n.d(e,"h",(function(){return Z})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return Y})),n.d(e,"k",(function(){return A})),n.d(e,"l",(function(){return J}));var r=n("6f27");const i=65535,o=Math.pow(2,16);function s(t,e){return t+e*o}function a(t){return t&i}function l(t){return(t-(t&i))/o}const c=1,h=2,u=4,d=8;class f{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&d)>0}get deletedBefore(){return(this.delInfo&(c|u))>0}get deletedAfter(){return(this.delInfo&(h|u))>0}get deletedAcross(){return(this.delInfo&u)>0}}class p{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&p.empty)return p.empty}recover(t){let e=0,n=a(t);if(!this.inverted)for(let r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+l(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let p=this.ranges[a+i],m=this.ranges[a+o],g=l+p;if(t<=g){let i=p?t==l?-1:t==g?1:e:e,o=l+r+(i<0?0:m);if(n)return o;let v=t==(e<0?l:g)?null:s(a/3,t-l),y=t==l?h:t==g?c:u;return(e<0?t!=l:t!=g)&&(y|=d),new f(o,y,v)}r+=m-p}return n?t+r:new f(t+r,0,null)}touches(t,e){let n=0,r=a(e),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let e=this.ranges[s]-(this.inverted?n:0);if(e>t)break;let a=this.ranges[s+i],l=e+a;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+e],c=this.ranges[r+n];t(s,s+l,a,a+c),i+=c-l}}invert(){return new p(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?p.empty:new p(t<0?[0,-t,0]:[0,0,t])}}p.empty=new p([]);class m{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new m(this.maps,this.mirror,t,e)}copy(){return new m(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new m;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i],o=n.mapResult(t,e);if(null!=o.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(o.recover);continue}}r|=o.delInfo,t=o.pos}return n?t:new f(t,r,null)}}const g=Object.create(null);class v{getMap(){return p.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=g[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in g)throw new RangeError("Duplicate use of step JSON ID "+t);return g[t]=e,e.prototype.jsonID=t,e}}class y{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new y(t,null)}static fail(t){return new y(null,t)}static fromReplace(t,e,n,i){try{return y.ok(t.replace(e,n,i))}catch(o){if(o instanceof r["h"])return y.fail(o.message);throw o}}}function b(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(b(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return r["c"].fromArray(i)}class w extends v{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r["j"](b(e.content,(t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t,i),e.openStart,e.openEnd);return y.fromReplace(t,this.from,this.to,o)}invert(){return new x(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new w(e.pos,n.pos,this.mark)}merge(t){return t instanceof w&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new w(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new w(e.from,e.to,t.markFromJSON(e.mark))}}v.jsonID("addMark",w);class x extends v{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new r["j"](b(e.content,t=>t.mark(this.mark.removeFromSet(t.marks)),t),e.openStart,e.openEnd);return y.fromReplace(t,this.from,this.to,n)}invert(){return new w(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new x(e.pos,n.pos,this.mark)}merge(t){return t instanceof x&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new x(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new x(e.from,e.to,t.markFromJSON(e.mark))}}v.jsonID("removeMark",x);class C extends v{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return y.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return y.fromReplace(t,this.pos,this.pos+1,new r["j"](r["c"].from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new C(this.pos,e.marks[n]);return new C(this.pos,this.mark)}}return new E(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new C(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new C(e.pos,t.markFromJSON(e.mark))}}v.jsonID("addNodeMark",C);class E extends v{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return y.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return y.fromReplace(t,this.pos,this.pos+1,new r["j"](r["c"].from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new C(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new E(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new E(e.pos,t.markFromJSON(e.mark))}}v.jsonID("removeNodeMark",E);class k extends v{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&O(t,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new p([this.from,this.to-this.from,this.slice.size])}invert(t){return new k(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new k(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof k)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?r["j"].empty:new r["j"](t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new k(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?r["j"].empty:new r["j"](this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new k(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new k(e.from,e.to,r["j"].fromJSON(t,e.slice),!!e.structure)}}v.jsonID("replace",k);class N extends v{constructor(t,e,n,r,i,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(t){if(this.structure&&(O(t,this.from,this.gapFrom)||O(t,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return y.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?y.fromReplace(t,this.from,this.to,n):y.fail("Content does not fit in gap")}getMap(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new N(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||i>n.pos?null:new N(e.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new N(e.from,e.to,e.gapFrom,e.gapTo,r["j"].fromJSON(t,e.slice),e.insert,!!e.structure)}}function O(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){let t=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!t||t.isLeaf)return!0;t=t.firstChild,i--}}return!1}function T(t,e,n,r){let i,o,s=[],a=[];t.doc.nodesBetween(e,n,(t,l,c)=>{if(!t.isInline)return;let h=t.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),u=Math.min(l+t.nodeSize,n),d=r.addToSet(h);for(let t=0;t<h.length;t++)h[t].isInSet(d)||(i&&i.to==c&&i.mark.eq(h[t])?i.to=u:s.push(i=new x(c,u,h[t])));o&&o.to==c?o.to=u:a.push(o=new w(c,u,r))}}),s.forEach(e=>t.step(e)),a.forEach(e=>t.step(e))}function M(t,e,n,i){let o=[],s=0;t.doc.nodesBetween(e,n,(t,a)=>{if(!t.isInline)return;s++;let l=null;if(i instanceof r["e"]){let e,n=t.marks;while(e=i.isInSet(n))(l||(l=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(l=[i]):l=t.marks;if(l&&l.length){let r=Math.min(a+t.nodeSize,n);for(let t=0;t<l.length;t++){let n,i=l[t];for(let t=0;t<o.length;t++){let e=o[t];e.step==s-1&&i.eq(o[t].style)&&(n=e)}n?(n.to=r,n.step=s):o.push({style:i,from:Math.max(a,e),to:r,step:s})}}}),o.forEach(e=>t.step(new x(e.from,e.to,e.style)))}function S(t,e,n,i=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),a=[],l=e+1;for(let c=0;c<s.childCount;c++){let e=s.child(c),h=l+e.nodeSize,u=i.matchType(e.type);if(u){i=u;for(let r=0;r<e.marks.length;r++)n.allowsMarkType(e.marks[r].type)||t.step(new x(l,h,e.marks[r]));if(o&&e.isText&&"pre"!=n.whitespace){let t,i,o=/\r?\n|\r/g;while(t=o.exec(e.text))i||(i=new r["j"](r["c"].from(n.schema.text(" ",n.allowedMarks(e.marks))),0,0)),a.push(new k(l+t.index,l+t.index+t[0].length,i))}}else a.push(new k(l,h,r["j"].empty));l=h}if(!i.validEnd){let e=i.fillBefore(r["c"].empty,!0);t.replace(l,l,new r["j"](e,0,0))}for(let r=a.length-1;r>=0;r--)t.step(a[r])}function L(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function A(t){let e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let e=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&e.canReplace(i,o,n))return r;if(0==r||e.type.spec.isolating||!L(e,i,o))break}return null}function D(t,e,n){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),l=o.after(s+1),c=a,h=l,u=r["c"].empty,d=0;for(let m=s,g=!1;m>n;m--)g||i.index(m)>0?(g=!0,u=r["c"].from(i.node(m).copy(u)),d++):c--;let f=r["c"].empty,p=0;for(let m=s,g=!1;m>n;m--)g||o.after(m+1)<o.end(m)?(g=!0,f=r["c"].from(o.node(m).copy(f)),p++):h++;t.step(new N(c,h,a,l,new r["j"](u.append(f),d,p),u.size-d,!0))}function _(t,e,n=null,r=t){let i=P(t,e),o=i&&I(r,e);return o?i.map(R).concat({type:e,attrs:n}).concat(o.map(R)):null}function R(t){return{type:t,attrs:null}}function P(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function I(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=s.length?s[s.length-1]:e,l=a.contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?s:null}function j(t,e,n){let i=r["c"].empty;for(let a=n.length-1;a>=0;a--){if(i.size){let t=n[a].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r["c"].from(n[a].type.create(n[a].attrs,i))}let o=e.start,s=e.end;t.step(new N(o,s,o,s,new r["j"](i,0,0),n.length,!0))}function z(t,e,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(e,n)=>{let a="function"==typeof o?o(e):o;if(e.isTextblock&&!e.hasMarkup(i,a)&&H(t.doc,t.mapping.slice(s).map(n),i)){let o=null;if(i.schema.linebreakReplacement){let t="pre"==i.whitespace,e=!!i.contentMatch.matchType(i.schema.linebreakReplacement);t&&!e?o=!1:!t&&e&&(o=!0)}!1===o&&F(t,e,n,s),S(t,t.mapping.slice(s).map(n,1),i,void 0,null===o);let l=t.mapping.slice(s),c=l.map(n,1),h=l.map(n+e.nodeSize,1);return t.step(new N(c,h,c+1,h-1,new r["j"](r["c"].from(i.create(a,null,e.marks)),0,0),1,!0)),!0===o&&B(t,e,n,s),!1}})}function B(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;while(s=a.exec(i.text)){let i=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(i,i+1,e.type.schema.linebreakReplacement.create())}}})}function F(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+o);t.replaceWith(i,i+1,e.type.schema.text("\n"))}})}function H(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function q(t,e,n,i,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new N(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new r["j"](r["c"].from(a),0,0),1,!0))}function W(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,h=n-2;c>o;c--,h--){let t=i.node(c),e=i.index(c);if(t.type.spec.isolating)return!1;let n=t.content.cutByIndex(e,t.childCount),o=r&&r[h+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let s=r&&r[h]||t;if(!t.canReplace(e+1,t.childCount)||!s.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function U(t,e,n=1,i){let o=t.doc.resolve(e),s=r["c"].empty,a=r["c"].empty;for(let l=o.depth,c=o.depth-n,h=n-1;l>c;l--,h--){s=r["c"].from(o.node(l).copy(s));let t=i&&i[h];a=r["c"].from(t?t.type.create(t.attrs,a):o.node(l).copy(a))}t.step(new k(e,e,new r["j"](s.append(a),n,n),!0))}function $(t,e){let n=t.resolve(e),r=n.index();return G(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function V(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n)return!1;if(!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function G(t,e){return!(!t||!e||t.isLeaf||!V(t,e))}function Y(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let t,o,s=r.index(i);if(i==r.depth?(t=r.nodeBefore,o=r.nodeAfter):n>0?(t=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(t=r.node(i).maybeChild(s-1),o=r.node(i+1)),t&&!t.isTextblock&&G(t,o)&&r.node(i).canReplace(s,s+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function K(t,e,n){let i=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),a=s.node().type;if(o&&a.inlineContent){let t="pre"==a.whitespace,e=!!a.contentMatch.matchType(o);t&&!e?i=!1:!t&&e&&(i=!0)}let l=t.steps.length;if(!1===i){let r=t.doc.resolve(e+n);F(t,r.node(),r.before(),l)}a.inlineContent&&S(t,e+n-1,a,s.node().contentMatchAt(s.index()),null==i);let c=t.mapping.slice(l),h=c.map(e-n);if(t.step(new k(h,c.map(e+n,-1),r["j"].empty,!0)),!0===i){let e=t.doc.resolve(h);B(t,e.node(),e.before(),t.steps.length)}return t}function X(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let t=r.index(i);if(r.node(i).canReplaceWith(t,t,n))return r.before(i+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let t=r.indexAfter(i);if(r.node(i).canReplaceWith(t,t,n))return r.after(i+1);if(t<r.node(i).childCount)return null}return null}function Z(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let t=r.depth;t>=0;t--){let e=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,n=r.index(t)+(e>0?1:0),s=r.node(t),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let t=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=t&&s.canReplaceWith(n,n,t[0])}if(a)return 0==e?r.pos:e<0?r.before(t+1):r.after(t+1)}return null}function J(t,e,n=e,i=r["j"].empty){if(e==n&&!i.size)return null;let o=t.resolve(e),s=t.resolve(n);return Q(o,s,i)?new k(e,n,i):new tt(o,s,i).fit()}function Q(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}v.jsonID("replaceAround",N);class tt{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=r["c"].empty;for(let r=0;r<=t.depth;r++){let e=t.node(r);this.frontier.push({type:e.type,match:e.contentMatchAt(t.indexAfter(r))})}for(let i=t.depth;i>0;i--)this.placed=r["c"].from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;let l=new r["j"](o,s,a);return t>-1?new N(n.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||n.pos!=this.$to.pos?new k(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=rt(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let o=t.firstChild;for(let s=this.depth;s>=0;s--){let t,{type:a,match:l}=this.frontier[s],c=null;if(1==e&&(o?l.matchType(o.type)||(c=l.fillBefore(r["c"].from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(2==e&&o&&(t=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:t};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=rt(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r["j"](t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=rt(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new r["j"](et(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new r["j"](et(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:o}){while(this.depth>e)this.closeFrontierNode();if(o)for(let r=0;r<o.length;r++)this.openFrontierNode(o[r]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-t,c=0,h=[],{match:u,type:d}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)h.push(i.child(t));u=u.matchFragment(i)}let f=a.size+t-(s.content.size-s.openEnd);while(c<a.childCount){let t=a.child(c),e=u.matchType(t.type);if(!e)break;c++,(c>1||0==l||t.content.size)&&(u=e,h.push(it(t.mark(d.allowedMarks(t.marks)),1==c?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=nt(this.placed,e,r["c"].from(h)),this.frontier[e].match=u,p&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,m=a;r<f;r++){let t=m.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),m=t.content}this.unplaced=p?0==t?r["j"].empty:new r["j"](et(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new r["j"](et(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!ot(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=ot(t,e,r,n,i);if(o){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],i=ot(t,n,r,e,!0);if(!i||i.childCount)continue t}return{depth:e,fit:o,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=nt(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=nt(this.placed,this.depth,r["c"].from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop(),e=t.match.fillBefore(r["c"].empty,!0);e.childCount&&(this.placed=nt(this.placed,this.frontier.length,e))}}function et(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(et(t.firstChild.content,e-1,n)))}function nt(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(nt(t.lastChild.content,e-1,n)))}function rt(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function it(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,it(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r["c"].empty,!0)))),t.copy(i)}function ot(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!st(n,o.content,s)?a:null}function st(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function at(t){return t.spec.defining||t.spec.definingForContent}function lt(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(Q(o,s,i))return t.step(new k(e,n,i));let a=dt(o,t.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let r=o.depth,f=o.pos-1;r>0;r--,f--){let t=o.node(r).type.spec;if(t.defining||t.definingAsContext||t.isolating)break;a.indexOf(r)>-1?l=r:o.before(r)==f&&a.splice(1,0,-r)}let c=a.indexOf(l),h=[],u=i.openStart;for(let r=i.content,f=0;;f++){let t=r.firstChild;if(h.push(t),f==i.openStart)break;r=t.content}for(let r=u-1;r>=0;r--){let t=h[r],e=at(t.type);if(e&&!t.sameMarkup(o.node(Math.abs(l)-1)))u=r;else if(e||!t.type.isTextblock)break}for(let f=i.openStart;f>=0;f--){let e=(f+u+1)%(i.openStart+1),l=h[e];if(l)for(let h=0;h<a.length;h++){let u=a[(h+c)%a.length],d=!0;u<0&&(d=!1,u=-u);let f=o.node(u-1),p=o.index(u-1);if(f.canReplaceWith(p,p,l.type,l.marks))return t.replace(o.before(u),d?s.after(u):n,new r["j"](ct(i.content,0,i.openStart,e),e,i.openEnd))}}let d=t.steps.length;for(let r=a.length-1;r>=0;r--){if(t.replace(e,n,i),t.steps.length>d)break;let l=a[r];l<0||(e=o.before(l),n=s.after(l))}}function ct(t,e,n,i,o){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(ct(r.content,e+1,n,i,r)))}if(e>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r["c"].empty,!0))}return t}function ht(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=X(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new r["j"](r["c"].from(i),0,0))}function ut(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=dt(r,i);for(let s=0;s<o.length;s++){let e=o[s],n=s==o.length-1;if(n&&0==e||r.node(e).type.contentMatch.validEnd)return t.delete(r.start(e),i.end(e));if(e>0&&(n||r.node(e-1).canReplace(r.index(e-1),i.indexAfter(e-1))))return t.delete(r.before(e),i.after(e))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function dt(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let r=t.start(i);if(r<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(r==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==r-1)&&n.push(i)}return n}class ft extends v{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return y.fail("No node at attribute step's position");let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return y.fromReplace(t,this.pos,this.pos+1,new r["j"](r["c"].from(i),0,e.isLeaf?0:1))}getMap(){return p.empty}invert(t){return new ft(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ft(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ft(e.pos,e.attr,e.value)}}v.jsonID("attr",ft);class pt extends v{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return y.ok(n)}getMap(){return p.empty}invert(t){return new pt(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new pt(e.attr,e.value)}}v.jsonID("docAttr",pt);let mt=class extends Error{};mt=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},mt.prototype=Object.create(Error.prototype),mt.prototype.constructor=mt,mt.prototype.name="TransformError";class gt{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new m}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new mt(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=r["j"].empty){let i=J(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new r["j"](r["c"].from(n),0,0))}delete(t,e){return this.replace(t,e,r["j"].empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return lt(this,t,e,n),this}replaceRangeWith(t,e,n){return ht(this,t,e,n),this}deleteRange(t,e){return ut(this,t,e),this}lift(t,e){return D(this,t,e),this}join(t,e=1){return K(this,t,e),this}wrap(t,e){return j(this,t,e),this}setBlockType(t,e=t,n,r=null){return z(this,t,e,n,r),this}setNodeMarkup(t,e,n=null,r){return q(this,t,e,n,r),this}setNodeAttribute(t,e,n){return this.step(new ft(t,e,n)),this}setDocAttribute(t,e){return this.step(new pt(t,e)),this}addNodeMark(t,e){return this.step(new C(t,e)),this}removeNodeMark(t,e){if(!(e instanceof r["d"])){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(e=e.isInSet(n.marks),!e)return this}return this.step(new E(t,e)),this}split(t,e=1,n){return U(this,t,e,n),this}addMark(t,e,n){return T(this,t,e,n),this}removeMark(t,e,n){return M(this,t,e,n),this}clearIncompatible(t,e,n){return S(this,t,e,n),this}}},ba10:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function l(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var l,c,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,o),!0;case 6:return h.fn.call(h.context,e,n,r,o,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var d,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,r);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h[c].fn.apply(h[c].context,l)}}return!0},c.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return l(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||l(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:l(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},c6eb:function(t,e,n){"use strict";(function(t){var r=n("5ea3"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s&&r["a"].process,l=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();e["a"]=l}).call(this,n("faff")(t))},c83b:function(t,e,n){"use strict";var r=n("09a0");class i{constructor(t={}){this.opt=t,this.mindMap=this.opt.mindMap,this.scale=1,this.sx=0,this.sy=0,this.x=0,this.y=0,this.firstDrag=!0,this.setTransformData(this.mindMap.opt.viewData),this.bind()}bind(){this.mindMap.keyCommand.addShortcut("Control+=",()=>{this.enlarge()}),this.mindMap.keyCommand.addShortcut("Control+-",()=>{this.narrow()}),this.mindMap.keyCommand.addShortcut("Control+i",()=>{this.fit()}),this.mindMap.event.on("mousedown",t=>{const{isDisableDrag:e,mousedownEventPreventDefault:n}=this.mindMap.opt;e||(n&&t.preventDefault(),this.sx=this.x,this.sy=this.y)}),this.mindMap.event.on("drag",(t,e)=>{t.ctrlKey||t.metaKey||this.mindMap.opt.isDisableDrag||(this.firstDrag&&(this.firstDrag=!1,this.mindMap.renderer.activeNodeList.length>0&&this.mindMap.execCommand("CLEAR_ACTIVE_NODE")),this.x=this.sx+e.mousemoveOffset.x,this.y=this.sy+e.mousemoveOffset.y,this.transform())}),this.mindMap.event.on("mouseup",()=>{this.firstDrag=!0}),this.mindMap.event.on("mousewheel",(t,e,n,i)=>{const{customHandleMousewheel:o,mousewheelAction:s,mouseScaleCenterUseMousePosition:a,mousewheelMoveStep:l,mousewheelZoomActionReverse:c,disableMouseWheelZoom:h,translateRatio:u}=this.mindMap.opt;if(o&&"function"===typeof o)return o(t);if(s===r["a"].MOUSE_WHEEL_ACTION.ZOOM||t.ctrlKey||t.metaKey){if(h)return;const{x:n,y:o}=this.mindMap.toPos(t.clientX,t.clientY),s=a?n:void 0,l=a?o:void 0;switch(i&&(e.includes(r["a"].DIR.LEFT)||e.includes(r["a"].DIR.RIGHT))&&(e=e.filter(t=>![r["a"].DIR.LEFT,r["a"].DIR.RIGHT].includes(t))),!0){case e.includes(r["a"].DIR.UP||r["a"].DIR.LEFT):c?this.enlarge(s,l,i):this.narrow(s,l,i);break;case e.includes(r["a"].DIR.DOWN||r["a"].DIR.RIGHT):c?this.narrow(s,l,i):this.enlarge(s,l,i);break}}else{let n=0,o=0;i?(n=Math.abs(t.wheelDeltaX),o=Math.abs(t.wheelDeltaY)):n=o=l;let s=0,a=0;e.includes(r["a"].DIR.DOWN)&&(a=-o),e.includes(r["a"].DIR.UP)&&(a=o),e.includes(r["a"].DIR.LEFT)&&(s=n),e.includes(r["a"].DIR.RIGHT)&&(s=-n),this.translateXY(s*u,a*u)}}),this.mindMap.on("resize",()=>{this.checkNeedMindMapInCanvas()&&this.transform()})}getTransformData(){return{transform:this.mindMap.draw.transform(),state:{scale:this.scale,x:this.x,y:this.y,sx:this.sx,sy:this.sy}}}setTransformData(t){t&&(Object.keys(t.state).forEach(e=>{this[e]=t.state[e]}),this.mindMap.draw.transform({...t.transform}),this.mindMap.emit("view_data_change",this.getTransformData()),this.emitEvent("scale"),this.emitEvent("translate"))}translateXY(t,e){0===t&&0===e||(this.x+=t,this.y+=e,this.transform(),this.emitEvent("translate"))}translateX(t){0!==t&&(this.x+=t,this.transform(),this.emitEvent("translate"))}translateXTo(t){this.x=t,this.transform(),this.emitEvent("translate")}translateY(t){0!==t&&(this.y+=t,this.transform(),this.emitEvent("translate"))}translateYTo(t){this.y=t,this.transform(),this.emitEvent("translate")}transform(){try{this.limitMindMapInCanvas()}catch(t){}this.mindMap.draw.transform({origin:[0,0],scale:this.scale,translate:[this.x,this.y]}),this.mindMap.emit("view_data_change",this.getTransformData())}reset(){const t=1!==this.scale,e=0!==this.x||0!==this.y;this.scale=1,this.x=0,this.y=0,this.transform(),t&&this.emitEvent("scale"),e&&this.emitEvent("translate")}narrow(t,e,n){let{scaleRatio:r,minZoomRatio:i}=this.mindMap.opt;r/=n?5:1;const o=Math.max(this.scale-r,i/100);this.scaleInCenter(o,t,e),this.transform(),this.emitEvent("scale")}enlarge(t,e,n){let{scaleRatio:r,maxZoomRatio:i}=this.mindMap.opt;r/=n?5:1;let o=0;o=-1===i?this.scale+r:Math.min(this.scale+r,i/100),this.scaleInCenter(o,t,e),this.transform(),this.emitEvent("scale")}scaleInCenter(t,e,n){void 0!==e&&void 0!==n||(e=this.mindMap.width/2,n=this.mindMap.height/2);const r=this.scale,i=1-t/r,o=(e-this.x)*i,s=(n-this.y)*i;this.x+=o,this.y+=s,this.scale=t}setScale(t,e,n){void 0!==e&&void 0!==n?this.scaleInCenter(t,e,n):this.scale=t,this.transform(),this.emitEvent("scale")}fit(t=(()=>{}),e=!1,n){n=void 0===n?this.mindMap.opt.fitPadding:n;const r=this.mindMap.draw,i=r.transform(),o=t()||r.rbox(),s=o.width/i.scaleX,a=o.height/i.scaleY,l=s/a;let{width:c,height:h}=this.mindMap.elRect;c-=2*n,h-=2*n;const u=c/h;let d=0,f="";if(s<=c&&a<=h&&!e)d=1,f=1;else{let t=0,e=0;l>u?(t=c,e=c/l,f=2):(e=h,t=h*l,f=3),d=t/s}this.setScale(d);const p=t()||r.rbox();p.x-=this.mindMap.elRect.left,p.y-=this.mindMap.elRect.top;let m=0,g=0;1===f?(m=-p.x+n+(c-p.width)/2,g=-p.y+n+(h-p.height)/2):2===f?(m=-p.x+n,g=-p.y+n+(h-p.height)/2):3===f&&(m=-p.x+n+(c-p.width)/2,g=-p.y+n),this.translateXY(m,g)}checkNeedMindMapInCanvas(){if(this.mindMap.demonstrate&&this.mindMap.demonstrate.isInDemonstrate)return!1;const{isLimitMindMapInCanvasWhenHasScrollbar:t,isLimitMindMapInCanvas:e}=this.mindMap.opt;return this.mindMap.scrollbar?t:e}limitMindMapInCanvas(){if(!this.checkNeedMindMapInCanvas())return;let{scale:t,left:e,top:n,right:r,bottom:i}=this.getPositionLimit();const o=(this.mindMap.width-this.mindMap.initWidth)/2*t,s=(this.mindMap.height-this.mindMap.initHeight)/2*t,a=this.scale/t;e*=a,r*=a,n*=a,i*=a;const l=this.mindMap.width/2,c=this.mindMap.height/2,h=this.scale-1;e-=h*l-o,r-=h*l-o,n-=h*c-s,i-=h*c-s,this.x>e&&(this.x=e),this.x<r&&(this.x=r),this.y>n&&(this.y=n),this.y<i&&(this.y=i)}getPositionLimit(){const{scaleX:t,scaleY:e}=this.mindMap.draw.transform(),n=this.mindMap.draw.rbox(),r=this.mindMap.renderer.root.group.rbox(),i=this.mindMap.renderer.layout.getRootCenterOffset(r.width,r.height),o=r.x-n.x-i.x*t,s=r.x-n.x2-i.x*t,a=r.y-n.y-i.y*e,l=r.y-n.y2-i.y*e;return{scale:t,left:o,right:s,top:a,bottom:l}}emitEvent(t){switch(t){case"scale":this.mindMap.emit("scale",this.scale);case"translate":this.mindMap.emit("translate",this.x,this.y)}}}var o=i,s=n("ba10"),a=n.n(s);class l extends a.a{constructor(t={}){super(),this.opt=t,this.mindMap=t.mindMap,this.isLeftMousedown=!1,this.isRightMousedown=!1,this.isMiddleMousedown=!1,this.mousedownPos={x:0,y:0},this.mousemovePos={x:0,y:0},this.mousemoveOffset={x:0,y:0},this.bindFn(),this.bind()}bindFn(){this.onBodyMousedown=this.onBodyMousedown.bind(this),this.onBodyClick=this.onBodyClick.bind(this),this.onDrawClick=this.onDrawClick.bind(this),this.onMousedown=this.onMousedown.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseup=this.onMouseup.bind(this),this.onNodeMouseup=this.onNodeMouseup.bind(this),this.onMousewheel=this.onMousewheel.bind(this),this.onContextmenu=this.onContextmenu.bind(this),this.onSvgMousedown=this.onSvgMousedown.bind(this),this.onKeyup=this.onKeyup.bind(this),this.onMouseenter=this.onMouseenter.bind(this),this.onMouseleave=this.onMouseleave.bind(this)}bind(){document.body.addEventListener("mousedown",this.onBodyMousedown),document.body.addEventListener("click",this.onBodyClick),this.mindMap.svg.on("click",this.onDrawClick),this.mindMap.el.addEventListener("mousedown",this.onMousedown),this.mindMap.svg.on("mousedown",this.onSvgMousedown),window.addEventListener("mousemove",this.onMousemove),window.addEventListener("mouseup",this.onMouseup),this.on("node_mouseup",this.onNodeMouseup),this.mindMap.el.addEventListener("wheel",this.onMousewheel),this.mindMap.svg.on("contextmenu",this.onContextmenu),this.mindMap.svg.on("mouseenter",this.onMouseenter),this.mindMap.svg.on("mouseleave",this.onMouseleave),window.addEventListener("keyup",this.onKeyup)}unbind(){document.body.removeEventListener("mousedown",this.onBodyMousedown),document.body.removeEventListener("click",this.onBodyClick),this.mindMap.svg.off("click",this.onDrawClick),this.mindMap.el.removeEventListener("mousedown",this.onMousedown),window.removeEventListener("mousemove",this.onMousemove),window.removeEventListener("mouseup",this.onMouseup),this.off("node_mouseup",this.onNodeMouseup),this.mindMap.el.removeEventListener("wheel",this.onMousewheel),this.mindMap.svg.off("contextmenu",this.onContextmenu),this.mindMap.svg.off("mouseenter",this.onMouseenter),this.mindMap.svg.off("mouseleave",this.onMouseleave),window.removeEventListener("keyup",this.onKeyup)}onDrawClick(t){this.emit("draw_click",t)}onBodyMousedown(t){this.emit("body_mousedown",t)}onBodyClick(t){this.emit("body_click",t)}onSvgMousedown(t){this.emit("svg_mousedown",t)}onMousedown(t){1===t.which?this.isLeftMousedown=!0:3===t.which?this.isRightMousedown=!0:2===t.which&&(this.isMiddleMousedown=!0),this.mousedownPos.x=t.clientX,this.mousedownPos.y=t.clientY,this.emit("mousedown",t,this)}onMousemove(t){let{useLeftKeySelectionRightKeyDrag:e}=this.mindMap.opt;this.mousemovePos.x=t.clientX,this.mousemovePos.y=t.clientY,this.mousemoveOffset.x=t.clientX-this.mousedownPos.x,this.mousemoveOffset.y=t.clientY-this.mousedownPos.y,this.emit("mousemove",t,this),(this.isMiddleMousedown||(e?this.isRightMousedown:this.isLeftMousedown))&&(t.preventDefault(),this.emit("drag",t,this))}onMouseup(t){this.onNodeMouseup(),this.emit("mouseup",t,this)}onNodeMouseup(){this.isLeftMousedown=!1,this.isRightMousedown=!1,this.isMiddleMousedown=!1}onMousewheel(t){t.stopPropagation(),t.preventDefault();const e=[];t.deltaY<0&&e.push(r["a"].DIR.UP),t.deltaY>0&&e.push(r["a"].DIR.DOWN),t.deltaX<0&&e.push(r["a"].DIR.LEFT),t.deltaX>0&&e.push(r["a"].DIR.RIGHT);let n=!1;const{customCheckIsTouchPad:i}=this.mindMap.opt;n="function"===typeof i?i(t):Math.abs(t.deltaY)<=10,this.emit("mousewheel",t,e,this,n)}onContextmenu(t){t.preventDefault(),t.ctrlKey||this.emit("contextmenu",t)}onKeyup(t){this.emit("keyup",t)}onMouseenter(t){this.emit("svg_mouseenter",t)}onMouseleave(t){this.emit("svg_mouseleave",t)}}var c=l,h=n("3c4e"),u=n.n(h),d=n("e047"),f=n("d056");class p extends d["a"]{constructor(t={},e){super(t),this.isUseLeft=e===r["a"].LAYOUT.LOGICAL_STRUCTURE_LEFT}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){let t=0;Object(f["qb"])(this.renderer.renderTree,null,(e,n,r,i,o,s)=>{let a=this.createNode(e,n,r,i,o,s);if(a.sortIndex=t,t++,r?this.setNodeCenter(a):this.isUseLeft?a.left=n._node.left-a.width-this.getMarginX(i):a.left=n._node.left+n._node.width+this.getMarginX(i),!e.data.expand)return!0},(t,e,n,r)=>{let i=!1===t.data.expand?0:t._node.children.length;t._node.childrenAreaHeight=i?t._node.children.reduce((t,e)=>t+e.height,0)+(i+1)*this.getMarginY(r+1):0;let o=t._node.checkHasGeneralization()?t._node._generalizationNodeHeight+this.getMarginY(r+1):0;t._node.childrenAreaHeight2=Math.max(t._node.childrenAreaHeight,o)},!0,0)}computedTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(t.getData("expand")&&t.children&&t.children.length){let e=this.getMarginY(r+1),n=t.top+t.height/2-t.childrenAreaHeight/2,i=n+e;t.children.forEach(t=>{t.top=i,i+=t.height+e})}},null,!0)}adjustTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;let i=t.childrenAreaHeight2-2*this.getMarginY(r+1)-t.height;i>0&&this.updateBrothers(t,i/2)},null,!0)}updateBrothers(t,e){if(t.parent){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((n,i)=>{if(n.uid===t.uid||n.hasCustomPosition())return;let o=0;i<r?o=-e:i>r&&(o=e),n.top+=o,n.children&&n.children.length&&this.updateChildren(n.children,"top",o)}),this.updateBrothers(t.parent,e)}}renderLine(t,e,n,r){"curve"===r?this.renderLineCurve(t,e,n):"direct"===r?this.renderLineDirect(t,e,n):this.renderLineStraight(t,e,n)}renderLineStraight(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s,expandBtnSize:a}=t;const{alwaysShowExpandBtn:l,notShowExpandBtn:c}=this.mindMap.opt;l&&!c||(a=0);let h=this.getMarginX(t.layerIndex+1),u=.6*(h-a);this.isUseLeft&&(u*=-1);let d=this.mindMap.themeConfig.nodeUseLineStyle;t.children.forEach((l,c)=>{let h;h=this.isUseLeft?0===t.layerIndex?r:r-a:0===t.layerIndex?r+o:r+o+a;let f=i+s/2,p=this.isUseLeft?l.left+l.width:l.left,m=l.top+l.height/2,g=d?l.width*(this.isUseLeft?-1:1):0;f=d&&!t.isRoot?f+s/2:f,m=d?m+l.height/2:m;let v=this.createFoldLine([[h,f],[h+u,f],[h+u,m],[p+g,m]]);this.setLineStyle(n,e[c],v,l)})}renderLineDirect(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s,expandBtnSize:a}=t;const{alwaysShowExpandBtn:l,notShowExpandBtn:c}=this.mindMap.opt;l&&!c||(a=0);const{nodeUseLineStyle:h}=this.mindMap.themeConfig;t.children.forEach((l,c)=>{0===t.layerIndex&&(a=0);let u=this.isUseLeft?r-a:r+o+a,d=i+s/2,f=this.isUseLeft?l.left+l.width:l.left,p=l.top+l.height/2;d=h&&!t.isRoot?d+s/2:d,p=h?p+l.height/2:p;let m=h?` L ${this.isUseLeft?l.left:l.left+l.width},${p}`:"",g=`M ${u},${d} L ${f},${p}`+m;this.setLineStyle(n,e[c],g,l)})}renderLineCurve(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s,expandBtnSize:a}=t;const{alwaysShowExpandBtn:l,notShowExpandBtn:c}=this.mindMap.opt;l&&!c||(a=0);const{nodeUseLineStyle:h,rootLineStartPositionKeepSameInCurve:u,rootLineKeepSameInCurve:d}=this.mindMap.themeConfig;t.children.forEach((l,c)=>{let f;0===t.layerIndex&&(a=0),f=this.isUseLeft?0!==t.layerIndex||u?r-a:r+o/2:0!==t.layerIndex||u?r+o+a:r+o/2;let p,m=i+s/2,g=this.isUseLeft?l.left+l.width:l.left,v=l.top+l.height/2,y="";m=h&&!t.isRoot?m+s/2:m,v=h?v+l.height/2:v,p=this.isUseLeft?h?` L ${l.left},${v}`:"":h?` L ${l.left+l.width},${v}`:"",y=t.isRoot&&!d?this.quadraticCurvePath(f,m,g,v)+p:this.cubicBezierPath(f,m,g,v)+p,this.setLineStyle(n,e[c],y,l)})}renderExpandBtn(t,e){let{width:n,height:r,expandBtnSize:i,layerIndex:o}=t;0===o&&(i=0);let{translateX:s,translateY:a}=e.transform(),l=this.mindMap.themeConfig.nodeUseLineStyle?r/2:0,c=this.isUseLeft?0-i:n,h=r/2+l;c===s&&h===a||e.translate(c-s,h-a)}renderGeneralization(t){t.forEach(t=>{let{left:e,top:n,bottom:r,right:i,generalizationLineMargin:o,generalizationNodeMargin:s}=this.getNodeGeneralizationRenderBoundaries(t,"h"),a=this.isUseLeft?e-o:i+o,l=a,c=n,h=a,u=r,d=l+(this.isUseLeft?-20:20),f=c+(u-c)/2,p=`M ${l},${c} Q ${d},${f} ${h},${u}`;t.generalizationLine.plot(p),t.generalizationNode.left=a+(this.isUseLeft?-s:s)-(this.isUseLeft?t.generalizationNode.width:0),t.generalizationNode.top=n+(r-n-t.generalizationNode.height)/2})}renderExpandBtnRect(t,e,n,r){this.isUseLeft?t.size(e,r).x(-e).y(0):t.size(e,r).x(n).y(0)}}var m=p;class g extends d["a"]{constructor(t={}){super(t)}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){Object(f["qb"])(this.renderer.renderTree,null,(t,e,n,i,o,s)=>{let a=this.createNode(t,e,n,i,o,s);if(n?this.setNodeCenter(a):(e._node.dir?a.dir=e._node.dir:a.dir=o%2===0?r["a"].LAYOUT_GROW_DIR.RIGHT:r["a"].LAYOUT_GROW_DIR.LEFT,a.left=a.dir===r["a"].LAYOUT_GROW_DIR.RIGHT?e._node.left+e._node.width+this.getMarginX(i):e._node.left-this.getMarginX(i)-a.width),!t.data.expand)return!0},(t,e,n,i)=>{if(!t.data.expand)return t._node.leftChildrenAreaHeight=0,void(t._node.rightChildrenAreaHeight=0);let o=0,s=0,a=0,l=0;t._node.children.forEach(t=>{t.dir===r["a"].LAYOUT_GROW_DIR.LEFT?(o++,a+=t.height):(s++,l+=t.height)}),t._node.leftChildrenAreaHeight=a+(o+1)*this.getMarginY(i+1),t._node.rightChildrenAreaHeight=l+(s+1)*this.getMarginY(i+1);let c=t._node.checkHasGeneralization()?t._node._generalizationNodeHeight+this.getMarginY(i+1):0;t._node.leftChildrenAreaHeight2=Math.max(t._node.leftChildrenAreaHeight,c),t._node.rightChildrenAreaHeight2=Math.max(t._node.rightChildrenAreaHeight,c)},!0,0)}computedTopValue(){Object(f["qb"])(this.root,null,(t,e,n,i)=>{if(t.getData("expand")&&t.children&&t.children.length){let e=this.getMarginY(i+1),n=t.top+t.height/2+e,o=n-t.leftChildrenAreaHeight/2,s=n-t.rightChildrenAreaHeight/2;t.children.forEach(t=>{t.dir===r["a"].LAYOUT_GROW_DIR.LEFT?(t.top=o,o+=t.height+e):(t.top=s,s+=t.height+e)})}},null,!0)}adjustTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;let i=2*this.getMarginY(r+1)+t.height,o=t.leftChildrenAreaHeight2-i,s=t.rightChildrenAreaHeight2-i;(o>0||s>0)&&this.updateBrothers(t,o/2,s/2)},null,!0)}updateBrothers(t,e,n){if(t.parent){let i=t.parent.children.filter(e=>e.dir===t.dir),o=Object(f["C"])(t,i);i.forEach((t,i)=>{if(t.hasCustomPosition())return;let s=0,a=t.dir===r["a"].LAYOUT_GROW_DIR.LEFT?e:n;i<o?s=-a:i>o&&(s=a),t.top+=s,t.children&&t.children.length&&this.updateChildren(t.children,"top",s)}),this.updateBrothers(t.parent,e,n)}}renderLine(t,e,n,r){"curve"===r?this.renderLineCurve(t,e,n):"direct"===r?this.renderLineDirect(t,e,n):this.renderLineStraight(t,e,n)}renderLineStraight(t,e,n){if(t.children.length<=0)return[];let{left:i,top:o,width:s,height:a,expandBtnSize:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(l=0);let u=this.getMarginX(t.layerIndex+1),d=.6*(u-l),f=this.mindMap.themeConfig.nodeUseLineStyle;t.children.forEach((c,h)=>{let u=0,p=0,m=f?c.width:0;c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?(p=-d,u=0===t.layerIndex?i:i-l,m=-m):(p=d,u=0===t.layerIndex?i+s:i+s+l);let g=o+a/2,v=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?c.left+c.width:c.left,y=c.top+c.height/2;g=f&&!t.isRoot?g+a/2:g,y=f?y+c.height/2:y;let b=this.createFoldLine([[u,g],[u+p,g],[u+p,y],[v+m,y]]);this.setLineStyle(n,e[h],b,c)})}renderLineDirect(t,e,n){if(t.children.length<=0)return[];let{left:i,top:o,width:s,height:a,expandBtnSize:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(l=0);const{nodeUseLineStyle:u}=this.mindMap.themeConfig;t.children.forEach((c,h)=>{0===t.layerIndex&&(l=0);let d=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?i-l:i+s+l,f=o+a/2,p=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?c.left+c.width:c.left,m=c.top+c.height/2;f=u&&!t.isRoot?f+a/2:f,m=u?m+c.height/2:m;let g="";u&&(g=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?` L ${c.left},${m}`:` L ${c.left+c.width},${m}`);let v=`M ${d},${f} L ${p},${m}`+g;this.setLineStyle(n,e[h],v,c)})}renderLineCurve(t,e,n){if(t.children.length<=0)return[];let{left:i,top:o,width:s,height:a,expandBtnSize:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(l=0);const{nodeUseLineStyle:u,rootLineKeepSameInCurve:d,rootLineStartPositionKeepSameInCurve:f}=this.mindMap.themeConfig;t.children.forEach((c,h)=>{0===t.layerIndex&&(l=0);let p=0!==t.layerIndex||f?c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?i-l:i+s+l:i+s/2,m=o+a/2,g=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?c.left+c.width:c.left,v=c.top+c.height/2,y="";m=u&&!t.isRoot?m+a/2:m,v=u?v+c.height/2:v;let b="";u&&(b=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?` L ${c.left},${v}`:` L ${c.left+c.width},${v}`),y=t.isRoot&&!d?this.quadraticCurvePath(p,m,g,v)+b:this.cubicBezierPath(p,m,g,v)+b,this.setLineStyle(n,e[h],y,c)})}renderExpandBtn(t,e){let{width:n,height:i,expandBtnSize:o}=t,{translateX:s,translateY:a}=e.transform(),l=this.mindMap.themeConfig.nodeUseLineStyle?i/2:0,c=t.dir===r["a"].LAYOUT_GROW_DIR.LEFT?0-o:n,h=i/2+l;if(c===s&&h===a)return;let u=c-s,d=h-a;e.translate(u,d)}renderGeneralization(t){t.forEach(t=>{let e=t.node.dir===r["a"].LAYOUT_GROW_DIR.LEFT,{top:n,bottom:i,left:o,right:s,generalizationLineMargin:a,generalizationNodeMargin:l}=this.getNodeGeneralizationRenderBoundaries(t,"h"),c=e?o-a:s+a,h=c,u=n,d=c,f=i,p=h+(e?-20:20),m=u+(f-u)/2,g=`M ${h},${u} Q ${p},${m} ${d},${f}`;t.generalizationLine.plot(g),t.generalizationNode.left=c+(e?-l:l)-(e?t.generalizationNode.width:0),t.generalizationNode.top=n+(i-n-t.generalizationNode.height)/2})}renderExpandBtnRect(t,e,n,i,o){o.dir===r["a"].LAYOUT_GROW_DIR.LEFT?t.size(e,i).x(-e).y(0):t.size(e,i).x(n).y(0)}}var v=g;class y extends d["a"]{constructor(t={}){super(t)}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){Object(f["qb"])(this.renderer.renderTree,null,(t,e,n,r,i,o)=>{let s=this.createNode(t,e,n,r,i,o);if(n?this.setNodeCenter(s):e._node.isRoot&&(s.top=e._node.top+e._node.height+this.getMarginX(r)),!t.data.expand)return!0},(t,e,n,r)=>{if(n){let e=!1===t.data.expand?0:t._node.children.length;t._node.childrenAreaWidth=e?t._node.children.reduce((t,e)=>t+e.width,0)+(e+1)*this.getMarginX(r+1):0}},!0,0)}computedLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(t.getData("expand")&&t.children&&t.children.length){let e=this.getMarginX(r+1),i=this.getMarginY(r+1);if(n){let n=t.left+t.width/2-t.childrenAreaWidth/2,r=n+e;t.children.forEach(t=>{t.left=r,r+=t.width+e})}else{let e=t.top+this.getNodeHeightWithGeneralization(t)+i+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0);t.children.forEach(n=>{n.left=t.left+.5*t.width,n.top=e,e+=this.getNodeHeightWithGeneralization(n)+i+(this.getNodeActChildrenLength(n)>0?n.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;if(e&&e.isRoot){let e=this.getNodeAreaWidth(t,!0),n=e-t.width;n>0&&this.updateBrothersLeft(t,n)}let i=t.children.length;if(e&&!e.isRoot&&i>0){let e=this.getMarginY(r+1),n=t.children.reduce((t,e)=>t+this.getNodeHeightWithGeneralization(e)+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0),0)+i*e;this.updateBrothersTop(t,n)}},(t,e,n)=>{if(n){let{right:e,left:n}=this.getNodeBoundaries(t,"h"),r=e-n,i=t.left-n-(r-t.width)/2;this.updateChildren(t.children,"left",i)}},!0)}updateBrothersLeft(t,e){if(t.parent){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((t,n)=>{t.hasCustomPosition()||n<=r||(t.left+=e,t.children&&t.children.length&&this.updateChildren(t.children,"left",e))}),this.updateBrothersLeft(t.parent,e)}}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((t,n)=>{if(t.hasCustomPosition())return;let i=0;n>r&&(i=e),t.top+=i,t.children&&t.children.length&&this.updateChildren(t.children,"top",i)}),this.updateBrothersTop(t.parent,e)}}renderLine(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s,expandBtnSize:a}=t;const{alwaysShowExpandBtn:l,notShowExpandBtn:c}=this.mindMap.opt;l&&!c||(a=0);let h=t.children.length,u=this.getMarginX(t.layerIndex+1);if(t.isRoot){let a=r+o/2,l=i+s,c=.7*u,d=1/0,f=-1/0;t.children.forEach((t,r)=>{let i=t.left+t.width/2,o=t.top;i<d&&(d=i),i>f&&(f=i);let s=this.mindMap.themeConfig.nodeUseLineStyle?` L ${t.left},${o} L ${t.left+t.width},${o}`:"",a=`M ${i},${l+c} L ${i},${l+c>o?o+t.height:o}`+s;this.setLineStyle(n,e[r],a,t)}),d=Math.min(d,a),f=Math.max(f,a);let p=this.lineDraw.path();if(t.style.line(p),p.plot(this.transformPath(`M ${a},${l} L ${a},${l+c}`)),t._lines.push(p),n&&n(p,t),h>0){let e=this.lineDraw.path();t.style.line(e),e.plot(this.transformPath(`M ${d},${l+c} L ${f},${l+c}`)),t._lines.push(e),n&&n(e,t)}}else{let r=i+s,o=-1/0,l=t.left+.3*t.width;if(t.children.forEach((s,a)=>{let c=s.top+s.height/2;c>o&&(o=c);let h="",u=s.left,d=s.left+s.width<l,f=!1;d?u=s.left+s.width:s.left<l&&s.left+s.width>l&&(f=!0,c=s.top,o=c),c>i&&c<r?h=`M ${d?t.left:t.left+t.width},${c} L ${u},${c}`:c<r?(f&&(c=s.top+s.height,u=l),h=`M ${l},${i} L ${l},${c} L ${u},${c}`):(f&&(u=l),h=`M ${l},${c} L ${u},${c}`);let p=this.mindMap.themeConfig.nodeUseLineStyle?` L ${u},${c-s.height/2} L ${u},${c+s.height/2}`:"";h+=p,this.setLineStyle(n,e[a],h,s)}),h>0){let e=this.lineDraw.path();a=h>0?a:0,t.style.line(e),o<r+a?e.hide():(e.plot(this.transformPath(`M ${l},${r+a} L ${l},${o}`)),e.show()),t._lines.push(e),n&&n(e,t)}}}renderExpandBtn(t,e){let{width:n,height:r,expandBtnSize:i,isRoot:o}=t;if(!o){let{translateX:t,translateY:o}=e.transform();e.translate(.3*n-i/2-t,r+i/2-o)}}renderGeneralization(t){t.forEach(t=>{let{top:e,bottom:n,right:r,generalizationLineMargin:i,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"h"),s=r+i,a=e,l=r+i,c=n,h=s+20,u=a+(c-a)/2,d=`M ${s},${a} Q ${h},${u} ${l},${c}`;t.generalizationLine.plot(this.transformPath(d)),t.generalizationNode.left=r+o,t.generalizationNode.top=e+(n-e-t.generalizationNode.height)/2})}renderExpandBtnRect(t,e,n,r,i){t.size(n,e).x(0).y(r)}}var b=y;class w extends d["a"]{constructor(t={}){super(t)}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedLeftValue()},()=>{this.adjustLeftValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){Object(f["qb"])(this.renderer.renderTree,null,(t,e,n,r,i,o)=>{let s=this.createNode(t,e,n,r,i,o);if(n?this.setNodeCenter(s):s.top=e._node.top+e._node.height+this.getMarginX(r),!t.data.expand)return!0},(t,e,n,r)=>{let i=!1===t.data.expand?0:t._node.children.length;t._node.childrenAreaWidth=i?t._node.children.reduce((t,e)=>t+e.width,0)+(i+1)*this.getMarginY(r+1):0;let o=t._node.checkHasGeneralization()?t._node._generalizationNodeWidth+this.getMarginY(r+1):0;t._node.childrenAreaWidth2=Math.max(t._node.childrenAreaWidth,o)},!0,0)}computedLeftValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(t.getData("expand")&&t.children&&t.children.length){let e=this.getMarginY(r+1),n=t.left+t.width/2-t.childrenAreaWidth/2,i=n+e;t.children.forEach(t=>{t.left=i,i+=t.width+e})}},null,!0)}adjustLeftValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;let i=t.childrenAreaWidth2-2*this.getMarginY(r+1)-t.width;i>0&&this.updateBrothers(t,i/2)},null,!0)}updateBrothers(t,e){if(t.parent){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((t,n)=>{if(t.hasCustomPosition())return;let i=0;n<r?i=-e:n>r&&(i=e),t.left+=i,t.children&&t.children.length&&this.updateChildren(t.children,"left",i)}),this.updateBrothers(t.parent,e)}}renderLine(t,e,n,r){"curve"===r?this.renderLineCurve(t,e,n):"direct"===r?this.renderLineDirect(t,e,n):this.renderLineStraight(t,e,n)}renderLineCurve(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s,expandBtnSize:a}=t;const{alwaysShowExpandBtn:l,notShowExpandBtn:c}=this.mindMap.opt;l&&!c||(a=0);const{nodeUseLineStyle:h,rootLineStartPositionKeepSameInCurve:u,rootLineKeepSameInCurve:d}=this.mindMap.themeConfig;t.children.forEach((l,c)=>{0===t.layerIndex&&(a=0);let f=r+o/2,p=0!==t.layerIndex||u?i+s+a:i+s/2,m=l.left+l.width/2,g=l.top,v="",y=h?` L ${l.left},${g} L ${l.left+l.width},${g}`:"";v=t.isRoot&&!d?this.quadraticCurvePath(f,p,m,g,!0)+y:this.cubicBezierPath(f,p,m,g,!0)+y,this.setLineStyle(n,e[c],v,l)})}renderLineDirect(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s}=t;const{nodeUseLineStyle:a}=this.mindMap.themeConfig;let l=r+o/2,c=i+s;t.children.forEach((t,r)=>{let i=t.left+t.width/2,o=t.top,s=a?` L ${t.left},${o} L ${t.left+t.width},${o}`:"",h=`M ${l},${c} L ${i},${o}`+s;this.setLineStyle(n,e[r],h,t)})}renderLineStraight(t,e,n){if(t.children.length<=0)return[];let{left:r,top:i,width:o,height:s,expandBtnSize:a,isRoot:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(a=0);let u=r+o/2,d=i+s,f=this.getMarginX(t.layerIndex+1),p=.7*f,m=1/0,g=-1/0,v=t.children.length;t.children.forEach((t,r)=>{let i=t.left+t.width/2,o=d+p>t.top?t.top+t.height:t.top;i<m&&(m=i),i>g&&(g=i);let s=this.mindMap.themeConfig.nodeUseLineStyle?` L ${t.left},${o} L ${t.left+t.width},${o}`:"",a=`M ${i},${d+p} L ${i},${o}`+s;this.setLineStyle(n,e[r],a,t)}),m=Math.min(u,m),g=Math.max(u,g);let y=this.lineDraw.path();if(t.style.line(y),a=v>0&&!l?a:0,y.plot(this.transformPath(`M ${u},${d+a} L ${u},${d+p}`)),t._lines.push(y),n&&n(y,t),v>0){let e=this.lineDraw.path();t.style.line(e),e.plot(this.transformPath(`M ${m},${d+p} L ${g},${d+p}`)),t._lines.push(e),n&&n(e,t)}}renderExpandBtn(t,e){let{width:n,height:r,expandBtnSize:i}=t,{translateX:o,translateY:s}=e.transform();e.translate(n/2-i/2-o,r+i/2-s)}renderGeneralization(t){t.forEach(t=>{let{bottom:e,left:n,right:r,generalizationLineMargin:i,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"v"),s=n,a=e+i,l=r,c=e+i,h=s+(l-s)/2,u=a+20,d=`M ${s},${a} Q ${h},${u} ${l},${c}`;t.generalizationLine.plot(this.transformPath(d)),t.generalizationNode.top=e+o,t.generalizationNode.left=n+(r-n-t.generalizationNode.width)/2})}renderExpandBtnRect(t,e,n,r,i){t.size(n,e).x(0).y(r)}}var x=w;class C extends d["a"]{constructor(t={},e){super(t),this.layout=e}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){Object(f["qb"])(this.renderer.renderTree,null,(t,e,n,i,o,s)=>{let a=this.createNode(t,e,n,i,o,s);if(n?this.setNodeCenter(a):(this.layout===r["a"].LAYOUT.TIMELINE2?e._node.dir?a.dir=e._node.dir:a.dir=o%2===0?r["a"].LAYOUT_GROW_DIR.BOTTOM:r["a"].LAYOUT_GROW_DIR.TOP:a.dir="",e._node.isRoot&&(a.top=e._node.top+(t._node.height>e._node.height?-(t._node.height-e._node.height)/2:(e._node.height-t._node.height)/2))),!t.data.expand)return!0},null,!0,0)}computedLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r,i)=>{if(t.getData("expand")&&t.children&&t.children.length){let e=this.getMarginX(r+1),i=this.getMarginY(r+1);if(n){let n=t.left+t.width,r=n+e;t.children.forEach(t=>{t.left=r,r+=t.width+e})}else{let e=t.top+t.height+i+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0);t.children.forEach(n=>{n.left=t.left+.5*t.width,n.top=e,e+=n.height+i+(this.getNodeActChildrenLength(n)>0?n.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;t.isRoot&&this.updateBrothersLeft(t);let i=t.children.length;if(e&&!e.isRoot&&i>0){let e=this.getMarginY(r+1),n=t.children.reduce((t,e)=>t+e.height+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0),0)+i*e;this.updateBrothersTop(t,n)}},(t,e,n,i)=>{e&&e.isRoot&&t.dir===r["a"].LAYOUT_GROW_DIR.TOP&&t.children.forEach(e=>{let n=this.getNodeAreaHeight(e),r=e.top;e.top=t.top-(e.top-t.top)-n+t.height,this.updateChildren(e.children,"top",e.top-r)})},!0)}getNodeAreaHeight(t){let e=0,n=t=>{e+=t.height+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+this.getMarginY(t.layerIndex),t.children.length&&t.children.forEach(t=>{n(t)})};return n(t),e}updateBrothersLeft(t){let e=t.children,n=0;e.forEach(t=>{t.left+=n,t.children&&t.children.length&&this.updateChildren(t.children,"left",n);let{left:e,right:r}=this.getNodeBoundaries(t,"h"),i=r-e,o=i-t.width;o>0&&(n+=o)})}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((t,n)=>{if(t.hasCustomPosition())return;let i=0;n>r&&(i=e),t.top+=i,t.children&&t.children.length&&this.updateChildren(t.children,"top",i)}),this.updateBrothersTop(t.parent,e)}}renderLine(t,e,n){if(t.children.length<=0)return[];let{left:i,top:o,width:s,height:a,expandBtnSize:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(l=0);let u=t.children.length;if(t.isRoot){let r=t;t.children.forEach((i,o)=>{let s=r.left+r.width,a=i.left,l=t.top+t.height/2,c=`M ${s},${l} L ${a},${l}`;this.setLineStyle(n,e[o],c,i),r=i})}else{let i=-1/0,s=1/0,c=t.left+.3*t.width;if(t.children.forEach((t,r)=>{let o=t.top+t.height/2;o>i&&(i=o),o<s&&(s=o);let a=`M ${c},${o} L ${t.left},${o}`;this.setLineStyle(n,e[r],a,t)}),u>0){let e=this.lineDraw.path();l=u>0?l:0,t.parent&&t.parent.isRoot&&t.dir===r["a"].LAYOUT_GROW_DIR.TOP?e.plot(this.transformPath(`M ${c},${o} L ${c},${s}`)):e.plot(this.transformPath(`M ${c},${o+a+l} L ${c},${i}`)),t.style.line(e),t._lines.push(e),n&&n(e,t)}}}renderExpandBtn(t,e){let{width:n,height:i,expandBtnSize:o,isRoot:s}=t;if(!s){let{translateX:s,translateY:a}=e.transform();t.parent&&t.parent.isRoot&&t.dir===r["a"].LAYOUT_GROW_DIR.TOP?e.translate(.3*n-o/2-s,-o/2-a):e.translate(.3*n-o/2-s,i+o/2-a)}}renderGeneralization(t){t.forEach(t=>{let{top:e,bottom:n,right:r,generalizationLineMargin:i,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"h"),s=r+i,a=e,l=r+i,c=n,h=s+20,u=a+(c-a)/2,d=`M ${s},${a} Q ${h},${u} ${l},${c}`;t.generalizationLine.plot(this.transformPath(d)),t.generalizationNode.left=r+o,t.generalizationNode.top=e+(n-e-t.generalizationNode.height)/2})}renderExpandBtnRect(t,e,n,i,o){if(this.layout===r["a"].LAYOUT.TIMELINE)t.size(n,e).x(0).y(i);else{let s="";s=o.dir===r["a"].LAYOUT_GROW_DIR.TOP&&1===o.layerIndex?r["a"].LAYOUT_GROW_DIR.TOP:r["a"].LAYOUT_GROW_DIR.BOTTOM,s===r["a"].LAYOUT_GROW_DIR.TOP?t.size(n,e).x(0).y(-e):t.size(n,e).x(0).y(i)}}}var E=C;class k extends d["a"]{constructor(t={},e){super(t),this.layout=e}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){Object(f["qb"])(this.renderer.renderTree,null,(t,e,n,i,o,s)=>{let a=this.createNode(t,e,n,i,o,s);if(n?this.setNodeCenter(a):(e._node.dir?a.dir=e._node.dir:a.dir=o%2===0?r["a"].LAYOUT_GROW_DIR.RIGHT:r["a"].LAYOUT_GROW_DIR.LEFT,e._node.isRoot?a.left=e._node.left+(t._node.width>e._node.width?-(t._node.width-e._node.width)/2:(e._node.width-t._node.width)/2):a.left=a.dir===r["a"].LAYOUT_GROW_DIR.RIGHT?e._node.left+e._node.width+this.getMarginX(i):e._node.left-this.getMarginX(i)-a.width),!t.data.expand)return!0},(t,e,n,r)=>{if(n)return;let i=!1===t.data.expand?0:t._node.children.length;t._node.childrenAreaHeight=i?t._node.children.reduce((t,e)=>t+e.height,0)+(i+1)*this.getMarginY(r+1):0},!0,0)}computedTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r,i)=>{if(t.getData("expand")&&t.children&&t.children.length){let e=this.getMarginY(r+1);if(n){let n=t.top+t.height,r=n+e;t.children.forEach(t=>{t.top=r,r+=t.height+e})}else{let e=this.getMarginY(r+1),n=t.top+t.height/2+e,i=n-t.childrenAreaHeight/2;t.children.forEach(t=>{t.top=i,i+=t.height+e})}}},null,!0)}adjustLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;if(n)return;let i=2*this.getMarginY(r+1)+t.height,o=t.childrenAreaHeight-i;o>0&&this.updateBrothers(t,o/2)},null,!0)}updateBrothers(t,e){if(t.parent){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((n,i)=>{if(n.hasCustomPosition())return;if(!t.parent.isRoot&&n.uid===t.uid)return;let o=0;t.parent.isRoot?o=i<r?0:i>r?2*e:e:i<r?o=-e:i>r&&(o=e),n.top+=o,n.children&&n.children.length&&this.updateChildren(n.children,"top",o)}),this.updateBrothers(t.parent,e)}}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((t,n)=>{if(t.hasCustomPosition())return;let i=0;n>r&&(i=e),t.top+=i,t.children&&t.children.length&&this.updateChildren(t.children,"top",i)}),this.updateBrothersTop(t.parent,e)}}renderLine(t,e,n,r){"curve"===r?this.renderLineCurve(t,e,n):"direct"===r?this.renderLineDirect(t,e,n):this.renderLineStraight(t,e,n)}renderLineStraight(t,e,n){if(t.children.length<=0)return[];let{expandBtnSize:i}=t;const{alwaysShowExpandBtn:o,notShowExpandBtn:s}=this.mindMap.opt;if(o&&!s||(i=0),t.isRoot){let r=t;t.children.forEach((i,o)=>{let s=r.top+r.height,a=i.top,l=t.left+t.width/2,c=`M ${l},${s} L ${l},${a}`;this.setLineStyle(n,e[o],c,i),r=i})}else if(t.dir===r["a"].LAYOUT_GROW_DIR.RIGHT){let r=t.left+t.width,o=t.top+t.height/2,s=this.getMarginX(t.layerIndex+1),a=.6*(s-i);t.children.forEach((t,i)=>{let s=t.left,l=t.top+t.height/2,c=this.createFoldLine([[r,o],[r+a,o],[r+a,l],[s,l]]);this.setLineStyle(n,e[i],c,t)})}else{let r=t.left,o=t.top+t.height/2,s=this.getMarginX(t.layerIndex+1),a=.6*(s-i);t.children.forEach((t,i)=>{let s=t.left+t.width,l=t.top+t.height/2,c=this.createFoldLine([[r,o],[r-a,o],[r-a,l],[s,l]]);this.setLineStyle(n,e[i],c,t)})}}renderLineDirect(t,e,n){if(t.children.length<=0)return[];let{left:i,top:o,width:s,height:a,expandBtnSize:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(l=0),t.children.forEach((c,h)=>{if(t.isRoot){let r=t;t.children.forEach((i,o)=>{let s=r.top+r.height,a=i.top,l=t.left+t.width/2,c=`M ${l},${s} L ${l},${a}`;this.setLineStyle(n,e[o],c,i),r=i})}else{let t=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?i-l:i+s+l,u=o+a/2,d=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?c.left+c.width:c.left,f=c.top+c.height/2,p=`M ${t},${u} L ${d},${f}`;this.setLineStyle(n,e[h],p,c)}})}renderLineCurve(t,e,n){if(t.children.length<=0)return[];let{left:i,top:o,width:s,height:a,expandBtnSize:l}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:h}=this.mindMap.opt;c&&!h||(l=0),t.children.forEach((c,h)=>{if(t.isRoot){let r=t;t.children.forEach((i,o)=>{let s=r.top+r.height,a=i.top,l=t.left+t.width/2,c=`M ${l},${s} L ${l},${a}`;this.setLineStyle(n,e[o],c,i),r=i})}else{let t=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?i-l:i+s+l,u=o+a/2,d=c.dir===r["a"].LAYOUT_GROW_DIR.LEFT?c.left+c.width:c.left,f=c.top+c.height/2,p=this.cubicBezierPath(t,u,d,f);this.setLineStyle(n,e[h],p,c)}})}renderExpandBtn(t,e){let{width:n,height:i,expandBtnSize:o,isRoot:s}=t;if(!s){let{translateX:s,translateY:a}=e.transform();t.dir===r["a"].LAYOUT_GROW_DIR.RIGHT?e.translate(n-s,i/2-a):e.translate(-o-s,i/2-a)}}renderGeneralization(t){t.forEach(t=>{let e=t.node.dir===r["a"].LAYOUT_GROW_DIR.LEFT,{top:n,bottom:i,left:o,right:s,generalizationLineMargin:a,generalizationNodeMargin:l}=this.getNodeGeneralizationRenderBoundaries(t,"h"),c=e?o-a:s+a,h=c,u=n,d=c,f=i,p=h+(e?-20:20),m=u+(f-u)/2,g=`M ${h},${u} Q ${p},${m} ${d},${f}`;t.generalizationLine.plot(this.transformPath(g)),t.generalizationNode.left=c+(e?-l:l)-(e?t.generalizationNode.width:0),t.generalizationNode.top=n+(i-n-t.generalizationNode.height)/2})}renderExpandBtnRect(t,e,n,i,o){o.dir===r["a"].LAYOUT_GROW_DIR.LEFT?t.size(e,i).x(-e).y(0):t.size(e,i).x(n).y(0)}}var N=k,O={top:{renderExpandBtn({node:t,btn:e,expandBtnSize:n,translateX:r,translateY:i,width:o,height:s}){t.parent&&t.parent.isRoot?e.translate(.3*o-n/2-r,-n/2-i):e.translate(.3*o-n/2-r,s+n/2-i)},renderLine({node:t,line:e,top:n,x:r,lineLength:i,height:o,expandBtnSize:s,maxy:a,ctx:l}){t.parent&&t.parent.isRoot?e.plot(l.transformPath(`M ${r},${n} L ${r+i},${n-Math.tan(Object(f["q"])(l.mindMap.opt.fishboneDeg))*i}`)):e.plot(l.transformPath(`M ${r},${n+o+s} L ${r},${a}`))},computedLeftTopValue({layerIndex:t,node:e,ctx:n}){if(t>=1&&e.children){let r=n.getMarginY(t+1),i=e.left+e.width*n.childIndent,o=e.top+e.height+(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+r;e.children.forEach(t=>{t.left=i,t.top+=o,o+=t.height+(n.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+r})}},adjustLeftTopValueBefore({node:t,parent:e,ctx:n,layerIndex:r}){let i=t.children.length,o=n.getMarginY(r+1);if(e&&!e.isRoot&&i>0){let e=t.children.reduce((t,e)=>t+e.height+(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+o,0);n.updateBrothersTop(t,e)}},adjustLeftTopValueAfter({parent:t,node:e,ctx:n}){if(t&&t.isRoot){let t=n.getMarginY(e.layerIndex+1),r=e.expandBtnSize+t;e.children.forEach(t=>{let i=n.getNodeAreaHeight(t),o=t.top,s=t.left;t.top=e.top-(t.top-e.top)-i+e.height,t.left=e.left+e.width*n.indent+(i+r)/Math.tan(Object(f["q"])(n.mindMap.opt.fishboneDeg)),r+=i,n.updateChildrenPro(t.children,{top:t.top-o,left:t.left-s})})}}},bottom:{renderExpandBtn({node:t,btn:e,expandBtnSize:n,translateX:r,translateY:i,width:o,height:s}){t.parent&&t.parent.isRoot?e.translate(.3*o-n/2-r,s+n/2-i):e.translate(.3*o-n/2-r,-n/2-i)},renderLine({node:t,line:e,top:n,x:r,lineLength:i,height:o,miny:s,ctx:a}){t.parent&&t.parent.isRoot?e.plot(a.transformPath(`M ${r},${n+o} L ${r+i},${n+o+Math.tan(Object(f["q"])(a.mindMap.opt.fishboneDeg))*i}`)):e.plot(a.transformPath(`M ${r},${n} L ${r},${s}`))},computedLeftTopValue({layerIndex:t,node:e,ctx:n}){let r=n.getMarginY(t+1);if(1===t&&e.children){let t=e.left+e.width*n.childIndent,i=e.top+e.height+(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+r;e.children.forEach(e=>{e.left=t,e.top=i+(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0),i+=e.height+(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+r})}if(t>1&&e.children){let t=e.left+e.width*n.childIndent,i=e.top-(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)-r;e.children.forEach(e=>{e.left=t,e.top=i-e.height,i-=e.height+(n.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+r})}},adjustLeftTopValueBefore({node:t,ctx:e,layerIndex:n}){let r=e.getMarginY(n+1),i=t.children.length;if(n>2&&i>0){let n=t.children.reduce((t,n)=>t+n.height+(e.getNodeActChildrenLength(n)>0?n.expandBtnSize:0)+r,0);e.updateBrothersTop(t,-n)}},adjustLeftTopValueAfter({parent:t,node:e,ctx:n}){if(t&&t.isRoot){let t=n.getMarginY(e.layerIndex+1),r=0,i=e.expandBtnSize;e.children.forEach(o=>{let s=n.getNodeActChildrenLength(o)>0,a=n.getNodeAreaHeight(o),l=s?a-o.height-(s?o.expandBtnSize:0):0;l-=s?t:0;let c=r+l,h=o.left;o.top+=c,o.left=e.left+e.width*n.indent+(a+i)/Math.tan(Object(f["q"])(n.mindMap.opt.fishboneDeg)),r+=l,i+=a,n.updateChildrenPro(o.children,{top:c,left:o.left-h})})}}}};class T extends d["a"]{constructor(t={}){super(t),this.indent=.3,this.childIndent=.5}doLayout(t){let e=[()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}];Object(f["d"])(e)}computedBaseValue(){Object(f["qb"])(this.renderer.renderTree,null,(t,e,n,i,o,s)=>{let a=this.createNode(t,e,n,i,o,s);if(n)this.setNodeCenter(a);else if(e._node.dir?a.dir=e._node.dir:a.dir=o%2===0?r["a"].LAYOUT_GROW_DIR.TOP:r["a"].LAYOUT_GROW_DIR.BOTTOM,e._node.isRoot){let t=this.getMarginY(i);this.checkIsTop(a)?a.top=e._node.top-a.height-t:a.top=e._node.top+e._node.height+t}if(!t.data.expand)return!0},null,!0,0)}computedLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(t.isRoot){let e=this.getMarginX(r+1),n=t.left+t.width+t.height+e,i=t.left+t.width+t.height+e;t.children.forEach(t=>{this.checkIsTop(t)?(t.left=n,n+=t.width+e):(t.left=i+20,i+=t.width+e)})}let i={layerIndex:r,node:t,ctx:this};this.checkIsTop(t)?O.top.computedLeftTopValue(i):O.bottom.computedLeftTopValue(i)},null,!0)}adjustLeftTopValue(){Object(f["qb"])(this.root,null,(t,e,n,r)=>{if(!t.getData("expand"))return;let i={node:t,parent:e,layerIndex:r,ctx:this};this.checkIsTop(t)?O.top.adjustLeftTopValueBefore(i):O.bottom.adjustLeftTopValueBefore(i)},(t,e)=>{let n={parent:e,node:t,ctx:this};if(this.checkIsTop(t)?O.top.adjustLeftTopValueAfter(n):O.bottom.adjustLeftTopValueAfter(n),t.isRoot){let e=0,n=0;t.children.forEach(t=>{if(this.checkIsTop(t)){t.left+=e,this.updateChildren(t.children,"left",e);let{left:n,right:r}=this.getNodeBoundaries(t,"h");e+=r-n}else{t.left+=n,this.updateChildren(t.children,"left",n);let{left:e,right:r}=this.getNodeBoundaries(t,"h");n+=r-e}})}},!0)}getNodeAreaHeight(t){let e=0,n=t=>{let r=this.getMarginY(t.layerIndex);e+=t.height+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+r,t.children.length&&t.children.forEach(t=>{n(t)})};return n(t),e}updateBrothersLeft(t){let e=t.children,n=0;e.forEach(t=>{t.left+=n,t.children&&t.children.length&&this.updateChildren(t.children,"left",n);let{left:e,right:r}=this.getNodeBoundaries(t,"h"),i=r-e,o=i-t.width;o>0&&(n+=o)})}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let n=t.parent.children,r=Object(f["C"])(t,n);n.forEach((t,n)=>{if(t.hasCustomPosition())return;let i=0;n>r&&(i=e),t.top+=i,t.children&&t.children.length&&this.updateChildren(t.children,"top",i)}),this.checkIsTop(t)?this.updateBrothersTop(t.parent,e):this.updateBrothersTop(t.parent,3===t.layerIndex?0:e)}}checkIsTop(t){return t.dir===r["a"].LAYOUT_GROW_DIR.TOP}renderLine(t,e,n){if(1!==t.layerIndex&&t.children.length<=0)return[];let{top:r,height:i,expandBtnSize:o}=t;const{alwaysShowExpandBtn:s,notShowExpandBtn:a}=this.mindMap.opt;s&&!a||(o=0);let l=t.children.length;if(t.isRoot){let e=-1/0;t.children.forEach(r=>{r.left>e&&(e=r.left);let i=this.getMarginY(r.layerIndex),o=r.left,s=t.height/2+i,a=s/Math.tan(Object(f["q"])(this.mindMap.opt.fishboneDeg)),l=this.lineDraw.path();this.checkIsTop(r)?l.plot(this.transformPath(`M ${o-a},${r.top+r.height+s} L ${r.left},${r.top+r.height}`)):l.plot(this.transformPath(`M ${o-a},${r.top-s} L ${o},${r.top}`)),t.style.line(l),t._lines.push(l),n&&n(l,t)});let r=t.top+t.height/2,i=t.height/2+this.getMarginY(t.layerIndex+1),o=this.lineDraw.path();o.plot(this.transformPath(`M ${t.left+t.width},${r} L ${e-i/Math.tan(Object(f["q"])(this.mindMap.opt.fishboneDeg))},${r}`)),t.style.line(o),t._lines.push(o),n&&n(o,t)}else{let s=-1/0,a=1/0,c=-1/0,h=t.left+t.width*this.indent;if(t.children.forEach((r,i)=>{r.left>c&&(c=r.left);let o=r.top+r.height/2;if(o>s&&(s=o),o<a&&(a=o),t.layerIndex>1){let t=`M ${h},${o} L ${r.left},${o}`;this.setLineStyle(n,e[i],t,r)}}),l>=0){let e=this.lineDraw.path();o=l>0?o:0;let u=c-t.left-t.width*this.indent;u=Math.max(u,0);let d={node:t,line:e,top:r,x:h,lineLength:u,height:i,expandBtnSize:o,maxy:s,miny:a,ctx:this};this.checkIsTop(t)?O.top.renderLine(d):O.bottom.renderLine(d),t.style.line(e),t._lines.push(e),n&&n(e,t)}}}renderExpandBtn(t,e){let{width:n,height:r,expandBtnSize:i,isRoot:o}=t;if(!o){let{translateX:o,translateY:s}=e.transform(),a={node:t,btn:e,expandBtnSize:i,translateX:o,translateY:s,width:n,height:r};this.checkIsTop(t)?O.top.renderExpandBtn(a):O.bottom.renderExpandBtn(a)}}renderGeneralization(t){t.forEach(t=>{let{top:e,bottom:n,right:r,generalizationLineMargin:i,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"h"),s=r+i,a=e,l=r+i,c=n,h=s+20,u=a+(c-a)/2,d=`M ${s},${a} Q ${h},${u} ${l},${c}`;t.generalizationLine.plot(this.transformPath(d)),t.generalizationNode.left=r+o,t.generalizationNode.top=e+(n-e-t.generalizationNode.height)/2})}renderExpandBtnRect(t,e,n,i,o){let s="";s=o.dir===r["a"].LAYOUT_GROW_DIR.TOP?1===o.layerIndex?r["a"].LAYOUT_GROW_DIR.TOP:r["a"].LAYOUT_GROW_DIR.BOTTOM:1===o.layerIndex?r["a"].LAYOUT_GROW_DIR.BOTTOM:r["a"].LAYOUT_GROW_DIR.TOP,s===r["a"].LAYOUT_GROW_DIR.TOP?t.size(n,e).x(0).y(-e):t.size(n,e).x(0).y(i)}}var M=T;class S{constructor(t){this.renderer=t,this.mindMap=t.mindMap,this.currentNode=null,this.textEditNode=null,this.showTextEdit=!1,this.cacheEditingText="",this.hasBodyMousedown=!1,this.textNodePaddingX=5,this.textNodePaddingY=3,this.bindEvent()}bindEvent(){this.show=this.show.bind(this),this.onScale=this.onScale.bind(this),this.onKeydown=this.onKeydown.bind(this),this.mindMap.on("node_dblclick",(t,e,n)=>{this.show({node:t,e:e,isInserting:n})}),this.mindMap.on("draw_click",()=>{this.hideEditTextBox()}),this.mindMap.on("body_mousedown",()=>{this.hasBodyMousedown=!0}),this.mindMap.on("body_click",()=>{this.hasBodyMousedown&&(this.hasBodyMousedown=!1,this.mindMap.opt.isEndNodeTextEditOnClickOuter&&this.hideEditTextBox())}),this.mindMap.on("svg_mousedown",()=>{this.hideEditTextBox()}),this.mindMap.on("expand_btn_click",()=>{this.hideEditTextBox()}),this.mindMap.on("before_node_active",()=>{this.hideEditTextBox()}),this.mindMap.on("mousewheel",()=>{this.mindMap.opt.mousewheelAction===r["a"].MOUSE_WHEEL_ACTION.MOVE&&this.hideEditTextBox()}),this.mindMap.keyCommand.addShortcut("F2",()=>{this.renderer.activeNodeList.length<=0||this.show({node:this.renderer.activeNodeList[0]})}),this.mindMap.on("scale",this.onScale),this.mindMap.opt.enableAutoEnterTextEditWhenKeydown&&window.addEventListener("keydown",this.onKeydown),this.mindMap.on("beforeDestroy",()=>{this.unBindEvent()}),this.mindMap.on("after_update_config",(t,e)=>{t.openRealtimeRenderOnNodeTextEdit!==e.openRealtimeRenderOnNodeTextEdit&&(this.mindMap.richText?this.mindMap.richText.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t.openRealtimeRenderOnNodeTextEdit):this.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t.openRealtimeRenderOnNodeTextEdit)),t.enableAutoEnterTextEditWhenKeydown!==e.enableAutoEnterTextEditWhenKeydown&&window[t.enableAutoEnterTextEditWhenKeydown?"addEventListener":"removeEventListener"]("keydown",this.onKeydown)})}unBindEvent(){window.removeEventListener("keydown",this.onKeydown)}onKeydown(t){const e=this.mindMap.renderer.activeNodeList;if(e.length<=0||e.length>1)return;const n=e[0];n&&this.checkIsAutoEnterTextEditKey(t)&&this.show({node:n,e:t,isInserting:!1,isFromKeyDown:!0})}checkIsAutoEnterTextEditKey(t){const e=t.keyCode;return(229===e||e>=65&&e<=90||e>=48&&e<=57)&&!this.mindMap.keyCommand.hasCombinationKey(t)}registerTmpShortcut(){this.mindMap.keyCommand.addShortcut("Enter",()=>{this.hideEditTextBox()}),this.mindMap.keyCommand.addShortcut("Tab",()=>{this.hideEditTextBox()})}isShowTextEdit(){return this.mindMap.richText?this.mindMap.richText.showTextEdit:this.showTextEdit}async show({node:t,isInserting:e=!1,isFromKeyDown:n=!1,isFromScale:i=!1}){if(t.isUseCustomNodeContent())return;const{beforeTextEdit:o,openRealtimeRenderOnNodeTextEdit:s}=this.mindMap.opt;if("function"===typeof o){let n=!1;try{n=await o(t,e)}catch(d){n=!1,this.mindMap.opt.errorHandler(r["b"].BEFORE_TEXT_EDIT_ERROR,d)}if(!n)return}this.currentNode=t;const{offsetLeft:a,offsetTop:l}=Object(f["i"])(this.mindMap,t);this.mindMap.view.translateXY(a,l);const c=t._textData.node,h=c.node.getBoundingClientRect();s&&c.hide();const u={node:t,rect:h,isInserting:e,isFromKeyDown:n,isFromScale:i};this.mindMap.richText?this.mindMap.richText.showEditText(u):this.showEditTextBox(u)}onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t){this.textEditNode&&(this.textEditNode.style.background=t?"transparent":this.currentNode?this.getBackground(this.currentNode):"",this.textEditNode.style.boxShadow=t?"none":"0 0 20px rgba(0,0,0,.5)")}onScale(){const t=this.getCurrentEditNode();t&&(this.mindMap.richText?(this.mindMap.richText.cacheEditingText=this.mindMap.richText.getEditText(),this.mindMap.richText.showTextEdit=!1):(this.cacheEditingText=this.getEditText(),this.showTextEdit=!1),this.show({node:t,isFromScale:!0}))}showEditTextBox({node:t,rect:e,isInserting:n,isFromKeyDown:i,isFromScale:o}){if(this.showTextEdit)return;const{nodeTextEditZIndex:s,textAutoWrapWidth:a,selectTextOnEnterEditText:l,openRealtimeRenderOnNodeTextEdit:c}=this.mindMap.opt;if(o||this.mindMap.emit("before_show_text_edit"),this.registerTmpShortcut(),!this.textEditNode){this.textEditNode=document.createElement("div"),this.textEditNode.classList.add("smm-node-edit-wrap"),this.textEditNode.style.cssText=`\n        position: fixed;\n        box-sizing: border-box;\n        ${c?"":"box-shadow: 0 0 20px rgba(0,0,0,.5);"}\n        padding: ${this.textNodePaddingY}px ${this.textNodePaddingX}px;\n        margin-left: -${this.textNodePaddingX}px;\n        margin-top: -${this.textNodePaddingY}px;\n        outline: none; \n        word-break: break-all;\n        line-break: anywhere;\n      `,this.textEditNode.setAttribute("contenteditable",!0),this.textEditNode.addEventListener("keyup",t=>{t.stopPropagation()}),this.textEditNode.addEventListener("click",t=>{t.stopPropagation()}),this.textEditNode.addEventListener("mousedown",t=>{t.stopPropagation()}),this.textEditNode.addEventListener("keydown",t=>{this.checkIsAutoEnterTextEditKey(t)&&t.stopPropagation()}),this.textEditNode.addEventListener("paste",t=>{const e=t.clipboardData.getData("text"),{isSmm:n,data:r}=Object(f["j"])(e);n&&r[0]&&r[0].data?Object(f["M"])(t,Object(f["I"])(r[0].data.text)):Object(f["M"])(t)}),this.textEditNode.addEventListener("input",()=>{this.mindMap.emit("node_text_edit_change",{node:this.currentNode,text:this.getEditText(),richText:!1})});const t=this.mindMap.opt.customInnerElsAppendTo||document.body;t.appendChild(this.textEditNode)}const h=this.mindMap.view.scale,u=t.style.merge("fontSize"),d=(this.cacheEditingText||t.getData("text")).split(/\n/gim).map(t=>Object(f["O"])(t)),p="true"===t._textData.node.attr("data-ismultiLine");t.style.domText(this.textEditNode,h),c||(this.textEditNode.style.background=this.getBackground(t)),this.textEditNode.style.zIndex=s,this.textEditNode.innerHTML=d.join("<br>"),this.textEditNode.style.minWidth=e.width+2*this.textNodePaddingX+"px",this.textEditNode.style.minHeight=e.height+"px",this.textEditNode.style.left=e.left+"px",this.textEditNode.style.top=e.top+"px",this.textEditNode.style.display="block",this.textEditNode.style.maxWidth=a*h+"px",p?(this.textEditNode.style.lineHeight=r["g"],this.textEditNode.style.transform=`translateY(${(r["g"]-1)*u/2*h}px)`):this.textEditNode.style.lineHeight="normal",this.showTextEdit=!0,n||l&&!i?Object(f["kb"])(this.textEditNode):Object(f["t"])(this.textEditNode),this.cacheEditingText=""}updateTextEditNode(t=[]){if(this.mindMap.richText)return void this.mindMap.richText.updateTextEditNode();if(!this.showTextEdit||!this.currentNode)return;const e=this.currentNode._textData.node.node.getBoundingClientRect();this.textEditNode.style.minWidth=e.width+2*this.textNodePaddingX+"px",this.textEditNode.style.minHeight=e.height+2*this.textNodePaddingY+"px",t.includes("left")||(this.textEditNode.style.left=e.left+"px"),this.textEditNode.style.top=e.top+"px"}getBackground(t){const e=t.style.merge("gradientStyle");if(e){const e=t.style.merge("startColor"),n=t.style.merge("endColor");return`linear-gradient(to right, ${e}, ${n})`}{const e=t.style.merge("fillColor"),n=t.style.merge("color");return"transparent"===e?Object(f["U"])(n)?Object(f["K"])(this.mindMap.themeConfig):"#fff":e}}removeTextEditEl(){if(this.mindMap.richText)return void this.mindMap.richText.removeTextEditEl();if(!this.textEditNode)return;const t=this.mindMap.opt.customInnerElsAppendTo||document.body;t.removeChild(this.textEditNode)}getEditText(){return Object(f["H"])(this.textEditNode.innerHTML)}hideEditTextBox(){if(this.mindMap.richText)return this.mindMap.richText.hideEditText();if(!this.showTextEdit)return;const t=this.currentNode,e=this.getEditText();this.currentNode=null,this.textEditNode.style.display="none",this.textEditNode.innerHTML="",this.textEditNode.style.fontFamily="inherit",this.textEditNode.style.fontSize="inherit",this.textEditNode.style.fontWeight="normal",this.textEditNode.style.transform="translateY(0)",this.showTextEdit=!1,this.mindMap.execCommand("SET_NODE_TEXT",t,e),this.mindMap.render(),this.mindMap.emit("hide_text_edit",this.textEditNode,this.renderer.activeNodeList,t)}getCurrentEditNode(){return this.mindMap.richText?this.mindMap.richText.node:this.currentNode}}var L=n("8dc9"),A={paddingX:15,paddingY:5,imgMaxWidth:200,imgMaxHeight:100,iconSize:20,lineWidth:1,lineColor:"#549688",lineDasharray:"none",lineStyle:"straight",rootLineKeepSameInCurve:!0,rootLineStartPositionKeepSameInCurve:!1,lineRadius:5,showLineMarker:!1,generalizationLineWidth:1,generalizationLineColor:"#549688",generalizationLineMargin:0,generalizationNodeMargin:20,associativeLineWidth:2,associativeLineColor:"rgb(51, 51, 51)",associativeLineActiveWidth:8,associativeLineActiveColor:"rgba(2, 167, 240, 1)",associativeLineDasharray:[6,4],associativeLineTextColor:"rgb(51, 51, 51)",associativeLineTextFontSize:14,associativeLineTextLineHeight:1.2,associativeLineTextFontFamily:"微软雅黑, Microsoft YaHei",backgroundColor:"#fafafa",backgroundImage:"none",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",nodeUseLineStyle:!1,root:{shape:"rectangle",fillColor:"#549688",fontFamily:"微软雅黑, Microsoft YaHei",color:"#fff",fontSize:16,fontWeight:"bold",fontStyle:"normal",borderColor:"transparent",borderWidth:0,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:"",hoverRectRadius:5},second:{shape:"rectangle",marginX:100,marginY:40,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#565656",fontSize:16,fontWeight:"normal",fontStyle:"normal",borderColor:"#549688",borderWidth:1,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:"",hoverRectRadius:5},node:{shape:"rectangle",marginX:50,marginY:0,fillColor:"transparent",fontFamily:"微软雅黑, Microsoft YaHei",color:"#6a6d6c",fontSize:14,fontWeight:"normal",fontStyle:"normal",borderColor:"transparent",borderWidth:0,borderRadius:5,borderDasharray:"none",textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:"",hoverRectRadius:5},generalization:{shape:"rectangle",marginX:100,marginY:40,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#565656",fontSize:16,fontWeight:"normal",fontStyle:"normal",borderColor:"#549688",borderWidth:1,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],hoverRectColor:"",hoverRectRadius:5}};const D=["lineWidth","lineColor","lineDasharray","lineStyle","generalizationLineWidth","generalizationLineColor","associativeLineWidth","associativeLineColor","associativeLineActiveWidth","associativeLineActiveColor","associativeLineTextColor","associativeLineTextFontSize","associativeLineTextLineHeight","associativeLineTextFontFamily","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","rootLineKeepSameInCurve","rootLineStartPositionKeepSameInCurve","showLineMarker","gradientStyle","lineRadius","startColor","endColor","startDir","endDir","hoverRectColor","hoverRectRadius"],_=t=>{let e=Object.keys(t);for(let n=0;n<e.length;n++)if(!D.find(t=>t===e[n]))return!1;return!0},R=["lineColor","lineDasharray","lineWidth","lineMarkerDir"];var P=n("4378");const I={[r["a"].LAYOUT.LOGICAL_STRUCTURE]:m,[r["a"].LAYOUT.LOGICAL_STRUCTURE_LEFT]:m,[r["a"].LAYOUT.MIND_MAP]:v,[r["a"].LAYOUT.CATALOG_ORGANIZATION]:b,[r["a"].LAYOUT.ORGANIZATION_STRUCTURE]:x,[r["a"].LAYOUT.TIMELINE]:E,[r["a"].LAYOUT.TIMELINE2]:E,[r["a"].LAYOUT.VERTICAL_TIMELINE]:N,[r["a"].LAYOUT.FISHBONE]:M};class j{constructor(t={}){this.opt=t,this.mindMap=t.mindMap,this.themeConfig=this.mindMap.themeConfig,this.renderTree=this.mindMap.opt.data?u()({},this.mindMap.opt.data):null,this.reRender=!1,this.isRendering=!1,this.hasWaitRendering=!1,this.waitRenderingParams=[],this.nodeCache={},this.lastNodeCache={},this.renderSource="",this.activeNodeList=[],this.root=null,this.textEdit=new S(this),this.lastBeingCopyData=null,this.beingCopyData=null,this.beingPasteText="",this.beingPasteImgSize=0,this.currentBeingPasteType="",this.pasteData={text:null,img:null},this.highlightBoxNode=null,this.highlightBoxNodeStyle=null,this.lastActiveNodeList=[],this.setLayout(),this.bindEvent(),this.registerCommands(),this.registerShortcutKeys()}setLayout(){this.layout=new(I[this.mindMap.opt.layout]?I[this.mindMap.opt.layout]:I[r["a"].LAYOUT.LOGICAL_STRUCTURE])(this,this.mindMap.opt.layout)}setData(t){this.hasRichTextPlugin()?this.renderTree=t?this.mindMap.richText.handleSetData(t):null:this.renderTree=t}bindEvent(){const{openPerformance:t,performanceConfig:e,openRealtimeRenderOnNodeTextEdit:n}=this.mindMap.opt;this.mindMap.on("draw_click",t=>{this.clearActiveNodeListOnDrawClick(t,"click")}),this.mindMap.on("contextmenu",t=>{this.clearActiveNodeListOnDrawClick(t,"contextmenu")}),this.mindMap.svg.on("dblclick",()=>{this.mindMap.opt.enableDblclickBackToRootNode&&this.setRootNodeCenter()});const r=Object(f["ob"])(()=>{this.root&&(this.mindMap.emit("node_tree_render_start"),this.root.render(()=>{this.mindMap.emit("node_tree_render_end")},!1,!0))},e.time);t&&this.mindMap.on("view_data_change",r),this.onNodeTextEditChange=this.onNodeTextEditChange.bind(this),n&&this.mindMap.on("node_text_edit_change",this.onNodeTextEditChange),this.mindMap.on("after_update_config",(t,e)=>{t.openPerformance!==e.openPerformance&&(this.mindMap[t.openPerformance?"on":"off"]("view_data_change",r),this.forceLoadNode()),t.openRealtimeRenderOnNodeTextEdit!==e.openRealtimeRenderOnNodeTextEdit&&this.mindMap[t.openRealtimeRenderOnNodeTextEdit?"on":"off"]("node_text_edit_change",this.onNodeTextEditChange)})}onNodeTextEditChange({node:t,text:e}){t._textData=t.createTextNode(e);const{width:n,height:r}=t.getNodeRect();t.width=n,t.height=r,t.layout(),this.mindMap.render(()=>{this.textEdit.updateTextEditNode(["left"])})}forceLoadNode(t){t=t||this.root,t&&(this.mindMap.emit("node_tree_render_start"),t.render(()=>{this.mindMap.emit("node_tree_render_end")},!0))}registerCommands(){this.selectAll=this.selectAll.bind(this),this.mindMap.command.add("SELECT_ALL",this.selectAll),this.back=this.back.bind(this),this.mindMap.command.add("BACK",this.back),this.forward=this.forward.bind(this),this.mindMap.command.add("FORWARD",this.forward),this.insertNode=this.insertNode.bind(this),this.mindMap.command.add("INSERT_NODE",this.insertNode),this.insertMultiNode=this.insertMultiNode.bind(this),this.mindMap.command.add("INSERT_MULTI_NODE",this.insertMultiNode),this.insertChildNode=this.insertChildNode.bind(this),this.mindMap.command.add("INSERT_CHILD_NODE",this.insertChildNode),this.insertMultiChildNode=this.insertMultiChildNode.bind(this),this.mindMap.command.add("INSERT_MULTI_CHILD_NODE",this.insertMultiChildNode),this.insertParentNode=this.insertParentNode.bind(this),this.mindMap.command.add("INSERT_PARENT_NODE",this.insertParentNode),this.upNode=this.upNode.bind(this),this.mindMap.command.add("UP_NODE",this.upNode),this.downNode=this.downNode.bind(this),this.mindMap.command.add("DOWN_NODE",this.downNode),this.moveUpOneLevel=this.moveUpOneLevel.bind(this),this.mindMap.command.add("MOVE_UP_ONE_LEVEL",this.moveUpOneLevel),this.insertAfter=this.insertAfter.bind(this),this.mindMap.command.add("INSERT_AFTER",this.insertAfter),this.insertBefore=this.insertBefore.bind(this),this.mindMap.command.add("INSERT_BEFORE",this.insertBefore),this.moveNodeTo=this.moveNodeTo.bind(this),this.mindMap.command.add("MOVE_NODE_TO",this.moveNodeTo),this.removeNode=this.removeNode.bind(this),this.mindMap.command.add("REMOVE_NODE",this.removeNode),this.removeCurrentNode=this.removeCurrentNode.bind(this),this.mindMap.command.add("REMOVE_CURRENT_NODE",this.removeCurrentNode),this.pasteNode=this.pasteNode.bind(this),this.mindMap.command.add("PASTE_NODE",this.pasteNode),this.cutNode=this.cutNode.bind(this),this.mindMap.command.add("CUT_NODE",this.cutNode),this.setNodeStyle=this.setNodeStyle.bind(this),this.mindMap.command.add("SET_NODE_STYLE",this.setNodeStyle),this.setNodeStyles=this.setNodeStyles.bind(this),this.mindMap.command.add("SET_NODE_STYLES",this.setNodeStyles),this.setNodeActive=this.setNodeActive.bind(this),this.mindMap.command.add("SET_NODE_ACTIVE",this.setNodeActive),this.clearActiveNode=this.clearActiveNode.bind(this),this.mindMap.command.add("CLEAR_ACTIVE_NODE",this.clearActiveNode),this.setNodeExpand=this.setNodeExpand.bind(this),this.mindMap.command.add("SET_NODE_EXPAND",this.setNodeExpand),this.expandAllNode=this.expandAllNode.bind(this),this.mindMap.command.add("EXPAND_ALL",this.expandAllNode),this.unexpandAllNode=this.unexpandAllNode.bind(this),this.mindMap.command.add("UNEXPAND_ALL",this.unexpandAllNode),this.expandToLevel=this.expandToLevel.bind(this),this.mindMap.command.add("UNEXPAND_TO_LEVEL",this.expandToLevel),this.setNodeData=this.setNodeData.bind(this),this.mindMap.command.add("SET_NODE_DATA",this.setNodeData),this.setNodeText=this.setNodeText.bind(this),this.mindMap.command.add("SET_NODE_TEXT",this.setNodeText),this.setNodeImage=this.setNodeImage.bind(this),this.mindMap.command.add("SET_NODE_IMAGE",this.setNodeImage),this.setNodeIcon=this.setNodeIcon.bind(this),this.mindMap.command.add("SET_NODE_ICON",this.setNodeIcon),this.setNodeHyperlink=this.setNodeHyperlink.bind(this),this.mindMap.command.add("SET_NODE_HYPERLINK",this.setNodeHyperlink),this.setNodeNote=this.setNodeNote.bind(this),this.mindMap.command.add("SET_NODE_NOTE",this.setNodeNote),this.setNodeAttachment=this.setNodeAttachment.bind(this),this.mindMap.command.add("SET_NODE_ATTACHMENT",this.setNodeAttachment),this.setNodeTag=this.setNodeTag.bind(this),this.mindMap.command.add("SET_NODE_TAG",this.setNodeTag),this.insertFormula=this.insertFormula.bind(this),this.mindMap.command.add("INSERT_FORMULA",this.insertFormula),this.addGeneralization=this.addGeneralization.bind(this),this.mindMap.command.add("ADD_GENERALIZATION",this.addGeneralization),this.removeGeneralization=this.removeGeneralization.bind(this),this.mindMap.command.add("REMOVE_GENERALIZATION",this.removeGeneralization),this.setNodeCustomPosition=this.setNodeCustomPosition.bind(this),this.mindMap.command.add("SET_NODE_CUSTOM_POSITION",this.setNodeCustomPosition),this.resetLayout=this.resetLayout.bind(this),this.mindMap.command.add("RESET_LAYOUT",this.resetLayout),this.setNodeShape=this.setNodeShape.bind(this),this.mindMap.command.add("SET_NODE_SHAPE",this.setNodeShape),this.goTargetNode=this.goTargetNode.bind(this),this.mindMap.command.add("GO_TARGET_NODE",this.goTargetNode),this.removeCustomStyles=this.removeCustomStyles.bind(this),this.mindMap.command.add("REMOVE_CUSTOM_STYLES",this.removeCustomStyles),this.removeAllNodeCustomStyles=this.removeAllNodeCustomStyles.bind(this),this.mindMap.command.add("REMOVE_ALL_NODE_CUSTOM_STYLES",this.removeAllNodeCustomStyles)}registerShortcutKeys(){this.mindMap.keyCommand.addShortcut("Tab",()=>{this.mindMap.execCommand("INSERT_CHILD_NODE")}),this.mindMap.keyCommand.addShortcut("Insert",()=>{this.mindMap.execCommand("INSERT_CHILD_NODE")}),this.mindMap.keyCommand.addShortcut("Enter",()=>{this.mindMap.execCommand("INSERT_NODE")}),this.mindMap.keyCommand.addShortcut("Shift+Tab",()=>{this.mindMap.execCommand("INSERT_PARENT_NODE")}),this.mindMap.keyCommand.addShortcut("Control+g",()=>{this.mindMap.execCommand("ADD_GENERALIZATION")}),this.toggleActiveExpand=this.toggleActiveExpand.bind(this),this.mindMap.keyCommand.addShortcut("/",this.toggleActiveExpand),this.mindMap.keyCommand.addShortcut("Del|Backspace",()=>{this.mindMap.execCommand("REMOVE_NODE")}),this.mindMap.keyCommand.addShortcut("Shift+Backspace",()=>{this.mindMap.execCommand("REMOVE_CURRENT_NODE")}),this.mindMap.on("before_show_text_edit",()=>{this.startTextEdit()}),this.mindMap.on("hide_text_edit",()=>{this.endTextEdit()}),this.mindMap.keyCommand.addShortcut("Control+a",()=>{this.mindMap.execCommand("SELECT_ALL")}),this.mindMap.keyCommand.addShortcut("Control+l",()=>{this.mindMap.execCommand("RESET_LAYOUT")}),this.mindMap.keyCommand.addShortcut("Control+Up",()=>{this.mindMap.execCommand("UP_NODE")}),this.mindMap.keyCommand.addShortcut("Control+Down",()=>{this.mindMap.execCommand("DOWN_NODE")}),this.mindMap.keyCommand.addShortcut("Control+c",()=>{this.copy()}),this.mindMap.keyCommand.addShortcut("Control+x",()=>{this.cut()}),this.mindMap.keyCommand.addShortcut("Control+v",()=>{navigator.clipboard&&this.paste()}),this.mindMap.keyCommand.addShortcut("Control+Enter",()=>{this.setRootNodeCenter()})}emitNodeActiveEvent(t=null,e=[...this.activeNodeList]){const n=!Object(f["h"])(this.lastActiveNodeList,e);n&&(this.lastActiveNodeList=[...e],this.mindMap.batchExecution.push("emitNodeActiveEvent",()=>{this.mindMap.emit("node_active",t,e)}))}clearActiveNodeListOnDrawClick(t,e){if(this.activeNodeList.length<=0)return;let n=!0;const{useLeftKeySelectionRightKeyDrag:r}=this.mindMap.opt;if("contextmenu"===e?!r:r){const e=this.mindMap.event.mousedownPos;n=Math.abs(t.clientX-e.x)<=5&&Math.abs(t.clientY-e.y)<=5}n&&this.mindMap.execCommand("CLEAR_ACTIVE_NODE")}startTextEdit(){this.mindMap.keyCommand.save()}endTextEdit(){this.mindMap.keyCommand.restore()}clearCache(){this.layout.lru.clear(),this.nodeCache={},this.lastNodeCache={}}render(t=(()=>{}),e){return e===r["a"].CHANGE_THEME&&this.resetUnExpandNodeStyle(),this.isRendering?(this.hasWaitRendering=!0,void(this.waitRenderingParams=[t,e])):(this.isRendering=!0,this.renderSource=e,this.lastNodeCache=this.nodeCache,this.nodeCache={},this.reRender&&this.clearActiveNodeList(),this.renderTree?(this.mindMap.emit("node_tree_render_start"),this.root=null,this.layout.doLayout(n=>{Object.keys(this.lastNodeCache).forEach(t=>{this.nodeCache[t]||(this.removeNodeFromActiveList(this.lastNodeCache[t]),this.emitNodeActiveEvent(),this.lastNodeCache[t].destroy())}),this.root=n,this.root.render(()=>{if(this.isRendering=!1,t&&t(),this.hasWaitRendering){const t=this.waitRenderingParams;this.hasWaitRendering=!1,this.waitRenderingParams=[],this.render(...t)}else this.renderSource="",this.reRender&&(this.reRender=!1),this.hasRichTextPlugin()&&[r["a"].CHANGE_THEME,r["a"].SET_DATA].includes(e)&&this.mindMap.command.addHistory();this.mindMap.emit("node_tree_render_end")})}),void this.emitNodeActiveEvent()):(this.isRendering=!1,void this.mindMap.emit("node_tree_render_end")))}resetUnExpandNodeStyle(){this.renderTree&&this.hasRichTextPlugin()&&Object(f["qb"])(this.renderTree,null,t=>{if(!t.data.expand)return Object(f["qb"])(t,null,t=>{t.data.resetRichText=!0}),!0})}clearActiveNode(){this.activeNodeList.length<=0||(this.clearActiveNodeList(),this.emitNodeActiveEvent(null,[]))}clearActiveNodeList(){this.activeNodeList.forEach(t=>{this.mindMap.execCommand("SET_NODE_ACTIVE",t,!1)}),this.activeNodeList=[]}addNodeToActiveList(t,e=!1){if(this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate&&t.userList.length>0)return;const n=this.findActiveNodeIndex(t);-1===n&&(e||this.mindMap.emit("before_node_active",t,this.activeNodeList),this.mindMap.execCommand("SET_NODE_ACTIVE",t,!0),this.activeNodeList.push(t))}removeNodeFromActiveList(t){let e=this.findActiveNodeIndex(t);-1!==e&&(this.mindMap.execCommand("SET_NODE_ACTIVE",t,!1),this.activeNodeList.splice(e,1))}activeMultiNode(t=[]){t.forEach(t=>{this.mindMap.emit("before_node_active",t,this.activeNodeList),this.addNodeToActiveList(t,!0),this.emitNodeActiveEvent(t)})}cancelActiveMultiNode(t=[]){t.forEach(t=>{this.removeNodeFromActiveList(t),this.emitNodeActiveEvent(null)})}findActiveNodeIndex(t){return Object(f["C"])(t,this.activeNodeList)}selectAll(){this.mindMap.opt.readonly||(Object(f["qb"])(this.root,null,t=>{t.getData("isActive")||this.addNodeToActiveList(t),t._generalizationList&&t._generalizationList.length>0&&t._generalizationList.forEach(t=>{const e=t.generalizationNode;e.getData("isActive")||this.addNodeToActiveList(e)})},null,!0,0,0),this.emitNodeActiveEvent())}back(t){this.backForward("back",t)}forward(t){this.backForward("forward",t)}backForward(t,e){this.mindMap.execCommand("CLEAR_ACTIVE_NODE");const n=this.mindMap.command[t](e);n&&(this.renderTree=n,this.mindMap.render()),this.mindMap.emit("data_change",n)}getNewNodeBehavior(t=!1,e=!1){const{createNewNodeBehavior:n}=this.mindMap.opt;let i=!1,o=!1;switch(n){case r["a"].CREATE_NEW_NODE_BEHAVIOR.DEFAULT:i=e||!t,o=!e&&t;break;case r["a"].CREATE_NEW_NODE_BEHAVIOR.NOT_ACTIVE:i=!1,o=!1;break;case r["a"].CREATE_NEW_NODE_BEHAVIOR.ACTIVE_ONLY:i=!0,o=!1;break;default:break}return{focusNewNode:i,inserting:o}}insertNode(t=!0,e=[],n=null,r=[]){if(e=Object(f["u"])(e),this.activeNodeList.length<=0&&e.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:i,defaultInsertBelowSecondLevelNodeText:o}=this.mindMap.opt,s=e.length>0?e:this.activeNodeList,a=s.length>1,l=this.hasRichTextPlugin(),{focusNewNode:c,inserting:h}=this.getNewNodeBehavior(t,a),u={expand:!0,richText:l,isActive:c};l&&(u.resetRichText=l),r=Object(f["a"])(r,{...u}),s.forEach(t=>{if(t.isGeneralization||t.isRoot)return;const e=t.parent,s=1===t.layerIndex,a=s?i:o,l=Object(f["B"])(t),c={inserting:h,data:{text:a,...u,uid:Object(f["o"])(),...n||{}},children:[...Object(f["p"])(r)]};e.nodeData.children.splice(l+1,0,c)}),c&&this.clearActiveNodeList(),this.mindMap.render()}insertMultiNode(t,e){if(!e||e.length<=0)return;if(t=Object(f["u"])(t),this.activeNodeList.length<=0&&t.length<=0)return;this.textEdit.hideEditTextBox();const n=t.length>0?t:this.activeNodeList,r=this.hasRichTextPlugin(),{focusNewNode:i}=this.getNewNodeBehavior(!1,!0),o={expand:!0,richText:r,isActive:i};r&&(o.resetRichText=r),e=Object(f["a"])(e,o),n.forEach(t=>{if(t.isGeneralization||t.isRoot)return;const n=t.parent,r=Object(f["B"])(t),i=Object(f["p"])(Object(f["mb"])(e));n.nodeData.children.splice(r+1,0,...i)}),i&&this.clearActiveNodeList(),this.mindMap.render()}insertChildNode(t=!0,e=[],n=null,r=[]){if(e=Object(f["u"])(e),this.activeNodeList.length<=0&&e.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:i,defaultInsertBelowSecondLevelNodeText:o}=this.mindMap.opt,s=e.length>0?e:this.activeNodeList,a=s.length>1,l=this.hasRichTextPlugin(),{focusNewNode:c,inserting:h}=this.getNewNodeBehavior(t,a),u={expand:!0,richText:l,isActive:c};l&&(u.resetRichText=l),r=Object(f["a"])(r,{...u}),s.forEach(t=>{if(t.isGeneralization)return;t.nodeData.children||(t.nodeData.children=[]);const e=t.isRoot?i:o,s={inserting:h,data:{text:e,uid:Object(f["o"])(),...u,...n||{}},children:[...Object(f["p"])(r)]};t.nodeData.children.push(s),t.setData({expand:!0})}),c&&this.clearActiveNodeList(),this.mindMap.render()}insertMultiChildNode(t,e){if(!e||e.length<=0)return;if(t=Object(f["u"])(t),this.activeNodeList.length<=0&&t.length<=0)return;this.textEdit.hideEditTextBox();const n=t.length>0?t:this.activeNodeList,r=this.hasRichTextPlugin(),{focusNewNode:i}=this.getNewNodeBehavior(!1,!0),o={expand:!0,richText:r,isActive:i};r&&(o.resetRichText=r),e=Object(f["a"])(e,o),n.forEach(t=>{t.isGeneralization||(t.nodeData.children||(t.nodeData.children=[]),e=Object(f["p"])(e),t.nodeData.children.push(...e),t.setData({expand:!0}))}),i&&this.clearActiveNodeList(),this.mindMap.render()}insertParentNode(t=!0,e,n){if(e=Object(f["u"])(e),this.activeNodeList.length<=0&&e.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:r,defaultInsertBelowSecondLevelNodeText:i}=this.mindMap.opt,o=e.length>0?e:this.activeNodeList,s=o.length>1,a=this.hasRichTextPlugin(),{focusNewNode:l,inserting:c}=this.getNewNodeBehavior(t,s),h={expand:!0,richText:a,isActive:l};a&&(h.resetRichText=a),o.forEach(t=>{if(t.isGeneralization||t.isRoot)return;const e=1===t.layerIndex?r:i,o={inserting:c,data:{text:e,uid:Object(f["o"])(),...h,...n||{}},children:[t.nodeData]};a&&t.setData({resetRichText:!0});const s=t.parent,l=Object(f["B"])(t);s.nodeData.children.splice(l,1,o)}),l&&this.clearActiveNodeList(),this.mindMap.render()}upNode(){if(this.activeNodeList.length<=0)return;let t=this.activeNodeList[0];if(t.isRoot)return;let e=t.parent,n=e.children,r=Object(f["C"])(t,n);if(-1===r||0===r)return;let i=r-1;n.splice(r,1),n.splice(i,0,t),e.nodeData.children.splice(r,1),e.nodeData.children.splice(i,0,t.nodeData),this.mindMap.render()}downNode(){if(this.activeNodeList.length<=0)return;let t=this.activeNodeList[0];if(t.isRoot)return;let e=t.parent,n=e.children,r=Object(f["C"])(t,n);if(-1===r||r===n.length-1)return;let i=r+1;n.splice(r,1),n.splice(i,0,t),e.nodeData.children.splice(r,1),e.nodeData.children.splice(i,0,t.nodeData),this.mindMap.render()}moveUpOneLevel(t){if(t=t||this.activeNodeList[0],!t||t.isRoot||t.layerIndex<=1)return;const e=t.parent,n=e.parent,r=Object(f["C"])(t,e.children),i=Object(f["C"])(e,n.children);this.checkNodeLayerChange(t,e),e.nodeData.children.splice(r,1),n.nodeData.children.splice(i+1,0,t.nodeData),this.mindMap.render()}_handleRemoveCustomStyles(t){let e=!1;return Object.keys(t).forEach(n=>{Object(f["f"])(n)&&(e=!0,delete t[n])}),e&&this.hasRichTextPlugin()&&(t.resetRichText=!0,t.text=Object(f["gb"])(t.text)),e}removeCustomStyles(t){if(t=t||this.activeNodeList[0],!t)return;const e=this._handleRemoveCustomStyles(t.getData());e&&this.reRenderNodeCheckChange(t)}removeAllNodeCustomStyles(t){t=Object(f["u"])(t);let e=!1;if(t.length>0)t.forEach(t=>{const n=this._handleRemoveCustomStyles(t.getData());n&&(e=!0)});else{if(!this.renderTree)return;Object(f["qb"])(this.renderTree,null,t=>{const n=this._handleRemoveCustomStyles(t.data);n&&(e=!0);const r=Object(f["v"])(t.data);r.length>0&&r.forEach(t=>{const n=this._handleRemoveCustomStyles(t);n&&(e=!0)})})}e&&this.mindMap.reRender()}copy(){this.beingCopyData=this.copyNode(),this.beingCopyData&&(this.mindMap.opt.disabledClipboard||Object(f["lb"])(Object(f["n"])(this.beingCopyData)))}cut(){this.mindMap.execCommand("CUT_NODE",t=>{this.beingCopyData=t,this.mindMap.opt.disabledClipboard||Object(f["lb"])(Object(f["n"])(t))})}handlePaste(t){const{disabledClipboard:e}=this.mindMap.opt;if(e)return;const n=t.clipboardData||t.originalEvent.clipboardData,r=n.items;let i=null,o="";Array.from(r).forEach(t=>{t.type.indexOf("image")>-1&&(i=t.getAsFile()),t.type.indexOf("text")>-1&&(o=n.getData("text"))}),this.pasteData.img=i,this.pasteData.text=o,this.paste()}async paste(){const{errorHandler:t,handleIsSplitByWrapOnPasteCreateNewNode:e,handleNodePasteImg:n,disabledClipboard:i,onlyPasteTextWhenHasImgAndText:o}=this.mindMap.opt;let s="",a=null;if(!i)try{const t=navigator.clipboard?await Object(f["z"])():this.pasteData;s=t.text||"",a=t.img||null}catch(c){t(r["b"].READ_CLIPBOARD_ERROR,c)}const l=a?a.size:0;if(this.beingPasteText===s&&this.beingPasteImgSize===l||(this.currentBeingPasteType=r["a"].PASTE_TYPE.CLIP_BOARD,this.beingPasteText=s,this.beingPasteImgSize=l),this.lastBeingCopyData!==this.beingCopyData&&(this.lastBeingCopyData=this.beingCopyData,this.currentBeingPasteType=r["a"].PASTE_TYPE.CANVAS),this.currentBeingPasteType===r["a"].PASTE_TYPE.CLIP_BOARD){if(s){let n=null,i=!0;if(this.mindMap.opt.customHandleClipboardText)try{const t=await this.mindMap.opt.customHandleClipboardText(s);if(!Object(f["T"])(t)){i=!1;const e=Object(f["j"])(t);e.isSmm?n=e.data:s=e.data}}catch(c){t(r["b"].CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR,c)}if(i){const t=Object(f["j"])(s);t.isSmm?n=t.data:s=t.data}if(n)this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],Array.isArray(n)?n:[n]);else{s=Object(f["O"])(s);const t=s.split(new RegExp("\r?\n|(?<!\n)\r","g")).filter(t=>!!t);t.length>1&&e?e().then(()=>{this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],t.map(t=>({data:{text:t},children:[]})))}).catch(()=>{this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{text:s})}):this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{text:s})}}if(a&&(!s||!o))try{let t=null;t=n&&"function"===typeof n?await n(a):await Object(f["V"])(a),this.activeNodeList.length>0&&this.activeNodeList.forEach(e=>{this.mindMap.execCommand("SET_NODE_IMAGE",e,{url:t.url,title:"",width:t.size.width,height:t.size.height})})}catch(c){t(r["b"].LOAD_CLIPBOARD_IMAGE_ERROR,c)}}else this.beingCopyData&&this.mindMap.execCommand("PASTE_NODE",this.beingCopyData)}insertBefore(t,e){this.insertTo(t,e,"before")}insertAfter(t,e){this.insertTo(t,e,"after")}insertTo(t,e,n="before"){let r=Object(f["u"])(t);r=r.filter(t=>!t.isRoot),"after"===n&&r.reverse(),r.forEach(t=>{this.checkNodeLayerChange(t,e);let r=t.parent,i=r.children,o=Object(f["C"])(t,i);if(-1===o)return;i.splice(o,1),r.nodeData.children.splice(o,1);let s=e.parent,a=s.children,l=Object(f["C"])(e,a);-1!==l&&("after"===n&&l++,a.splice(l,0,t),s.nodeData.children.splice(l,0,t.nodeData))}),this.mindMap.render()}checkNodeLayerChange(t,e,n=!1){if(this.hasRichTextPlugin()){if(this.mindMap.richText.checkNodeHasCustomRichTextStyle(t))return;const r=n?e.layerIndex+1:e.layerIndex;let i=1===t.layerIndex&&1!==r||1!==t.layerIndex&&1===r;i&&t.setData({resetRichText:!0})}}removeNode(t=[]){if(t=Object(f["u"])(t),this.activeNodeList.length<=0&&t.length<=0)return;let e=null,n=t.length>0,r=n?t:this.activeNodeList,i=r.find(t=>t.isRoot);if(i)this.clearActiveNodeList(),i.children=[],i.nodeData.children=[];else{e=this.getNextActiveNode(r);for(let t=0;t<r.length;t++){const e=r[t],i=this.textEdit.getCurrentEditNode();i&&i.getData("uid")===e.getData("uid")&&this.textEdit.hideEditTextBox(),n&&r.splice(t,1),e.isGeneralization?(this.deleteNodeGeneralization(e),this.removeNodeFromActiveList(e),t--):(this.removeNodeFromActiveList(e),Object(f["db"])(e),t--)}}this.activeNodeList=[],e&&this.addNodeToActiveList(e),this.emitNodeActiveEvent(),this.mindMap.render()}deleteNodeGeneralization(t){const e=t.generalizationBelongNode,n=e.getGeneralizationNodeIndex(t);let r=e.getData("generalization");Array.isArray(r)?r.splice(n,1):r=null,this.mindMap.execCommand("SET_NODE_DATA",e,{generalization:r}),this.closeHighlightNode()}removeCurrentNode(t=[]){if(t=Object(f["u"])(t),this.activeNodeList.length<=0&&t.length<=0)return;let e=t.length>0,n=e?t:this.activeNodeList;n=n.filter(t=>!t.isRoot);let r=this.getNextActiveNode(n);for(let i=0;i<n.length;i++){let t=n[i];if(t.isGeneralization)this.deleteNodeGeneralization(t);else{const e=t.parent,n=Object(f["B"])(t);e.nodeData.children.splice(n,1,...t.nodeData.children||[])}}this.activeNodeList=[],r&&this.addNodeToActiveList(r),this.emitNodeActiveEvent(),this.mindMap.render()}getNextActiveNode(t){if(1!==t.length)return null;if(-1===this.findActiveNodeIndex(t[0]))return null;let e=null;if(1===this.activeNodeList.length&&!this.activeNodeList[0].isGeneralization&&this.mindMap.opt.deleteNodeActive){const t=this.activeNodeList[0],n=t.parent.children,r=Object(f["C"])(t,n);e=r<n.length-1?n[r+1]:r>0?n[r-1]:t.parent}return e}copyNode(){if(this.activeNodeList.length<=0)return null;let t=Object(f["J"])(this.activeNodeList);return t=Object(f["nb"])(t),t.map(t=>Object(f["k"])({},t,!0))}cutNode(t){if(this.activeNodeList.length<=0)return;let e=Object(f["J"])(this.activeNodeList).filter(t=>!t.isRoot);e=Object(f["nb"])(e);const n=e.map(t=>Object(f["k"])({},t,!0));e.forEach(t=>{Object(f["db"])(t)}),this.clearActiveNodeList(),this.mindMap.render(),t&&"function"===typeof t&&t(n)}moveNodeTo(t,e){let n=Object(f["u"])(t);n=n.filter(t=>!t.isRoot),n.forEach(t=>{this.checkNodeLayerChange(t,e,!0),this.removeNodeFromActiveList(t),Object(f["db"])(t),e.setData({expand:!0}),e.nodeData.children.push(t.nodeData)}),this.emitNodeActiveEvent(),this.mindMap.render()}pasteNode(t){t=Object(f["u"])(t),this.activeNodeList.length<=0||t.length<=0||(this.activeNodeList.forEach(e=>{e.setData({expand:!0}),e.nodeData.children.push(...t.map(t=>{const e=Object(f["mb"])(t);return Object(f["p"])([e],!0,t=>{if(this.hasRichTextPlugin()){if(this.mindMap.richText.checkNodeHasCustomRichTextStyle(t.data))return;t.data.resetRichText=!0}}),e}))}),this.mindMap.render())}setNodeStyle(t,e,n){let r={[e]:n};this.hasRichTextPlugin()&&this.mindMap.richText.setNotActiveNodeStyle(t,{[e]:n}),this.setNodeDataRender(t,r),R.includes(e)&&(t.parent||t).renderLine(!0)}setNodeStyles(t,e){let n={...e};this.hasRichTextPlugin()&&this.mindMap.richText.setNotActiveNodeStyle(t,e),this.setNodeDataRender(t,n);let r=Object.keys(e),i=!1;r.forEach(t=>{R.includes(t)&&(i=!0)}),i&&(t.parent||t).renderLine(!0)}setNodeActive(t,e){this.mindMap.execCommand("SET_NODE_DATA",t,{isActive:e}),t.updateNodeByActive(e)}setNodeExpand(t,e){this.mindMap.execCommand("SET_NODE_DATA",t,{expand:e}),this.mindMap.render()}expandAllNode(t=""){if(!this.renderTree)return;const e=(n,r)=>{r||n.data.uid!==t||(r=!0),r&&!n.data.expand&&(n.data.expand=!0),n.children&&n.children.length>0&&n.children.forEach(t=>{e(t,r)})};e(this.renderTree,!t),this.mindMap.render()}unexpandAllNode(t=!0,e=""){if(!this.renderTree)return;const n=(t,r,i)=>{i||t.data.uid!==e||(i=!0),i&&!r&&t.children&&t.children.length>0&&(t.data.expand=!1),t.children&&t.children.length>0&&t.children.forEach(t=>{n(t,!1,i)})};n(this.renderTree,!0,!e),this.mindMap.render(()=>{t&&this.setRootNodeCenter()})}expandToLevel(t){this.renderTree&&(Object(f["qb"])(this.renderTree,null,(e,n,r,i)=>{const o=i<t;o?e.data.expand=!0:!r&&e.children&&e.children.length>0&&(e.data.expand=!1)},null,!0,0,0),this.mindMap.render())}toggleActiveExpand(){this.activeNodeList.forEach(t=>{t.nodeData.children.length<=0||t.isRoot||this.toggleNodeExpand(t)})}toggleNodeExpand(t){this.mindMap.execCommand("SET_NODE_EXPAND",t,!t.getData("expand"))}setNodeText(t,e,n,r){n=void 0===n?t.getData("richText"):n,this.setNodeDataRender(t,{text:e,richText:n,resetRichText:r})}setNodeImage(t,e){const{url:n,title:r,width:i,height:o,custom:s=!1}=e||{url:"",title:"",width:0,height:0,custom:!1};this.setNodeDataRender(t,{image:n,imageTitle:r||"",imageSize:{width:i,height:o,custom:s}})}setNodeIcon(t,e){this.setNodeDataRender(t,{icon:e})}setNodeHyperlink(t,e,n=""){this.setNodeDataRender(t,{hyperlink:e,hyperlinkTitle:n})}setNodeNote(t,e){this.setNodeDataRender(t,{note:e})}setNodeAttachment(t,e,n=""){this.setNodeDataRender(t,{attachmentUrl:e,attachmentName:n})}setNodeTag(t,e){this.setNodeDataRender(t,{tag:e})}insertFormula(t,e=[]){if(!this.hasRichTextPlugin()||!this.mindMap.formula)return;e=Object(f["u"])(e);const n=e.length>0?e:this.activeNodeList;n.forEach(e=>{this.mindMap.formula.insertFormulaToNode(e,t)})}addGeneralization(t,e=!0){if(this.activeNodeList.length<=0)return;const n=this.activeNodeList.filter(t=>!t.isRoot&&!t.isGeneralization&&!t.checkHasSelfGeneralization()),r=Object(f["ab"])(n);if(r.length<=0)return;const i=this.hasRichTextPlugin(),{focusNewNode:o,inserting:s}=this.getNewNodeBehavior(e,r.length>1);let a=!1;r.forEach(e=>{const n={inserting:s,...t||{text:this.mindMap.opt.defaultGeneralizationText},range:e.range||null,uid:Object(f["o"])(),richText:i,isActive:o};i&&(n.resetRichText=i);let r=e.node.getData("generalization");if(r=r?Array.isArray(r)?r:[r]:[],e.range){const t=!!r.find(t=>t.range&&t.range[0]===e.range[0]&&t.range[1]===e.range[1]);if(t)return;r.push(n)}else r.push(n);a=!0,this.mindMap.execCommand("SET_NODE_DATA",e.node,{generalization:r}),e.node.setData({expand:!0})}),a&&(o&&this.clearActiveNodeList(),this.mindMap.render(()=>{this.mindMap.render()}))}removeGeneralization(){this.activeNodeList.length<=0||(this.activeNodeList.forEach(t=>{t.checkHasGeneralization()&&this.mindMap.execCommand("SET_NODE_DATA",t,{generalization:null})}),this.mindMap.render(),this.closeHighlightNode())}setNodeCustomPosition(t,e,n){let r=[t]||!1;r.forEach(t=>{this.mindMap.execCommand("SET_NODE_DATA",t,{customLeft:e,customTop:n})})}resetLayout(){Object(f["qb"])(this.root,null,t=>{t.customLeft=void 0,t.customTop=void 0,this.mindMap.execCommand("SET_NODE_DATA",t,{customLeft:void 0,customTop:void 0}),this.mindMap.render()},null,!0,0,0)}setNodeShape(t,e){if(!e||!L["b"].includes(e))return;let n=[t]||!1;n.forEach(t=>{this.setNodeStyle(t,"shape",e)})}goTargetNode(t,e=(()=>{})){let n="string"===typeof t?t:t.getData("uid");n&&this.expandToNodeUid(n,()=>{let t=this.findNodeByUid(n);t&&(t.active(),this.moveNodeToCenter(t),e(t))})}setNodeData(t,e){Object.keys(e).forEach(n=>{t.nodeData.data[n]=e[n]})}setNodeDataRender(t,e,n=!1){this.mindMap.execCommand("SET_NODE_DATA",t,e),this.reRenderNodeCheckChange(t,n)}reRenderNodeCheckChange(t,e){let n=t.reRender();n?e||this.mindMap.render():this.mindMap.emit("node_tree_render_end")}moveNodeToCenter(t,e){let{resetScaleOnMoveNodeToCenter:n}=this.mindMap.opt;void 0!==e&&(n=e);let{transform:r,state:i}=this.mindMap.view.getTransformData(),{left:o,top:s,width:a,height:l}=t;n||(o*=r.scaleX,s*=r.scaleY,a*=r.scaleX,l*=r.scaleY);let c=this.mindMap.width/2,h=this.mindMap.height/2,u=o+a/2,d=s+l/2,f=c-i.x,p=h-i.y,m=f-u,g=p-d;this.mindMap.view.translateX(m),this.mindMap.view.translateY(g),n&&this.mindMap.view.setScale(1)}setRootNodeCenter(){this.moveNodeToCenter(this.root)}expandToNodeUid(t,e=(()=>{})){if(!this.renderTree)return void e();let n=[],r=!1;const i={};Object(f["e"])(this.renderTree,(e,o)=>{if(e.data.uid===t)return n=o?[...i[o.data.uid],o]:[],"stop";const s=Object(f["v"])(e.data);if(s.forEach(s=>{s.uid===t&&(n=o?[...i[o.data.uid],o,e]:[],r=!0)}),r)return"stop";i[e.data.uid]=o?[...i[o.data.uid],o]:[]});let o=!1;if(n.forEach(t=>{t.data.expand||(o=!0,t.data.expand=!0)}),r){const t=n[n.length-1];t&&Object(f["qb"])(t,null,t=>{t.data.expand||(o=!0,t.data.expand=!0)})}o?this.mindMap.render(e):e()}findNodeByUid(t){if(!this.root)return;let e=null;return Object(f["qb"])(this.root,null,n=>{if(n.getData("uid")===t)return e=n,!0;let r=!1;return(n._generalizationList||[]).forEach(n=>{n.generalizationNode.getData("uid")===t&&(e=n.generalizationNode,r=!0)}),!!r||void 0}),e}highlightNode(t,e,n){if(this.isRendering)return;n={stroke:"rgb(94, 200, 248)",fill:"transparent",...n||{}},this.highlightBoxNode?this.highlightBoxNodeStyle&&(this.highlightBoxNodeStyle.stroke===n.stroke&&this.highlightBoxNodeStyle.fill===n.fill||this.highlightBoxNode.stroke({color:n.stroke||"transparent"}).fill({color:n.fill||"transparent"})):this.highlightBoxNode=(new P["g"]).stroke({color:n.stroke||"transparent"}).fill({color:n.fill||"transparent"}),this.highlightBoxNodeStyle={...n};let r=1/0,i=1/0,o=-1/0,s=-1/0;if(e){const n=t.children.slice(e[0],e[1]+1);n.forEach(t=>{t.left<r&&(r=t.left),t.top<i&&(i=t.top);const e=t.left+t.width,n=t.top+t.height;e>o&&(o=e),n>s&&(s=n)})}else r=t.left,i=t.top,o=t.left+t.width,s=t.top+t.height;this.highlightBoxNode.plot([[r,i],[o,i],[o,s],[r,s]]),this.mindMap.otherDraw.add(this.highlightBoxNode)}closeHighlightNode(){this.highlightBoxNode&&this.highlightBoxNode.remove()}hasRichTextPlugin(){return!!this.mindMap.richText}}var z=j,B={default:A},F=n("2946"),H=n("187c");class q{constructor(t){this.opt=t,this.mindMap=t.mindMap,this.shortcutMap={},this.shortcutMapCache={},this.isPause=!1,this.isInSvg=!1,this.bindEvent()}pause(){this.isPause=!0}recovery(){this.isPause=!1}save(){Object.keys(this.shortcutMapCache).length>0||(this.shortcutMapCache=this.shortcutMap,this.shortcutMap={})}restore(){Object.keys(this.shortcutMapCache).length<=0||(this.shortcutMap=this.shortcutMapCache,this.shortcutMapCache={})}bindEvent(){this.onKeydown=this.onKeydown.bind(this),this.mindMap.on("svg_mouseenter",()=>{this.isInSvg=!0}),this.mindMap.on("svg_mouseleave",()=>{this.mindMap.renderer.textEdit.isShowTextEdit()||this.mindMap.associativeLine&&this.mindMap.associativeLine.showTextEdit||(this.isInSvg=!1)}),window.addEventListener("keydown",this.onKeydown),this.mindMap.on("beforeDestroy",()=>{this.unBindEvent()})}unBindEvent(){window.removeEventListener("keydown",this.onKeydown)}onKeydown(t){const{enableShortcutOnlyWhenMouseInSvg:e,beforeShortcutRun:n}=this.mindMap.opt;this.isPause||e&&!this.isInSvg||Object.keys(this.shortcutMap).forEach(e=>{if(this.checkKey(t,e)){if(this.checkKey(t,"Control+v")||(t.stopPropagation(),t.preventDefault()),"function"===typeof n){const t=n(e,[...this.mindMap.renderer.activeNodeList]);if(t)return}this.shortcutMap[e].forEach(t=>{t()})}})}checkKey(t,e){let n=this.getOriginEventCodeArr(t),r=this.getKeyCodeArr(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){let t=r.findIndex(t=>t===n[i]);if(-1===t)return!1;r.splice(t,1)}return!0}getOriginEventCodeArr(t){let e=[];return(t.ctrlKey||t.metaKey)&&e.push(H["a"]["Control"]),t.altKey&&e.push(H["a"]["Alt"]),t.shiftKey&&e.push(H["a"]["Shift"]),e.includes(t.keyCode)||e.push(t.keyCode),e}hasCombinationKey(t){return t.ctrlKey||t.metaKey||t.altKey||t.shiftKey}getKeyCodeArr(t){let e=t.split(/\s*\+\s*/),n=[];return e.forEach(t=>{n.push(H["a"][t])}),n}addShortcut(t,e){t.split(/\s*\|\s*/).forEach(t=>{this.shortcutMap[t]?this.shortcutMap[t].push(e):this.shortcutMap[t]=[e]})}removeShortcut(t,e){t.split(/\s*\|\s*/).forEach(t=>{if(this.shortcutMap[t])if(e){let n=this.shortcutMap[t].findIndex(t=>t===e);-1!==n&&this.shortcutMap[t].splice(n,1)}else this.shortcutMap[t]=[],delete this.shortcutMap[t]})}getShortcutFn(t){let e=[];return t.split(/\s*\|\s*/).forEach(t=>{e=this.shortcutMap[t]||[]}),e}}class W{constructor(t={}){this.opt=t,this.mindMap=t.mindMap,this.commands={},this.history=[],this.activeHistoryIndex=0,this.registerShortcutKeys(),this.originAddHistory=this.addHistory.bind(this),this.addHistory=Object(f["ob"])(this.addHistory,this.mindMap.opt.addHistoryTime,this),this.isPause=!1}pause(){this.isPause=!0}recovery(){this.isPause=!1}clearHistory(){this.history=[],this.activeHistoryIndex=0,this.mindMap.emit("back_forward",0,0)}registerShortcutKeys(){this.mindMap.keyCommand.addShortcut("Control+z",()=>{this.mindMap.execCommand("BACK")}),this.mindMap.keyCommand.addShortcut("Control+y",()=>{this.mindMap.execCommand("FORWARD")})}exec(t,...e){if(this.commands[t]){if(this.commands[t].forEach(t=>{t(...e)}),["BACK","FORWARD","SET_NODE_ACTIVE","CLEAR_ACTIVE_NODE"].includes(t))return;this.addHistory()}}add(t,e){this.commands[t]?this.commands[t].push(e):this.commands[t]=[e]}remove(t,e){if(this.commands[t])if(e){let n=this.commands[t].find(t=>t===e);-1!==n&&this.commands[t].splice(n,1)}else this.commands[t]=[],delete this.commands[t]}addHistory(){if(this.mindMap.opt.readonly||this.isPause)return;const t=this.history.length>0?this.history[this.activeHistoryIndex]:null,e=this.getCopyData();t!==e&&(t&&JSON.stringify(t)===JSON.stringify(e)||(this.emitDataUpdatesEvent(t,e),this.history=this.history.slice(0,this.activeHistoryIndex+1),this.history.push(Object(f["mb"])(e)),this.history.length>this.mindMap.opt.maxHistoryCount&&this.history.shift(),this.activeHistoryIndex=this.history.length-1,this.mindMap.emit("data_change",e),this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length)))}back(t=1){if(!this.mindMap.opt.readonly&&this.activeHistoryIndex-t>=0){const e=this.history[this.activeHistoryIndex];this.activeHistoryIndex-=t,this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length);const n=Object(f["mb"])(this.history[this.activeHistoryIndex]);return this.emitDataUpdatesEvent(e,n),n}}forward(t=1){if(this.mindMap.opt.readonly)return;let e=this.history.length;if(this.activeHistoryIndex+t<=e-1){const e=this.history[this.activeHistoryIndex];this.activeHistoryIndex+=t,this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length);const n=Object(f["mb"])(this.history[this.activeHistoryIndex]);return this.emitDataUpdatesEvent(e,n),n}}getCopyData(){return this.mindMap.renderer.renderTree?Object(f["l"])({},this.mindMap.renderer.renderTree,!0):null}removeDataUid(t){t=Object(f["mb"])(t);let e=t=>{delete t.data.uid,t.children&&t.children.length>0&&t.children.forEach(t=>{e(t)})};return e(t),t}emitDataUpdatesEvent(t,e){try{const n="data_change_detail",r=this.mindMap.event.listenerCount(n);if(r>0&&t&&e){const r=Object(f["mb"])(Object(f["pb"])(t)),i=Object(f["mb"])(Object(f["pb"])(e)),o=[],s=(t,e)=>(t.children&&t.children.length>0&&t.children.forEach((n,r)=>{t.children[r]="string"===typeof n?e[n]:e[n.data.uid],s(t.children[r],e)}),t);Object.keys(i).forEach(t=>{r[t]?Object(f["R"])(r[t],i[t])||o.push({action:"update",oldData:s(r[t],r),data:s(i[t],i)}):o.push({action:"create",data:s(i[t],i)})}),Object.keys(r).forEach(t=>{i[t]||o.push({action:"delete",data:s(r[t],r)})}),this.mindMap.emit(n,o)}}catch(n){this.mindMap.opt.errorHandler(r["b"].DATA_CHANGE_DETAIL_EVENT_ERROR,n)}}}var U=W;class ${constructor(){this.has={},this.queue=[],this.nextTick=Object(f["Y"])(this.flush,this)}push(t,e){this.has[t]?this.replaceTask(t,e):(this.has[t]=!0,this.queue.push({name:t,fn:e}),this.nextTick())}replaceTask(t,e){const n=this.queue.findIndex(e=>e.name===t);-1!==n&&(this.queue[n]={name:t,fn:e})}flush(){let t=this.queue.slice(0);this.queue=[],t.forEach(({name:t,fn:e})=>{this.has[t]=!1,e()})}}var V=$;const G={el:null,data:null,viewData:null,readonly:!1,layout:r["a"].LAYOUT.LOGICAL_STRUCTURE,fishboneDeg:45,theme:"default",themeConfig:{},scaleRatio:.2,translateRatio:1,minZoomRatio:20,maxZoomRatio:400,customCheckIsTouchPad:null,mouseScaleCenterUseMousePosition:!0,maxTag:5,tagPosition:r["a"].TAG_POSITION.RIGHT,expandBtnSize:20,imgTextMargin:5,textContentMargin:2,customNoteContentShow:null,textAutoWrapWidth:500,customHandleMousewheel:null,mousewheelAction:r["a"].MOUSE_WHEEL_ACTION.MOVE,mousewheelMoveStep:100,mousewheelZoomActionReverse:!0,defaultInsertSecondLevelNodeText:"二级节点",defaultInsertBelowSecondLevelNodeText:"分支主题",expandBtnStyle:{color:"#808080",fill:"#fff",fontSize:13,strokeColor:"#333333"},expandBtnIcon:{open:"",close:""},expandBtnNumHandler:null,isShowExpandNum:!0,enableShortcutOnlyWhenMouseInSvg:!0,initRootNodePosition:null,nodeTextEditZIndex:3e3,nodeNoteTooltipZIndex:3e3,isEndNodeTextEditOnClickOuter:!0,maxHistoryCount:500,alwaysShowExpandBtn:!1,notShowExpandBtn:!1,iconList:[],maxNodeCacheCount:1e3,fitPadding:50,enableCtrlKeyNodeSelection:!0,useLeftKeySelectionRightKeyDrag:!1,beforeTextEdit:null,isUseCustomNodeContent:!1,customCreateNodeContent:null,customInnerElsAppendTo:null,enableAutoEnterTextEditWhenKeydown:!1,customHandleClipboardText:null,disableMouseWheelZoom:!1,errorHandler:(t,e)=>{console.error(t,e)},enableDblclickBackToRootNode:!1,hoverRectColor:"rgb(94, 200, 248)",hoverRectPadding:2,selectTextOnEnterEditText:!1,deleteNodeActive:!0,fit:!1,tagsColorMap:{},cooperateStyle:{avatarSize:22,fontSize:12},onlyOneEnableActiveNodeOnCooperate:!1,defaultGeneralizationText:"概要",handleIsSplitByWrapOnPasteCreateNewNode:null,addHistoryTime:100,isDisableDrag:!1,createNewNodeBehavior:r["a"].CREATE_NEW_NODE_BEHAVIOR.DEFAULT,defaultNodeImage:"",isLimitMindMapInCanvas:!1,handleNodePasteImg:null,customCreateNodePath:null,customCreateNodePolygon:null,customTransformNodeLinePath:null,beforeShortcutRun:null,resetScaleOnMoveNodeToCenter:!1,createNodePrefixContent:null,createNodePostfixContent:null,disabledClipboard:!1,customHyperlinkJump:null,openPerformance:!1,performanceConfig:{time:250,padding:100,removeNodeWhenOutCanvas:!0},emptyTextMeasureHeightText:"abc123我和你",openRealtimeRenderOnNodeTextEdit:!1,mousedownEventPreventDefault:!0,onlyPasteTextWhenHasImgAndText:!0,enableDragModifyNodeWidth:!0,minNodeTextModifyWidth:20,maxNodeTextModifyWidth:-1,selectTranslateStep:3,selectTranslateLimit:20,enableFreeDrag:!1,autoMoveWhenMouseInEdgeOnDrag:!0,dragMultiNodeRectConfig:{width:40,height:20,fill:"rgb(94, 200, 248)"},dragPlaceholderRectFill:"rgb(94, 200, 248)",dragPlaceholderLineConfig:{color:"rgb(94, 200, 248)",width:2},dragOpacityConfig:{cloneNodeOpacity:.5,beingDragNodeOpacity:.3},handleDragCloneNode:null,beforeDragEnd:null,beforeDragStart:null,watermarkConfig:{onlyExport:!1,text:"",lineSpacing:100,textSpacing:100,angle:30,textStyle:{color:"#999",opacity:.5,fontSize:14},belowNode:!1},exportPaddingX:10,exportPaddingY:10,resetCss:"\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n  ",minExportImgCanvasScale:2,addContentToHeader:null,addContentToFooter:null,handleBeingExportSvg:null,maxCanvasSize:16384,defaultAssociativeLineText:"关联",associativeLineIsAlwaysAboveNode:!0,associativeLineInitPointsPosition:{from:"",to:""},enableAdjustAssociativeLinePoints:!0,beforeAssociativeLineConnection:null,disableTouchZoom:!1,minTouchZoomScale:20,maxTouchZoomScale:-1,isLimitMindMapInCanvasWhenHasScrollbar:!0,isOnlySearchCurrentRenderNodes:!1,beforeCooperateUpdate:null,rainbowLinesConfig:{open:!1,colorsList:[]},demonstrateConfig:null,enableEditFormulaInRichTextEdit:!0,katexFontPath:"https://unpkg.com/katex@0.16.11/dist/",getKatexOutputType:null,transformRichTextOnEnterEdit:null,beforeHideRichTextEdit:null,richTextEditFakeInPlace:!1,outerFramePaddingX:10,outerFramePaddingY:10,onlyPainterNodeCustomStyles:!1,beforeDeleteNodeImg:null,imgResizeBtnSize:25,minImgResizeWidth:50,minImgResizeHeight:50,maxImgResizeWidthInheritTheme:!1,maxImgResizeWidth:1/0,maxImgResizeHeight:1/0};class Y{constructor(t={}){if(Y.instanceCount++,this.opt=this.handleOpt(u()(G,t)),this.opt.data=this.handleData(this.opt.data),this.el=this.opt.el,!this.el)throw new Error("缺少容器元素el");this.getElRectInfo(),this.initWidth=this.width,this.initHeight=this.height,this.cssEl=null,this.cssTextMap={},this.nodeInnerPrefixList=[],this.initContainer(),this.initTheme(),this.initCache(),this.event=new c({mindMap:this}),this.keyCommand=new q({mindMap:this}),this.command=new U({mindMap:this}),this.renderer=new z({mindMap:this}),this.view=new o({mindMap:this}),this.batchExecution=new V,Y.pluginList.forEach(t=>{this.initPlugin(t)}),this.addCss(),this.render(this.opt.fit?()=>this.view.fit():()=>{}),setTimeout(()=>{this.opt.data&&this.command.addHistory()},0)}handleOpt(t){return r["e"].includes(t.layout)||(t.layout=r["a"].LAYOUT.LOGICAL_STRUCTURE),t.theme=t.theme&&B[t.theme]?t.theme:"default",t}handleData(t){return Object(f["T"])(t)||Object.keys(t).length<=0?null:(t=Object(f["mb"])(t||{}),t.data&&!t.data.expand&&(t.data.expand=!0),t)}initContainer(){const{associativeLineIsAlwaysAboveNode:t}=this.opt;this.el.classList.add("smm-mind-map-container");const e=()=>{this.associativeLineDraw=this.draw.group(),this.associativeLineDraw.addClass("smm-associative-line-container")};this.svg=Object(P["i"])().addTo(this.el).size(this.width,this.height),this.draw=this.svg.group(),this.draw.addClass("smm-container"),this.lineDraw=this.draw.group(),this.lineDraw.addClass("smm-line-container"),t||e(),this.nodeDraw=this.draw.group(),this.nodeDraw.addClass("smm-node-container"),t&&e(),this.otherDraw=this.draw.group(),this.otherDraw.addClass("smm-other-container")}clearDraw(){this.lineDraw.clear(),this.associativeLineDraw.clear(),this.nodeDraw.clear(),this.otherDraw.clear()}appendCss(t,e){this.cssTextMap[t]=e,this.removeCss(),this.addCss()}removeAppendCss(t){this.cssTextMap[t]&&(delete this.cssTextMap[t],this.removeCss(),this.addCss())}joinCss(){return r["c"]+Object.keys(this.cssTextMap).map(t=>this.cssTextMap[t]).join("\n")}addCss(){this.cssEl=document.createElement("style"),this.cssEl.type="text/css",this.cssEl.innerHTML=this.joinCss(),document.head.appendChild(this.cssEl)}removeCss(){this.cssEl&&document.head.removeChild(this.cssEl)}render(t,e=""){this.batchExecution.push("render",()=>{this.initTheme(),this.renderer.render(t,e)})}reRender(t,e=""){this.renderer.reRender=!0,this.renderer.clearCache(),this.clearDraw(),this.render(t,e)}getElRectInfo(){if(this.elRect=this.el.getBoundingClientRect(),this.width=this.elRect.width,this.height=this.elRect.height,this.width<=0||this.height<=0)throw new Error("容器元素el的宽高不能为0")}resize(){const t=this.width,e=this.height;this.getElRectInfo(),this.svg.size(this.width,this.height),t===this.width&&e===this.height||this.demonstrate&&this.demonstrate.isInDemonstrate||this.render(),this.emit("resize")}on(t,e){this.event.on(t,e)}emit(t,...e){this.event.emit(t,...e)}off(t,e){this.event.off(t,e)}initCache(){this.commonCaches={measureCustomNodeContentSizeEl:null,measureRichtextNodeTextSizeEl:null}}initTheme(){this.themeConfig=Object(f["W"])(B[this.opt.theme]||B.default,this.opt.themeConfig),F["a"].setBackgroundStyle(this.el,this.themeConfig)}setTheme(t,e=!1){this.execCommand("CLEAR_ACTIVE_NODE"),this.opt.theme=t,e||this.render(null,r["a"].CHANGE_THEME),this.emit("view_theme_change",t)}getTheme(){return this.opt.theme}setThemeConfig(t,e=!1){const n=Object(f["F"])(this.themeConfig,t);if(this.opt.themeConfig=t,!e){let t=_(n);this.render(null,t?"":r["a"].CHANGE_THEME)}}getCustomThemeConfig(){return this.opt.themeConfig}getThemeConfig(t){return void 0===t?this.themeConfig:this.themeConfig[t]}getConfig(t){return void 0===t?this.opt:this.opt[t]}updateConfig(t={}){this.emit("before_update_config",this.opt);const e={...this.opt};this.opt=this.handleOpt(u.a.all([G,this.opt,t])),this.emit("after_update_config",this.opt,e)}getLayout(){return this.opt.layout}setLayout(t,e=!1){r["e"].includes(t)||(t=r["a"].LAYOUT.LOGICAL_STRUCTURE),this.opt.layout=t,this.view.reset(),this.renderer.setLayout(),e||this.render(null,r["a"].CHANGE_LAYOUT),this.emit("layout_change",t)}execCommand(...t){this.command.exec(...t)}updateData(t){this.renderer.setData(t),this.render(),this.command.addHistory()}setData(t){t=this.handleData(t),this.opt.data=t,this.execCommand("CLEAR_ACTIVE_NODE"),this.command.clearHistory(),this.command.addHistory(),this.renderer.setData(t),this.reRender(()=>{},r["a"].SET_DATA),this.emit("set_data",t)}setFullData(t){t.root&&this.setData(t.root),t.layout&&this.setLayout(t.layout),t.theme&&(t.theme.template&&this.setTheme(t.theme.template),t.theme.config&&this.setThemeConfig(t.theme.config)),t.view&&this.view.setTransformData(t.view)}getData(t){let e=this.command.getCopyData(),n={};return n=t?{layout:this.getLayout(),root:e,theme:{template:this.getTheme(),config:this.getCustomThemeConfig()},view:this.view.getTransformData()}:e,Object(f["mb"])(n)}async export(...t){try{if(!this.doExport)throw new Error("请注册Export插件！");let e=await this.doExport.export(...t);return e}catch(e){this.opt.errorHandler(r["b"].EXPORT_ERROR,e)}}toPos(t,e){return{x:t-this.elRect.left,y:e-this.elRect.top}}setMode(t){if(![r["a"].MODE.READONLY,r["a"].MODE.EDIT].includes(t))return;const e=t===r["a"].MODE.READONLY;e!==this.opt.readonly&&(e&&(this.renderer.textEdit.isShowTextEdit()&&(this.renderer.textEdit.hideEditTextBox(),this.command.originAddHistory()),this.execCommand("CLEAR_ACTIVE_NODE")),this.opt.readonly=e,this.emit("mode_change",t))}getSvgData({paddingX:t=0,paddingY:e=0,ignoreWatermark:n=!1,addContentToHeader:r,addContentToFooter:i,node:o}={}){const{watermarkConfig:s,openPerformance:a}=this.opt;a&&this.renderer.forceLoadNode(o);const{cssTextList:l,header:c,headerHeight:h,footer:u,footerHeight:d}=Object(f["L"])({addContentToHeader:r,addContentToFooter:i}),p=this.svg,m=this.draw,g=p.width(),v=p.height(),y=m.transform(),b=this.elRect;m.scale(1/y.scaleX,1/y.scaleY);const w=m.rbox();let x=null;o&&(x=Object(f["E"])(o,w.x,w.y,t,e));const C=0;w.width+=2*t,w.height+=2*e+C+h+d,m.translate(t,e),p.size(w.width,w.height),m.translate(-w.x+b.left,-w.y+b.top);let E=p.clone();const k=this.watermark&&this.watermark.hasWatermark();if(!n&&k){this.watermark.isInExport=!0;const{onlyExport:t}=s,e=w.width>g||w.height>v;e?(this.width=w.width,this.height=w.height,this.watermark.onResize(),E=p.clone(),this.width=g,this.height=v,this.watermark.onResize()):t&&(this.watermark.onResize(),E=p.clone()),t&&this.watermark.clear(),this.watermark.isInExport=!1}[this.joinCss(),...l].forEach(t=>{E.add(Object(P["i"])(`<style>${t}</style>`))}),c&&h>0&&(E.findOne(".smm-container").translate(0,h),c.width(w.width),c.y(e),E.add(c,0)),u&&d>0&&(u.width(w.width),u.y(w.height-e-d),E.add(u));const N=p.find("defs"),O=E.find("defs");return N.forEach((t,e)=>{const n=O[e];if(!n)return;const r=t.children(),i=n.children();for(let o=0;o<r.length;o++){const t=r[o],e=i[o];t&&e&&e.attr("id",t.attr("id"))}}),p.size(g,v),m.transform(y),{svg:E,svgHTML:E.svg(),clipData:x,rect:{...w,ratio:w.width/w.height},origWidth:g,origHeight:v,scaleX:y.scaleX,scaleY:y.scaleY}}addPlugin(t,e){let n=Y.hasPlugin(t);-1===n&&Y.usePlugin(t,e),this.initPlugin(t)}removePlugin(t){let e=Y.hasPlugin(t);-1!==e&&(Y.pluginList.splice(e,1),this[t.instanceName]&&(this[t.instanceName].beforePluginRemove&&this[t.instanceName].beforePluginRemove(),delete this[t.instanceName]))}initPlugin(t){this[t.instanceName]||(this[t.instanceName]=new t({mindMap:this,pluginOpt:t.pluginOpt}))}destroy(){this.emit("beforeDestroy"),this.renderer.textEdit.hideEditTextBox(),this.renderer.textEdit.removeTextEditEl(),[...Y.pluginList].forEach(t=>{this[t.instanceName]&&this[t.instanceName].beforePluginDestroy&&this[t.instanceName].beforePluginDestroy(),this[t.instanceName]=null}),this.event.unbind(),this.svg.remove(),F["a"].removeBackgroundStyle(this.el),this.el.classList.remove("smm-mind-map-container"),this.el.innerHTML="",this.el=null,this.removeCss(),Y.instanceCount--}}Y.pluginList=[],Y.usePlugin=(t,e={})=>(-1!==Y.hasPlugin(t)||(t.pluginOpt=e,Y.pluginList.push(t)),Y),Y.hasPlugin=t=>Y.pluginList.findIndex(e=>e===t),Y.instanceCount=0,Y.defineTheme=(t,e={})=>{if(B[t])return new Error("该主题名称已存在");B[t]=Object(f["W"])(A,e)},Y.removeTheme=t=>{B[t]&&(B[t]=null)};e["a"]=Y},cd3f:function(t,e,n){(function(t,n){var r=200,i="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",u="[object Function]",d="[object GeneratorFunction]",f="[object Map]",p="[object Number]",m="[object Object]",g="[object Promise]",v="[object RegExp]",y="[object Set]",b="[object String]",w="[object Symbol]",x="[object WeakMap]",C="[object ArrayBuffer]",E="[object DataView]",k="[object Float32Array]",N="[object Float64Array]",O="[object Int8Array]",T="[object Int16Array]",M="[object Int32Array]",S="[object Uint8Array]",L="[object Uint8ClampedArray]",A="[object Uint16Array]",D="[object Uint32Array]",_=/[\\^$.*+?()[\]{}|]/g,R=/\w*$/,P=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,j={};j[s]=j[a]=j[C]=j[E]=j[l]=j[c]=j[k]=j[N]=j[O]=j[T]=j[M]=j[f]=j[p]=j[m]=j[v]=j[y]=j[b]=j[w]=j[S]=j[L]=j[A]=j[D]=!0,j[h]=j[u]=j[x]=!1;var z="object"==typeof t&&t&&t.Object===Object&&t,B="object"==typeof self&&self&&self.Object===Object&&self,F=z||B||Function("return this")(),H=e&&!e.nodeType&&e,q=H&&"object"==typeof n&&n&&!n.nodeType&&n,W=q&&q.exports===H;function U(t,e){return t.set(e[0],e[1]),t}function $(t,e){return t.add(e),t}function V(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(!1===e(t[n],n,t))break;return t}function G(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function Y(t,e,n,r){var i=-1,o=t?t.length:0;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function K(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function X(t,e){return null==t?void 0:t[e]}function Z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function J(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Q(t,e){return function(n){return t(e(n))}}function tt(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var et=Array.prototype,nt=Function.prototype,rt=Object.prototype,it=F["__core-js_shared__"],ot=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),st=nt.toString,at=rt.hasOwnProperty,lt=rt.toString,ct=RegExp("^"+st.call(at).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=W?F.Buffer:void 0,ut=F.Symbol,dt=F.Uint8Array,ft=Q(Object.getPrototypeOf,Object),pt=Object.create,mt=rt.propertyIsEnumerable,gt=et.splice,vt=Object.getOwnPropertySymbols,yt=ht?ht.isBuffer:void 0,bt=Q(Object.keys,Object),wt=Oe(F,"DataView"),xt=Oe(F,"Map"),Ct=Oe(F,"Promise"),Et=Oe(F,"Set"),kt=Oe(F,"WeakMap"),Nt=Oe(Object,"create"),Ot=Ie(wt),Tt=Ie(xt),Mt=Ie(Ct),St=Ie(Et),Lt=Ie(kt),At=ut?ut.prototype:void 0,Dt=At?At.valueOf:void 0;function _t(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Rt(){this.__data__=Nt?Nt(null):{}}function Pt(t){return this.has(t)&&delete this.__data__[t]}function It(t){var e=this.__data__;if(Nt){var n=e[t];return n===i?void 0:n}return at.call(e,t)?e[t]:void 0}function jt(t){var e=this.__data__;return Nt?void 0!==e[t]:at.call(e,t)}function zt(t,e){var n=this.__data__;return n[t]=Nt&&void 0===e?i:e,this}function Bt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Ft(){this.__data__=[]}function Ht(t){var e=this.__data__,n=oe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():gt.call(e,n,1),!0}function qt(t){var e=this.__data__,n=oe(e,t);return n<0?void 0:e[n][1]}function Wt(t){return oe(this.__data__,t)>-1}function Ut(t,e){var n=this.__data__,r=oe(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function $t(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Vt(){this.__data__={hash:new _t,map:new(xt||Bt),string:new _t}}function Gt(t){return Ne(this,t)["delete"](t)}function Yt(t){return Ne(this,t).get(t)}function Kt(t){return Ne(this,t).has(t)}function Xt(t,e){return Ne(this,t).set(t,e),this}function Zt(t){this.__data__=new Bt(t)}function Jt(){this.__data__=new Bt}function Qt(t){return this.__data__["delete"](t)}function te(t){return this.__data__.get(t)}function ee(t){return this.__data__.has(t)}function ne(t,e){var n=this.__data__;if(n instanceof Bt){var i=n.__data__;if(!xt||i.length<r-1)return i.push([t,e]),this;n=this.__data__=new $t(i)}return n.set(t,e),this}function re(t,e){var n=Fe(t)||Be(t)?K(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!at.call(t,o)||i&&("length"==o||De(o,r))||n.push(o);return n}function ie(t,e,n){var r=t[e];at.call(t,e)&&ze(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function oe(t,e){var n=t.length;while(n--)if(ze(t[n][0],e))return n;return-1}function se(t,e){return t&&Ce(e,Ye(e),t)}function ae(t,e,n,r,i,o,a){var l;if(r&&(l=o?r(t,i,o,a):r(t)),void 0!==l)return l;if(!Ve(t))return t;var c=Fe(t);if(c){if(l=Se(t),!e)return xe(t,l)}else{var h=Me(t),f=h==u||h==d;if(We(t))return fe(t,e);if(h==m||h==s||f&&!o){if(Z(t))return o?t:{};if(l=Le(f?{}:t),!e)return Ee(t,se(l,t))}else{if(!j[h])return o?t:{};l=Ae(t,h,ae,e)}}a||(a=new Zt);var p=a.get(t);if(p)return p;if(a.set(t,l),!c)var g=n?ke(t):Ye(t);return V(g||t,(function(i,o){g&&(o=i,i=t[o]),ie(l,o,ae(i,e,n,r,o,t,a))})),l}function le(t){return Ve(t)?pt(t):{}}function ce(t,e,n){var r=e(t);return Fe(t)?r:G(r,n(t))}function he(t){return lt.call(t)}function ue(t){if(!Ve(t)||Re(t))return!1;var e=Ue(t)||Z(t)?ct:P;return e.test(Ie(t))}function de(t){if(!Pe(t))return bt(t);var e=[];for(var n in Object(t))at.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fe(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function pe(t){var e=new t.constructor(t.byteLength);return new dt(e).set(new dt(t)),e}function me(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function ge(t,e,n){var r=e?n(J(t),!0):J(t);return Y(r,U,new t.constructor)}function ve(t){var e=new t.constructor(t.source,R.exec(t));return e.lastIndex=t.lastIndex,e}function ye(t,e,n){var r=e?n(tt(t),!0):tt(t);return Y(r,$,new t.constructor)}function be(t){return Dt?Object(Dt.call(t)):{}}function we(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function xe(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}function Ce(t,e,n,r){n||(n={});var i=-1,o=e.length;while(++i<o){var s=e[i],a=r?r(n[s],t[s],s,n,t):void 0;ie(n,s,void 0===a?t[s]:a)}return n}function Ee(t,e){return Ce(t,Te(t),e)}function ke(t){return ce(t,Ye,Te)}function Ne(t,e){var n=t.__data__;return _e(e)?n["string"==typeof e?"string":"hash"]:n.map}function Oe(t,e){var n=X(t,e);return ue(n)?n:void 0}_t.prototype.clear=Rt,_t.prototype["delete"]=Pt,_t.prototype.get=It,_t.prototype.has=jt,_t.prototype.set=zt,Bt.prototype.clear=Ft,Bt.prototype["delete"]=Ht,Bt.prototype.get=qt,Bt.prototype.has=Wt,Bt.prototype.set=Ut,$t.prototype.clear=Vt,$t.prototype["delete"]=Gt,$t.prototype.get=Yt,$t.prototype.has=Kt,$t.prototype.set=Xt,Zt.prototype.clear=Jt,Zt.prototype["delete"]=Qt,Zt.prototype.get=te,Zt.prototype.has=ee,Zt.prototype.set=ne;var Te=vt?Q(vt,Object):Ke,Me=he;function Se(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&at.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Le(t){return"function"!=typeof t.constructor||Pe(t)?{}:le(ft(t))}function Ae(t,e,n,r){var i=t.constructor;switch(e){case C:return pe(t);case l:case c:return new i(+t);case E:return me(t,r);case k:case N:case O:case T:case M:case S:case L:case A:case D:return we(t,r);case f:return ge(t,r,n);case p:case b:return new i(t);case v:return ve(t);case y:return ye(t,r,n);case w:return be(t)}}function De(t,e){return e=null==e?o:e,!!e&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function _e(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Re(t){return!!ot&&ot in t}function Pe(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||rt;return t===n}function Ie(t){if(null!=t){try{return st.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function je(t){return ae(t,!0,!0)}function ze(t,e){return t===e||t!==t&&e!==e}function Be(t){return qe(t)&&at.call(t,"callee")&&(!mt.call(t,"callee")||lt.call(t)==s)}(wt&&Me(new wt(new ArrayBuffer(1)))!=E||xt&&Me(new xt)!=f||Ct&&Me(Ct.resolve())!=g||Et&&Me(new Et)!=y||kt&&Me(new kt)!=x)&&(Me=function(t){var e=lt.call(t),n=e==m?t.constructor:void 0,r=n?Ie(n):void 0;if(r)switch(r){case Ot:return E;case Tt:return f;case Mt:return g;case St:return y;case Lt:return x}return e});var Fe=Array.isArray;function He(t){return null!=t&&$e(t.length)&&!Ue(t)}function qe(t){return Ge(t)&&He(t)}var We=yt||Xe;function Ue(t){var e=Ve(t)?lt.call(t):"";return e==u||e==d}function $e(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Ve(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ge(t){return!!t&&"object"==typeof t}function Ye(t){return He(t)?re(t):de(t)}function Ke(){return[]}function Xe(){return!1}n.exports=je}).call(this,n("24aa"),n("7ebd")(t))},d307:function(t,e){var n=-1,r=1,i=0;function o(t,e,n,r,o){if(t===e)return t?[[i,t]]:[];if(null!=n){var a=T(t,e,n);if(a)return a}var l=c(t,e),h=t.substring(0,l);t=t.substring(l),e=e.substring(l),l=u(t,e);var d=t.substring(t.length-l);t=t.substring(0,t.length-l),e=e.substring(0,e.length-l);var p=s(t,e);return h&&p.unshift([i,h]),d&&p.push([i,d]),w(p,o),r&&f(p),p}function s(t,e){var s;if(!t)return[[r,e]];if(!e)return[[n,t]];var l=t.length>e.length?t:e,c=t.length>e.length?e:t,h=l.indexOf(c);if(-1!==h)return s=[[r,l.substring(0,h)],[i,c],[r,l.substring(h+c.length)]],t.length>e.length&&(s[0][0]=s[2][0]=n),s;if(1===c.length)return[[n,t],[r,e]];var u=d(t,e);if(u){var f=u[0],p=u[1],m=u[2],g=u[3],v=u[4],y=o(f,m),b=o(p,g);return y.concat([[i,v]],b)}return a(t,e)}function a(t,e){for(var i=t.length,o=e.length,s=Math.ceil((i+o)/2),a=s,c=2*s,h=new Array(c),u=new Array(c),d=0;d<c;d++)h[d]=-1,u[d]=-1;h[a+1]=0,u[a+1]=0;for(var f=i-o,p=f%2!==0,m=0,g=0,v=0,y=0,b=0;b<s;b++){for(var w=-b+m;w<=b-g;w+=2){var x=a+w;T=w===-b||w!==b&&h[x-1]<h[x+1]?h[x+1]:h[x-1]+1;var C=T-w;while(T<i&&C<o&&t.charAt(T)===e.charAt(C))T++,C++;if(h[x]=T,T>i)g+=2;else if(C>o)m+=2;else if(p){var E=a+f-w;if(E>=0&&E<c&&-1!==u[E]){var k=i-u[E];if(T>=k)return l(t,e,T,C)}}}for(var N=-b+v;N<=b-y;N+=2){E=a+N;k=N===-b||N!==b&&u[E-1]<u[E+1]?u[E+1]:u[E-1]+1;var O=k-N;while(k<i&&O<o&&t.charAt(i-k-1)===e.charAt(o-O-1))k++,O++;if(u[E]=k,k>i)y+=2;else if(O>o)v+=2;else if(!p){x=a+f-N;if(x>=0&&x<c&&-1!==h[x]){var T=h[x];C=a+T-x;if(k=i-k,T>=k)return l(t,e,T,C)}}}}return[[n,t],[r,e]]}function l(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),l=e.substring(r),c=o(i,s),h=o(a,l);return c.concat(h)}function c(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;var n=0,r=Math.min(t.length,e.length),i=r,o=0;while(n<i)t.substring(o,i)==e.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return x(t.charCodeAt(i-1))&&i--,i}function h(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;var o=0,s=1;while(1){var a=t.substring(i-s),l=e.indexOf(a);if(-1==l)return o;s+=l,0!=l&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}}function u(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;var n=0,r=Math.min(t.length,e.length),i=r,o=0;while(n<i)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return C(t.charCodeAt(t.length-i))&&i--,i}function d(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;function i(t,e,n){var r,i,o,s,a=t.substring(n,n+Math.floor(t.length/4)),l=-1,h="";while(-1!==(l=e.indexOf(a,l+1))){var d=c(t.substring(n),e.substring(l)),f=u(t.substring(0,n),e.substring(0,l));h.length<f+d&&(h=e.substring(l-f,l)+e.substring(l,l+d),r=t.substring(0,n-f),i=t.substring(n+d),o=e.substring(0,l-f),s=e.substring(l+d))}return 2*h.length>=t.length?[r,i,o,s,h]:null}var o,s,a,l,h,d=i(n,r,Math.ceil(n.length/4)),f=i(n,r,Math.ceil(n.length/2));if(!d&&!f)return null;o=f?d&&d[4].length>f[4].length?d:f:d,t.length>e.length?(s=o[0],a=o[1],l=o[2],h=o[3]):(l=o[0],h=o[1],s=o[2],a=o[3]);var p=o[4];return[s,a,l,h,p]}function f(t){var e=!1,o=[],s=0,a=null,l=0,c=0,u=0,d=0,f=0;while(l<t.length)t[l][0]==i?(o[s++]=l,c=d,u=f,d=0,f=0,a=t[l][1]):(t[l][0]==r?d+=t[l][1].length:f+=t[l][1].length,a&&a.length<=Math.max(c,u)&&a.length<=Math.max(d,f)&&(t.splice(o[s-1],0,[n,a]),t[o[s-1]+1][0]=r,s--,s--,l=s>0?o[s-1]:-1,c=0,u=0,d=0,f=0,a=null,e=!0)),l++;e&&w(t),b(t),l=1;while(l<t.length){if(t[l-1][0]==n&&t[l][0]==r){var p=t[l-1][1],m=t[l][1],g=h(p,m),v=h(m,p);g>=v?(g>=p.length/2||g>=m.length/2)&&(t.splice(l,0,[i,m.substring(0,g)]),t[l-1][1]=p.substring(0,p.length-g),t[l+1][1]=m.substring(g),l++):(v>=p.length/2||v>=m.length/2)&&(t.splice(l,0,[i,p.substring(0,v)]),t[l-1][0]=r,t[l-1][1]=m.substring(0,m.length-v),t[l+1][0]=n,t[l+1][1]=p.substring(v),l++),l++}l++}}var p=/[^a-zA-Z0-9]/,m=/\s/,g=/[\r\n]/,v=/\n\r?\n$/,y=/^\r?\n\r?\n/;function b(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),i=n.match(p),o=r.match(p),s=i&&n.match(m),a=o&&r.match(m),l=s&&n.match(g),c=a&&r.match(g),h=l&&t.match(v),u=c&&e.match(y);return h||u?5:l||c?4:i&&!s&&a?3:s||a?2:i||o?1:0}var n=1;while(n<t.length-1){if(t[n-1][0]==i&&t[n+1][0]==i){var r=t[n-1][1],o=t[n][1],s=t[n+1][1],a=u(r,o);if(a){var l=o.substring(o.length-a);r=r.substring(0,r.length-a),o=l+o.substring(0,o.length-a),s=l+s}var c=r,h=o,d=s,f=e(r,o)+e(o,s);while(o.charAt(0)===s.charAt(0)){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var b=e(r,o)+e(o,s);b>=f&&(f=b,c=r,h=o,d=s)}t[n-1][1]!=c&&(c?t[n-1][1]=c:(t.splice(n-1,1),n--),t[n][1]=h,d?t[n+1][1]=d:(t.splice(n+1,1),n--))}n++}}function w(t,e){t.push([i,""]);var o,s=0,a=0,l=0,h="",d="";while(s<t.length)if(s<t.length-1&&!t[s][1])t.splice(s,1);else switch(t[s][0]){case r:l++,d+=t[s][1],s++;break;case n:a++,h+=t[s][1],s++;break;case i:var f=s-l-a-1;if(e){if(f>=0&&k(t[f][1])){var p=t[f][1].slice(-1);if(t[f][1]=t[f][1].slice(0,-1),h=p+h,d=p+d,!t[f][1]){t.splice(f,1),s--;var m=f-1;t[m]&&t[m][0]===r&&(l++,d=t[m][1]+d,m--),t[m]&&t[m][0]===n&&(a++,h=t[m][1]+h,m--),f=m}}if(E(t[s][1])){p=t[s][1].charAt(0);t[s][1]=t[s][1].slice(1),h+=p,d+=p}}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(h.length>0||d.length>0){h.length>0&&d.length>0&&(o=c(d,h),0!==o&&(f>=0?t[f][1]+=d.substring(0,o):(t.splice(0,0,[i,d.substring(0,o)]),s++),d=d.substring(o),h=h.substring(o)),o=u(d,h),0!==o&&(t[s][1]=d.substring(d.length-o)+t[s][1],d=d.substring(0,d.length-o),h=h.substring(0,h.length-o)));var g=l+a;0===h.length&&0===d.length?(t.splice(s-g,g),s-=g):0===h.length?(t.splice(s-g,g,[r,d]),s=s-g+1):0===d.length?(t.splice(s-g,g,[n,h]),s=s-g+1):(t.splice(s-g,g,[n,h],[r,d]),s=s-g+2)}0!==s&&t[s-1][0]===i?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,l=0,a=0,h="",d="";break}""===t[t.length-1][1]&&t.pop();var v=!1;s=1;while(s<t.length-1)t[s-1][0]===i&&t[s+1][0]===i&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),v=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),v=!0)),s++;v&&w(t,e)}function x(t){return t>=55296&&t<=56319}function C(t){return t>=56320&&t<=57343}function E(t){return C(t.charCodeAt(0))}function k(t){return x(t.charCodeAt(t.length-1))}function N(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function O(t,e,o,s){return k(t)||E(s)?null:N([[i,t],[n,e],[r,o],[i,s]])}function T(t,e,n){var r="number"===typeof n?{index:n,length:0}:n.oldRange,i="number"===typeof n?null:n.newRange,o=t.length,s=e.length;if(0===r.length&&(null===i||0===i.length)){var a=r.index,l=t.slice(0,a),c=t.slice(a),h=i?i.index:null,u=a+s-o;if((null===h||h===u)&&!(u<0||u>s)){var d=e.slice(0,u),f=e.slice(u);if(f===c){var p=Math.min(a,u),m=l.slice(0,p),g=d.slice(0,p);if(m===g){var v=l.slice(p),y=d.slice(p);return O(m,v,y,c)}}}if(null===h||h===a){var b=a;d=e.slice(0,b),f=e.slice(b);if(d===l){var w=Math.min(o-b,s-b),x=c.slice(c.length-w),C=f.slice(f.length-w);if(x===C){v=c.slice(0,c.length-w),y=f.slice(0,f.length-w);return O(l,v,y,x)}}}}if(r.length>0&&i&&0===i.length){m=t.slice(0,r.index),x=t.slice(r.index+r.length),p=m.length,w=x.length;if(!(s<p+w)){g=e.slice(0,p),C=e.slice(s-w);if(m===g&&x===C){v=t.slice(p,o-w),y=e.slice(p,s-w);return O(m,v,y,x)}}}return null}function M(t,e,n,r){return o(t,e,n,r,!0)}M.INSERT=r,M.DELETE=n,M.EQUAL=i,t.exports=M},d5d6:function(t,e,n){"use strict";var r=n("d056"),i=n("187c");const o={boxShadowColor:"rgba(0, 0, 0, 0.8)",borderRadius:"5px",transition:"all 0.3s ease-out",zIndex:9999,padding:20,margin:50,openBlankMode:!0};class s{constructor(t){this.mindMap=t.mindMap,this.isInDemonstrate=!1,this.stepList=[],this.currentStepIndex=0,this.currentStepNode=null,this.currentUnderlineTextData=null,this.tmpStyleEl=null,this.highlightEl=null,this.transformState=null,this.renderTree=null,this.config=Object.assign({...o},this.mindMap.opt.demonstrateConfig||{}),this.needRestorePerformanceMode=!1}enter(){this.bindFullscreenEvent(),document.fullscreenElement===this.mindMap.el?this._enter():Object(r["w"])(this.mindMap.el)}_enter(){this.isInDemonstrate=!0,this.pausePerformanceMode(),this.addTmpStyles(),this.transformState=this.mindMap.view.getTransformData(),this.renderTree=this.mindMap.getData(),this.mindMap.command.pause(),this.mindMap.keyCommand.pause(),this.createHighlightEl(),this.getStepList();let t=!1;this.mindMap.renderer.isRendering&&(t=!0),this.mindMap.execCommand("UNEXPAND_ALL",!1);const e=()=>{t?t=!1:(this.mindMap.off("node_tree_render_end",e),this.jump(this.currentStepIndex),this.bindEvent())};this.mindMap.on("node_tree_render_end",e)}exit(){Object(r["s"])(this.mindMap.el),this.mindMap.updateData(this.renderTree),this.mindMap.view.setTransformData(this.transformState),this.renderTree=null,this.transformState=null,this.stepList=[],this.currentStepIndex=0,this.currentStepNode=null,this.currentUnderlineTextData=null,this.unBindEvent(),this.removeTmpStyles(),this.removeHighlightEl(),this.mindMap.command.recovery(),this.mindMap.keyCommand.recovery(),this.restorePerformanceMode(),this.mindMap.emit("exit_demonstrate"),this.isInDemonstrate=!1}pausePerformanceMode(){const{openPerformance:t}=this.mindMap.opt;t&&(this.needRestorePerformanceMode=!0,this.mindMap.opt.openPerformance=!1,this.mindMap.renderer.forceLoadNode())}restorePerformanceMode(){this.needRestorePerformanceMode&&(this.mindMap.opt.openPerformance=!0,this.mindMap.renderer.forceLoadNode())}addTmpStyles(){this.tmpStyleEl=document.createElement("style");let t="\n      /* 画布所有元素禁止响应鼠标事件 */\n      .smm-mind-map-container {\n        pointer-events: none;\n      }\n      /* 超链接图标允许响应鼠标事件 */\n      .smm-node a {\n        pointer-events: all;\n      }\n      /* 备注图标允许响应鼠标事件 */\n      .smm-node .smm-node-note {\n        pointer-events: all;\n      }\n    ";this.config.openBlankMode&&(t+="\n        /* 带下划线的文本内容全部隐藏 */\n        .smm-richtext-node-wrap u {\n          opacity: 0;\n        }\n      "),this.tmpStyleEl.innerText=t,document.head.appendChild(this.tmpStyleEl)}removeTmpStyles(){this.tmpStyleEl&&document.head.removeChild(this.tmpStyleEl)}createHighlightEl(){this.highlightEl||(this.highlightEl=document.createElement("div"),this.highlightEl.style.cssText=`\n            position: absolute;\n            box-shadow: 0 0 0 5000px ${this.config.boxShadowColor};\n            border-radius: ${this.config.borderRadius};\n            transition: ${this.config.transition};\n            z-index: ${this.config.zIndex+1};\n            pointer-events: none;\n        `,this.mindMap.el.appendChild(this.highlightEl))}removeHighlightEl(){this.highlightEl&&(this.mindMap.el.removeChild(this.highlightEl),this.highlightEl=null)}updateHighlightEl({left:t,top:e,width:n,height:r}){const i=this.config.padding;t&&(this.highlightEl.style.left=t-i+"px"),e&&(this.highlightEl.style.top=e-i+"px"),n&&(this.highlightEl.style.width=n+2*i+"px"),r&&(this.highlightEl.style.height=r+2*i+"px")}bindEvent(){this.onKeydown=this.onKeydown.bind(this),window.addEventListener("keydown",this.onKeydown)}bindFullscreenEvent(){this.onFullscreenChange=this.onFullscreenChange.bind(this),document.addEventListener(r["x"],this.onFullscreenChange)}unBindEvent(){window.removeEventListener("keydown",this.onKeydown),document.removeEventListener(r["x"],this.onFullscreenChange)}onFullscreenChange(){document.fullscreenElement?document.fullscreenElement===this.mindMap.el&&this._enter():this.exit()}onKeydown(t){t.keyCode===i["a"].Left?this.prev():t.keyCode===i["a"].Right?this.next():t.keyCode===i["a"].Esc?this.exit():t.keyCode===i["a"].Enter&&this.showNextUnderlineText()}prev(){this.currentStepIndex>0&&this.jump(this.currentStepIndex-1)}next(){const t=this.stepList.length;this.currentStepIndex<t-1&&this.jump(this.currentStepIndex+1)}showNextUnderlineText(){if(!this.config.openBlankMode||!this.currentStepNode||!this.currentUnderlineTextData)return;const{index:t,list:e,length:n}=this.currentUnderlineTextData;if(t>=n)return;const r=e[t];this.currentUnderlineTextData.index++,r.node.style.opacity=1}jump(t){this.currentUnderlineTextData&&(this.currentUnderlineTextData.list.forEach(t=>{t.node.style.opacity=""}),this.currentUnderlineTextData=null),this.currentStepNode=null,this.currentStepIndex=t,this.mindMap.emit("demonstrate_jump",this.currentStepIndex,this.stepList.length);const e=this.stepList[t],n=e.node,i=n.data.uid,o=this.mindMap.renderer.findNodeByUid(i);if(o)if("node"===e.type){this.currentStepNode=o;const t=this.config.openBlankMode?o.group.find("u"):null;t&&t.length>0&&(this.currentUnderlineTextData={index:0,list:t,length:t.length}),this.mindMap.view.fit(()=>o.group.rbox(),!0,this.config.padding+this.config.margin);const e=o.group.rbox();this.updateHighlightEl({left:e.x,top:e.y,width:e.width,height:e.height})}else{const t=()=>{n.children.forEach(t=>{t.data.expand=!1}),this.mindMap.render(()=>{this.mindMap.view.fit(()=>{const t=Object(r["E"])(o,0,0,0,0,!0);return{...t,x:t.left,y:t.top}},!0,this.config.padding+this.config.margin);const t=Object(r["E"])(o,0,0,0,0,!0);this.updateHighlightEl(t)})};if(n.data.expand)t();else{this.mindMap.execCommand("SET_NODE_EXPAND",o,!0);const e=()=>{this.mindMap.off("node_tree_render_end",e),t()};this.mindMap.on("node_tree_render_end",e)}}else this.mindMap.renderer.expandToNodeUid(i,()=>{const e=this.mindMap.renderer.findNodeByUid(i);e&&this.jump(t)})}getStepList(){Object(r["qb"])(this.mindMap.renderer.renderTree,null,t=>{this.stepList.push({type:"node",node:t});const e=Object(r["v"])(t.data);e.forEach(t=>{t.uid&&this.stepList.push({type:"node",node:{data:t}})}),t.children.length>1&&this.stepList.push({type:"children",node:t})})}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}s.instanceName="demonstrate",e["a"]=s},dff1:function(t,e,n){"use strict";(function(t){var r=n("26ee"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?r["a"].Buffer:void 0,l=a?a.allocUnsafe:void 0;function c(t,e){if(e)return t.slice();var n=t.length,r=l?l(n):new t.constructor(n);return t.copy(r),r}e["a"]=c}).call(this,n("faff")(t))},e047:function(t,e,n){"use strict";var r=n("5381"),i=n("09a0");class o{constructor(t){this.max=t||1e3,this.size=0,this.pool=new Map}add(t,e){const n=this.has(t);return!(!n&&this.size>=this.max)&&(this.delete(t),this.pool.set(t,e),this.size++,!0)}delete(t){this.pool.has(t)&&(this.pool.delete(t),this.size--)}has(t){return this.pool.has(t)}get(t){if(this.pool.has(t))return this.pool.get(t)}clear(){this.size=0,this.pool=new Map}}var s=n("d056");class a{constructor(t){this.renderer=t,this.mindMap=t.mindMap,this.draw=this.mindMap.draw,this.lineDraw=this.mindMap.lineDraw,this.root=null,this.lru=new o(this.mindMap.opt.maxNodeCacheCount),this.rootNodeCenterOffset=null}doLayout(){throw new Error("【computed】方法为必要方法，需要子类进行重写！")}renderLine(){throw new Error("【renderLine】方法为必要方法，需要子类进行重写！")}renderExpandBtn(){throw new Error("【renderExpandBtn】方法为必要方法，需要子类进行重写！")}renderGeneralization(){}cacheNode(t,e){this.renderer.nodeCache[t]=e,this.lru.add(t,e)}checkIsNeedResizeSources(){return[i["a"].CHANGE_THEME,i["a"].TRANSFORM_TO_NORMAL_NODE].includes(this.renderer.renderSource)}checkIsLayerTypeChange(t,e){return!(t>=2&&e>=2)&&(t>=2&&e<2||(t<2&&e>=2||void 0))}checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(t){this.renderer.renderSource===i["a"].CHANGE_LAYOUT&&(t.needRerenderExpandBtnPlaceholderRect=!0)}checkIsNodeDataChange(t,e){return t&&(t="string"===typeof t?JSON.parse(t):t,t.isActive=e.isActive,t.expand=e.expand,t=JSON.stringify(t)),t!==JSON.stringify(e)}createNode(t,e,n,i,o,a){const l={};this.mindMap.nodeInnerPrefixList.forEach(n=>{if(n.createNodeData){const[r,s]=n.createNodeData({data:t,parent:e,ancestors:a,layerIndex:i,index:o});l[r]=s}});const c=t.data.uid;let h=null;if(t&&t._node&&!this.renderer.reRender){h=t._node;const r=this.checkIsLayerTypeChange(h.layerIndex,i);h.reset(),h.layerIndex=i,n?h.isRoot=!0:h.parent=e._node,this.cacheNode(t._node.uid,h),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(h);let o=!1;this.mindMap.nodeInnerPrefixList.forEach(t=>{if(t.updateNodeData){const e=t.updateNodeData(h,l);e&&(o=e)}});const s=this.checkIsNeedResizeSources(),a=this.checkIsNodeDataChange(t._node.nodeDataSnapshot,t.data);(s||a||r||h.getData("resetRichText")||o)&&(h.getSize(),h.needLayout=!0),this.checkGetGeneralizationChange(h,s)}else if(!this.lru.has(c)&&!this.renderer.lastNodeCache[c]||this.renderer.reRender){const o=c||Object(s["o"])();h=new r["a"]({data:t,uid:o,renderer:this.renderer,mindMap:this.mindMap,draw:this.draw,layerIndex:i,isRoot:n,parent:n?null:e._node,...l}),t.data.uid=o,this.cacheNode(o,h),t._node=h}else{h=this.lru.get(c)||this.renderer.lastNodeCache[c];const r=JSON.stringify(h.getData()),o=this.checkIsLayerTypeChange(h.layerIndex,i);h.reset(),h.nodeData=h.handleData(t||{}),h.layerIndex=i,n?h.isRoot=!0:h.parent=e._node,this.cacheNode(c,h),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(h),t._node=h;const s=this.checkIsNeedResizeSources(),a=this.checkIsNodeDataChange(r,t.data);let u=!1;this.mindMap.nodeInnerPrefixList.forEach(t=>{if(t.updateNodeData){const e=t.updateNodeData(h,l);e&&(u=e)}}),(s||a||o||h.getData("resetRichText")||u)&&(h.getSize(),h.needLayout=!0),this.checkGetGeneralizationChange(h,s)}return t.data.isActive&&this.renderer.addNodeToActiveList(h),-1!==this.mindMap.renderer.findActiveNodeIndex(h)&&h.setData({isActive:!0}),n?this.root=h:e._node.addChildren(h),h}checkGetGeneralizationChange(t,e){const n=t.getData("generalization");n&&t._generalizationList&&t._generalizationList.length>0&&t._generalizationList.forEach((t,r)=>{const i=t.generalizationNode,o=i.getData(),s=n[r];(e||s&&JSON.stringify(o)!==JSON.stringify(s))&&(s&&(i.nodeData.data=s),i.getSize(),i.needLayout=!0)})}formatPosition(t,e,n){return"number"===typeof t?t:void 0!==i["d"][t]?e*i["d"][t]:/^\d\d*%$/.test(t)?Number.parseFloat(t)/100*e:(e-n)/2}formatInitRootNodePosition(t){const{CENTER:e}=i["a"].INIT_ROOT_NODE_POSITION;return(!t||!Array.isArray(t)||t.length<2)&&(t=[e,e]),t}setNodeCenter(t,e){let{initRootNodePosition:n}=this.mindMap.opt;n=this.formatInitRootNodePosition(e||n),t.left=this.formatPosition(n[0],this.mindMap.width,t.width),t.top=this.formatPosition(n[1],this.mindMap.height,t.height)}getRootCenterOffset(t,e){if(this.rootNodeCenterOffset)return this.rootNodeCenterOffset;let{initRootNodePosition:n}=this.mindMap.opt;const{CENTER:r}=i["a"].INIT_ROOT_NODE_POSITION;if(n=this.formatInitRootNodePosition(n),n[0]===r&&n[1]===r)this.rootNodeCenterOffset={x:0,y:0};else{const n={width:t,height:e},i={width:t,height:e};this.setNodeCenter(n,[r,r]),this.setNodeCenter(i),this.rootNodeCenterOffset={x:i.left-n.left,y:i.top-n.top}}return this.rootNodeCenterOffset}updateChildren(t,e,n){t.forEach(t=>{t[e]+=n,t.children&&t.children.length&&!t.hasCustomPosition()&&this.updateChildren(t.children,e,n)})}updateChildrenPro(t,e){t.forEach(t=>{Object.keys(e).forEach(n=>{t[n]+=e[n]}),t.children&&t.children.length&&!t.hasCustomPosition()&&this.updateChildrenPro(t.children,e)})}getNodeAreaWidth(t,e=!1){let n=[],r=0,i=(t,o)=>{e&&t.checkHasGeneralization()&&(r+=t._generalizationNodeWidth),t.children.length?(o+=t.width/2,t.children.forEach(t=>{i(t,o)})):(o+=t.width,n.push(o))};return i(t,0),Math.max(...n)+r}quadraticCurvePath(t,e,n,r,i=!1){let o,s;return i?(o=t+.8*(n-t),s=e+.2*(r-e)):(o=t+.2*(n-t),s=e+.8*(r-e)),`M ${t},${e} Q ${o},${s} ${n},${r}`}cubicBezierPath(t,e,n,r,i=!1){let o,s,a,l;return i?(o=t,s=e+(r-e)/2,a=n,l=s):(o=t+(n-t)/2,s=e,a=o,l=r),`M ${t},${e} C ${o},${s} ${a},${l} ${n},${r}`}computeNewPoint(t,e,n=0){return t[0]===e[0]?e[1]>t[1]?[e[0],e[1]-n]:[e[0],e[1]+n]:t[1]===e[1]?e[0]>t[0]?[e[0]-n,e[1]]:[e[0]+n,e[1]]:void 0}createFoldLine(t){const{lineRadius:e}=this.mindMap.themeConfig,n=t.length;let r="",i="";if(n>=3&&e>0){const r=t[n-3],o=t[n-2],s=t[n-1],a=r[0]===o[0]&&o[0]===s[0]||r[1]===o[1]&&o[1]===s[1];if(!a){const a=this.computeNewPoint(r,o,e),l=this.computeNewPoint(s,o,e);i=`Q ${o[0]},${o[1]} ${l[0]},${l[1]}`,t.splice(n-2,1,a,i)}}return t.forEach((t,e)=>{if("string"===typeof t)r+=t;else{const[n,i]=t;r+=0===e?`M ${n},${i}`:`L ${n},${i}`}}),r}getMarginX(t){const{themeConfig:e,opt:n}=this.mindMap,{second:r,node:i}=e,o=2*n.hoverRectPadding;return 1===t?r.marginX+o:i.marginX+o}getMarginY(t){const{themeConfig:e,opt:n}=this.mindMap,{second:r,node:i}=e,o=2*n.hoverRectPadding;return 1===t?r.marginY+o:i.marginY+o}getNodeWidthWithGeneralization(t){return Math.max(t.width,t.checkHasGeneralization()?t._generalizationNodeWidth:0)}getNodeHeightWithGeneralization(t){return Math.max(t.height,t.checkHasGeneralization()?t._generalizationNodeHeight:0)}getNodeBoundaries(t,e){let{generalizationLineMargin:n,generalizationNodeMargin:r}=this.mindMap.themeConfig,i=t=>{let n=1/0,o=-1/0,s=1/0,a=-1/0;t.children&&t.children.length>0&&t.children.forEach(t=>{let{left:l,right:c,top:h,bottom:u}=i(t),d=t.checkHasGeneralization()&&t.getData("expand")?t._generalizationNodeWidth+r:0,f=t.checkHasGeneralization()&&t.getData("expand")?t._generalizationNodeHeight+r:0;l-("h"===e?d:0)<n&&(n=l-("h"===e?d:0)),c+("h"===e?d:0)>o&&(o=c+("h"===e?d:0)),h<s&&(s=h),u+("v"===e?f:0)>a&&(a=u+("v"===e?f:0))});let l={left:t.left,right:t.left+t.width,top:t.top,bottom:t.top+t.height};return{left:l.left<n?l.left:n,right:l.right>o?l.right:o,top:l.top<s?l.top:s,bottom:l.bottom>a?l.bottom:a}},{left:o,right:s,top:a,bottom:l}=i(t);return{left:o,right:s,top:a,bottom:l,generalizationLineMargin:n,generalizationNodeMargin:r}}getChildrenBoundaries(t,e,n=0,r){let{generalizationLineMargin:i,generalizationNodeMargin:o}=this.mindMap.themeConfig;const s=t.children.slice(n,r+1);let a=1/0,l=-1/0,c=1/0,h=-1/0;return s.forEach(t=>{const n=this.getNodeBoundaries(t,e);a=n.left<a?n.left:a,l=n.right>l?n.right:l,c=n.top<c?n.top:c,h=n.bottom>h?n.bottom:h}),{left:a,right:l,top:c,bottom:h,generalizationLineMargin:i,generalizationNodeMargin:o}}getNodeGeneralizationRenderBoundaries(t,e){let n=null;return n=t.range?this.getChildrenBoundaries(t.node,e,t.range[0],t.range[1]):this.getNodeBoundaries(t.node,e),n}getNodeActChildrenLength(t){return t.nodeData.children&&t.nodeData.children.length}setLineStyle(t,e,n,r){e.plot(this.transformPath(n)),t&&t(e,r,!0)}transformPath(t){const{customTransformNodeLinePath:e}=this.mindMap.opt;return e?e(t):t}}e["a"]=a},e3da:function(t,e,n){"use strict";for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)r[48+a]=r[96+a]=String(a);for(a=1;a<=24;a++)r[a+111]="F"+a;for(a=65;a<=90;a++)r[a]=String.fromCharCode(a+32),i[a]=String.fromCharCode(a);for(var l in r)i.hasOwnProperty(l)||(i[l]=r[l]);function c(t){var e=o&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||s&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key,n=!e&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var h=n("6ffb");n.d(e,"a",(function(){return m}));const u="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function d(t){let e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let t=o[a];if(/^(cmd|meta|m)$/i.test(t))i=!0;else if(/^a(lt)?$/i.test(t))e=!0;else if(/^(c|ctrl|control)$/i.test(t))n=!0;else if(/^s(hift)?$/i.test(t))r=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);u?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function f(t){let e=Object.create(null);for(let n in t)e[d(n)]=t[n];return e}function p(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function m(t){return new h["d"]({props:{handleKeyDown:g(t)}})}function g(t){let e=f(t);return function(t,n){let i,o=c(n),s=e[p(o,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=e[p(o,n,!1)];if(r&&r(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){let r=e[p(i,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}},e3f4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("cd3f"),i=n("5da1");var o;(function(t){function e(t={},e={},n=!1){"object"!==typeof t&&(t={}),"object"!==typeof e&&(e={});let i=r(e);n||(i=Object.keys(i).reduce((t,e)=>(null!=i[e]&&(t[e]=i[e]),t),{}));for(const r in t)void 0!==t[r]&&void 0===e[r]&&(i[r]=t[r]);return Object.keys(i).length>0?i:void 0}function n(t={},e={}){"object"!==typeof t&&(t={}),"object"!==typeof e&&(e={});const n=Object.keys(t).concat(Object.keys(e)).reduce((n,r)=>(i(t[r],e[r])||(n[r]=void 0===e[r]?null:e[r]),n),{});return Object.keys(n).length>0?n:void 0}function o(t={},e={}){t=t||{};const n=Object.keys(e).reduce((n,r)=>(e[r]!==t[r]&&void 0!==t[r]&&(n[r]=e[r]),n),{});return Object.keys(t).reduce((n,r)=>(t[r]!==e[r]&&void 0===e[r]&&(n[r]=null),n),n)}function s(t,e,n=!1){if("object"!==typeof t)return e;if("object"!==typeof e)return;if(!n)return e;const r=Object.keys(e).reduce((n,r)=>(void 0===t[r]&&(n[r]=e[r]),n),{});return Object.keys(r).length>0?r:void 0}t.compose=e,t.diff=n,t.invert=o,t.transform=s})(o||(o={})),e.default=o},e4d0:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("d056");const i=t=>t.richText?Object(r["Z"])(t.text):t.text,o=t=>new Array(t).fill("#").join(""),s=t=>new Array(t-6).fill("   ").join("")+"*",a=t=>{let e="";return Object(r["qb"])(t,null,(t,n,r,a)=>{const l=a+1;e+=l<=6?o(l):s(l),e+=" "+i(t.data);const c=t.data.generalization;if(Array.isArray(c))e+=c.map(t=>` [${i(t)}]`);else if(c&&c.text){const t=i(c);e+=` [${t}]`}e+="\n\n",t.data.note&&(e+=t.data.note+"\n\n")},()=>{},!0),e}},f201:function(t,e,n){"use strict";var r=200,i=function(){};i.prototype.append=function(t){return t.length?(t=i.from(t),!this.length&&t||t.length<r&&this.leafAppend(t)||this.length<r&&t.leafPrepend(this)||this.appendInner(t)):this},i.prototype.prepend=function(t){return t.length?i.from(t).append(this):this},i.prototype.appendInner=function(t){return new s(this,t)},i.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?i.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},i.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},i.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},i.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},i.from=function(t){return t instanceof i?t:t&&t.length?new o(t):i.empty};var o=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=r)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=r)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(i);i.empty=new o([]);var s=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(i),a=i,l=n("b923"),c=n("6ffb");n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return M})),n.d(e,"d",(function(){return L}));const h=500;class u{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){let t=this.items.get(i-1);if(t.selection){--i;break}}e&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=t.tr,l=[],c=[];return this.items.forEach((t,e)=>{if(!t.step)return n||(n=this.remapping(i,e+1),r=n.maps.length),r--,void c.push(t);if(n){c.push(new f(t.map));let e,i=t.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new f(e,void 0,void 0,l.length+c.length))),r--,e&&n.appendMap(e,r)}else a.maybeStep(t.step);return t.selection?(o=n?t.selection.map(n.slice(r)):t.selection,s=new u(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<t.steps.length;c++){let n,l=t.steps[c].invert(t.docs[c]),h=new f(t.mapping.maps[c],l,e);(n=a&&a.merge(h))&&(h=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(h),e&&(o++,e=void 0),r||(a=h)}let l=o-n.depth;return l>m&&(s=d(s,l),o-=l),new u(s.append(i),o)}remapping(t,e){let n=new l["a"];return this.items.forEach((e,r)=>{let i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,i)},t,e),n}addMaps(t){return 0==this.eventCount?this:new u(this.items.append(t.map(t=>new f(t))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach(t=>{t.selection&&s--},r);let a=e;this.items.forEach(e=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(e.step){let o=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(i.slice(a+1,r));c&&s++,n.push(new f(l,o,c))}else n.push(new f(l))},r);let l=[];for(let h=e;h<o;h++)l.push(new f(i.maps[h]));let c=this.items.slice(0,r).append(l).append(n),d=new u(c,s);return d.emptyItemCount()>h&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach((o,s)=>{if(s>=t)r.push(o),o.selection&&i++;else if(o.step){let t=o.step.map(e.slice(n)),s=t&&t.getMap();if(n--,s&&e.appendMap(s,n),t){let a=o.selection&&o.selection.map(e.slice(n));a&&i++;let l,c=new f(s.invert(),t,a),h=r.length-1;(l=r.length&&r[h].merge(c))?r[h]=l:r.push(c)}}else o.map&&n--},this.items.length,0),new u(a.from(r.reverse()),i)}}function d(t,e){let n;return t.forEach((t,r)=>{if(t.selection&&0==e--)return n=r,!1}),t.slice(n)}u.empty=new u(a.empty,0);class f{constructor(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new f(e.getMap().invert(),e,this.selection)}}}class p{constructor(t,e,n,r,i){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const m=20;function g(t,e,n,r){let i,o=n.getMeta(k);if(o)return o.historyState;n.getMeta(N)&&(t=new p(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(k))return s.getMeta(k).redo?new p(t.done.addTransform(n,void 0,r,E(e)),t.undone,y(n.mapping.maps),t.prevTime,t.prevComposition):new p(t.done,t.undone.addTransform(n,void 0,r,E(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new p(t.done.rebased(n,i),t.undone.rebased(n,i),b(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new p(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),b(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);{let i=n.getMeta("composition"),o=0==t.prevTime||!s&&t.prevComposition!=i&&(t.prevTime<(n.time||0)-r.newGroupDelay||!v(n,t.prevRanges)),a=s?b(t.prevRanges,n.mapping):y(n.mapping.maps);return new p(t.done.addTransform(n,o?e.selection.getBookmark():void 0,r,E(e)),u.empty,a,n.time,null==i?t.prevComposition:i)}}function v(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((t,r)=>{for(let i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)}),n}function y(t){let e=[];for(let n=t.length-1;n>=0&&0==e.length;n--)t[n].forEach((t,n,r,i)=>e.push(r,i));return e}function b(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function w(t,e,n){let r=E(e),i=k.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new p(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(k,{redo:n,historyState:l})}let x=!1,C=null;function E(t){let e=t.plugins;if(C!=e){x=!1,C=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){x=!0;break}}return x}const k=new c["e"]("history"),N=new c["e"]("closeHistory");function O(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new c["d"]({key:k,state:{init(){return new p(u.empty,u.empty,null,0,-1)},apply(e,n,r){return g(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,r="historyUndo"==n?M:"historyRedo"==n?S:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}function T(t,e){return(n,r)=>{let i=k.getState(n);if(!i||0==(t?i.undone:i.done).eventCount)return!1;if(r){let o=w(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const M=T(!1,!0),S=T(!0,!0);T(!1,!1),T(!0,!1);function L(t){let e=k.getState(t);return e?e.done.eventCount:0}},f513:function(t,e,n){},faff:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},fcce:function(t,e,n){"use strict";const r='<svg t="1618141562310" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13476" width="200" height="200"><path d="M475.136 327.168v147.968h-147.968v74.24h147.968v147.968h74.24v-147.968h147.968v-74.24h-147.968v-147.968h-74.24z m36.864-222.208c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13477"></path></svg>',i='<svg t="1618141589243" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13611" width="200" height="200"><path d="M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13612"></path><path d="M252.928 474.624h518.144v74.24h-518.144z" p-id="13613"></path></svg>',o='<svg width="14px" height="14px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13611" width="200" height="200"><path fill="#ffffff" d="M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13612"></path><path fill="#ffffff" d="M252.928 474.624h518.144v74.24h-518.144z" p-id="13613"></path></svg>',s='<svg width="12px" height="12px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#ffffff" d="M1008.128 614.4a25.6 25.6 0 0 0-27.648 5.632l-142.848 142.848L259.072 186.88 401.92 43.52A25.6 25.6 0 0 0 384 0h-358.4a25.6 25.6 0 0 0-25.6 25.6v358.4a25.6 25.6 0 0 0 43.52 17.92l143.36-142.848 578.048 578.048-142.848 142.848a25.6 25.6 0 0 0 17.92 43.52h358.4a25.6 25.6 0 0 0 25.6-25.6v-358.4a25.6 25.6 0 0 0-15.872-25.088z"  /></svg>';e["a"]={open:r,close:i,remove:o,imgAdjust:s}}}]);