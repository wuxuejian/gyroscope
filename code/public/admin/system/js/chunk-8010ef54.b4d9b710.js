(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8010ef54"],{"0be1":function(t,e,n){},1450:function(t,e,n){},"160a":function(t,e,n){"use strict";n("b55a")},"19e6":function(t,e,n){"use strict";n("1f58")},"1b29":function(t,e,n){},"1f58":function(t,e,n){},"207b":function(t,e,n){},"20d3":function(t,e,n){"use strict";n("7301")},2556:function(t,e,n){},"275d":function(t,e,n){},"2b94":function(t,e,n){"use strict";n("36ef")},"2daf":function(t,e,n){"use strict";n("725a")},"36ef":function(t,e,n){},4213:function(t,e,n){},"47f5":function(t,e,n){"use strict";n("2556")},"5ac6":function(t,e,n){},"5f5b":function(t,e,n){"use strict";n("d8fb")},"61ac":function(t,e,n){"use strict";n("275d")},"725a":function(t,e,n){},7301:function(t,e,n){},"7f8a":function(t,e,n){"use strict";n("5ac6")},"7fb6":function(t,e,n){},8658:function(t,e,n){"use strict";n("c3d2")},"9cde":function(t,e,n){"use strict";n("207b")},aa4a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.xmindJsonData?n("XmindEditor",{ref:"editor",attrs:{xmindData:t.xmindJsonData,fileName:t.file.file_name,size:t.xmindSize},on:{save:t.save}}):t._e()},o=[],r=n("e876"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-container"},[n("div",{ref:"container",attrs:{id:"edit-xmind-container"}}),t._v(" "),t.mindMap?[t.isZenMode?t._e():n("Toolbar"),t._v(" "),n("Contextmenu",{attrs:{mindMap:t.mindMap,isZenMode:t.isZenMode}}),t._v(" "),t.isZenMode?t._e():n("Count",{attrs:{mindMap:t.mindMap}}),t._v(" "),t.mindMap?n("Navigator",{attrs:{mindMap:t.mindMap}}):t._e(),t._v(" "),t.isZenMode?t._e():n("NavigatorToolbar",{attrs:{mindMap:t.mindMap}}),t._v(" "),t.mindMap?n("Search",{attrs:{mindMap:t.mindMap}}):t._e()]:t._e()],2)},s=[],c=n("c83b"),l=n("7b09"),u=n("5733"),h=n("d5d6"),f=n("9b90"),d=n("2c0f"),p=n("1ab9"),v=n("2c8a"),m=n("7ab4"),y=n("34b4"),b=n("a330"),g=n("13cc"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("div",{ref:"contextmenuRef",staticClass:"contextmenuContainer listBox",style:{left:t.left+"px",top:t.top+"px"}},["node"===t.type?[n("div",{staticClass:"item",class:{disabled:t.insertNodeBtnDisabled},on:{click:function(e){return t.handleExecCommand("INSERT_NODE",t.insertNodeBtnDisabled)}}},[n("span",{staticClass:"name"},[t._v("插入同级节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Enter")])]),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.isGeneralization},on:{click:function(e){return t.handleExecCommand("INSERT_CHILD_NODE")}}},[n("span",{staticClass:"name"},[t._v("插入子级节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Tab")])]),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.insertNodeBtnDisabled},on:{click:function(e){return t.handleExecCommand("INSERT_PARENT_NODE")}}},[n("span",{staticClass:"name"},[t._v("插入父节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Shift + Tab")])]),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.insertNodeBtnDisabled},on:{click:function(e){return t.handleExecCommand("ADD_GENERALIZATION")}}},[n("span",{staticClass:"name"},[t._v("插入概要")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + G")])]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.upNodeBtnDisabled},on:{click:function(e){return t.handleExecCommand("UP_NODE")}}},[n("span",{staticClass:"name"},[t._v("上移节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + ↑")])]),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.downNodeBtnDisabled},on:{click:function(e){return t.handleExecCommand("DOWN_NODE")}}},[n("span",{staticClass:"name"},[t._v("下移节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + ↓")])]),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("EXPAND_ALL")}}},[n("span",{staticClass:"name"},[t._v("展开所有下级节点")])]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),n("div",{staticClass:"item danger",on:{click:function(e){return t.handleExecCommand("REMOVE_NODE")}}},[n("span",{staticClass:"name"},[t._v("删除节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Delete")])]),t._v(" "),n("div",{staticClass:"item danger",on:{click:function(e){return t.handleExecCommand("REMOVE_CURRENT_NODE")}}},[n("span",{staticClass:"name"},[t._v("仅删除当前节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Shift + Backspace")])]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.isGeneralization},on:{click:function(e){return t.handleExecCommand("COPY_NODE")}}},[n("span",{staticClass:"name"},[t._v("复制节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + C")])]),t._v(" "),n("div",{staticClass:"item",class:{disabled:t.isGeneralization},on:{click:function(e){return t.handleExecCommand("CUT_NODE")}}},[n("span",{staticClass:"name"},[t._v("剪切节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + X")])]),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("PASTE_NODE")}}},[n("span",{staticClass:"name"},[t._v("粘贴节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + V")])]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),t.hasHyperlink?n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("REMOVE_HYPERLINK")}}},[n("span",{staticClass:"name"},[t._v("移除超链接")])]):t._e(),t._v(" "),t.hasNote?n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("REMOVE_NOTE")}}},[n("span",{staticClass:"name"},[t._v("移除备注")])]):t._e(),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("EXPORT_CUR_NODE_TO_PNG")}}},[n("span",{staticClass:"name"},[t._v("导出该节点为图片")])])]:t._e(),t._v(" "),"svg"===t.type?[n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("RETURN_CENTER")}}},[n("span",{staticClass:"name"},[t._v("回到根节点")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + Enter")])]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("EXPAND_ALL")}}},[n("span",{staticClass:"name"},[t._v("展开所有")])]),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("UNEXPAND_ALL")}}},[n("span",{staticClass:"name"},[t._v("收起所有")])]),t._v(" "),n("div",{staticClass:"item"},[n("span",{staticClass:"name"},[t._v("展开到")]),t._v(" "),n("span",{staticClass:"el-icon-arrow-right"}),t._v(" "),n("div",{staticClass:"subItems listBox",class:{showLeft:t.subItemsShowLeft},staticStyle:{top:"-10px"}},t._l(t.expandList,(function(e,i){return n("div",{key:e,staticClass:"item",on:{click:function(e){return t.handleExecCommand("UNEXPAND_TO_LEVEL",!1,i+1)}}},[t._v("\n          "+t._s(e)+"\n        ")])})),0)]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("RESET_LAYOUT")}}},[n("span",{staticClass:"name"},[t._v("一键整理布局")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + L")])]),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand("FIT_CANVAS")}}},[n("span",{staticClass:"name"},[t._v("适应画布")]),t._v(" "),n("span",{staticClass:"desc"},[t._v("Ctrl + i")])]),t._v(" "),n("div",{staticClass:"item",on:{click:function(e){return t.handleExecCommand(t.TOGGLE_ZEN_MODE)}}},[n("span",{staticClass:"name"},[t._v("禅模式")]),t._v("\n      "+t._s(t.isZenMode?"√":"")+"\n    ")]),t._v(" "),n("div",{staticClass:"splitLine"}),t._v(" "),n("div",{staticClass:"item"},[n("span",{staticClass:"name"},[t._v("复制到剪贴板")]),t._v(" "),n("span",{staticClass:"el-icon-arrow-right"}),t._v(" "),n("div",{staticClass:"subItems listBox",class:{showLeft:t.subItemsShowLeft},staticStyle:{top:"-100px"}},t._l(t.copyTypeList,(function(e){return n("div",{key:e.value,staticClass:"item",on:{click:function(n){return t.copyToClipboard(e.value)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),0)])]:t._e()],2):t._e()},w=[],x=n("d056"),E=n("e4d0"),C=n("5d5f"),S="XMIND_EXEC_COMMAND",N="XMIND_PADDING_CHANGE",M="XMIND_SET_DATA",k="XMIND_START_TEXT_EDIT",T="XMIND_END_TEXT_EDIT",O="XMIND_TOGGLE_ZEN_MODE",L="CREATE_ASSOCIATIVE_LINE",A="START_PAINTER",$={EXEC_COMMAND:S,PADDING_CHANGE:N,SET_DATA:M,START_TEXT_EDIT:k,END_TEXT_EDIT:T,TOGGLE_ZEN_MODE:O,CREATE_ASSOCIATIVE_LINE:L,START_PAINTER:A},j="node_active",I="data_change",D="view_data_change",R="back_forward",P="node_contextmenu",B="node_click",G="draw_click",z="expand_btn_click",H="svg_mousedown",V="mouseup",X="mode_change",F="node_tree_render_end",U="rich_text_selection_change",K="transforming-dom-to-images",W="generalization_node_contextmenu",Z="painter_start",Y="painter_end",J="scrollbar_change",q="scale",Q="translate",tt="node_attachmentClick",et="node_attachmentContextmenu",nt="demonstrate_jump",it="exit_demonstrate",ot="mini_map_view_box_position_change",rt="search_info_change",at="search_match_node_list_change",st=[j,I,D,R,P,B,G,z,H,V,X,F,U,K,W,Z,Y,J,q,Q,tt,et,nt,it,ot,rt,at],ct="toggle_mini_map",lt="show_search",ut="closeSideBar",ht="showNodeImage",ft="showNodeLink",dt="showNodeTag",pt="showNodeNote",vt=n("70d6");function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function yt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */yt=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof y?e:y,a=Object.create(r.prototype),s=new O(i||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function b(){}function g(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==n&&i.call(x,a)&&(_=x);var E=g.prototype=y.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,r,a,s){var c=h(t[o],t,r);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==mt(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var r;o(this,"_invoke",{value:function(t,i){function o(){return new e((function(e,o){n(t,i,e,o)}))}return r=r?r.then(o,o):o()}})}function N(e,n,i){var o=f;return function(r,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===r)throw a;return{value:t,done:!0}}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var c=M(s,i);if(c){if(c===m)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===f)throw o=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=p;var l=h(e,n,i);if("normal"===l.type){if(o=i.done?v:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=v,i.method="throw",i.arg=l.arg)}}}function M(e,n){var i=n.method,o=e.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var r=h(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(mt(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},C(S.prototype),l(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new S(u(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(E),l(E,c,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=L,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function bt(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,o)}function gt(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){bt(r,i,o,a,s,"next",t)}function s(t){bt(r,i,o,a,s,"throw",t)}a(void 0)}))}}function _t(t,e){return St(t)||Ct(t,e)||xt(t,e)||wt()}function wt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xt(t,e){if(t){if("string"===typeof t)return Et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(t,e):void 0}}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ct(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function St(t){if(Array.isArray(t))return t}function Nt(t,e,n){return e=Mt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(t){var e=kt(t,"string");return"symbol"==mt(e)?e:e+""}function kt(t,e){if("object"!=mt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Tt={name:"Contextmenu",props:{mindMap:Object,isZenMode:Boolean},data:function(){var t;return{isShow:!1,left:0,top:0,node:null,type:"",isMousedown:!1,mosuedownX:0,mosuedownY:0,enableCopyToClipboardApi:navigator.clipboard,numberType:"",numberLevel:"",subItemsShowLeft:!1,listenEventMap:(t={},Nt(t,P,this.handleSetNodeContextMenuVisible),Nt(t,B,this.handleSetContextMenuHidden),Nt(t,G,this.handleSetContextMenuHidden),Nt(t,z,this.handleSetContextMenuHidden),Nt(t,H,this.onMousedown),Nt(t,V,this.onMouseup),Nt(t,Q,this.handleSetContextMenuHidden),t),TOGGLE_ZEN_MODE:O}},computed:{expandList:function(){return["一级主题","二级主题","三级主题","四级主题","五级主题","六级主题"]},copyTypeList:function(){var t=[{name:"JSON",value:"json"},{name:"Markdown",value:"md"},{name:"TXT",value:"txt"}];return this.enableCopyToClipboardApi&&t.push({name:"图片",value:"png"}),t},insertNodeBtnDisabled:function(){return!this.node||this.node.isRoot||this.node.isGeneralization},upNodeBtnDisabled:function(){var t=this;if(!this.node||this.node.isRoot||this.node.isGeneralization)return!0;var e=0===this.node.parent.children.findIndex((function(e){return e===t.node}));return e},downNodeBtnDisabled:function(){var t=this;if(!this.node||this.node.isRoot||this.node.isGeneralization)return!0;var e=this.node.parent.children,n=e.findIndex((function(e){return e===t.node}))===e.length-1;return n},isGeneralization:function(){return this.node.isGeneralization},hasHyperlink:function(){return!!this.node.getData("hyperlink")},hasNote:function(){return!!this.node.getData("note")}},created:function(){var t=this;Object.entries(this.listenEventMap).forEach((function(e){var n=_t(e,2),i=n[0],o=n[1];t.$bus.$on(i,o)}))},beforeDestroy:function(){var t=this;Object.entries(this.listenEventMap).forEach((function(e){var n=_t(e,2),i=n[0],o=n[1];t.$bus.$off(i,o)}))},methods:{getShowPosition:function(t,e){var n=this.$refs.contextmenuRef.getBoundingClientRect();return t+n.width>window.innerWidth&&(t=t-n.width-20),this.subItemsShowLeft=t+n.width+150>window.innerWidth,e+n.height>window.innerHeight&&(e=window.innerHeight-n.height-10),{x:t,y:e}},handleSetNodeContextMenuVisible:function(t,e){var n=this;this.type="node",this.isShow=!0,this.node=e;var i=this.node.getData("number");i&&(this.numberType=i.type||1,this.numberLevel=""===i.level?1:i.level),this.$nextTick((function(){var e=n.getShowPosition(t.clientX+10,t.clientY+10),i=e.x,o=e.y;n.left=i,n.top=o}))},onMousedown:function(t){3===t.which&&(this.mosuedownX=t.clientX,this.mosuedownY=t.clientY,this.isMousedown=!0)},onMouseup:function(t){this.isMousedown&&(this.isMousedown=!1,Math.abs(this.mosuedownX-t.clientX)>3||Math.abs(this.mosuedownY-t.clientY)>3?this.handleSetContextMenuHidden():this.show2(t))},show2:function(t){var e=this;this.type="svg",this.isShow=!0,this.$nextTick((function(){var n=e.getShowPosition(t.clientX+10,t.clientY+10),i=n.x,o=n.y;e.left=i,e.top=o}))},handleSetContextMenuHidden:function(){this.isShow=!1,this.left=-9999,this.top=-9999,this.type="",this.node="",this.numberType="",this.numberLevel=""},handleExecCommand:function(t,e){var n;if(!e){switch(t){case"COPY_NODE":this.mindMap.renderer.copy();break;case"CUT_NODE":this.mindMap.renderer.cut();break;case"PASTE_NODE":this.mindMap.renderer.paste();break;case"RETURN_CENTER":this.mindMap.renderer.setRootNodeCenter();break;case O:this.$bus.$emit(O);break;case"FIT_CANVAS":this.mindMap.view.fit();break;case"REMOVE_HYPERLINK":this.node.setHyperlink("","");break;case"REMOVE_NOTE":this.node.setNote("");break;case"EXPORT_CUR_NODE_TO_PNG":this.mindMap.export("png",!0,Object(x["I"])(this.node.getData("text")),!1,this.node);break;case"EXPAND_ALL":this.$bus.$emit(S,t,this.node.uid);break;default:for(var i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=this.$bus).$emit.apply(n,[S,t].concat(o));break}this.handleSetContextMenuHidden()}},copyToClipboard:function(t){var e=this;return gt(yt().mark((function n(){var i,o,r,a;return yt().wrap((function(n){while(1)switch(n.prev=n.next){case 0:n.prev=0,e.handleSetContextMenuHidden(),n.t0=t,n.next="json"===n.t0?5:"md"===n.t0?8:"txt"===n.t0?11:"png"===n.t0?14:22;break;case 5:return i=e.mindMap.getData(!0),o=JSON.stringify(i),n.abrupt("break",23);case 8:return i=e.mindMap.getData(),o=Object(E["a"])(i),n.abrupt("break",23);case 11:return i=e.mindMap.getData(),o=Object(C["a"])(i),n.abrupt("break",23);case 14:return n.next=16,e.mindMap.export("png",!1);case 16:return r=n.sent,n.next=19,Object(x["P"])(r,!0);case 19:return a=n.sent,Object(vt["f"])(a),n.abrupt("break",23);case 22:return n.abrupt("break",23);case 23:o&&(e.enableCopyToClipboardApi?Object(vt["e"])(o):Object(vt["a"])(o)),e.$message.success("复制成功"),n.next=31;break;case 27:n.prev=27,n.t1=n["catch"](0),console.log(n.t1),e.$message.error("复制失败");case 31:case"end":return n.stop()}}),n,null,[[0,27]])})))()}}},Ot=Tt,Lt=(n("160a"),n("2877")),At=Object(Lt["a"])(Ot,_,w,!1,null,"190ed3fc",null),$t=At.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"countContainer"},[n("div",{staticClass:"item"},[n("span",{staticClass:"name"},[t._v("字数")]),t._v(" "),n("span",{staticClass:"value"},[t._v(t._s(t.words))])]),t._v(" "),n("div",{staticClass:"item"},[n("span",{staticClass:"name"},[t._v("节点")]),t._v(" "),n("span",{staticClass:"value"},[t._v(t._s(t.num))])])])},It=[],Dt=document.createElement("div"),Rt={name:"Count",props:{mindMap:{type:Object}},data:function(){return{textStr:"",words:0,num:0}},created:function(){this.$bus.$on(I,this.onDataChange),this.mindMap&&this.onDataChange(this.mindMap.getData())},beforeDestroy:function(){this.$bus.$off(I,this.onDataChange)},methods:{onDataChange:function(t){this.textStr="",this.words=0,this.num=0,this.walk(t),Dt.innerHTML=this.textStr,this.words=Dt.textContent.length},walk:function(t){var e=this;t&&(this.num++,this.textStr+=String(t.data.text)||"",t.children&&t.children.length>0&&t.children.forEach((function(t){e.walk(t)})))}}},Pt=Rt,Bt=(n("bffe"),Object(Lt["a"])(Pt,jt,It,!1,null,"63395144",null)),Gt=Bt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showMiniMap?n("div",{ref:"navigatorBox",staticClass:"navigatorBox",style:{width:t.width+"px"},on:{mousedown:t.onMousedown,mousemove:t.onMousemove}},[n("div",{ref:"svgBox",staticClass:"svgBox",style:{transform:"scale("+t.svgBoxScale+")",left:t.svgBoxLeft+"px",top:t.svgBoxTop+"px"}},[n("img",{attrs:{src:t.mindMapImg},on:{mousedown:function(t){t.preventDefault()}}})]),t._v(" "),n("div",{staticClass:"windowBox",class:{withTransition:t.withTransition},style:t.viewBoxStyle,on:{mousedown:function(e){return e.stopPropagation(),t.onViewBoxMousedown(e)},mousemove:t.onViewBoxMousemove}})]):t._e()},Ht=[];function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Xt(t,e){return Zt(t)||Wt(t,e)||Ut(t,e)||Ft()}function Ft(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ut(t,e){if(t){if("string"===typeof t)return Kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(t,e):void 0}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Wt(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function Zt(t){if(Array.isArray(t))return t}function Yt(t,e,n){return e=Jt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jt(t){var e=qt(t,"string");return"symbol"==Vt(e)?e:e+""}function qt(t,e){if("object"!=Vt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=Vt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Qt={props:{mindMap:{type:Object}},data:function(){var t;return{showMiniMap:!1,timer:null,boxWidth:0,boxHeight:0,svgBoxScale:1,svgBoxLeft:0,svgBoxTop:0,viewBoxStyle:{left:0,top:0,bottom:0,right:0},mindMapImg:"",width:0,setSizeTimer:null,withTransition:!0,listenEventMap:(t={},Yt(t,ct,this.toggle_mini_map),Yt(t,I,this.data_change),Yt(t,D,this.data_change),Yt(t,F,this.data_change),Yt(t,ot,this.onViewBoxPositionChange),t)}},mounted:function(){var t=this;this.setSize(),window.addEventListener("resize",this.setSize),Object.entries(this.listenEventMap).forEach((function(e){var n=Xt(e,2),i=n[0],o=n[1];t.$bus.$on(i,o)})),window.addEventListener("mouseup",this.onMouseup)},destroyed:function(){var t=this;window.removeEventListener("resize",this.setSize),Object.entries(this.listenEventMap).forEach((function(e){var n=Xt(e,2),i=n[0],o=n[1];t.$bus.$off(i,o)})),window.removeEventListener("mouseup",this.onMouseup)},methods:{toggle_mini_map:function(t){var e=this;this.showMiniMap=t,this.$nextTick((function(){e.$refs.navigatorBox&&e.init(),e.$refs.svgBox&&e.drawMiniMap()}))},data_change:function(){var t=this;this.showMiniMap&&(clearTimeout(this.timer),this.timer=setTimeout((function(){t.drawMiniMap()}),500))},setSize:function(){var t=this;clearTimeout(this.setSizeTimer),this.setSizeTimer=setTimeout((function(){t.width=Math.min(window.innerWidth-80,370),t.$nextTick((function(){t.showMiniMap&&(t.init(),t.drawMiniMap())}))}),300)},init:function(){var t=this.$refs.navigatorBox.getBoundingClientRect(),e=t.width,n=t.height;this.boxWidth=e,this.boxHeight=n},drawMiniMap:function(){var t=this,e=this.mindMap.miniMap.calculationMiniMap(this.boxWidth,this.boxHeight),n=e.getImgUrl,i=e.viewBoxStyle,o=e.miniMapBoxScale,r=e.miniMapBoxLeft,a=e.miniMapBoxTop;n((function(e){t.mindMapImg=e})),this.viewBoxStyle=i,this.svgBoxScale=o,this.svgBoxLeft=r,this.svgBoxTop=a},onMousedown:function(t){this.mindMap.miniMap.onMousedown(t)},onMousemove:function(t){this.mindMap.miniMap.onMousemove(t)},onMouseup:function(t){this.withTransition||(this.withTransition=!0),this.mindMap.miniMap&&this.mindMap.miniMap.onMouseup(t)},onViewBoxMousedown:function(t){this.mindMap.miniMap.onViewBoxMousedown(t)},onViewBoxMousemove:function(t){this.mindMap.miniMap.onViewBoxMousemove(t)},onViewBoxPositionChange:function(t){var e=t.left,n=t.right,i=t.top,o=t.bottom;this.withTransition=!1,this.viewBoxStyle.left=e,this.viewBoxStyle.right=n,this.viewBoxStyle.top=i,this.viewBoxStyle.bottom=o}}},te=Qt,ee=(n("47f5"),Object(Lt["a"])(te,zt,Ht,!1,null,"dd073e98",null)),ne=ee.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigatorContainer"},[n("div",{staticClass:"item"},[n("el-tooltip",{attrs:{effect:"dark",content:"回到根节点",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont icondingwei",on:{click:t.backToRoot}})])],1),t._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"nav-btn xmind-iconfont iconsousuo",on:{click:t.showSearch}})]),t._v(" "),n("div",{staticClass:"item"},[n("MouseAction",{attrs:{mindMap:t.mindMap}})],1),t._v(" "),n("div",{staticClass:"item"},[n("el-tooltip",{attrs:{effect:"dark",content:t.openMiniMap?"关闭小地图":"开启小地图",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont icondaohang1",on:{click:t.toggleMiniMap}})])],1),t._v(" "),n("div",{staticClass:"item"},[n("el-tooltip",{attrs:{effect:"dark",content:t.isReadonly?"切换为编辑模式":"切换为只读模式",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont",class:[t.isReadonly?"iconyanjing":"iconbianji1"],on:{click:t.readonlyChange}})])],1),t._v(" "),n("div",{staticClass:"item"},[n("Fullscreen",{attrs:{mindMap:t.mindMap}})],1),t._v(" "),n("div",{staticClass:"item"},[n("Scale",{attrs:{mindMap:t.mindMap}})],1),t._v(" "),n("div",{staticClass:"item"},[n("Demonstrate",{attrs:{mindMap:t.mindMap}})],1)])},oe=[],re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scaleContainer"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缩小",placement:"top"}},[n("div",{staticClass:"nav-btn el-icon-minus",on:{click:t.narrow}})]),t._v(" "),n("div",{staticClass:"scaleInfo"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.scaleNum,expression:"scaleNum"}],ref:"inputRef",attrs:{type:"text"},domProps:{value:t.scaleNum},on:{input:[function(e){e.target.composing||(t.scaleNum=e.target.value)},t.onScaleNumInput],change:t.onScaleNumChange,focus:t.onScaleNumInputFocus,keydown:function(t){t.stopPropagation()},keyup:function(t){t.stopPropagation()}}}),t._v("%\n  ")]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"放大",placement:"top"}},[n("div",{staticClass:"nav-btn el-icon-plus",on:{click:t.enlarge}})])],1)},ae=[],se={name:"Scale",props:{mindMap:{type:Object}},data:function(){return{scaleNum:100,cacheScaleNum:0}},created:function(){this.$bus.$on(q,this.onScale),this.$bus.$on(G,this.onDrawClick)},mounted:function(){this.scaleNum=this.toPer(this.mindMap.view.scale)},beforeDestroy:function(){this.$bus.$off(q,this.onScale),this.$bus.$off(G,this.onDrawClick)},methods:{toPer:function(t){return(100*t).toFixed(0)},narrow:function(){this.mindMap.view.narrow()},enlarge:function(){this.mindMap.view.enlarge()},onScaleNumInputFocus:function(){this.cacheScaleNum=this.scaleNum},onScaleNumInput:function(){this.scaleNum=this.scaleNum.replace(/[^0-9]+/g,"")},onScaleNumChange:function(){var t=Number(this.scaleNum);if(Number.isNaN(t)||t<=0)this.scaleNum=this.cacheScaleNum;else{var e=this.mindMap.width/2,n=this.mindMap.height/2;this.mindMap.view.setScale(this.scaleNum/100,e,n)}},onScale:function(t){this.scaleNum=this.toPer(t)},onDrawClick:function(){this.$refs.inputRef&&this.$refs.inputRef.blur()}}},ce=se,le=(n("61ac"),Object(Lt["a"])(ce,re,ae,!1,null,"3003cbc8",null)),ue=le.exports,he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullscreenContainer"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"全屏查看",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont iconquanping",on:{click:t.toFullscreenShow}})]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"全屏编辑",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont iconquanping1",on:{click:t.toFullscreenEdit}})])],1)},fe=[],de={name:"Fullscreen",props:{mindMap:{type:Object}},data:function(){return{}},created:function(){var t=this;document[vt["c"]]=function(){setTimeout((function(){t.mindMap.resize()}),1e3)}},methods:{toFullscreenShow:function(){Object(vt["b"])(this.mindMap.el)},toFullscreenEdit:function(){Object(vt["b"])(document.body)}}},pe=de,ve=(n("20d3"),Object(Lt["a"])(pe,he,fe,!1,null,"6a5a3e03",null)),me=ve.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mouseActionContainer"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.useLeftKeySelectionRightKeyDrag?"当前：左键拖动画布，右键框选节点":"当前：左键框选节点，右键拖动画布",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont",class:[t.useLeftKeySelectionRightKeyDrag?"iconmouseR":"iconmouseL"],on:{click:t.toggleAction}})])],1)},be=[],ge={name:"MouseAction",props:{mindMap:{type:Object}},data:function(){return{useLeftKeySelectionRightKeyDrag:!1}},methods:{toggleAction:function(){var t=!this.useLeftKeySelectionRightKeyDrag;this.useLeftKeySelectionRightKeyDrag=t,this.mindMap.updateConfig({useLeftKeySelectionRightKeyDrag:t})}}},_e=ge,we=(n("8658"),Object(Lt["a"])(_e,ye,be,!1,null,"7fcf0fa8",null)),xe=we.exports,Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"demonstrateContainer"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"进入演示模式",placement:"top"}},[n("div",{staticClass:"nav-btn xmind-iconfont iconyanshibofang",on:{click:t.enterDemoMode}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEnterDemonstrate,expression:"isEnterDemonstrate"}],ref:"exitDemonstrateBtnRef",staticClass:"exitDemonstrateBtn",on:{click:t.exit,mousedown:function(t){t.stopPropagation()},mousemove:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()}}},[n("span",{staticClass:"icon xmind-iconfont iconguanbi"})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEnterDemonstrate,expression:"isEnterDemonstrate"}],ref:"stepBoxRef",staticClass:"stepBox",on:{mousedown:function(t){t.stopPropagation()},mousemove:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()}}},[n("div",{staticClass:"jump",class:{disabled:t.curStepIndex<=0},on:{click:t.prev}},[n("span",{staticClass:"icon el-icon-back"})]),t._v(" "),n("div",{staticClass:"step"},[t._v(t._s(t.curStepIndex+1)+" / "+t._s(t.totalStep))]),t._v(" "),n("div",{staticClass:"jump",class:{disabled:t.curStepIndex>=t.totalStep-1},on:{click:t.next}},[n("span",{staticClass:"icon el-icon-right"})]),t._v(" "),n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputStep,expression:"inputStep"}],attrs:{type:"text"},domProps:{value:t.inputStep},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.onEnter(e))},keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.inputStep=e.target.value)}}})])])],1)},Ce=[],Se={props:{mindMap:{type:Object}},data:function(){return{isEnterDemonstrate:!1,curStepIndex:0,totalStep:0,inputStep:""}},created:function(){this.$bus.$on(nt,this.onJump),this.$bus.$on(it,this.onExit)},destroyed:function(){this.$bus.$off(nt,this.onJump),this.$bus.$off(it,this.onExit)},methods:{enterDemoMode:function(){var t=this;this.isEnterDemonstrate=!0,this.$nextTick((function(){var e=document.querySelector("#edit-xmind-container");e.appendChild(t.$refs.exitDemonstrateBtnRef),e.appendChild(t.$refs.stepBoxRef)})),this.mindMap.demonstrate.enter()},exit:function(){this.mindMap.demonstrate.exit()},onExit:function(){this.isEnterDemonstrate=!1,this.curStepIndex=0,this.totalStep=0},onJump:function(t,e){this.curStepIndex=t,this.totalStep=e},prev:function(){this.mindMap.demonstrate.prev()},next:function(){this.mindMap.demonstrate.next()},onEnter:function(){var t=Number(this.inputStep);Number.isNaN(t)?this.inputStep="":t>=1&&t<=this.totalStep&&this.mindMap.demonstrate.jump(t-1)}}},Ne=Se,Me=(n("7f8a"),Object(Lt["a"])(Ne,Ee,Ce,!1,null,"3f9fd2ee",null)),ke=Me.exports,Te={name:"NavigatorToolbar",components:{Scale:ue,Fullscreen:me,MouseAction:xe,Demonstrate:ke},props:{mindMap:{type:Object}},data:function(){return{openMiniMap:!1,isReadonly:!1}},methods:{readonlyChange:function(){this.mindMap.setMode(this.isReadonly?"readonly":"edit")},toggleMiniMap:function(){this.openMiniMap=!this.openMiniMap,this.$bus.$emit(ct,this.openMiniMap)},showSearch:function(){this.$bus.$emit(lt)},backToRoot:function(){this.mindMap.renderer.setRootNodeCenter()}}},Oe=Te,Le=(n("2b94"),Object(Lt["a"])(Oe,ie,oe,!1,null,"5076c5a4",null)),Ae=Le.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"searchContainer",class:{show:t.show}},[n("div",{staticClass:"closeBtnBox"},[n("span",{staticClass:"closeBtn el-icon-close",on:{click:t.close}})]),t._v(" "),n("div",{staticClass:"searchInputBox"},[n("el-input",{ref:"searchInputRef",attrs:{placeholder:"请输入查找内容",size:"small"},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.onSearchNext(e))},keydown:function(t){t.stopPropagation()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),t._v(" "),t.isUndef(t.searchText)?t._e():n("el-button",{attrs:{slot:"append",size:"small"},on:{click:function(e){t.showReplaceInput=!0}},slot:"append"},[t._v("替换")])],1),t._v(" "),t.showSearchInfo?n("div",{staticClass:"searchInfo"},[t._v("\n      "+t._s(t.currentIndex)+" / "+t._s(t.total)+"\n    ")]):t._e()],1),t._v(" "),t.showReplaceInput?n("el-input",{ref:"replaceInputRef",staticStyle:{margin:"12px 0"},attrs:{placeholder:"请输入替换内容",size:"small"},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.replaceText,callback:function(e){t.replaceText=e},expression:"replaceText"}},[n("i",{staticClass:"el-input__icon el-icon-edit",attrs:{slot:"prefix"},slot:"prefix"}),t._v(" "),n("el-button",{attrs:{slot:"append",size:"small"},on:{click:t.hideReplaceInput},slot:"append"},[t._v("取消")])],1):t._e(),t._v(" "),t.showReplaceInput?n("div",{staticClass:"btnList"},[n("el-button",{attrs:{size:"small",disabled:t.isReadonly},on:{click:t.replace}},[t._v("替换")]),t._v(" "),n("el-button",{attrs:{size:"small",disabled:t.isReadonly},on:{click:t.replaceAll}},[t._v("全部替换")])],1):t._e(),t._v(" "),t.showSearchResultList?n("div",{staticClass:"searchResultList",style:{height:t.searchResultListHeight+"px"}},[t._l(t.searchResultList,(function(e,i){return n("div",{key:e.id,staticClass:"searchResultItem",attrs:{title:e.name},domProps:{innerHTML:t._s(e.text)},on:{click:function(e){return e.stopPropagation(),t.onSearchResultItemClick(i)}}})})),t._v(" "),t.searchResultList.length<=0?n("div",{staticClass:"empty"},[n("span",{staticClass:"xmind-iconfont iconwushuju"}),t._v(" "),n("span",{staticClass:"text"},[t._v("暂无结果")])]):t._e()],2):t._e()],1)},je=[];function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function De(t,e){return ze(t)||Ge(t,e)||Pe(t,e)||Re()}function Re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pe(t,e){if(t){if("string"===typeof t)return Be(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(t,e):void 0}}function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ge(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function ze(t){if(Array.isArray(t))return t}function He(t,e,n){return e=Ve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ve(t){var e=Xe(t,"string");return"symbol"==Ie(e)?e:e+""}function Xe(t,e){if("object"!=Ie(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=Ie(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Fe={name:"Search",props:{mindMap:{type:Object}},data:function(){var t;return{show:!1,searchText:"",replaceText:"",showReplaceInput:!1,currentIndex:0,total:0,showSearchInfo:!1,searchResultListHeight:0,searchResultList:[],showSearchResultList:!1,isReadonly:!1,listenEventMap:(t={},He(t,lt,this.showSearch),He(t,rt,this.handleSearchInfoChange),He(t,B,this.blur),He(t,G,this.blur),He(t,z,this.blur),He(t,at,this.onSearchMatchNodeListChange),t)}},watch:{searchText:function(){Object(x["T"])(this.searchText)&&(this.currentIndex=0,this.total=0,this.showSearchInfo=!1)}},created:function(){var t=this;this.mindMap.keyCommand.addShortcut("Control+f",this.showSearch),window.addEventListener("resize",this.setSearchResultListHeight),Object.entries(this.listenEventMap).forEach((function(e){var n=De(e,2),i=n[0],o=n[1];t.$bus.$on(i,o)}))},mounted:function(){this.setSearchResultListHeight()},beforeDestroy:function(){var t=this;this.mindMap.keyCommand.removeShortcut("Control+f",this.showSearch),window.removeEventListener("resize",this.setSearchResultListHeight),Object.entries(this.listenEventMap).forEach((function(e){var n=De(e,2),i=n[0],o=n[1];t.$bus.$off(i,o)}))},methods:{isUndef:x["T"],handleSearchInfoChange:function(t){this.currentIndex=t.currentIndex+1,this.total=t.total,this.showSearchInfo=!0},showSearch:function(){this.$bus.$emit(ut),this.show=!0},hideReplaceInput:function(){this.showReplaceInput=!1,this.replaceText=""},onFocus:function(){this.mindMap.updateConfig({enableAutoEnterTextEditWhenKeydown:!1})},onBlur:function(){this.mindMap.updateConfig({enableAutoEnterTextEditWhenKeydown:!0})},blur:function(){this.$refs.searchInputRef&&this.$refs.searchInputRef.blur(),this.$refs.replaceInputRef&&this.$refs.replaceInputRef.blur()},onSearchNext:function(){this.showSearchResultList=!0,this.mindMap.search.search(this.searchText)},replace:function(){this.mindMap.search.replace(this.replaceText,!0)},replaceAll:function(){this.mindMap.search.replaceAll(this.replaceText)},close:function(){this.show=!1,this.showSearchResultList=!1,this.showSearchInfo=!1,this.total=0,this.currentIndex=0,this.searchText="",this.hideReplaceInput(),this.mindMap.search.endSearch()},onSearchMatchNodeListChange:function(t){var e=this;this.searchResultList=t.map((function(t){var n=t.data||t.nodeData.data,i=n.text,o=n.uid;n.richText&&(i=Object(x["I"])(i));var r=new RegExp("".concat(e.searchText.trim()),"g"),a=i.replace(r,(function(t){return'<span class="match">'.concat(t,"</span>")}));return{data:t,id:o,text:a,name:i}}))},setSearchResultListHeight:function(){this.searchResultListHeight=window.innerHeight-267-24},onSearchResultItemClick:function(t){this.mindMap.search.jump(t)}}},Ue=Fe,Ke=(n("5f5b"),Object(Lt["a"])(Ue,$e,je,!1,null,"3edceb90",null)),We=Ke.exports,Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbarContainer"},[n("div",{ref:"toolbarRef",staticClass:"toolbar"},[n("div",{staticClass:"toolbarBlock"},[n("ToolbarNodeBtnList",{attrs:{list:t.horizontalList}}),t._v(" "),t.showMoreBtn?n("el-popover",{style:{marginLeft:t.horizontalList.length>0?"20px":0},attrs:{placement:"bottom-end",width:"120",trigger:"hover"},model:{value:t.popoverShow,callback:function(e){t.popoverShow=e},expression:"popoverShow"}},[n("ToolbarNodeBtnList",{attrs:{dir:"v",list:t.verticalList},nativeOn:{click:function(e){t.popoverShow=!1}}}),t._v(" "),n("div",{staticClass:"toolbarBtn",attrs:{slot:"reference"},slot:"reference"},[n("span",{staticClass:"icon xmind-iconfont icongongshi"}),t._v(" "),n("span",{staticClass:"text"},[t._v("更多")])])],1):t._e()],1)]),t._v(" "),n("NodeImage"),t._v(" "),n("NodeHyperlink"),t._v(" "),n("NodeNote"),t._v(" "),n("NodeTag")],1)},Ye=[],Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"nodeImageDialog",attrs:{title:"图片",visible:t.dialogVisible,width:"400px",top:"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.img?n("div",{staticClass:"node-image-wrapper"},[n("img",{ref:"nodeImage",staticClass:"node-image",attrs:{src:t.img}}),t._v(" "),n("div",{staticClass:"node-image-mask"},[n("i",{staticClass:"el-icon-delete",on:{click:t.reset}})])]):n("el-upload",{ref:"uploader",attrs:{accept:"image/*","on-change":t.handleImgChange,"auto-upload":!1,limit:1,action:"##","list-type":"picture-card","show-file-list":!1}},[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)},qe=[],Qe=n("a006");function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t){return an(t)||rn(t)||on(t)||nn()}function nn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function on(t,e){if(t){if("string"===typeof t)return sn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(t,e):void 0}}function rn(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function an(t){if(Array.isArray(t))return sn(t)}function sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */cn=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof y?e:y,a=Object.create(r.prototype),s=new O(i||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function b(){}function g(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==n&&i.call(x,a)&&(_=x);var E=g.prototype=y.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,r,a,s){var c=h(t[o],t,r);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==tn(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var r;o(this,"_invoke",{value:function(t,i){function o(){return new e((function(e,o){n(t,i,e,o)}))}return r=r?r.then(o,o):o()}})}function N(e,n,i){var o=f;return function(r,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===r)throw a;return{value:t,done:!0}}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var c=M(s,i);if(c){if(c===m)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===f)throw o=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=p;var l=h(e,n,i);if("normal"===l.type){if(o=i.done?v:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=v,i.method="throw",i.arg=l.arg)}}}function M(e,n){var i=n.method,o=e.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var r=h(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(tn(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},C(S.prototype),l(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new S(u(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(E),l(E,c,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=L,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function ln(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,o)}function un(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){ln(r,i,o,a,s,"next",t)}function s(t){ln(r,i,o,a,s,"throw",t)}a(void 0)}))}}var hn={name:"NodeImage",data:function(){return{dialogVisible:!1,img:"",activeNodes:null}},created:function(){this.$bus.$on(j,this.handleNodeActive),this.$bus.$on(ht,this.handleShowNodeImage)},beforeDestroy:function(){this.$bus.$off(j,this.handleNodeActive),this.$bus.$off(ht,this.handleShowNodeImage)},methods:{handleImgChange:function(t){var e=this;return un(cn().mark((function n(){return cn().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(/^image\//.test(t.raw.type)){n.next=3;break}return e.$refs.uploader.clearFiles(),n.abrupt("return",e.$message.error("请上传正确的图片!"));case 3:return n.next=5,Object(Qe["a"])(t.raw,t.raw.size>=2097152);case 5:e.img=n.sent;case 6:case"end":return n.stop()}}),n)})))()},handleNodeActive:function(){this.activeNodes=en(arguments.length<=1?void 0:arguments[1])},handleShowNodeImage:function(){if(this.reset(),this.activeNodes.length>0){var t=this.activeNodes[0],e=t.getData("image")||"";e&&(this.img=e)}this.dialogVisible=!0},cancel:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.img=""},confirm:function(){var t=this;return un(cn().mark((function e(){var n,i,o,r;return cn().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.img){e.next=5;break}return t.cancel(),t.activeNodes.forEach((function(t){t.setImage(null)})),e.abrupt("return");case 5:n=t.img,i=t.$refs.nodeImage,o=i.naturalHeight,r=i.naturalWidth,t.activeNodes.forEach((function(t){t.setImage({url:n,title:"",width:r||100,height:o||100})})),t.cancel(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}}},fn=hn,dn=(n("ee981"),Object(Lt["a"])(fn,Je,qe,!1,null,"5dd66afe",null)),pn=dn.exports,vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"nodeHyperlinkDialog",attrs:{title:"超链接",visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"item"},[n("span",{staticClass:"name"},[t._v("链接")]),t._v(" "),n("el-input",{attrs:{size:"mini",placeholder:"请在此输入链接地址"},on:{blur:function(e){return t.handleUrl()}},nativeOn:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}},[n("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.protocol,callback:function(e){t.protocol=e},expression:"protocol"}},[n("el-option",{attrs:{label:"https",value:"https"}}),t._v(" "),n("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),n("el-option",{attrs:{label:"无",value:"none"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"item"},[n("span",{staticClass:"name"},[t._v("名称")]),t._v(" "),n("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.linkTitle,callback:function(e){t.linkTitle=e},expression:"linkTitle"}})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])},mn=[];function yn(t){return wn(t)||_n(t)||gn(t)||bn()}function bn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gn(t,e){if(t){if("string"===typeof t)return xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(t,e):void 0}}function _n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wn(t){if(Array.isArray(t))return xn(t)}function xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var En={name:"NodeHyperlink",data:function(){return{dialogVisible:!1,link:"",linkTitle:"",activeNodes:[],protocol:"https",isMobile:Object(x["Q"])()}},created:function(){this.$bus.$on(j,this.handleNodeActive),this.$bus.$on(ft,this.handleShowNodeLink)},beforeDestroy:function(){this.$bus.$off(j,this.handleNodeActive),this.$bus.$off(ft,this.handleShowNodeLink)},methods:{handleNodeActive:function(){if(this.activeNodes=yn(arguments.length<=1?void 0:arguments[1]),this.activeNodes.length>0){var t=this.activeNodes[0];this.link=t.getData("hyperlink")||"",this.handleUrl(!0),this.linkTitle=t.getData("hyperlinkTitle")||""}else this.link="",this.linkTitle=""},removeProtocol:function(t){return t.replace(/^https?:\/\//,"")},handleUrl:function(t){var e=this.link.match(/^(https?):\/\//);e&&e[1]?this.protocol=e[1]:this.link?t&&(this.protocol="none"):this.protocol="https",this.link=this.removeProtocol(this.link)},handleShowNodeLink:function(){this.dialogVisible=!0},cancel:function(){this.dialogVisible=!1},confirm:function(){var t=this;this.activeNodes.forEach((function(e){e.setHyperlink(("none"===t.protocol?"":t.protocol+"://")+t.link,t.linkTitle),t.cancel()}))}}},Cn=En,Sn=(n("2daf"),Object(Lt["a"])(Cn,vn,mn,!1,null,"6f8bf3e0",null)),Nn=Sn.exports,Mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"nodeNoteDialog",attrs:{title:"备注",visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{ref:"noteEditor",staticClass:"noteEditor",on:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])},kn=[],Tn=n("5865");n("f513");function On(t){return jn(t)||$n(t)||An(t)||Ln()}function Ln(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function An(t,e){if(t){if("string"===typeof t)return In(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(t,e):void 0}}function $n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function jn(t){if(Array.isArray(t))return In(t)}function In(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Dn={name:"NodeNote",data:function(){return{dialogVisible:!1,note:"",activeNodes:[],editor:null,isMobile:Object(x["Q"])()}},watch:{dialogVisible:function(t,e){!t&&e&&this.$bus.$emit(T)}},created:function(){this.$bus.$on(j,this.handleNodeActive),this.$bus.$on(pt,this.handleShowNodeNote)},beforeDestroy:function(){this.$bus.$off(j,this.handleNodeActive),this.$bus.$off(pt,this.handleShowNodeNote)},methods:{handleNodeActive:function(){if(this.activeNodes=On(arguments.length<=1?void 0:arguments[1]),this.activeNodes.length>0){var t=this.activeNodes[0];this.note=t.getData("note")||""}else this.note=""},handleShowNodeNote:function(){var t=this;this.$bus.$emit(k),this.dialogVisible=!0,this.$nextTick((function(){t.initEditor()}))},initEditor:function(){this.editor||(this.editor=new Tn["a"]({el:this.$refs.noteEditor,height:"500px",initialEditType:"markdown",previewStyle:"vertical"})),this.editor.setMarkdown(this.note)},cancel:function(){this.dialogVisible=!1},confirm:function(){var t=this;this.note=this.editor.getMarkdown(),this.activeNodes.forEach((function(e){e.setNote(t.note)})),this.cancel()}}},Rn=Dn,Pn=(n("d56c"),Object(Lt["a"])(Rn,Mn,kn,!1,null,"c61ad35c",null)),Bn=Pn.exports,Gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"nodeTagDialog",attrs:{title:"标签",visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-input",{attrs:{disabled:t.tagArr.length>=t.max,placeholder:"请按回车键添加"},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)},function(t){t.stopPropagation()}],keydown:function(t){t.stopPropagation()}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),n("div",{staticClass:"tagList"},t._l(t.tagArr,(function(e,i){return n("div",{key:i,staticClass:"tagItem",style:{backgroundColor:t.generateColorByContent(e)}},[t._v("\n      "+t._s("string"===typeof e?e:e.text)+"\n      "),n("div",{staticClass:"delBtn",on:{click:function(e){return t.del(i)}}},[n("span",{staticClass:"xmind-iconfont iconshanchu"})])])})),0),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)},zn=[];function Hn(t){return Un(t)||Fn(t)||Xn(t)||Vn()}function Vn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xn(t,e){if(t){if("string"===typeof t)return Kn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kn(t,e):void 0}}function Fn(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Un(t){if(Array.isArray(t))return Kn(t)}function Kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Wn={name:"NodeTag",data:function(){return{dialogVisible:!1,tagArr:[],tag:"",activeNodes:[],max:5,isMobile:Object(x["Q"])()}},watch:{dialogVisible:function(t,e){!t&&e&&this.$bus.$emit(T)}},created:function(){this.$bus.$on(j,this.handleNodeActive),this.$bus.$on(dt,this.handleShowNodeTag)},beforeDestroy:function(){this.$bus.$off(j,this.handleNodeActive),this.$bus.$off(dt,this.handleShowNodeTag)},methods:{generateColorByContent:x["y"],handleNodeActive:function(){if(this.activeNodes=Hn(arguments.length<=1?void 0:arguments[1]),this.activeNodes.length>0){var t=this.activeNodes[0];this.tagArr=t.getData("tag")||[]}else this.tagArr=[],this.tag=""},handleShowNodeTag:function(){this.$bus.$emit(k),this.dialogVisible=!0},add:function(){var t=this.tag.trim();t&&(this.tagArr.push(t),this.tag="")},del:function(t){this.tagArr.splice(t,1)},cancel:function(){this.dialogVisible=!1},confirm:function(){var t=this;this.activeNodes.forEach((function(e){e.setTag(t.tagArr)})),this.cancel()}}},Zn=Wn,Yn=(n("bc53"),Object(Lt["a"])(Zn,Gn,zn,!1,null,"5d1d5466",null)),Jn=Yn.exports,qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbarNodeBtnList",class:[t.dir]},[t._l(t.list,(function(e){return["back"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.readonly||t.backEnd},on:{click:function(e){return t.$bus.$emit(t.EXEC_COMMAND,"BACK")}}},[n("span",{staticClass:"icon xmind-iconfont iconhoutui-shi"}),t._v(" "),n("span",{staticClass:"text"},[t._v("回退")])]):t._e(),t._v(" "),"forward"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.readonly||t.forwardEnd},on:{click:function(e){return t.$bus.$emit(t.EXEC_COMMAND,"FORWARD")}}},[n("span",{staticClass:"icon xmind-iconfont iconqianjin1"}),t._v(" "),n("span",{staticClass:"text"},[t._v("前进")])]):t._e(),t._v(" "),"siblingNode"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0||t.hasRoot||t.hasGeneralization},on:{click:function(e){return t.$bus.$emit(t.EXEC_COMMAND,"INSERT_NODE")}}},[n("span",{staticClass:"icon xmind-iconfont iconjiedian"}),t._v(" "),n("span",{staticClass:"text"},[t._v("同级节点")])]):t._e(),t._v(" "),"childNode"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0||t.hasGeneralization},on:{click:function(e){return t.$bus.$emit(t.EXEC_COMMAND,"INSERT_CHILD_NODE")}}},[n("span",{staticClass:"icon xmind-iconfont icontianjiazijiedian"}),t._v(" "),n("span",{staticClass:"text"},[t._v("子节点")])]):t._e(),t._v(" "),"deleteNode"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0},on:{click:function(e){return t.$bus.$emit(t.EXEC_COMMAND,"REMOVE_NODE")}}},[n("span",{staticClass:"icon xmind-iconfont iconshanchu"}),t._v(" "),n("span",{staticClass:"text"},[t._v("删除节点")])]):t._e(),t._v(" "),"image"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0},on:{click:function(e){return t.$bus.$emit(t.SHOW_NODE_IMAGE)}}},[n("span",{staticClass:"icon xmind-iconfont iconimage"}),t._v(" "),n("span",{staticClass:"text"},[t._v("图片")])]):t._e(),t._v(" "),"link"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0},on:{click:function(e){return t.$bus.$emit(t.SHOW_NODE_LINK)}}},[n("span",{staticClass:"icon xmind-iconfont iconchaolianjie"}),t._v(" "),n("span",{staticClass:"text"},[t._v("超链接")])]):t._e(),t._v(" "),"note"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0},on:{click:function(e){return t.$bus.$emit(t.SHOW_NODE_NOTE)}}},[n("span",{staticClass:"icon xmind-iconfont iconflow-Mark"}),t._v(" "),n("span",{staticClass:"text"},[t._v("备注")])]):t._e(),t._v(" "),"tag"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0},on:{click:function(e){return t.$bus.$emit(t.SHOW_NODE_TAG)}}},[n("span",{staticClass:"icon xmind-iconfont iconbiaoqian"}),t._v(" "),n("span",{staticClass:"text"},[t._v("标签")])]):t._e(),t._v(" "),"summary"===e?n("div",{staticClass:"toolbarBtn",class:{disabled:t.activeNodes.length<=0||t.hasRoot||t.hasGeneralization},on:{click:function(e){return t.$bus.$emit(t.EXEC_COMMAND,"ADD_GENERALIZATION")}}},[n("span",{staticClass:"icon xmind-iconfont icongaikuozonglan"}),t._v(" "),n("span",{staticClass:"text"},[t._v("概要")])]):t._e()]}))],2)},Qn=[];function ti(t){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(t){return oi(t)||ii(t)||si(t)||ni()}function ni(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ii(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function oi(t){if(Array.isArray(t))return ci(t)}function ri(t,e){return ui(t)||li(t,e)||si(t,e)||ai()}function ai(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function si(t,e){if(t){if("string"===typeof t)return ci(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ci(t,e):void 0}}function ci(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function li(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function ui(t){if(Array.isArray(t))return t}function hi(t,e,n){return e=fi(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fi(t){var e=di(t,"string");return"symbol"==ti(e)?e:e+""}function di(t,e){if("object"!=ti(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=ti(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var pi={props:{dir:{type:String,default:"h"},list:{type:Array,default:function(){return[]}}},data:function(){var t;return{EXEC_COMMAND:S,SHOW_NODE_IMAGE:ht,SHOW_NODE_LINK:ft,SHOW_NODE_NOTE:pt,SHOW_NODE_TAG:dt,activeNodes:[],backEnd:!0,forwardEnd:!0,readonly:!1,isFullDataFile:!1,timer:null,isInPainter:!1,listenEventMap:(t={},hi(t,X,this.onModeChange),hi(t,j,this.onNodeActive),hi(t,R,this.onBackForward),t)}},computed:{hasRoot:function(){return-1!==this.activeNodes.findIndex((function(t){return t.isRoot}))},hasGeneralization:function(){return-1!==this.activeNodes.findIndex((function(t){return t.isGeneralization}))}},created:function(){var t=this;Object.entries(this.listenEventMap).forEach((function(e){var n=ri(e,2),i=n[0],o=n[1];t.$bus.$on(i,o)}))},beforeDestroy:function(){var t=this;Object.entries(this.listenEventMap).forEach((function(e){var n=ri(e,2),i=n[0],o=n[1];t.$bus.$off(i,o)}))},methods:{onModeChange:function(t){this.readonly="readonly"===t},onNodeActive:function(){this.activeNodes=ei(arguments.length<=1?void 0:arguments[1])},onBackForward:function(t,e){this.backEnd=t<=0,this.forwardEnd=t>=e-1}}},vi=pi,mi=(n("9cde"),Object(Lt["a"])(vi,qn,Qn,!1,null,null,null)),yi=mi.exports;function bi(t){return xi(t)||wi(t)||_i(t)||gi()}function gi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _i(t,e){if(t){if("string"===typeof t)return Ei(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ei(t,e):void 0}}function wi(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function xi(t){if(Array.isArray(t))return Ei(t)}function Ei(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ci={name:"Toolbar",components:{NodeImage:pn,NodeHyperlink:Nn,NodeNote:Bn,NodeTag:Jn,ToolbarNodeBtnList:yi},data:function(){return{list:["back","forward","siblingNode","childNode","deleteNode","image","link","note","tag","summary"],horizontalList:[],verticalList:[],showMoreBtn:!0,popoverShow:!1}},mounted:function(){this.computeToolbarShow(),this.computeToolbarShowThrottle=Object(x["ob"])(this.computeToolbarShow,300),window.addEventListener("resize",this.computeToolbarShowThrottle)},beforeDestroy:function(){window.removeEventListener("resize",this.computeToolbarShowThrottle)},methods:{computeToolbarShow:function(){var t=this,e=window.innerWidth-40,n=bi(this.list),i=1,o=function o(){if(i>n.length)return r();t.horizontalList=n.slice(0,i),t.$nextTick((function(){var a=t.$refs.toolbarRef.getBoundingClientRect().width;a<e?(i++,o()):i>0&&a>e&&(i--,t.horizontalList=n.slice(0,i),r())}))},r=function(){t.verticalList=n.slice(i),t.showMoreBtn=t.verticalList.length>0};o()}}},Si=Ci,Ni=(n("c4f4"),Object(Lt["a"])(Si,Ze,Ye,!1,null,"a9753ea4",null)),Mi=Ni.exports;n("4213");function ki(t){return ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(t)}function Ti(t,e){return ji(t)||$i(t,e)||Li(t,e)||Oi()}function Oi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Li(t,e){if(t){if("string"===typeof t)return Ai(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ai(t,e):void 0}}function Ai(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function $i(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function ji(t){if(Array.isArray(t))return t}function Ii(t,e,n){return e=Di(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Di(t){var e=Ri(t,"string");return"symbol"==ki(e)?e:e+""}function Ri(t,e){if("object"!=ki(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=ki(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}g["a"].init(c["a"]),[l["a"],u["a"],h["a"],f["a"],p["a"],v["a"],m["a"],y["a"],b["a"]].forEach((function(t){c["a"].usePlugin(t)}));var Pi={name:"XmindEditor",components:{Contextmenu:$t,Count:Gt,Navigator:ne,NavigatorToolbar:Ae,Search:We,Toolbar:Mi},props:{xmindData:{type:Object,default:function(){return{}}},fileName:String,size:{type:Number,default:0}},data:function(){var t;return{mindMap:null,xmindJsonData:{},listenEventMap:(t={},Ii(t,$.EXEC_COMMAND,this.execCommand),Ii(t,$.SET_DATA,this.setData),Ii(t,$.START_TEXT_EDIT,this.handleStartTextEdit),Ii(t,$.END_TEXT_EDIT,this.handleEndTextEdit),Ii(t,$.TOGGLE_ZEN_MODE,this.handleToggleZenMode),Ii(t,$.CREATE_ASSOCIATIVE_LINE,this.handleCreateLineFromActiveNode),Ii(t,$.START_PAINTER,this.handleStartPainter),t),isZenMode:!1}},mounted:function(){this.createMindMapInstance(),this.startListenEvent(),this.forwardEvent(),this.handleKeyBoardSaveShortCut()},beforeDestroy:function(){this.stopListenEvent()},methods:{forwardEvent:function(){var t=this;st.forEach((function(e){t.mindMap.on(e,(function(){for(var n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];(n=t.$bus).$emit.apply(n,[e].concat(o))}))}))},getData:function(){this.mindMap.renderer.textEdit.isShowTextEdit()&&this.mindMap.renderer.textEdit.hideEditTextBox();var t=this.mindMap.getData();return d["a"].transformToXmind(t,this.fileName)},handleCreateLineFromActiveNode:function(){this.mindMap.associativeLine.createLineFromActiveNode()},handleStartPainter:function(){this.mindMap.painter.startPainter()},handleKeyBoardSaveShortCut:function(){var t=this;this.mindMap.keyCommand.addShortcut("Control+s",(function(){t.$emit("save")}))},startListenEvent:function(){var t=this;Object.entries(this.listenEventMap).forEach((function(e){var n=Ti(e,2),i=n[0],o=n[1];t.$bus.$on(i,o)}))},stopListenEvent:function(){var t=this;Object.entries(this.listenEventMap).forEach((function(e){var n=Ti(e,2),i=n[0],o=n[1];t.$bus.$off(i,o)}))},createMindMapInstance:function(){this.mindMap=new c["a"]({el:this.$refs.container,data:this.xmindData,openPerformance:this.size>100,fit:this.size<100,layout:"logicalStructure",useLeftKeySelectionRightKeyDrag:!1,theme:"blueSky",openRealtimeRenderOnNodeTextEdit:!0})},execCommand:function(){var t;(t=this.mindMap).execCommand.apply(t,arguments)},setData:function(t){this.handleShowLoading(),t.root?this.mindMap.setFullData(t):this.mindMap.setData(t),this.mindMap.view.reset()},handleStartTextEdit:function(){this.mindMap.renderer.startTextEdit()},handleEndTextEdit:function(){this.mindMap.renderer.endTextEdit()},handleToggleZenMode:function(){this.isZenMode=!this.isZenMode}}},Bi=Pi,Gi=(n("19e6"),Object(Lt["a"])(Bi,a,s,!1,null,"5a7749ac",null)),zi=Gi.exports;function Hi(t){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(t)}function Vi(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Vi=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof y?e:y,a=Object.create(r.prototype),s=new O(i||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function b(){}function g(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==n&&i.call(x,a)&&(_=x);var E=g.prototype=y.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,r,a,s){var c=h(t[o],t,r);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Hi(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var r;o(this,"_invoke",{value:function(t,i){function o(){return new e((function(e,o){n(t,i,e,o)}))}return r=r?r.then(o,o):o()}})}function N(e,n,i){var o=f;return function(r,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===r)throw a;return{value:t,done:!0}}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var c=M(s,i);if(c){if(c===m)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===f)throw o=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=p;var l=h(e,n,i);if("normal"===l.type){if(o=i.done?v:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=v,i.method="throw",i.arg=l.arg)}}}function M(e,n){var i=n.method,o=e.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var r=h(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(Hi(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},C(S.prototype),l(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new S(u(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(E),l(E,c,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=L,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function Xi(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,o)}function Fi(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){Xi(r,i,o,a,s,"next",t)}function s(t){Xi(r,i,o,a,s,"throw",t)}a(void 0)}))}}var Ui={name:"editXmind",props:{url:{type:String,default:""},fid:{type:String,default:""},file:{type:Object,default:function(){return{}}},editBtn:{type:Boolean,default:!1}},components:{XmindEditor:zi},data:function(){return{xmindJsonData:null,isSaveProcessing:!1,xmindSize:0}},mounted:function(){this.getXmindFileBlob()},methods:{getXmindFileBlob:function(){var t=this;return Fi(Vi().mark((function e(){var n,i;return Vi().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.$processResourceUrl(t.url));case 2:return n=e.sent,e.next=5,n.blob();case 5:return i=e.sent,t.xmindSize=i.size/1024,e.next=9,d["a"].parseXmindFile(i);case 9:t.xmindJsonData=e.sent;case 10:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return Fi(Vi().mark((function e(){var n,i,o;return Vi().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isSaveProcessing){e.next=2;break}return e.abrupt("return");case 2:return t.isSaveProcessing=!0,t.$emit("startLoading"),e.prev=4,e.next=7,t.$refs.editor.getData();case 7:return n=e.sent,i=new File([n],t.file.file_name,{type:"application/x-xmind"}),o=new FormData,o.append("content",i),e.next=13,Object(r["d"])(t.fid,t.file.id,o);case 13:e.sent,t.$emit("closeLoading"),e.next=22;break;case 17:e.prev=17,e.t0=e["catch"](4),t.$emit("closeLoading"),console.error(e.t0),t.$message.error("保存失败");case 22:t.isSaveProcessing=!1;case 23:case"end":return e.stop()}}),e,null,[[4,17]])})))()}}},Ki=Ui,Wi=Object(Lt["a"])(Ki,i,o,!1,null,"4d220d7e",null);e["default"]=Wi.exports},b55a:function(t,e,n){},bc53:function(t,e,n){"use strict";n("7fb6")},bffe:function(t,e,n){"use strict";n("1450")},c3d2:function(t,e,n){},c4f4:function(t,e,n){"use strict";n("0be1")},d56c:function(t,e,n){"use strict";n("1b29")},d8fb:function(t,e,n){},ee981:function(t,e,n){"use strict";n("f2f9")},f2f9:function(t,e,n){}}]);