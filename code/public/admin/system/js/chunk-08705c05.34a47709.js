(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08705c05"],{"10d3":function(t,e,i){},4017:function(t,e,i){"use strict";i("10d3")},e797:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-drawer",{staticClass:"condition_copyer",attrs:{"append-to-body":!0,title:"条件设置",visible:t.$store.state.business.conditionDrawer,direction:"rtl",size:"650px","before-close":t.saveCondition},on:{"update:visible":function(e){return t.$set(t.$store.state.business,"conditionDrawer",e)}}},[i("el-form",{ref:"form",attrs:{"label-width":"110px"}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"condition_content"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"条件设置 : "}},[i("el-input",{attrs:{type:"text"},model:{value:t.conditionConfig.nodeName,callback:function(e){t.$set(t.conditionConfig,"nodeName",e)},expression:"conditionConfig.nodeName"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{model:{value:t.conditionConfig.priorityLevel,callback:function(e){t.$set(t.conditionConfig,"priorityLevel",e)},expression:"conditionConfig.priorityLevel"}},t._l(t.conditionLen,(function(t){return i("el-option",{key:t,attrs:{value:t.toString(),label:"优先级"+t}})})),1)],1)],1),t._v(" "),i("div",{staticClass:"drawer-content"},t._l(t.conditionConfig.conditionList,(function(e,o){return i("el-row",{key:o,staticClass:"list",attrs:{gutter:20}},[i("el-col",{attrs:{span:"departmentTree"===e.type&&1==e.category?22:10}},[i("el-form-item",{attrs:{label:e.title+" : "}},["departmentTree"===e.type&&1==e.category?i("select-member",{staticStyle:{width:"100%"},attrs:{value:e.options.userList||[],placeholder:"选择申请人"},on:{getSelectList:function(i){return t.getSelectList(i,e)}}}):t._e(),t._v(" "),"radio"===e.type?i("el-select",{attrs:{placeholder:"请选择条件"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},[i("el-option",{attrs:{value:"0",label:"属于"}})],1):t._e(),t._v(" "),"datePicker"===e.type?i("el-select",{attrs:{placeholder:"请选择条件"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},[i("el-option",{attrs:{value:"0",label:"小于"}}),t._v(" "),i("el-option",{attrs:{value:"1",label:"等于"}}),t._v(" "),i("el-option",{attrs:{value:"2",label:"小于等于"}}),t._v(" "),i("el-option",{attrs:{value:"3",label:"大于等于"}})],1):t._e(),t._v(" "),"select"===e.type||"checkbox"===e.type?i("el-select",{attrs:{placeholder:"请选择条件"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},[i("el-option",{attrs:{value:"0",label:"完全等于"}}),t._v(" "),i("el-option",{attrs:{value:"1",label:"包含任意"}})],1):t._e(),t._v(" "),"inputNumber"===e.type||"moneyFrom"===e.type||"timeFrom"===e.type?i("el-select",{attrs:{placeholder:"请选择条件"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},[i("el-option",{attrs:{value:"0",label:"小于"}}),t._v(" "),i("el-option",{attrs:{value:"1",label:"等于"}}),t._v(" "),i("el-option",{attrs:{value:"2",label:"小于等于"}}),t._v(" "),i("el-option",{attrs:{value:"3",label:"大于等于"}}),t._v(" "),i("el-option",{attrs:{value:"4",label:"介于（两个数字之间）"}})],1):t._e(),t._v(" "),"departmentTree"===e.type&&1!=e.category?i("el-select",{attrs:{placeholder:"请选择条件"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},[i("el-option",{attrs:{value:"0",label:"完全属于"}}),t._v(" "),i("el-option",{attrs:{value:"1",label:"其一属于"}})],1):t._e()],1)],1),t._v(" "),"departmentTree"===e.type&&1!=e.category||"departmentTree"!==e.type?i("el-col",{staticClass:"center-item-from",attrs:{span:12}},["datePicker"===e.type?i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择时间",format:" yyyy/MM/dd","value-format":"yyyy/MM/dd",size:"small"},model:{value:e.option,callback:function(i){t.$set(e,"option",i)},expression:"item.option"}}):t._e(),t._v(" "),"radio"===e.type||"select"===e.type||"checkbox"===e.type?i("el-select",{attrs:{multiple:"radio"!==e.type},model:{value:e.option,callback:function(i){t.$set(e,"option",i)},expression:"item.option"}},t._l(e.options,(function(t){return i("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})})),1):t._e(),t._v(" "),["inputNumber","moneyFrom","timeFrom"].includes(e.type)&&e.value<4?i("el-input-number",{attrs:{controls:!1,min:0},model:{value:e.option,callback:function(i){t.$set(e,"option",i)},expression:"item.option"}}):t._e(),t._v(" "),"timeFrom"===e.type?i("span",{staticClass:"time-from-tip"},[t._v("\n                "+t._s("day"===e.timeType?"天":"小时")+"\n              ")]):t._e(),t._v(" "),["inputNumber","moneyFrom","timeFrom"].includes(e.type)&&4==e.value?i("el-row",{staticClass:"display-flex"},[i("el-col",{staticClass:"center-item-from",attrs:{span:11}},[i("el-input-number",{attrs:{controls:!1,placeholder:"输入最小值",min:0},model:{value:e.min,callback:function(i){t.$set(e,"min",i)},expression:"item.min"}}),t._v(" "),"timeFrom"===e.type?i("span",{staticClass:"time-from-tip"},[t._v("\n                    "+t._s("day"===e.timeType?"天":"小时")+"\n                  ")]):t._e()],1),t._v(" "),i("el-col",{staticClass:"text-center",attrs:{span:2}},[t._v("-")]),t._v(" "),i("el-col",{staticClass:"center-item-from",attrs:{span:11}},[i("el-input-number",{attrs:{controls:!1,placeholder:"输入最大值",min:e.min},model:{value:e.max,callback:function(i){t.$set(e,"max",i)},expression:"item.max"}}),t._v(" "),"timeFrom"===e.type?i("span",{staticClass:"time-from-tip"},[t._v("\n                    "+t._s("day"===e.timeType?"天":"小时")+"\n                  ")]):t._e()],1)],1):t._e(),t._v(" "),"departmentTree"===e.type&&2==e.category?i("select-member",{staticStyle:{width:"100%"},attrs:{value:e.options.userList||[]},on:{getSelectList:function(i){return t.getSelectList(i,e)}}}):t._e(),t._v(" "),"departmentTree"===e.type&&3==e.category?i("select-department",{staticStyle:{width:"100%"},attrs:{value:e.options.depList||[]},on:{changeMastart:function(i){return t.changeMastart(i,e)}}}):t._e()],1):t._e(),t._v(" "),i("el-col",{attrs:{span:2}},[i("i",{staticClass:"el-icon-close pointer condition-icon",on:{click:function(i){return t.removeItems(e,o)}}})])],1)})),1),t._v(" "),i("div",{staticClass:"conditions"},[i("el-button",{attrs:{type:"text",disabled:t.conditionButton,icon:"el-icon-plus"},on:{click:t.addCondition}},[t._v("添加条件")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.conditionsPopover,expression:"conditionsPopover"}],staticClass:"el-popover conditions-popover"},t._l(t.conditions,(function(e,o){return i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!item.disabled"}],key:o,class:e.disabled?"active":"",attrs:{type:"text"},on:{click:function(i){return i.stopPropagation(),t.itemConditions(e,o)}}},[t._v("\n              "+t._s(e.title||e.props.titleIpt)+"\n            ")])})),1)],1)],1),t._v(" "),i("div",{staticClass:"button from-foot-btn fix btn-shadow"},[i("el-button",{on:{click:t.closeCondition}},[t._v(t._s(t.$t("public.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveCondition}},[t._v(t._s(t.$t("public.ok")))])],1)])])],1)},n=[],s={components:{selectMember:function(){return Promise.resolve().then(i.bind(null,"6078"))},selectDepartment:function(){return i.e("chunk-0aea25de").then(i.bind(null,"e7ca"))}},data:function(){return{conditionVisible:!1,conditionsConfig:{conditionNodes:[]},conditionLen:0,conditionsPopover:!1,conditionConfig:{},newConfig:[],PriorityLevel:"",conditions:[],conditionList:[],type:1,activeIndex:-1,title:"",conditionsFields:[],conditionButton:!0}},computed:{conditionsConfig1:function(){return this.$store.state.business.conditionsConfig},conditions1:function(){return this.$store.state.business.formSettingProps}},watch:{conditionsConfig1:function(t){this.conditionsConfig=t.value,this.PriorityLevel=t.priorityLevel,this.newConfig=t.priorityLevel?this.conditionsConfig.conditionNodes[t.priorityLevel-1]:{nodeUserList:[],conditionList:[]},this.conditionConfig=t.priorityLevel?this.conditionsConfig.conditionNodes[t.priorityLevel-1]:{nodeUserList:[],conditionList:[]},this.conditionLen=this.conditionsConfig.conditionNodes.length-1},conditions1:function(t){this.newConfig=t.filter((function(t){return"input"!==t.type})),this.conditions=t.filter((function(t){return"input"!==t.type}))},conditions:{deep:!0,handler:function(t,e){if(t.length<=0)this.conditionButton=!0;else{this.conditionButton=!0;for(var i=0;i<t.length;i++)if(!t[i].disabled){this.conditionButton=!1;break}}}}},methods:{addCondition:function(){var t=this;this.conditions.length>0?(this.conditionList=[],this.conditionConfig.conditionList.length<=0?this.conditions.forEach((function(t){"异常日期"===t.title||"异常记录"===t.title?t.disabled=!0:t.disabled=!1})):this.conditions.forEach((function(e){t.conditionConfig.conditionList.forEach((function(t){t.field===e.field&&(e.disabled=!0)}))})),this.conditionsPopover=!0!==this.conditionsPopover):this.$message.warning("表单配置为空")},itemConditions:function(t,e){this.conditions[e].disabled=!0;var i={};"departmentTree"===t.type?i=t.props&&t.props.member?{field:t.field,title:t.title||t.props.titleIpt,type:t.type,options:{depList:[],userList:[]},value:"",category:2}:t.props&&!1===t.props.member?{field:t.field,title:t.title,type:t.type,options:{depList:[],userList:[]},value:"",category:1}:{field:t.field,title:t.title||t.props.titleIpt,type:t.type,options:{depList:[],userList:[]},value:"",category:3}:(i={field:t.field,title:t.title||t.props.titleIpt,type:t.type,options:t.options?t.options:[],value:"",min:0,max:0,option:"select"===t.type||"checkbox"===t.type?[]:null},"timeFrom"===t.type&&(i.timeType=t.timeType,i.title=t.title||t.props.titleIpt)),this.conditionConfig.conditionList.push(i),this.conditionsPopover=!1},removeItems:function(t,e){var i=this;this.conditions.length>0&&this.conditions.forEach((function(t){t.field===i.conditionConfig.conditionList[e].field&&(t.disabled=!1)})),this.conditionsPopover=!1,this.conditionConfig.conditionList.splice(e,1)},getConditionsFields:function(t,e){t&&this.conditionsFields.length<=0?this.conditionsFields.push({field:t,number:1}):1===e?this.conditionsFields.map((function(e){t===e.field&&e.number++})):2===e&&this.conditionsFields.map((function(e){t===e.field&&e.number--}))},getSelectList:function(t,e){t.length>0&&t.forEach((function(t){t.id=t.value})),(1==this.type||2==this.type)&&(e.options.userList=t)},changeMastart:function(t,e){e.options.depList=t,this.activeIndex=-1},cardTag:function(t,e,i){1===i?this.conditionConfig.conditionList[t].options.userList.splice(e,1):2===i&&this.conditionConfig.conditionList[t].options.depList.splice(e,1)},saveCondition:function(){var t=this.conditionConfig.conditionList;if(t.length>0)for(var e=0;e<t.length;e++){var i=t[e];if("departmentTree"===i.type&&1==i.category&&i.options.userList.length<=0)return void this.$message.error("请选择"+i.title);if("departmentTree"===i.type&&2==i.category&&!i.value)return void this.$message.error("请选择"+i.title+"条件");if("departmentTree"===i.type&&2==i.category&&i.options.userList.length<=0)return void this.$message.error("请选择"+i.title);if("departmentTree"===i.type&&3==i.category&&!i.value)return void this.$message.error("请选择"+i.title+"条件");if("departmentTree"===i.type&&3==i.category&&i.options.depList&&i.options.depList.length<=0)return void this.$message.error("请选择"+i.title);if("departmentTree"!==i.type&&!i.value)return void this.$message.error("请选择"+i.title+"条件");if(("moneyFrom"===i.type||"inputNumber"===i.type||"timeFrom"===i.type)&&(!i.option||i.option<=0)&&i.min>=i.max)return void this.$message.error(i.title+"不能为负数或0");if(("select"===i.type||"checkbox"===i.type)&&i.option.length<=0)return void this.$message.error("请选择"+i.title+"内容");if("radio"===i.type&&!i.option)return void this.$message.error("请选择"+i.title+"内容")}this.$store.commit("updateCondition",!1);var o=this.conditionsConfig.conditionNodes.splice(this.PriorityLevel-1,1);this.conditionsConfig.conditionNodes.splice(this.conditionConfig.priorityLevel-1,0,o[0]),this.conditionsConfig.conditionNodes.map((function(t,e){t.priorityLevel=(e+1).toString()}));for(var n=0;n<this.conditionsConfig.conditionNodes.length;n++)this.conditionsConfig.conditionNodes[n].error="请设置条件"==this.$func.conditionStr(this.conditionsConfig,n)&&n!=this.conditionsConfig.conditionNodes.length-1;this.conditionsPopover=!1,this.$store.commit("updateConditionsConfig",{value:this.conditionsConfig,flag:!0,id:this.$store.state.business.conditionsConfig.id})},closeCondition:function(){this.conditionsPopover=!1,this.conditions.forEach((function(t){t.disabled=!1})),this.$store.commit("updateCondition",!1)}}},l=s,r=(i("4017"),i("2877")),a=Object(r["a"])(l,o,n,!1,null,"4c5eabae",null);e["default"]=a.exports}}]);