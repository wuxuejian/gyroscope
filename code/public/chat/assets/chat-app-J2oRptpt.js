import{u as T,I as N,C as R}from"./chat-message-input-B46LcCu4.js";import{_ as w}from"./chat-welcome-CDatEILM.js";import{u as L,_ as M,a as x,b as B}from"./useAppSuggestion-BuPToMFn.js";import{d as Y,t as b,u as D,b as H,r as V,C as q,e as F,c as u,w as f,f as K,o as n,g as O,h as a,F as U,i as j,a as C,j as G,R as J,k as P}from"./index-DXU4G7YZ.js";const W={class:"chat-main-layout"},Z=Y({__name:"chat-app",props:{appId:{}},setup(A){const I=A,{appId:i}=b(I),E=K(),p=D(),o=H(()=>Number(i.value)),S=V(q.READY),{messageList:_,suggestionConfig:l}=L(),{isLoading:m,setLoading:c}=T(N.CHAT_READY_LOADING),d=async s=>{if(m.value||!s.trim().length)return;c(!0);const r=o.value,t=()=>r===o.value;try{const e=await p.createChat(s,r);p.createRecv(e,s),t()&&E.push({name:J.CHAT_MAIN,params:{id:e},query:{suggestion:1}})}catch(e){t()&&P(e)}finally{t()&&c(!1)}};return F(o,()=>{m.value&&c(!1)}),(s,r)=>{const t=x,e=M,k=B,v=w,y=R;return n(),u(y,null,{default:f(()=>{var g,h;return[(h=(g=a(_))==null?void 0:g[0])!=null&&h.answerText?(n(),O(U,{key:0},[j("div",W,[C(e,{messages:a(_)},{default:f(()=>[a(l).length?(n(),u(t,{key:0,onSuggestionClick:d,config:a(l)},null,8,["config"])):G("",!0)]),_:1},8,["messages"])]),C(k,{onSend:d,"chat-status":a(S)},null,8,["chat-status"])],64)):(n(),u(v,{key:1,"app-id":a(i)},null,8,["app-id"]))]}),_:1})}}});export{Z as default};
