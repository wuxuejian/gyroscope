import{u as T,_ as y,I as D}from"./chat-message-input-B46LcCu4.js";import{d as E,t as w,l as b,f as B,m as M,n as k,u as O,p as V,s as d,b as h,q as n,v as Y,g as H,o as K,i as r,x as P,h as m,y as U,a as j,M as f,R as q,k as G,_ as J}from"./index-DXU4G7YZ.js";const z={class:"chat-main-layout"},F={class:"welcome-title"},Q=["src"],W=E({__name:"chat-welcome",props:{appId:{}},setup(g){const v=g,{appId:o}=w(v),c=b(),L=B(),S=M(),I=k(),u=O(),x=V(),{isLoading:C,setLoading:i}=T(D.CHAT_READY_LOADING),{userInfo:l,isLogin:p}=d(S),{appList:s}=d(I),R=h(()=>{if(s.value.length){if(o.value){const e=s.value.find(t=>t.id===Number(o.value));return(e==null?void 0:e.pic)||n}return s.value[0].pic||n}return n}),A=h(()=>{var t;const e=[];return e.push(Y()+"好"),p.value&&((t=l.value)!=null&&t.name)&&e.push(l.value.name),e.join("，")}),N=async e=>{if(!p.value){f.error("请先登录"),x.handleSetLoginDialogOpen();return}if(C.value)return;if(!s.value.length){f.error("暂无应用");return}i(!0);const t=c.path;try{const a=o.value?Number(o.value):s.value[0].id,_=await u.createChat(e.trim(),a);if(u.createRecv(_,e),t!==c.path)return;L.push({name:q.CHAT_MAIN,params:{id:_}})}catch(a){G(a)}finally{i(!1)}};return(e,t)=>{const a=y;return K(),H("div",z,[r("h3",F,[r("img",{src:m(R),class:"w-46px h-46px"},null,8,Q),P(" "+U(m(A)),1)]),r("div",null,[j(a,{mini:!1,onSend:N})])])}}}),$=J(W,[["__scopeId","data-v-64464bf6"]]);export{$ as _};
