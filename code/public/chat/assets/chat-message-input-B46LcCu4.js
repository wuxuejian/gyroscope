import{cl as $,g as o,i as d,o as a,cr as T,s as R,b as A,cs as y,ct as h,cc as F,d as b,cb as z,cu as V,cv as P,cw as U,aC as x,h as e,j as v,q as G,y as j,a as w,_ as C,r as S,c as O,c8 as k,aH as K,al as Y,aM as q,aD as X,cd as J,C as g,F as Q,bD as W,bE as Z,aF as ee,bL as te}from"./index-DXU4G7YZ.js";const se={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function ne(t,s){return a(),o("svg",se,s[0]||(s[0]=[d("path",{fill:"currentColor",d:"M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64z"},null,-1)]))}const ae=$({name:"ep-operation",render:ne}),M=()=>{const t=T(),{iframeScreenState:s}=R(t);return A(()=>y&&s.value!==h.FULL_SCREEN&&!F)},oe={key:0,class:"flex items-center overflow-hidden"},ie={class:"font-bold text-17px leading-24px single-line"},ce={key:2,class:"flex ml-auto gap-18px text-#606266"},re={key:0,class:"text-16px ai-icon ai-icon-shouqi1"},le={key:1,class:"text-16px ai-icon ai-icon-zhankai2"},ue=b({__name:"chat-main-topbar",setup(t){const{isMediumScreen:s}=z(),{handleOpenSidebar:i}=V(),c=P(),{commonConfig:r}=R(c),p=T(),{iframeScreenState:l}=R(p),{handleSetIframeScreenState:u}=U(),_=M(),m=A(()=>!y&&s.value||F),N=()=>{l.value===h.FULL_SCREEN?u(h.MEDIUM_SCREEN):l.value===h.MEDIUM_SCREEN&&u(h.FULL_SCREEN)},E=()=>{u(h.MINI_SCREEN)};return(L,n)=>{const f=ae;return a(),o("div",{class:x(["chat-main-topbar absolute top-0 left-0 w-full flex items-center pl-24px pr-20px z-1 chat-main-topbar",{"iframe-not-full-screen":e(_)}])},[e(_)?(a(),o("div",oe,[n[1]||(n[1]=d("img",{src:G,class:"w-28px h-28px mr-10px"},null,-1)),d("span",ie,j(e(r).siteName),1)])):v("",!0),e(m)?(a(),o("button",{key:1,class:"flex items-center",onClick:n[0]||(n[0]=(...I)=>e(i)&&e(i)(...I))},[w(f,{class:"text-20px"})])):v("",!0),e(y)?(a(),o("div",ce,[e(F)?v("",!0):(a(),o("button",{key:0,class:"toolbar-btn",onClick:N},[e(l)===e(h).FULL_SCREEN?(a(),o("i",re)):(a(),o("i",le))])),d("button",{class:"toolbar-btn",onClick:E},n[2]||(n[2]=[d("i",{class:"text-14px ai-icon ai-icon-cha1"},null,-1)]))])):v("",!0)],2)}}}),pe=C(ue,[["__scopeId","data-v-de91dbfb"]]),de={class:"h-full chat-main-container"},me={key:0,class:"chat-iframe-mask absolute top-0 left-0 w-full z--1"},_e=b({__name:"chat-main-container",emits:["click"],setup(t,{expose:s,emit:i}){const c=S(),r=i,p=M(),l=u=>{r("click",u)};return s({mainRef:c}),(u,_)=>{const m=pe;return a(),o("div",de,[e(p)&&!e(k)?(a(),o("div",me)):v("",!0),e(k)?v("",!0):(a(),O(m,{key:1})),d("main",{class:"h-full overflow-y-auto scroll-container",ref_key:"mainRef",ref:c,onClick:l},[d("div",{class:x(["pt-60px h-full flex flex-col scroll-body",{"iframe-not-full-screen":e(p),"app-preview":e(k)}])},[K(u.$slots,"default",{},void 0,!0)],2)],512)])}}}),Ie=C(_e,[["__scopeId","data-v-7d21e6ea"]]);var B=(t=>(t.CHAT_READY_LOADING="chat-ready-loading",t))(B||{});const ke=t=>{const s=S(!1),i=c=>{s.value=c};return q(t,s),{isLoading:s,setLoading:i}},fe=(t,s=!1)=>Y(t,()=>S(s),!0),Re="table-expand",he="stop-generate-chat",ye="regenerate-chat",ve=["data-status","data-event"],Se={key:0,class:"flex absolute top-50% left-50% -translate-x-50% -translate-y-50% gap-2px bg-white p-1px pointer-events-none"},xe=["data-index"],Ee=b({__name:"chat-message-send-btn",props:{isFocus:{type:Boolean},chatStatus:{}},emits:["send"],setup(t,{emit:s}){const i=s,c=t,r=fe(B.CHAT_READY_LOADING),p=l=>{r.value||c.chatStatus!==g.PENDING&&(l.stopPropagation(),i("send"))};return(l,u)=>{const _=J;return X((a(),o("button",{onClick:p,class:x(["w-34px h-34px send-btn relative",{"is-focus":c.isFocus}]),"data-status":c.chatStatus,"data-event":e(he)},[c.chatStatus===e(g).PENDING?(a(),o("div",Se,[(a(),o(Q,null,W(3,m=>d("div",{class:"ani-dot",key:m,"data-index":m},null,8,xe)),64))])):v("",!0)],10,ve)),[[_,e(r)]])}}}),ge=C(Ee,[["__scopeId","data-v-2b1bbff1"]]),be=()=>{const t=S(!1);return{isFocus:t,handleFoucs:()=>{t.value=!0},handleBlur:()=>{t.value=!1}}},Ce=b({__name:"chat-message-input",props:{mini:{type:Boolean,default:!0},chatStatus:{default:g.READY}},emits:["send"],setup(t,{emit:s}){const i=t,c=s,r=S(""),p=S(),{isFocus:l,handleFoucs:u,handleBlur:_}=be(),m=A(()=>i.mini?{minRows:1,maxRows:7}:{minRows:4,maxRows:4}),N=n=>{var f;n.target instanceof HTMLElement&&n.target.closest(".msg-input-container")&&!n.target.closest(".tool-wrapper")&&((f=p.value)==null||f.focus())},E=()=>{r.value.trim()===""||i.chatStatus===g.PENDING||(c("send",r.value),r.value="")},L=n=>{n.preventDefault(),!(n instanceof KeyboardEvent&&n.isComposing)&&E()};return(n,f)=>{const I=te,D=ge;return a(),o("div",{class:x(["msg-input-container relative pt-14px pb-12px pl-12px pr-14px rounded-22px bg-white bg-clip-padding cursor-text",{"is-foucs":e(l),mini:n.mini}]),onClick:N},[w(I,{modelValue:e(r),"onUpdate:modelValue":f[0]||(f[0]=H=>ee(r)?r.value=H:null),resize:"none",type:"textarea",placeholder:"很高兴为您服务，请输入您的问题",autosize:e(m),onFocus:e(u),onBlur:e(_),onKeydown:Z(L,["enter"]),class:"msg-input",ref_key:"textareaRef",ref:p},null,8,["modelValue","autosize","onFocus","onBlur"]),d("div",{class:x(["flex justify-between items-end pt-10px tool-wrapper cursor-initial",{mini:n.mini}])},[w(D,{class:"ml-auto",isFocus:e(l),"chat-status":n.chatStatus,onSend:E},null,8,["isFocus","chat-status"])],2)],2)}}}),Fe=C(Ce,[["__scopeId","data-v-e79234f8"]]);export{Ie as C,B as I,ye as R,he as S,Re as T,Fe as _,ke as u};
