(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68484998"],{"090b":function(e,n,o){"use strict";o("564d")},"564d":function(e,n,o){},"862d3":function(e,n,o){"use strict";(function(n,o){e.exports=o()})(0,(function(){function e(e){var i=[];return e.AMapUI&&i.push(n(e.AMapUI)),e.Loca&&i.push(o(e.Loca)),Promise.all(i)}function n(e){return new Promise((function(n,o){var s=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==a.AMapUI.plugins.indexOf(e.plugins[c])&&s.push(e.plugins[c]);if(t.AMapUI===i.failed)o("前次请求 AMapUI 失败");else if(t.AMapUI===i.notload){t.AMapUI=i.loading,a.AMapUI.version=e.version||a.AMapUI.version,c=a.AMapUI.version;var l=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+c+"/main.js",p.onerror=function(e){t.AMapUI=i.failed,o("请求 AMapUI 失败")},p.onload=function(){if(t.AMapUI=i.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var i=s[e].split("/").slice(-1)[0];window.AMapUI[i]=arguments[e]}for(n();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()}));else for(n();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},l.appendChild(p)}else t.AMapUI===i.loaded?e.version&&e.version!==a.AMapUI.version?o("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var i=s[e].split("/").slice(-1)[0];window.AMapUI[i]=arguments[e]}n()})):n():e.version&&e.version!==a.AMapUI.version?o("不允许多个版本 AMapUI 混用"):r.AMapUI.push((function(e){e?o(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var i=s[e].split("/").slice(-1)[0];window.AMapUI[i]=arguments[e]}n()})):n()}))}))}function o(e){return new Promise((function(n,o){if(t.Loca===i.failed)o("前次请求 Loca 失败");else if(t.Loca===i.notload){t.Loca=i.loading,a.Loca.version=e.version||a.Loca.version;var s=a.Loca.version,c=a.AMap.version.startsWith("2"),l=s.startsWith("2");if(c&&!l||!c&&l)o("JSAPI 与 Loca 版本不对应！！");else{c=a.key,l=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+s+"&key="+c,p.onerror=function(e){t.Loca=i.failed,o("请求 AMapUI 失败")},p.onload=function(){for(t.Loca=i.loaded,n();r.Loca.length;)r.Loca.splice(0,1)[0]()},l.appendChild(p)}}else t.Loca===i.loaded?e.version&&e.version!==a.Loca.version?o("不允许多个版本 Loca 混用"):n():e.version&&e.version!==a.Loca.version?o("不允许多个版本 Loca 混用"):r.Loca.push((function(e){e?o(e):o()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var i;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(i||(i={}));var a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},r={AMap:[],AMapUI:[],Loca:[]},s=[],c=function(e){"function"==typeof e&&(t.AMap===i.loaded?e(window.AMap):s.push(e))};return{load:function(n){return new Promise((function(o,r){if(t.AMap==i.failed)r("");else if(t.AMap==i.notload){var l=n.key,p=n.version,d=n.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&r("禁止多种API加载方式混用"),a.key=l,a.AMap.version=p||a.AMap.version,a.AMap.plugins=d||a.AMap.plugins,t.AMap=i.loading,p=document.body||document.head,window.___onAPILoaded=function(a){if(delete window.___onAPILoaded,a)t.AMap=i.failed,r(a);else for(t.AMap=i.loaded,e(n).then((function(){o(window.AMap)}))["catch"](r);s.length;)s.splice(0,1)[0]()},d=document.createElement("script"),d.type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+a.AMap.version+"&key="+l+"&plugin="+a.AMap.plugins.join(","),d.onerror=function(e){t.AMap=i.failed,r(e)},p.appendChild(d)):r("请填写key")}else if(t.AMap==i.loaded)if(n.key&&n.key!==a.key)r("多个不一致的 key");else if(n.version&&n.version!==a.AMap.version)r("不允许多个版本 JSAPI 混用");else{if(l=[],n.plugins)for(p=0;p<n.plugins.length;p+=1)-1==a.AMap.plugins.indexOf(n.plugins[p])&&l.push(n.plugins[p]);l.length?window.AMap.plugin(l,(function(){e(n).then((function(){o(window.AMap)}))["catch"](r)})):e(n).then((function(){o(window.AMap)}))["catch"](r)}else if(n.key&&n.key!==a.key)r("多个不一致的 key");else if(n.version&&n.version!==a.AMap.version)r("不允许多个版本 JSAPI 混用");else{var u=[];if(n.plugins)for(p=0;p<n.plugins.length;p+=1)-1==a.AMap.plugins.indexOf(n.plugins[p])&&u.push(n.plugins[p]);c((function(){u.length?window.AMap.plugin(u,(function(){e(n).then((function(){o(window.AMap)}))["catch"](r)})):e(n).then((function(){o(window.AMap)}))["catch"](r)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}))},fce7:function(e,n,o){"use strict";o.r(n);var i=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{attrs:{id:"all"}},[o("div",{staticClass:"posInput"},[o("el-input",{staticStyle:{width:"350px"},attrs:{id:"tipinput",placeholder:"请输入搜索地址"},on:{change:e.searchKeyWord},model:{value:e.address,callback:function(n){e.address=n},expression:"address"}},[o("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.searchKeyWord},slot:"append"})],1),e._v(" "),e.show?o("div",{staticClass:"map_search_result"},[o("ul",e._l(e.poiList,(function(n,i){return o("li",{key:i,on:{click:function(o){return e.markerResult(n)}}},[e._v(e._s(n.name))])})),0)]):e._e()],1),e._v(" "),o("div",{attrs:{id:"allmap"}})])},a=[],t=o("862d3"),r=o.n(t);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,n,o){return n=l(n),n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function l(e){var n=p(e,"string");return"symbol"==s(n)?n:n+""}function p(e,n){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}window._AMapSecurityConfig={securityJsCode:"60dcc64efdca6fb9bed8aeacbe21d2b8"};var d={name:"CrmebOaEntIndex",props:{positionInfo:{type:Object,default:{}}},data:function(){return{address:"",marker:null,placeSearchComponent:null,show:!1,poiList:[],effective_range:1e3,radius:200}},mounted:function(){this.initMap(),this.address=this.positionInfo.address},watch:{positionInfo:{handler:function(e,n){this.effective_range=e.effective_range,this.address=e.address},deep:!0}},methods:{initMap:function(){var e=this;return new Promise((function(n,o){r.a.load({key:"cf5c437b14780406af75a81b380cafac",version:"2.0",plugins:["AMap.ToolBar","AMap.Scale","AMap.Geocoder","AMap.Geolocation","AMap.PlaceSearch","AMap.AutoComplete","AMap.CitySearch"],resizeEnable:!0}).then((function(n){e.map=new n.Map("allmap",{resizeEnable:!0,zoom:14,viewMode:"3D",center:[e.positionInfo.lng,e.positionInfo.lat]}),e.getCurrentLocation(),e.map.addControl(new n.Scale),e.map.addControl(new n.ToolBar),e.geocoder=new n.Geocoder({radius:1e3,extensions:"all",city:"全国"}),e.mapSearchInit(),e.geocoder.getAddress([e.positionInfo.lng,e.positionInfo.lat],(function(n,o){"complete"===n&&o.regeocode?e.address=o.regeocode.formattedAddress:e.$message.error("根据经纬度查询地址失败")}))}))}))},distanceFn:function(){var e={address:this.address,lng:this.positionInfo.lng,lat:this.positionInfo.lat,effective_range:this.effective_range};this.$emit("select",e)},getCurrentLocation:function(){var e=this;e.geolocation=new AMap.Geolocation({timeout:1e3,enableHighAccuracy:!0,zoomToAccuracy:!0}),e.geolocation.getCurrentPosition((function(n,o){"complete"==n?e.onComplete(o):e.onError(o)}))},dynamicSign:function(e,n,o){var i=new AMap.Marker(c({position:new AMap.LngLat(e,n),draggable:!0,cursor:"move",riseOnHover:!0,bubble:!0},"cursor","pointer")),a=new AMap.Circle({center:new AMap.LngLat(e,n),radius:o,strokeColor:"#1890ff",strokeOpacity:1,strokeWeight:1,fillColor:"#1890ff",fillOpacity:.35});this.map.clearMap(),this.map.add([i,a]),i.on("dragend",this.markerClick)},onComplete:function(e){var n=e.position;this.dynamicSign(n[0],n[1],200)},onError:function(e){this.getLngLatLocation()},getLngLatLocation:function(){var e=this;e.geolocation.getCityInfo((function(n,o){if("complete"===n){var i=o.position;e.showLocation(i)}else e.$message.error("获取地址失败")}))},showLocation:function(e){this.dynamicSign(this.positionInfo.lng,this.positionInfo.lat,this.radius)},markerClick:function(e){var n=e.lnglat.lng,o=e.lnglat.lat;this.dynamicSign(n,o,this.radius);var i=[n,o],a=this;a.geocoder.getAddress(i,(function(e,i){if("complete"===e&&i.regeocode){a.address=i.regeocode.formattedAddress;var t={address:a.address,lng:n,lat:o,effective_range:a.effective_range};a.positionInfo.lng=n,a.positionInfo.lat=o,a.$emit("select",t)}else a.$message.error("根据经纬度查询地址失败")}))},mapSearchInit:function(){this.placeSearchComponent=new AMap.PlaceSearch},searchKeyWord:function(){var e=this;e.placeSearchComponent.search(e.address,(function(n,o){"complete"===n&&"OK"===o.info?(e.show=!0,e.poiList=o.poiList.pois):(e.showsearchResult=!1,e.poiList=[],e.$message({message:"没有查到结果",type:"warning"}))}))},markerResult:function(e){var n=this;this.show=!1,this.address=e.name;var o=new AMap.Marker({position:[Number(e.location.lng),Number(e.location.lat)],draggable:!0,cursor:"move",riseOnHover:!0});this.map.clearMap(),this.map.add(o),setTimeout((function(){n.map.setCenter(e.location),n.dynamicSign(e.location.lng,e.location.lat,200)}),50);var i={address:this.address,lng:e.location.lng,lat:e.location.lat,effective_range:this.effective_range};this.positionInfo.lng=e.location.lng,this.positionInfo.lat=e.location.lat,this.$emit("select",i),o.on("dragend",this.markerClick)}}},u=d,f=(o("090b"),o("2877")),g=Object(f["a"])(u,i,a,!1,null,"4e9a7aec",null);n["default"]=g.exports}}]);