(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e5b742e"],{"32e9":function(e,t,i){},bf2b:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",["group_aggregate"===e.type?i("el-form-item",{staticClass:"mt14",attrs:{label:"分组字段关联"}},[e._l(e.groupList,(function(t,l){return i("div",{key:l},[i("div",{staticClass:"flex"},[i("div",[i("div",{staticClass:"prompt"},[e._v("目标字段")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请搜索选择目标字段",filterable:""},model:{value:t.form_field_uniqid,callback:function(i){e.$set(t,"form_field_uniqid",i)},expression:"item.form_field_uniqid"}},e._l(e.groupField,(function(t){return i("el-option",{key:t.id,attrs:{label:t.field_name,value:t.form_field_uniqid,disabled:e.groupIds.includes(t.form_field_uniqid)}})})),1)],1),e._v(" "),i("div",{staticClass:"ml14"},[i("div",{staticClass:"prompt"},[e._v("源字段")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请搜索选择源字段",filterable:""},model:{value:t.to_form_field_uniqid,callback:function(i){e.$set(t,"to_form_field_uniqid",i)},expression:"item.to_form_field_uniqid"}},e._l(e.field,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])])})),e._v(" "),i("span",{staticClass:"pointer default-color fz-12",on:{click:function(t){return t.stopPropagation(),e.addNewGroup()}}},[i("span",{staticClass:"el-icon-plus mr5"}),e._v("添加字段")])],2):e._e(),e._v(" "),i("el-form-item",{staticClass:"mt14",attrs:{label:e.getLabel(e.type)}},[e._l(e.updateList,(function(t,l){return i("div",{key:l},[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content bg-purple"})]),e._v(" "),i("el-col",{attrs:{span:4}},[i("div",{staticClass:"grid-content bg-purple"})]),e._v(" "),i("el-row",{attrs:{gutter:0}},[i("el-col",{attrs:{span:"push_data"==e.type?10:5}},[i("div",[i("div",{staticClass:"prompt"},[e._v("目标字段")]),e._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请搜索选择目标字段",filterable:""},model:{value:t.form_field_uniqid,callback:function(i){e.$set(t,"form_field_uniqid",i)},expression:"item.form_field_uniqid"}},e._l(e.targetField,(function(t){return i("el-option",{key:t.id,attrs:{label:t.field_name,disabled:e.listIds.includes(t.form_field_uniqid),value:t.form_field_uniqid}},[i("span",[e._v(e._s(t.field_name)+" "),1==t.is_uniqid?i("span",[e._v(" (唯一)")]):e._e()])])})),1)],1)]),e._v(" "),"push_data"!==e.type?i("el-col",{attrs:{span:5}},[e.isUniqidFn(t.form_field_uniqid,e.targetField)?i("div",{staticClass:"mr14 ml14"},[i("div",{staticClass:"prompt"},[e._v("更新方式")]),e._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择更新方式",filterable:""},model:{value:t.operator,callback:function(i){e.$set(t,"operator",i)},expression:"item.operator"}},e._l(e.uniqidOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):i("div",{staticClass:"mr14 ml14"},[i("div",{staticClass:"prompt"},[e._v("\n                "+e._s("field_aggregate"==e.type||"group_aggregate"==e.type?"聚合方式":"更新方式")+"\n              ")]),e._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择更新方式",filterable:""},model:{value:t.operator,callback:function(i){e.$set(t,"operator",i)},expression:"item.operator"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):e._e(),e._v(" "),"push_data"!==e.type?i("el-col",{attrs:{span:10}},["null_value"!==t.operator?i("div",["field_aggregate"==e.type?i("div",{staticClass:"prompt"},[e._v("聚合字段")]):i("div",{staticClass:"prompt"},[e._v(e._s("field_value"==t.operator?"源字段":"固定值"))]),e._v(" "),["skip_value","field_value","cover_value"].includes(t.operator)||"field_aggregate"==e.type?i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请搜索选择源字段",filterable:""},model:{value:t.to_form_field_uniqid,callback:function(i){e.$set(t,"to_form_field_uniqid",i)},expression:"item.to_form_field_uniqid"}},e._l(e.field,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1):i("div",[["select","checkbox","radio"].includes(e.getType(t.form_field_uniqid))?i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"checkbox"==t.type,filterable:""},model:{value:t.to_form_field_uniqid,callback:function(i){e.$set(t,"to_form_field_uniqid",i)},expression:"item.to_form_field_uniqid"}},e._l(e.getOptions(t.form_field_uniqid),(function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.name}})})),1):e._e(),e._v(" "),"switch"===e.getType(t.form_field_uniqid)?i("el-select",{staticStyle:{width:"100%"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},[i("el-option",{attrs:{value:"1",label:"是"}}),e._v(" "),i("el-option",{attrs:{value:"0",label:"否"}})],1):e._e(),e._v(" "),"input"!==e.getType(t.form_field_uniqid)&&t.form_field_uniqid&&"textarea"!==e.getType(t.form_field_uniqid)?e._e():i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}),e._v(" "),["input_number","input_float","input_percentage","input_price"].includes(e.getType(t.form_field_uniqid))?[i("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),e._v(" "),["cascader","cascader_address","cascader_radio"].includes(e.getType(t.form_field_uniqid))?i("el-cascader",{staticStyle:{width:"100%"},attrs:{options:"cascader_address"==e.getType(t.form_field_uniqid)?e.addressList:e.getOptions(t.form_field_uniqid),props:{checkStrictly:!0,label:"name",value:"value",expandTrigger:"hover",multiple:!!["cascader"].includes(e.getType(t.form_field_uniqid))},filterable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):e._e(),e._v(" "),"date_picker"===e.getType(t.form_field_uniqid)?i("div",[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期时间"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1):e._e(),e._v(" "),"date_time_picker"===e.getType(t.form_field_uniqid)?i("div",[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1):e._e(),e._v(" "),["user_id","update_user_id","owner_user_id"].includes(e.getValue(t.form_field_uniqid))?i("select-member",{staticStyle:{width:"100%"},attrs:{onlyOne:!0,value:t.options||[]},on:{getSelectList:function(i){return e.getSelectList(i,t)}}}):e._e(),e._v(" "),["frame_id"].includes(e.getValue(t.form_field_uniqid))?i("select-department",{staticStyle:{width:"100%"},attrs:{onlyOne:!0,value:t.options||[]},on:{changeMastart:function(i){return e.changeMastart(i,t)}}}):e._e(),e._v(" "),"input_select"!==e.getType(t.form_field_uniqid)||["frame_id","user_id","update_user_id","owner_user_id"].includes(e.getValue(t.form_field_uniqid))?e._e():i("select-one",{staticStyle:{width:"100%"},attrs:{value:t.value||{},id:e.getId(t)},on:{getSelection:function(i){return e.getSelection(i,t)}}}),e._v(" "),"tag"===e.getType(t.form_field_uniqid)?i("select-label",{staticStyle:{width:"100%"},attrs:{list:e.getOptions(t.form_field_uniqid),value:t.options||[],props:{children:"children",label:"name"}},on:{handleLabelConf:function(i){return e.handleLabelConf(i,t)}}}):e._e()],2)],1):e._e()]):e._e(),e._v(" "),i("el-col",{attrs:{span:2}},[i("div",{staticClass:"el-icon-delete",on:{click:function(i){return e.removeItems(t,l)}}})])],1)],1)})),e._v(" "),i("span",{staticClass:"pointer default-color fz-12",on:{click:function(t){return t.stopPropagation(),e.addNewLine()}}},[i("span",{staticClass:"el-icon-plus mr5"}),e._v("添加字段")]),e._v(" "),"push_data"==e.type?[i("div",{staticClass:"prompt"},[e._v("推送字段示例")]),e._v(" "),i("div",{staticClass:"up-box"},[e._v('\n          {"action":"'+e._s(e.action[e.action.length-1]||"")+'","data":'+e._s(e.getUpdateObj(e.updateList))+"}\n        ")])]:e._e()],2)],1)])},a=[],n=i("c7ea"),r={props:{type:{type:String,default:""},groupList:{type:Array,default:function(){return[]}},list:{type:Array,default:[]},options:{type:Array,default:[]},action:{type:Array,default:[]},uniqidOptions:{type:Array,default:[]},targetField:{type:Array,default:function(){return[]}},groupField:{type:Array,default:function(){return[]}},field:{type:Array,default:[]}},components:{tableDialog:function(){return i.e("chunk-05ff1a12").then(i.bind(null,"38c1"))},selectMember:function(){return Promise.resolve().then(i.bind(null,"6078"))},selectDepartment:function(){return i.e("chunk-42393268").then(i.bind(null,"e7ca"))},selectOne:function(){return i.e("chunk-21284dfa").then(i.bind(null,"e943"))},selectLabel:function(){return Promise.resolve().then(i.bind(null,"6e59"))}},data:function(){return{updateList:[],labelList:[],oneList:[],addressList:[],activeIndex:0,heightInputRole:32}},watch:{},created:function(){this.list.length>0&&(this.updateList=this.list),this.getCityList()},computed:{listIds:function(){var e=[];return this.updateList.map((function(t){e.push(t.form_field_uniqid)})),e},groupIds:function(){var e=[];return this.groupList.map((function(t){e.push(t.form_field_uniqid)})),e}},methods:{addNewLine:function(){var e={form_field_uniqid:"",operator:this.options[0].value,to_form_field_uniqid:""};this.updateList.push(e)},isUniqidFn:function(e,t){var i=t.filter((function(t){if(t.field_name_en==e)return t}));return!(!i[0]||!i[0].is_uniqid)&&"1"==i[0].is_uniqid},getUpdateObj:function(e){var t={};for(var i in e)t[e[i].form_field_uniqid]="";return t},removeItems:function(e,t){this.updateList.splice(t,1)},getCityList:function(){var e=this,t={type_id:2};Object(n["u"])(t).then((function(t){e.addressList=t.data}))},getSelectList:function(e,t){var i=[];e.map((function(e){i.push(e.value)})),t.options=e,t.value=i},changeMastart:function(e,t){var i=[];e.map((function(e){i.push(e.id)})),t.options=e,t.value=i},cleanUp:function(){this.updateList=[]},addNewGroup:function(){var e={form_field_uniqid:"",to_form_field_uniqid:""};this.groupList.push(e)},getId:function(e){var t=null;return this.targetField.map((function(i){i.form_field_uniqid==e.form_field_uniqid&&(t=i.id)})),t},getSelection:function(e,t){t.value=e},getLabel:function(e){var t={field_update:"更新规则",field_aggregate:"聚合规则",group_aggregate:"聚合规则",auto_create:"创建规则"};return t[e]},handleLabelConf:function(e,t){t.options=e.list,t.value=e.ids},heightInput:function(){var e=this;setTimeout((function(){var t=e.$refs.getHeight[0].clientHeight;e.heightInputRole=0===t?36:t}),200)},getType:function(e){var t=this.targetField.findIndex((function(t){return t.form_field_uniqid===e}));if(t>=0)return this.targetField[t].form_value},getOptions:function(e){var t=this.targetField.findIndex((function(t){return t.form_field_uniqid===e}));return this.targetField[t].data_dict},getValue:function(e){var t=this.targetField.findIndex((function(t){return t.form_field_uniqid===e}));return this.targetField[t].field_name_en},updateFn:function(){var e=this;return function(){return e.updateList}}}},s=r,u=(i("c46d"),i("2877")),o=Object(u["a"])(s,l,a,!1,null,"7287b15a",null);t["default"]=o.exports},c46d:function(e,t,i){"use strict";i("32e9")}}]);