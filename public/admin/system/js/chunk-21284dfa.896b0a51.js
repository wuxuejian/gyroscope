(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21284dfa"],{"0a24":function(e,t,n){"use strict";n("1ee7")},"159d":function(e,t,n){"use strict";n("22e5")},"1ee7":function(e,t,n){},"22e5":function(e,t,n){},e943:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-popover",{ref:"treePopover",attrs:{placement:"bottom-start",trigger:"manual","popper-class":"popover"},model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}},[n("div",{staticClass:"tree-box"},[n("div",{staticClass:"input"},[n("el-input",{staticClass:"input",staticStyle:{width:"100%"},attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"请输入关键字搜索",clearable:""},on:{change:e.getList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.getList(t))}},model:{value:e.where.keyword,callback:function(t){e.$set(e.where,"keyword",t)},expression:"where.keyword"}})],1),e._v(" "),n("div",{staticClass:"table-box mt20"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"390px"}},[e._l(e.header,(function(t,a){return n("el-table-column",{key:a,attrs:{prop:t.field_name_en,label:t.field_name},scopedSlots:e._u([{key:"default",fn:function(a){return["image"===t.form_value?n("div",{staticClass:"img-box"},[e._l(a.row[t.field_name_en],(function(t,a){return n("img",{key:a,staticClass:"img",attrs:{src:t.url,alt:""},on:{click:function(n){return e.lookViewer(t.url,t.name)}}})})),e._v(" "),a.row[t.field_name_en]&&0!=a.row[t.field_name_en].length?e._e():n("span",[e._v("--")])],2):"input_percentage"===t.form_value?n("div",[n("el-progress",{attrs:{percentage:a.row[t.field_name_en]?a.row[t.field_name_en]:0}})],1):"tag"===t.form_value||"checkbox"===t.form_value?n("div",[a.row[t.field_name_en].length>2?n("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[[n("div",{staticClass:"flex_box"},e._l(a.row[t.field_name_en],(function(t,a){return n("div",{key:a,staticClass:"tips"},[n("el-tag",{attrs:{size:"small"}},[e._v("\n                          "+e._s(t)+"\n                        ")])],1)})),0)],e._v(" "),n("div",{attrs:{slot:"reference"},slot:"reference"},[n("div",{staticClass:"flex_box"},[e._l(a.row[t.field_name_en],(function(t,a){return n("div",{key:a,staticClass:"tips"},[a<2?n("el-tag",{attrs:{size:"small"}},[e._v("\n                          "+e._s(t)+"\n                        ")]):e._e()],1)})),e._v(" "),a.row[t.field_name_en].length>2?n("el-tag",{attrs:{size:"small"}},[e._v("...")]):e._e()],2)])],2):[n("div",{staticClass:"flex_box"},[e._l(a.row[t.field_name_en],(function(t,a){return n("div",{key:a,staticClass:"tips"},[a<2?n("el-tag",{attrs:{size:"small"}},[e._v("\n                        "+e._s(t)+"\n                      ")]):e._e()],1)})),e._v(" "),a.row[t.field_name_en].length>2?n("el-tag",{attrs:{size:"small"}},[e._v("...")]):e._e()],2)],e._v(" "),a.row[t.field_name_en]&&0==a.row[t.field_name_en].length?n("span",[e._v("--")]):e._e()],2):"switch"===t.form_value?n("div",[n("el-switch",{attrs:{disabled:"","active-value":1,"inactive-value":0,"active-text":"开启","inactive-text":"关闭"},model:{value:a.row[t.field_name_en],callback:function(n){e.$set(a.row,t.field_name_en,n)},expression:"scope.row[item.field_name_en]"}})],1):"textarea"===t.form_value?n("div",[n("el-popover",{attrs:{placement:"top-start",width:"350",trigger:"hover",content:a.row[t.field_name_en]}},[a.row[t.field_name_en].length>11?n("div",{staticClass:"over-text",attrs:{slot:"reference"},slot:"reference"},[e._v("\n                    "+e._s(a.row[t.field_name_en])+"\n                  ")]):e._e()]),e._v(" "),a.row[t.field_name_en].length<=11?n("span",[e._v(" "+e._s(a.row[t.field_name_en])+" ")]):e._e(),e._v(" "),a.row[t.field_name_en]?e._e():n("span",[e._v("--")])],1):["input_number","input_float","input_price"].includes(t.form_value)?n("div",[e._v("\n                "+e._s(a.row[t.field_name_en])+"\n              ")]):n("div",[e._v("\n                "+e._s(e.getValue(a.row[t.field_name_en]))+"\n              ")])]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.selectClick(t.row)}}},[e._v("选择")])]}}])})],2)],1),e._v(" "),n("div",{staticClass:"flex-end mt14"},[n("el-pagination",{attrs:{"page-size":e.where.limit,"current-page":e.where.page,"page-sizes":[10,15,20],layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange}})],1)]),e._v(" "),n("template",{slot:"reference"},[e._t("custom"),e._v(" "),e.isSlots?e._e():n("div",{ref:"select",staticClass:"select plan-footer-one mr10",on:{click:e.handlePopoverShow}},[e.oneData.name?n("div",{staticClass:"flex-box"},[n("span",[e._v(" "+e._s(e.oneData.name))]),e._v(" "),n("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.deleteFn(t)}}})]):n("span",[e._v(e._s(e.placeholder))])])],2)],2)],1)},i=[],l=n("1215"),o={name:"",props:{value:{type:Array,default:function(){return[]}},id:{},placeholder:{type:String,default:"请选择一对一"},onlyOne:{type:Boolean,default:!1}},data:function(){return{rowId:0,header:[],isSlots:!1,total:0,showPopover:!1,where:{keyword:"",page:1,limit:15},tableData:[],index_field_name:"",oneData:{}}},computed:{},watch:{value:function(e,t){this.oneData=e}},mounted:function(){document.addEventListener("click",this.handleGlobalClick),this.rowId=this.id,this.$slots.custom&&(this.isSlots=!0),this.getHeader(this.id),this.getList(this.id),this.value.name&&(this.oneData=this.value)},methods:{getHeader:function(e){var t=this;Object(l["U"])(this.rowId).then((function(e){t.header=e.data.association_field,t.index_field_name=e.data.index_field_name}))},getList:function(e){var t=this;Object(l["V"])(this.rowId,this.where).then((function(e){t.total=e.data.count,t.tableData=e.data.list||[]}))},getValue:function(e){var t="";return t=""==e?"--":Array.isArray(e)?e.toString():e,t||"--"},handleSizeChange:function(e){this.where.limit=e,this.getList()},pageChange:function(e){this.where.page=e,this.getList()},deleteFn:function(){this.oneData={id:"",name:""},this.$emit("getSelection",this.oneData)},selectClick:function(e){var t={id:e.id,name:e[this.index_field_name]};this.oneData=t,this.$emit("getSelection",t),this.$refs.treePopover.doClose()},handleGlobalClick:function(e){this.$refs.treePopover.$el.contains(e.target)||(this.showPopover=!1)},handlePopoverShow:function(){this.showPopover=!0},handlePopoverHide:function(){this.showPopover=!1}},beforeDestroy:function(){document.removeEventListener("click",this.handleGlobalClick)}},s=o,r=(n("0a24"),n("159d"),n("2877")),c=Object(r["a"])(s,a,i,!1,null,"3f3a68a9",null);t["default"]=c.exports}}]);