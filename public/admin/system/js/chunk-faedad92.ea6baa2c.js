(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-faedad92"],{3786:function(t,e,A){"use strict";A("e6fb")},"6fd8":function(t,e,A){"use strict";A.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,modal:!0,width:"846px","before-close":t.closeDialog,"show-close":!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"dialog-title-title"},[t._v(t._s(t.title))])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"assess-left"},[a("ul",{staticClass:"assess-left-ul"},t._l(t.department,(function(e,A){return a("li",{key:A,class:A==t.tabIndex?"active":"",on:{click:function(a){return t.clickDepart(A,e.id)}}},[a("span",[t._v(t._s(e.name))])])})),0)])]),t._v(" "),a("el-col",{attrs:{span:13}},[a("div",{staticClass:"ml15"},[a("div",{staticClass:"content-temp"},[a("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入模板名称"},on:{change:t.searchFn},model:{value:t.where.name,callback:function(e){t.$set(t.where,"name",e)},expression:"where.name"}}),t._v(" "),a("el-scrollbar",[a("ul",{staticClass:"content-temp-ul"},t._l(t.tableData,(function(e,i){return a("li",{key:i,class:[(i+1)%3?"":"mr0",i==t.clickIndex?"active":""],on:{click:function(A){return t.selectList(e,i)},mouseenter:function(e){return t.showEnterItem(i)},mouseleave:function(e){return t.showLeaveItem(i)}}},[a("div",{staticClass:"temp-text",style:{color:e.color}},[a("p",{staticClass:"title textover"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"caption"},[t._v(t._s(e.info))]),t._v(" "),1===e.way?a("p",{staticClass:"icon-star"},[a("i",{staticClass:"el-icon-star-on",class:t.setIsCollect(e),on:{click:function(A){return A.stopPropagation(),t.statusStar(e)}}}),t._v(" "),a("i",{staticClass:"icon-caret-star"})]):t._e()]),t._v(" "),""!=e.cover?a("img",{attrs:{src:e.cover,alt:""}}):a("img",{attrs:{src:A("951a"),alt:""}}),t._v(" "),t.hoverIndex===i&&void 0!==e.user&&t.$store.state.user.userInfo.uid===e.user.uid?a("div",{staticClass:"footer",on:{click:function(t){return t.stopPropagation(),function(){return!1}()}}},[a("div",{staticClass:"pointer"},[a("span",{on:{click:function(A){return A.stopPropagation(),t.setPreviewImage(e)}}},[t._v("设置封面")])]),t._v(" "),a("div",{staticClass:"pointer"},[a("span",{on:{click:function(A){return A.stopPropagation(),t.handleEdit(e)}}},[t._v("编辑")])]),t._v(" "),a("div",{staticClass:"pointer",on:{click:function(A){return A.stopPropagation(),t.handleDelete(e)}}},[a("span",[t._v("删除")])])]):t._e()])})),0)])],1),t._v(" "),a("el-pagination",{attrs:{"page-size":t.where.limit,"current-page":t.where.page,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.pageChange}})],1)]),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"ml15"},[a("div",{staticClass:"template-preview"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("p",{staticClass:"title"},[t._v(t._s(t.selectTitle))]),t._v(" "),t._l(t.selectDada,(function(e,A){return a("div",{key:A,staticClass:"template-preview-list"},[a("p",{staticClass:"caption"},[t._v(t._s(e.name))]),t._v(" "),a("ul",{staticClass:"template-preview-ul"},t._l(e.target,(function(e,A){return a("li",{key:A},[t._v(t._s(e.name))])})),0)])}))],2)],1)])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.closeDialog}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1),t._v(" "),a("preview",{ref:"preview",attrs:{title:"设置封面图",data:t.itemData},on:{handlePreview:t.handlePreview}})],1)},i=[],n=A("a30a"),s={name:"SelectTemplate",components:{preview:function(){return Promise.resolve().then(A.bind(null,"aee3"))}},props:{title:{type:String,default:""},remindButton:{type:Boolean,default:!1}},data:function(){return{dialogFormVisible:!1,search:"",type:1,where:{page:1,limit:9,name:""},tableData:[],total:0,selectDada:[],selectTitle:"",clickIndex:-1,hoverIndex:-1,cateId:"template",itemData:{},configData:{edit:1,data:{}},collects:[],templateValue:"",department:[],tabIndex:0,activeValue:"",optionValue:{id:"template",option:[]},isTemplate:!0}},watch:{},mounted:function(){var t=this;this.getTargetCate(),this.$nextTick((function(){t.tableData.length>0&&t.selectList(t.tableData[0],0)}))},methods:{clickDepart:function(t,e){this.tabIndex=t,this.optionValue.id=e,this.eventOptionData(this.optionValue)},handleShow:function(t){this.activeValue=t},handleHide:function(){this.activeValue=""},getTargetCate:function(){var t=this,e={types:this.type};Object(n["m"])(e).then((function(e){void 0===e.data?t.department=[]:t.department=e.data,0==t.isTemplate&&t.department.unshift({name:"全部",id:""}),1==t.type&&t.isTemplate&&t.department.unshift({name:"我的模板",id:"template"},{name:"我的收藏",id:"collect"}),t.optionDate()}))},addCate:function(){var t=this;this.$modalForm(Object(n["k"])(this.type)).then((function(e){e.message;t.getTargetCate()}))},addDivsion:function(){var t=this;this.$modalForm(Object(n["l"])(this.activeValue)).then((function(e){e.message;t.getTargetCate()}))},hanleDelete:function(){var t=this;this.$modalSure("你确定要删除这条指标模板分类吗").then((function(){Object(n["be"])(t.activeValue).then((function(e){t.getTargetCate()}))}))},optionDate:function(){var t=[];this.department.length<=0?(this.optionValue.option=t,this.eventOptionData(this.optionValue)):(this.department.map((function(e){t.push({label:e.name,id:e.id})})),this.optionValue.option=t,this.eventOptionData(this.optionValue))},openDialog:function(){this.dialogFormVisible=!0,this.getTableData()},closeDialog:function(){this.selectDada=[],this.clickIndex=-1,this.selectTitle="",this.dialogFormVisible=!1},searchFn:function(){this.getTableData(1)},handleConfirm:function(){var t=this;if(this.clickIndex<0)this.$message.error("选择为空");else{if(this.remindButton){var e=this.selectDada;this.$modalSure("确定后将替换原来的内容").then((function(){t.configData.edit=1,t.configData.data=e,t.$emit("templateChange",t.configData)}))}else this.configData.edit=1,this.configData.data=this.selectDada,this.$emit("templateChange",this.configData);this.closeDialog()}},getTableData:function(t){var e=this;1==t&&(this.where.page=1);var A={page:this.where.page,limit:this.where.limit,name:this.where.name,cate_id:this.cateId};Object(n["u"])(A).then((function(t){e.tableData=t.data.list,e.collects=t.data.collects?t.data.collects:[],e.total=t.data.count,e.tableData.length>0&&e.selectList(e.tableData[0],0)}))},pageChange:function(t){this.where.page=t,this.getTableData()},handleSizeChange:function(t){this.where.limit=t,this.getTableData()},setIsCollect:function(t){return"collect"===this.cateId?"active":0===this.collects.length?"":this.collects.includes(t.id)?"active":""},eventOptionData:function(t){this.cateId=t.id,this.where.page=1,this.clickIndex=-1,this.selectDada=[],this.selectTitle="",this.getTableData()},handleSelectionChange:function(t){this.multipleSelection=t},getRowKeys:function(t){return t.id},showEnterItem:function(t){this.hoverIndex=t},showLeaveItem:function(t){this.hoverIndex=-1},setPreviewImage:function(t){this.itemData=t,this.$refs.preview.openDialog()},handlePreview:function(){this.getTableData()},handleDelete:function(t){var e=this;this.$modalSure("考核模板删除后，将不可修改，你确定要删除吗").then((function(){Object(n["de"])(t.id).then((function(t){e.getTableData()}))}))},handleEdit:function(t){var e=this;Object(n["t"])(t.id).then((function(t){void 0===t.data?e.$message.error("内容为空，不能编辑"):(e.configData.edit=2,e.configData.data=t.data,e.$emit("templateChange",e.configData),e.closeDialog())}))},statusStar:function(t){var e=this;Object(n["s"])(t.id).then((function(t){"collect"===e.cateId&&(e.selectDada=[],e.selectTitle=""),e.getTableData()})).catch((function(e){t.collect=null}))},selectList:function(t,e){var A=this;this.clickIndex=e,this.selectTitle=this.tableData[e].name,Object(n["t"])(t.id,{way:t.way}).then((function(t){A.selectDada=t.data?t.data.info:[]}))}}},l=s,o=(A("3786"),A("2877")),c=Object(o["a"])(l,a,i,!1,null,"2407a4e4",null);e["default"]=c.exports},"951a":function(t,e){t.exports="data:image/jpeg;base64,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"},e6fb:function(t,e,A){}}]);